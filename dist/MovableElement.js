var MovableElement;(()=>{"use strict";var t={7930:(t,e,o)=>{o.d(e,{ObjectEventListener:()=>n});class n{eventsByName=new Map;addEventListener(t,e){const o={id:crypto.randomUUID(),event:e};return this.eventsByName.has(t.toLowerCase())?(this.eventsByName.get(t.toLowerCase()).push(o),o.id):(this.eventsByName.set(t.toLowerCase(),[o]),o.id)}getEventsByName(t){return this.eventsByName.has(t.toLowerCase())||this.eventsByName.set(t.toLowerCase(),[]),this.eventsByName.get(t.toLowerCase())}removeEventById(t){this.eventsByName.forEach(((e,o)=>{this.eventsByName.set(o,e.filter((e=>e.id!==t)))}))}callEventsByName(t,...e){this.getEventsByName(t).forEach((t=>t.event(...e)))}}},1319:(t,e,o)=>{o.d(e,{getDistanceFromBorder:()=>v,getTransformCoordsFromElement:()=>y,regexRemoveTranslateFromTransform:()=>s});var n=o(739);const s=/translate\([^)]*\)/g,r=/rotate\((-?\d+\.?\d*)deg\)/,i=/rotateX\((-?\d+\.?\d*)deg\)/,a=/rotateY\((-?\d+\.?\d*)deg\)/,h=/rotateZ\((-?\d+\.?\d*)deg\)/,m=new Map,l=new Map,d=new Map;function c(t){const e=t.getBoundingClientRect(),o=e.left+e.width/2,n=e.top+e.height/2,s=function(){const t=function(t){switch(t){case"x":return i;case"y":return a;case"z":return h;default:return r}}(g(document.body)).exec(document.body.style.transform);return t?parseFloat(t[1]):0}(),m=Math.PI/180*s,l=Math.cos(m),d=Math.sin(m),c=o+(e.left-o)*l-(e.top-n)*d,v=n+(e.left-o)*d+(e.top-n)*l,y=o+(e.right-o)*l-(e.bottom-n)*d,f=n+(e.right-o)*d+(e.bottom-n)*l,u=Math.min(c,y),p=Math.min(v,f),x=Math.max(v,f),M=Math.max(c,y);return{x:u,y:p,width:e.width,height:e.height,toJSON:e.toJSON,left:u,top:p,bottom:x,right:M}}function v(t,e,o=!1){const n=o?c(t):t.getBoundingClientRect(),s=o?c(e):e.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2;return{top:i-s.top,right:s.right-r,bottom:s.bottom-i,left:r-s.left}}function g(t){const e=t.style.transform.toLowerCase();return e.includes("x")?"x":e.includes("y")?"y":"z"}function y(t,e=!1){const o=(window.getComputedStyle(t).transform.match(n.regexNumberPattern)??[0,0]).map((t=>+t));let s={x:void 0!==o[4]?Math.round(o[4]):0,y:void 0!==o[5]?Math.round(o[5]):0};if(e){const e=function(t,e="x"){let o;switch(e){case"x":o=i;break;case"y":o=a;break;case"z":o=h;break;default:o=r}const n=o.exec(t.style.transform);return n?parseFloat(n[1]):0}(document.body,g(t))||0;return(0,n.rotateCoordinates)(s.x,s.y,e)}return s}new Map,window.addEventListener("keydown",(t=>{t.repeat||function(t){for(const e of m)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t),function(t){for(const e of l)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t)})),window.addEventListener("keyup",(t=>{for(const e of d)t.code===e[0]&&e[1].forEach((e=>e(t)))}))},739:(t,e,o)=>{o.d(e,{regexNumberPattern:()=>n,rotateCoordinates:()=>s});const n=/-?\d+\.?\d*/g;function s(t,e,o){const n=Math.PI/180*o;return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}}},e={};function o(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,o),r.exports}o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{o.r(n),o.d(n,{MovableElement:()=>s});var t=o(7930),e=o(1319);class s extends t.ObjectEventListener{element;movingState;intervalUpdatePosition;onBeforeMove;onAfterMove;constructor(t){if(super(),!t.element)throw new Error("Null movable element. Please pass a valid element in constructor.");this.element=t.element,this.onBeforeMove=t.onBeforeMove,this.onAfterMove=t.onAfterMove,this.movingState={pos:{x:0,y:0},delta:{dx:0,dy:0}},this.intervalUpdatePosition=setInterval(this.updatePosition.bind(this),200)}get position(){return this.movingState.pos}set position(t){this.moveToPosition(t.x,t.y)}get x(){return this.movingState.pos.x}set x(t){this.moveToPosition(t,this.y)}get y(){return this.movingState.pos.y}set y(t){this.moveToPosition(this.x,t)}setTranslate(t,e){this.callEventsByName("onBeforeMove",this.element,this),this.onBeforeMove&&this.onBeforeMove(this.element,this),this.resetTranslate(),this.element.style.transform+=`translate(${t}px, ${e}px)`,this.callEventsByName("onAfterMove",this.element,this),this.onAfterMove&&this.onAfterMove(this.element,this)}setTranslateByPoint2D(t){this.setTranslate(t.x,t.y)}updatePosition(){this.movingState.pos=(0,e.getTransformCoordsFromElement)(this.element),this.movingState.delta.dx=0,this.movingState.delta.dy=0}resetTranslate(){this.element.style.transform=this.element.style.transform.replace(e.regexRemoveTranslateFromTransform,"")}moveToPosition(t,e){this.movingState.pos={x:t+this.movingState.delta.dx,y:e+this.movingState.delta.dy},this.setTranslateByPoint2D(this.movingState.pos)}moveToPoint2D(t){this.movingState.pos={x:t.x+this.movingState.delta.dx,y:t.y+this.movingState.delta.dy},this.setTranslateByPoint2D(this.movingState.pos)}moveToTargetElement(t){const o=t.getBoundingClientRect(),n=(0,e.getTransformCoordsFromElement)(this.element),s=(0,e.getDistanceFromBorder)(this.element,t),r=n.x+s.right,i=n.y+s.bottom;this.setTranslateByPoint2D({x:Math.round(r-o.width),y:Math.round(i-o.height)})}moveToCenterOfTargetElement(t){const o=t.getBoundingClientRect(),n=(0,e.getTransformCoordsFromElement)(this.element),s=(0,e.getDistanceFromBorder)(this.element,t),r=n.x+s.right,i=n.y+s.bottom;this.setTranslateByPoint2D({x:Math.round(r-o.width/2),y:Math.round(i-o.height/2)})}static makeElementMovable(t){return new s({element:t})}}})(),MovableElement=n})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LHNCQUF1QixDQUMxQjlFLEVBQUdsQixLQUFLdUMsTUFBT2lFLEVBQXdCSCxFQUFXdEgsTUFBUSxHQUMxRG9DLEVBQUduQixLQUFLdUMsTUFBT2tFLEVBQXlCSixFQUFXbkgsT0FBUyxJQUVoRSxDQUVPLHlCQUFPeUgsQ0FBb0JqSSxHQUNoQyxPQUFPLElBQUkrRixFQUFnQixDQUFFL0YsV0FDL0IsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvRE9NVG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Rvb2xzL01hdGhUb29scy50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0cmFzL01vdmFibGVFbGVtZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEV2ZW50TGlzdGVuZXIgPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBldmVudDogRnVuY3Rpb247XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIE9iamVjdEV2ZW50TGlzdGVuZXIge1xyXG4gIHB1YmxpYyBldmVudHNCeU5hbWU6IE1hcDxzdHJpbmcsIEV2ZW50TGlzdGVuZXJbXT4gPSBuZXcgTWFwKCk7XHJcblxyXG4gIHB1YmxpYyBhZGRFdmVudExpc3RlbmVyKCBldmVudE5hbWU6IHN0cmluZywgZXZlbnQ6IEZ1bmN0aW9uICk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBuZXdFdmVudDogRXZlbnRMaXN0ZW5lciA9IHtcclxuICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgICAgIGV2ZW50OiBldmVudCxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKCAhdGhpcy5ldmVudHNCeU5hbWUuaGFzKCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSApICkge1xyXG4gICAgICB0aGlzLmV2ZW50c0J5TmFtZS5zZXQoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpLCBbbmV3RXZlbnRdICk7XHJcbiAgICAgIHJldHVybiBuZXdFdmVudC5pZDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmV2ZW50c0J5TmFtZS5nZXQoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkhLnB1c2goIG5ld0V2ZW50ICk7XHJcblxyXG4gICAgcmV0dXJuIG5ld0V2ZW50LmlkO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEV2ZW50c0J5TmFtZSggZXZlbnROYW1lOiBzdHJpbmcgKTogRXZlbnRMaXN0ZW5lcltdIHtcclxuICAgIGlmICggIXRoaXMuZXZlbnRzQnlOYW1lLmhhcyggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSApIHtcclxuICAgICAgdGhpcy5ldmVudHNCeU5hbWUuc2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSwgW10gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5ldmVudHNCeU5hbWUuZ2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSApITtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZW1vdmVFdmVudEJ5SWQoIGV2ZW50SWQ6IHN0cmluZyApIHtcclxuICAgIHRoaXMuZXZlbnRzQnlOYW1lLmZvckVhY2goICggdmFsdWUsIGtleSApID0+IHtcclxuICAgICAgdGhpcy5ldmVudHNCeU5hbWUuc2V0KCBrZXksIHZhbHVlLmZpbHRlciggZSA9PiBlLmlkICE9PSBldmVudElkICkgKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjYWxsRXZlbnRzQnlOYW1lKCBldmVudE5hbWU6IHN0cmluZywgLi4uZXZlbnRBcmdzOiBhbnlbXSApOiB2b2lkIHtcclxuICAgIHRoaXMuZ2V0RXZlbnRzQnlOYW1lKCBldmVudE5hbWUgKS5mb3JFYWNoKCBlID0+IGUuZXZlbnQoIC4uLmV2ZW50QXJncyApICk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgRGltZW5zaW9ucywgUG9pbnQyRCwgbGVycCwgcmVnZXhOdW1iZXJQYXR0ZXJuLCByb3RhdGVDb29yZGluYXRlcywgcm90YXRlQ29vcmRpbmF0ZXNGcm9tUG9pbnQyRCB9IGZyb20gJy4vTWF0aFRvb2xzJztcclxuaW1wb3J0IHsgdG9QaG9uZU51bWJlciB9IGZyb20gJy4vU3RyaW5nVG9vbHMnO1xyXG5pbXBvcnQgeyBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgQm9yZGVyRGlzdGFuY2UgfSBmcm9tICcuLi9FeHRyYXMvQ29sbGlzaW9uRXZlbnRzL1R5cGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIEtleWJvYXJkRXZlbnRDYWxsYmFjayA9ICggZXZ0OiBLZXlib2FyZEV2ZW50ICkgPT4gdm9pZDtcclxuZXhwb3J0IGNvbnN0IHJlZ2V4UmVtb3ZlVHJhbnNsYXRlRnJvbVRyYW5zZm9ybSA9IC90cmFuc2xhdGVcXChbXildKlxcKS9nO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVZhbHVlID0gL3JvdGF0ZVxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZSA9IC9yb3RhdGVYXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlWVZhbHVlID0gL3JvdGF0ZVlcXCgoLT9cXGQrXFwuP1xcZCopZGVnXFwpLztcclxuZXhwb3J0IGNvbnN0IHJlZ2V4R3JvdXBSb3RhdGVaVmFsdWUgPSAvcm90YXRlWlxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSA9IG5ldyBNYXA8c3RyaW5nLCBLZXlib2FyZEV2ZW50Q2FsbGJhY2tbXT4oKTtcclxuZXhwb3J0IGNvbnN0IGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0ID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgY29uc3QgZGljdEtleXNCeUFjdGlvbktleXVwID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkQWN0aW9uS2V5KCB7IGtleSwga2V5ZG93bjogZXZlbnRLZXlkb3duLCBrZXl1cDogZXZlbnRLZXl1cCwgZXhlY3V0ZU9ubHlPbmNlID0gdHJ1ZSB9OiB7IGtleTogc3RyaW5nOyBrZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2s7IGtleXVwPzogS2V5Ym9hcmRFdmVudENhbGxiYWNrOyBleGVjdXRlT25seU9uY2U/OiBib29sZWFuOyB9ICkge1xyXG4gIGlmICggZXhlY3V0ZU9ubHlPbmNlICkge1xyXG4gICAgYWRkQWN0aW9uS2V5UnVuT25jZSgga2V5LCBldmVudEtleWRvd24sIGV2ZW50S2V5dXAgKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGFkZEFjdGlvbktleVJ1bk9uUmVwZWF0KCBrZXksIGV2ZW50S2V5ZG93biwgZXZlbnRLZXl1cCApO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTYWZlUHJvbWlzZTxUPiA9IHtcclxuICBkYXRhOiAoKSA9PiBUO1xyXG4gIGVycm9yOiBFcnJvciB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVQcm9taXNlPFQ+KCBwcm9taXNlOiBQcm9taXNlPFQ+ICk6IFByb21pc2U8U2FmZVByb21pc2U8VD4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHByb21pc2U7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZGF0YTogKCkgPT4gZGF0YSxcclxuICAgICAgZXJyb3I6IG51bGxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoIGVycm9yICkge1xyXG4gICAgY29uc29sZS5lcnJvciggZXJyb3IgKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhOiAoKSA9PiB7IHRocm93IG5ldyBFcnJvciggXCJDb3VsZG4ndCBmZXRjaCwgY2hlY2sgU2FmZVByb21pc2UuZXJyb3IgZm9yIGRldGFpbHMuXCIgKTsgfSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvciggU3RyaW5nKCBlcnJvciApIClcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFlvdXR1YmVVcmxPcklkKCBpbnB1dDogc3RyaW5nICk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHVybFBhdHRlcm4gPSAvXihodHRwKHMpPzpcXC9cXC8pPygodyl7M30uKT95b3V0dShiZXwuYmUpPyhcXC5jb20pP1xcLy4rLztcclxuICBjb25zdCBpZFBhdHRlcm4gPSAvXlthLXpBLVowLTlfLV17MTF9JC87XHJcblxyXG4gIHJldHVybiB1cmxQYXR0ZXJuLnRlc3QoIGlucHV0ICkgfHwgaWRQYXR0ZXJuLnRlc3QoIGlucHV0ICk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFlvdVR1YmVVcmwoIHVybDogc3RyaW5nICk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHBhdHRlcm4gPSAvXihodHRwKHMpPzpcXC9cXC8pPygodyl7M30uKT95b3V0dShiZXwuYmUpPyhcXC5jb20pP1xcLy4rLztcclxuICByZXR1cm4gcGF0dGVybi50ZXN0KCB1cmwgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RZb3VUdWJlSWQoIGlucHV0OiBzdHJpbmcgKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgY29uc3QgcmVnZXggPSAvWz8mXXY9KFtePyZdKykvO1xyXG4gIGNvbnN0IG1hdGNoID0gaW5wdXQubWF0Y2goIHJlZ2V4ICk7XHJcbiAgaWYgKCBtYXRjaCAmJiBtYXRjaFsxXSApIHtcclxuICAgIHJldHVybiBtYXRjaFsxXTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gSWYgZGlyZWN0IHZpZGVvIElEIGlzIHByb3ZpZGVkXHJcbiAgICByZXR1cm4gaW5wdXQubGVuZ3RoID09PSAxMSA/IGlucHV0IDogbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhdHRyTGlzdDogW3N0cmluZywgc3RyaW5nXVtdICkge1xyXG4gIGF0dHJMaXN0LmZvckVhY2goICggW2tleSwgdmFsXSApID0+IHtcclxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCBrZXksIHZhbCApO1xyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tSFRNTCggaHRtbDogc3RyaW5nLCB0cmltOiBib29sZWFuID0gdHJ1ZSApIHtcclxuICBodG1sID0gdHJpbSA/IGh0bWwudHJpbSgpIDogaHRtbDtcclxuXHJcbiAgaWYgKCAhaHRtbCApIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGVtcGxhdGUnICk7XHJcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbDtcclxuICBjb25zdCByZXN1bHQgPSB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkcmVuO1xyXG5cclxuICBpZiAoIHJlc3VsdC5sZW5ndGggPT09IDEgKSB7XHJcbiAgICByZXR1cm4gcmVzdWx0WzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIEFycmF5LmZyb20oIHJlc3VsdCApIGFzIEhUTUxFbGVtZW50W107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50RGltZW5zaW9uc0J5SWQoIGVsZW1lbnRJZDogc3RyaW5nICk6IERpbWVuc2lvbnMge1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggZWxlbWVudElkICk7XHJcblxyXG4gIGlmICggIWVsZW1lbnQgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCBlbGVtZW50IGF0IGdldEVsZW1lbnREaW1lbnNpb25zQnlJZCB3aXRoIGlkOiBcIiArIGVsZW1lbnRJZCApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGdldEVsZW1lbnREaW1lbnNpb25zKCBlbGVtZW50ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50RGltZW5zaW9ucyggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogRGltZW5zaW9ucyB7XHJcbiAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXHJcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogRE9NUmVjdCB7XHJcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgY29uc3QgY2VudGVyWCA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyO1xyXG4gIGNvbnN0IGNlbnRlclkgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcclxuXHJcbiAgLy8gUm90YXRpb24gYW5nbGUgaW4gZGVncmVlcyAoZXh0cmFjdGVkIGZyb20gc3R5bGUudHJhbnNmb3JtIG9yIGFueSBvdGhlciBzb3VyY2UpXHJcbiAgY29uc3Qgcm90YXRpb25BbmdsZSA9IGdldEJvZHlSb3RhdGlvbkluRGVncmVlcygpO1xyXG5cclxuICBjb25zdCByYWRpYW5zID0gKCBNYXRoLlBJIC8gMTgwICkgKiByb3RhdGlvbkFuZ2xlO1xyXG4gIGNvbnN0IGNvc1RoZXRhID0gTWF0aC5jb3MoIHJhZGlhbnMgKTtcclxuICBjb25zdCBzaW5UaGV0YSA9IE1hdGguc2luKCByYWRpYW5zICk7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSB0aGUgcm90YXRlZCBjb29yZGluYXRlc1xyXG4gIGNvbnN0IHJvdGF0ZWRYMSA9IGNlbnRlclggKyAoIHJlY3QubGVmdCAtIGNlbnRlclggKSAqIGNvc1RoZXRhIC0gKCByZWN0LnRvcCAtIGNlbnRlclkgKSAqIHNpblRoZXRhO1xyXG4gIGNvbnN0IHJvdGF0ZWRZMSA9IGNlbnRlclkgKyAoIHJlY3QubGVmdCAtIGNlbnRlclggKSAqIHNpblRoZXRhICsgKCByZWN0LnRvcCAtIGNlbnRlclkgKSAqIGNvc1RoZXRhO1xyXG5cclxuICBjb25zdCByb3RhdGVkWDIgPSBjZW50ZXJYICsgKCByZWN0LnJpZ2h0IC0gY2VudGVyWCApICogY29zVGhldGEgLSAoIHJlY3QuYm90dG9tIC0gY2VudGVyWSApICogc2luVGhldGE7XHJcbiAgY29uc3Qgcm90YXRlZFkyID0gY2VudGVyWSArICggcmVjdC5yaWdodCAtIGNlbnRlclggKSAqIHNpblRoZXRhICsgKCByZWN0LmJvdHRvbSAtIGNlbnRlclkgKSAqIGNvc1RoZXRhO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgbGVmdCwgdG9wLCBib3R0b20sIGFuZCByaWdodCBjb29yZGluYXRlc1xyXG4gIGNvbnN0IHJvdGF0ZWRMZWZ0ID0gTWF0aC5taW4oIHJvdGF0ZWRYMSwgcm90YXRlZFgyICk7XHJcbiAgY29uc3Qgcm90YXRlZFRvcCA9IE1hdGgubWluKCByb3RhdGVkWTEsIHJvdGF0ZWRZMiApO1xyXG4gIGNvbnN0IHJvdGF0ZWRCb3R0b20gPSBNYXRoLm1heCggcm90YXRlZFkxLCByb3RhdGVkWTIgKTtcclxuICBjb25zdCByb3RhdGVkUmlnaHQgPSBNYXRoLm1heCggcm90YXRlZFgxLCByb3RhdGVkWDIgKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IHJvdGF0ZWRMZWZ0LFxyXG4gICAgeTogcm90YXRlZFRvcCxcclxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxyXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcclxuICAgIHRvSlNPTjogcmVjdC50b0pTT04sXHJcbiAgICBsZWZ0OiByb3RhdGVkTGVmdCxcclxuICAgIHRvcDogcm90YXRlZFRvcCxcclxuICAgIGJvdHRvbTogcm90YXRlZEJvdHRvbSxcclxuICAgIHJpZ2h0OiByb3RhdGVkUmlnaHQsXHJcbiAgfSBhcyBET01SZWN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRBY3Rpb25LZXlSdW5PbmNlKCBrZXk6IHN0cmluZywgZXZlbnRLZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2ssIGV2ZW50S2V5dXA/OiBLZXlib2FyZEV2ZW50Q2FsbGJhY2sgKSB7XHJcbiAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UuaGFzKCBrZXkgKSApIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5zZXQoIGtleSwgW2V2ZW50S2V5ZG93biwgLi4uZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLmdldCgga2V5ICkhXSApXHJcbiAgfSBlbHNlIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5zZXQoIGtleSwgW2V2ZW50S2V5ZG93bl0gKVxyXG4gIH1cclxuXHJcbiAgaWYgKCBldmVudEtleXVwICkge1xyXG4gICAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuaGFzKCBrZXkgKSApIHtcclxuICAgICAgZGljdEtleXNCeUFjdGlvbktleXVwLnNldCgga2V5LCBbZXZlbnRLZXl1cCwgLi4uZGljdEtleXNCeUFjdGlvbktleXVwLmdldCgga2V5ICkhXSApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwXSApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRBY3Rpb25LZXlSdW5PblJlcGVhdCgga2V5OiBzdHJpbmcsIGV2ZW50S2V5ZG93bjogS2V5Ym9hcmRFdmVudENhbGxiYWNrLCBldmVudEtleXVwPzogS2V5Ym9hcmRFdmVudENhbGxiYWNrICkge1xyXG4gIGlmICggZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQuaGFzKCBrZXkgKSApIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LnNldCgga2V5LCBbZXZlbnRLZXlkb3duLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5nZXQoIGtleSApIV0gKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5zZXQoIGtleSwgW2V2ZW50S2V5ZG93bl0gKVxyXG4gIH1cclxuXHJcbiAgaWYgKCBldmVudEtleXVwICkge1xyXG4gICAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuaGFzKCBrZXkgKSApIHtcclxuICAgICAgZGljdEtleXNCeUFjdGlvbktleXVwLnNldCgga2V5LCBbZXZlbnRLZXl1cCwgLi4uZGljdEtleXNCeUFjdGlvbktleXVwLmdldCgga2V5ICkhXSApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwXSApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFbGVtZW50Q29sbGlzaW9uKCBlbGVtZW50MTogSFRNTEVsZW1lbnQsIGVsZW1lbnQyOiBIVE1MRWxlbWVudCwgY2hlY2tCb2R5Um90YXRpb246IGJvb2xlYW4gPSBmYWxzZSApOiBib29sZWFuIHtcclxuICBjb25zdCByZWN0MSA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGVsZW1lbnQxLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZWxlbWVudDEgKTtcclxuICBjb25zdCByZWN0MiA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGVsZW1lbnQyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZWxlbWVudDIgKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gIShcclxuICAgIHJlY3QxLnRvcCA+IHJlY3QyLmJvdHRvbSB8fFxyXG4gICAgcmVjdDEucmlnaHQgPCByZWN0Mi5sZWZ0IHx8XHJcbiAgICByZWN0MS5ib3R0b20gPCByZWN0Mi50b3AgfHxcclxuICAgIHJlY3QxLmxlZnQgPiByZWN0Mi5yaWdodFxyXG4gICk7XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwb2xsRm9yVmFyaWFibGU8VD4oIHZhcmlhYmxlTmFtZTogc3RyaW5nLCByZWFkeUNvbmRpdGlvbjogKCB2YWx1ZTogVCApID0+IGJvb2xlYW4sIGNhbGxiYWNrOiAoIHZhbHVlOiBUICkgPT4gdm9pZCApIHtcclxuICBjb25zdCBwb2xsSW50ZXJ2YWwgPSAxMDA7XHJcbiAgY29uc3QgcG9sbCA9IHNldEludGVydmFsKCAoKSA9PiB7XHJcbiAgICBpZiAoICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gIT09IHVuZGVmaW5lZCAmJiByZWFkeUNvbmRpdGlvbiggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSApICkge1xyXG4gICAgICAvLyBJZiBib3RoIGNvbmRpdGlvbnMgYXJlIG1ldCwgZXhlY3V0ZSB0aGUgY2FsbGJhY2sgYW5kIHN0b3AgcG9sbGluZ1xyXG4gICAgICBjbGVhckludGVydmFsKCBwb2xsICk7XHJcbiAgICAgIGNhbGxiYWNrKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICk7XHJcbiAgICB9XHJcbiAgfSwgcG9sbEludGVydmFsICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwb2xsRm9yVmFyaWFibGVBc3luYzxUPiggdmFyaWFibGVOYW1lOiBzdHJpbmcsIHJlYWR5Q29uZGl0aW9uOiAoIHZhbHVlOiBUICkgPT4gYm9vbGVhbiwgY2FsbGJhY2s6ICggdmFsdWU6IFQgKSA9PiB2b2lkICk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHBvbGxJbnRlcnZhbCA9IDEwMDtcclxuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oICggcmVzb2x2ZSApID0+IHtcclxuICAgIGNvbnN0IHBvbGwgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xyXG4gICAgICBpZiAoICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gIT09IHVuZGVmaW5lZCAmJiByZWFkeUNvbmRpdGlvbiggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSApICkge1xyXG4gICAgICAgIC8vIElmIGJvdGggY29uZGl0aW9ucyBhcmUgbWV0LCBleGVjdXRlIHRoZSBjYWxsYmFjaywgc3RvcCBwb2xsaW5nLCBhbmQgcmVzb2x2ZSB0aGUgcHJvbWlzZVxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoIHBvbGwgKTtcclxuICAgICAgICBjYWxsYmFjayggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSApO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfVxyXG4gICAgfSwgcG9sbEludGVydmFsICk7XHJcbiAgfSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2FpdFVudGlsRWxlbWVudEV4aXN0cyggc2VsZWN0b3I6IHN0cmluZyApIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG4gICAgaWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICkge1xyXG4gICAgICByZXR1cm4gcmVzb2x2ZSggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoIG11dGF0aW9ucyA9PiB7XHJcbiAgICAgIGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApIHtcclxuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgcmVzb2x2ZSggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSggZG9jdW1lbnQuYm9keSwge1xyXG4gICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgIHN1YnRyZWU6IHRydWVcclxuICAgIH0gKTtcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxheSggbXM6IG51bWJlciApOiBQcm9taXNlPHZvaWQ+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4gc2V0VGltZW91dCggcmVzb2x2ZSwgbXMgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUVsZW1lbnQoIGVsZW1lbnRUb1JlbW92ZTogSFRNTEVsZW1lbnQsIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBuZXdFbGVtZW50OiBIVE1MRWxlbWVudCApOiB2b2lkIHtcclxuICBpZiAoIHBhcmVudEVsZW1lbnQgJiYgZWxlbWVudFRvUmVtb3ZlICkge1xyXG4gICAgcGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCggZWxlbWVudFRvUmVtb3ZlICk7XHJcblxyXG4gICAgcGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoIG5ld0VsZW1lbnQsIGVsZW1lbnRUb1JlbW92ZS5uZXh0U2libGluZyApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEVsZW1lbnRBdEluZGV4KCBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgbmV3RWxlbWVudDogSFRNTEVsZW1lbnQsIGluZGV4OiBudW1iZXIgKTogdm9pZCB7XHJcbiAgY29uc3QgY2hpbGROb2RlcyA9IHBhcmVudEVsZW1lbnQuY2hpbGROb2RlcztcclxuXHJcbiAgaWYgKCBpbmRleCA+PSAwICYmIGluZGV4IDw9IGNoaWxkTm9kZXMubGVuZ3RoICkge1xyXG4gICAgaWYgKCBpbmRleCA9PT0gY2hpbGROb2Rlcy5sZW5ndGggKSB7XHJcbiAgICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIG5ld0VsZW1lbnQgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHJlZk5vZGUgPSBjaGlsZE5vZGVzW2luZGV4XTtcclxuICAgICAgcGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoIG5ld0VsZW1lbnQsIHJlZk5vZGUgKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5lcnJvciggJ0luZGV4IG91dCBvZiBib3VuZHMnICk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSW5kZXggb3V0IG9mIGJvdW5kc1wiICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5kZXhJblBhcmVudCggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogbnVtYmVyIHtcclxuICBjb25zdCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcblxyXG4gIGlmICggcGFyZW50ICkge1xyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBBcnJheS5mcm9tKCBwYXJlbnQuY2hpbGRyZW4gKTtcclxuICAgIHJldHVybiBjaGlsZHJlbi5pbmRleE9mKCBlbGVtZW50ICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gLTE7XHJcbn1cclxuXHJcbi8vLyBHZXQgdGhlIGRlZmF1bHQgYXR0cmlidXRlcyBmcm9tIHRoZSB0YXJnZXQgZWxlbWVudFxyXG4vLy8gSWYgaGF2ZSBub3QgZGVmYXVsdCBhdHRyaWJ1dGUgd2l0aCB0aGlzIEBhdHRyaWJ1dGVOYW1lIG9uIG1hcCB3aWxsIHNldCB0aGUgY3VycmVudCBhdHRyaWJ1dGUgYXMgZGVmYXVsdFxyXG4vLy8gSWYgaGF2ZSBub3QgZGVmYXVsdCBhdHRyaWJ1dGUgd2l0aCB0aGlzIEBhdHRyaWJ1dGVOYW1lIHdpbGwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZ1xyXG5leHBvcnQgY29uc3QgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQgPSBuZXcgTWFwPEhUTUxFbGVtZW50LCBNYXA8c3RyaW5nLCBzdHJpbmc+PigpO1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCggdGFyZ2V0OiBIVE1MRWxlbWVudCwgYXR0cmlidXRlTmFtZTogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgaWYgKCAhbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuaGFzKCB0YXJnZXQgKSApIHtcclxuICAgIG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LnNldCggdGFyZ2V0LCBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpICk7XHJcbiAgfVxyXG5cclxuICBsZXQgcmVzdWx0OiBzdHJpbmcgPSAnJztcclxuICBjb25zdCBkZWZhdWx0QXR0cmlidXRlVmFsdWVzQnlOYW1lID0gbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuZ2V0KCB0YXJnZXQgKSE7XHJcbiAgY29uc3QgdGFyZ2V0RGVmYXVsdEF0dHJpYnV0ZSA9ICFkZWZhdWx0QXR0cmlidXRlVmFsdWVzQnlOYW1lLmhhcyggYXR0cmlidXRlTmFtZSApID8gdGFyZ2V0LmdldEF0dHJpYnV0ZSggYXR0cmlidXRlTmFtZSApIDogZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZS5nZXQoIGF0dHJpYnV0ZU5hbWUgKSE7XHJcblxyXG4gIHJlc3VsdCA9IHRhcmdldERlZmF1bHRBdHRyaWJ1dGUgPyB0YXJnZXREZWZhdWx0QXR0cmlidXRlIDogJyc7XHJcbiAgc2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCggdGFyZ2V0LCBhdHRyaWJ1dGVOYW1lLCByZXN1bHQgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQoIHRhcmdldDogSFRNTEVsZW1lbnQsIGF0dHJpYnV0ZU5hbWU6IHN0cmluZywgbmV3RGVmYXVsdEF0dHJpYnV0ZTogc3RyaW5nICk6IHZvaWQge1xyXG4gIGlmICggIW1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmhhcyggdGFyZ2V0ICkgKSB7XHJcbiAgICBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5zZXQoIHRhcmdldCwgbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKSApO1xyXG4gIH1cclxuXHJcbiAgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuZ2V0KCB0YXJnZXQgKSEuc2V0KCBhdHRyaWJ1dGVOYW1lLCBuZXdEZWZhdWx0QXR0cmlidXRlICk7XHJcbn1cclxuXHJcbi8vLyBEaXZpZGUgbyBlbGVtZW50byBAdGFyZ2V0IGVtIDkgXCJxdWFkcmFkb3NcIiBpZ3VhaXMgZSByZXRvcm5hIGVtIHF1YWlzIHF1YWRyYWRvcyBvIGRyYWdnYWJsZSBlc3TDoSBjb2xpZGluZG8gY29tIG8gdGFyZ2V0XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xsaXNpb25EaXJlY3Rpb24oIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogQ29sbGlzaW9uRGlyZWN0aW9uQ2hlY2sge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZHJhZ2dhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZHJhZ2dhYmxlICk7XHJcbiAgY29uc3QgcmVjdDIgPSAhY2hlY2tCb2R5Um90YXRpb24gPyB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCB0YXJnZXQgKTtcclxuXHJcbiAgY29uc3QgaXNUb3AgPSByZWN0MS5ib3R0b20gPiByZWN0Mi50b3AgJiYgcmVjdDEudG9wIDwgcmVjdDIudG9wICsgcmVjdDIuaGVpZ2h0IC8gMztcclxuICBjb25zdCBpc1JpZ2h0ID0gcmVjdDEubGVmdCA8IHJlY3QyLnJpZ2h0ICYmIHJlY3QxLnJpZ2h0ID4gcmVjdDIucmlnaHQgLSByZWN0Mi53aWR0aCAvIDM7XHJcbiAgY29uc3QgaXNDZW50ZXIgPSByZWN0MS50b3AgPCByZWN0Mi5ib3R0b20gJiYgcmVjdDEuYm90dG9tID4gcmVjdDIudG9wICYmIHJlY3QxLmxlZnQgPCByZWN0Mi5yaWdodCAmJiByZWN0MS5yaWdodCA+IHJlY3QyLmxlZnQ7XHJcbiAgY29uc3QgaXNCb3R0b20gPSByZWN0MS50b3AgPCByZWN0Mi5ib3R0b20gLSByZWN0Mi5oZWlnaHQgLyAzICYmIHJlY3QxLmJvdHRvbSA+IHJlY3QyLmJvdHRvbSAtIHJlY3QyLmhlaWdodCAvIDM7XHJcbiAgY29uc3QgaXNMZWZ0ID0gcmVjdDEucmlnaHQgPiByZWN0Mi5sZWZ0ICYmIHJlY3QxLmxlZnQgPCByZWN0Mi5sZWZ0ICsgcmVjdDIud2lkdGggLyAzO1xyXG5cclxuICByZXR1cm4geyB0b3A6IGlzVG9wLCByaWdodDogaXNSaWdodCwgY2VudGVyOiBpc0NlbnRlciwgYm90dG9tOiBpc0JvdHRvbSwgbGVmdDogaXNMZWZ0IH07XHJcbn1cclxuXHJcbi8vLyByZXR1cm4gdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgZHJhZ2dhYmxlIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHRhcmdldCBlbGVtZW50IGZyb20gZWFjaCBib3JkZXIgXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXN0YW5jZUZyb21Cb3JkZXIoIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogQm9yZGVyRGlzdGFuY2Uge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZHJhZ2dhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZHJhZ2dhYmxlICk7XHJcbiAgY29uc3QgcmVjdDIgPSAhY2hlY2tCb2R5Um90YXRpb24gPyB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCB0YXJnZXQgKTtcclxuXHJcbiAgY29uc3QgY2VudGVyID0ge1xyXG4gICAgeDogcmVjdDEubGVmdCArIHJlY3QxLndpZHRoIC8gMixcclxuICAgIHk6IHJlY3QxLnRvcCArIHJlY3QxLmhlaWdodCAvIDIsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSA9IHtcclxuICAgIHRvcDogY2VudGVyLnkgLSByZWN0Mi50b3AsXHJcbiAgICByaWdodDogcmVjdDIucmlnaHQgLSBjZW50ZXIueCxcclxuICAgIGJvdHRvbTogcmVjdDIuYm90dG9tIC0gY2VudGVyLnksXHJcbiAgICBsZWZ0OiBjZW50ZXIueCAtIHJlY3QyLmxlZnQsXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGRpc3RhbmNlRnJvbUJvcmRlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gcnVuT25seU9uY2VLZXlkb3duQWN0aW9ucyggZXZ0OiBLZXlib2FyZEV2ZW50ICkge1xyXG4gIGZvciAoIGNvbnN0IHBhaXIgb2YgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlICkge1xyXG4gICAgaWYgKCBldnQuY29kZSA9PT0gcGFpclswXSApIHtcclxuICAgICAgcGFpclsxXS5mb3JFYWNoKCBrYkV2ZW50ID0+IGtiRXZlbnQoIGV2dCApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBydW5LZXlkb3duQWN0aW9uc1JlcGVhdCggZXZ0OiBLZXlib2FyZEV2ZW50ICkge1xyXG4gIGZvciAoIGNvbnN0IHBhaXIgb2YgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQgKSB7XHJcbiAgICBpZiAoIGV2dC5jb2RlID09PSBwYWlyWzBdICkge1xyXG4gICAgICBwYWlyWzFdLmZvckVhY2goIGtiRXZlbnQgPT4ga2JFdmVudCggZXZ0ICkgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAna2V5ZG93bicsIGV2dCA9PiB7XHJcbiAgaWYgKCAhZXZ0LnJlcGVhdCApIHtcclxuICAgIHJ1bk9ubHlPbmNlS2V5ZG93bkFjdGlvbnMoIGV2dCApO1xyXG4gIH1cclxuXHJcbiAgcnVuS2V5ZG93bkFjdGlvbnNSZXBlYXQoIGV2dCApO1xyXG59ICk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgZXZ0ID0+IHtcclxuICBmb3IgKCBjb25zdCBwYWlyIG9mIGRpY3RLZXlzQnlBY3Rpb25LZXl1cCApIHtcclxuICAgIGlmICggZXZ0LmNvZGUgPT09IHBhaXJbMF0gKSB7XHJcbiAgICAgIHBhaXJbMV0uZm9yRWFjaCgga2JFdmVudCA9PiBrYkV2ZW50KCBldnQgKSApO1xyXG4gICAgfVxyXG4gIH1cclxufSApO1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50Um90YXRpb25JbkRlZ3JlZXMoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBheGlzOiAneCcgfCAneScgfCAneicgPSAneCcgKTogbnVtYmVyIHtcclxuICBsZXQgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlOiBSZWdFeHA7XHJcbiAgc3dpdGNoICggYXhpcyApIHtcclxuICAgIGNhc2UgJ3gnOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWFZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3knOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWVZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3onOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWlZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZSA9IHJlZ2V4R3JvdXBSb3RhdGVWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtYXRjaCA9IHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZS5leGVjKCBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSApO1xyXG4gIGlmICggbWF0Y2ggKSB7XHJcbiAgICBjb25zdCByb3RhdGlvblZhbHVlID0gcGFyc2VGbG9hdCggbWF0Y2hbMV0gKTtcclxuICAgIHJldHVybiByb3RhdGlvblZhbHVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb2R5Um90YXRpb25JbkRlZ3JlZXMoKTogbnVtYmVyIHtcclxuICBjb25zdCBtYXRjaCA9IGdldFJlZ2V4UmVtb3ZlUm90YXRpb25Gcm9tQm9keSgpLmV4ZWMoIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNmb3JtICk7XHJcbiAgaWYgKCBtYXRjaCApIHtcclxuICAgIGNvbnN0IHJvdGF0aW9uVmFsdWUgPSBwYXJzZUZsb2F0KCBtYXRjaFsxXSApO1xyXG4gICAgcmV0dXJuIHJvdGF0aW9uVmFsdWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZ2V4UmVtb3ZlUm90YXRpb25Gcm9tQm9keSgpIHtcclxuICByZXR1cm4gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkJhc2VkT25BeGlzKCBnZXRCb2R5Um90YXRpb25BeGlzKCkgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkJhc2VkT25BeGlzKCBheGlzOiAneCcgfCAneScgfCAneicgKSB7XHJcbiAgc3dpdGNoICggYXhpcyApIHtcclxuICAgIGNhc2UgJ3gnOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZTtcclxuICAgIGNhc2UgJ3knOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVlWYWx1ZTtcclxuICAgIGNhc2UgJ3onOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVpWYWx1ZTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiByZWdleEdyb3VwUm90YXRlVmFsdWU7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm9keVJvdGF0aW9uQXhpcygpOiAneCcgfCAneScgfCAneicge1xyXG4gIHJldHVybiBnZXRFbGVtZW50Um90YXRpb25BeGlzKCBkb2N1bWVudC5ib2R5ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50Um90YXRpb25BeGlzKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiAneCcgfCAneScgfCAneicge1xyXG4gIGNvbnN0IGVsZW1lbnRUcmFuc2Zvcm0gPSBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybS50b0xvd2VyQ2FzZSgpO1xyXG4gIGlmICggZWxlbWVudFRyYW5zZm9ybS5pbmNsdWRlcyggJ3gnICkgKSB7XHJcbiAgICByZXR1cm4gJ3gnO1xyXG4gIH0gZWxzZSBpZiAoIGVsZW1lbnRUcmFuc2Zvcm0uaW5jbHVkZXMoICd5JyApICkge1xyXG4gICAgcmV0dXJuICd5JztcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuICd6JztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm1Db29yZHNGcm9tRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGUgPSAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50ICkudHJhbnNmb3JtLm1hdGNoKCByZWdleE51bWJlclBhdHRlcm4gKSA/PyBbMCwgMF0gKS5tYXAoIG4gPT4gK24gKTtcclxuXHJcbiAgbGV0IHJlc3VsdCA9IHtcclxuICAgIHg6IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzRdICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKCBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs0XSApIDogMCxcclxuICAgIHk6IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzVdICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKCBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs1XSApIDogMFxyXG4gIH1cclxuXHJcbiAgaWYgKCBjaGVja0JvZHlSb3RhdGlvbiApIHtcclxuICAgIGNvbnN0IGJvZHlBbmdsZSA9IGdldEVsZW1lbnRSb3RhdGlvbkluRGVncmVlcyggZG9jdW1lbnQuYm9keSwgZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyggZWxlbWVudCApICkgfHwgMDtcclxuICAgIHJldHVybiByb3RhdGVDb29yZGluYXRlcyggcmVzdWx0LngsIHJlc3VsdC55LCBib2R5QW5nbGUgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGlja0V2ZW50VG9Db29yZGluYXRlcyggZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50ICkge1xyXG4gIGlmICggZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogZXZlbnQuY2xpZW50WCxcclxuICAgICAgeTogZXZlbnQuY2xpZW50WVxyXG4gICAgfTtcclxuICB9IGVsc2UgaWYgKCBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQgKSB7XHJcbiAgICBjb25zdCB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogdG91Y2guY2xpZW50WCxcclxuICAgICAgeTogdG91Y2guY2xpZW50WVxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgXCJFdmVudCBub3QgRm91bmRcIjtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQoIHsgcGFyZW50RWxlbWVudCwgaWQsIHBvc2l0aW9uLCBkaW1lbnNpb25zIH06IHsgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQ7IGlkOiBzdHJpbmc7IHBvc2l0aW9uPzogeyB0b3A6IG51bWJlcjsgbGVmdDogbnVtYmVyOyB9OyBkaW1lbnNpb25zPzogRGltZW5zaW9uczsgfSApIHtcclxuICB2YXIgaW52aXNpYmxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuXHJcbiAgaWYgKCAhcGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiApIHtcclxuICAgIHBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gIH1cclxuXHJcbiAgaW52aXNpYmxlRGl2LmlkID0gaWQ7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICBpbnZpc2libGVEaXYuc3R5bGUud2lkdGggPSBkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMud2lkdGggPyBkaW1lbnNpb25zLndpZHRoLnRvU3RyaW5nKCkgKyAncHgnIDogJzEwMCUnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMuaGVpZ2h0ID8gZGltZW5zaW9ucy5oZWlnaHQudG9TdHJpbmcoKSArICdweCcgOiAnMTAwJSc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnRvcCA9ICggcG9zaXRpb24/LnRvcC50b1N0cmluZygpID8/ICcwJyApICsgJ3B4JztcclxuICBpbnZpc2libGVEaXYuc3R5bGUubGVmdCA9ICggcG9zaXRpb24/LmxlZnQudG9TdHJpbmcoKSA/PyAnMCcgKSArICdweCc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLm9wYWNpdHkgPSAnMCc7IC8vIE1ha2UgdGhlIGRpdiBpbnZpc2libGVcclxuICBpbnZpc2libGVEaXYuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJzsgLy8gQWxsb3cgdGhlIGRpdiB0byBpbnRlcmNlcHQgbW91c2UgZXZlbnRzXHJcblxyXG4gIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGludmlzaWJsZURpdiApO1xyXG5cclxuICByZXR1cm4gaW52aXNpYmxlRGl2O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGlkZUVsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICkge1xyXG4gIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgZWxlbWVudC5zdHlsZS56SW5kZXggPSAnLTEnO1xyXG4gIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICBlbGVtZW50LnN0eWxlLndpZHRoID0gJzBweCAhaW1wb3J0YW50JztcclxuICBlbGVtZW50LnN0eWxlLmhlaWdodCA9ICcwcHggIWltcG9ydGFudCc7XHJcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdoaWRkZW4nLCAnJyApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2xlZXBBc3luYyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oICggcmVzb2x2ZSApID0+IHNldFRpbWVvdXQoICgpID0+IHJlc29sdmUoKSwgbXMgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmluZEVsZW1lbnRzQnlDaGVjayggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBvbkNoZWNrOiBGdW5jdGlvbiwgb25VbmNoZWNrOiBGdW5jdGlvbiApIHtcclxuICBpZiAoIHRyaWdnZXJFbGVtZW50LmNoZWNrZWQgKSB7XHJcbiAgICBvbkNoZWNrKCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0cmlnZ2VyR3JvdXAgPSB0cmlnZ2VyRWxlbWVudC5uYW1lXHJcbiAgICA/IEFycmF5LmZyb20oIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGBbbmFtZT1cIiR7IHRyaWdnZXJFbGVtZW50Lm5hbWUgfVwiXWAgKSApXHJcbiAgICA6IFt0cmlnZ2VyRWxlbWVudF07XHJcblxyXG4gIHRyaWdnZXJHcm91cC5mb3JFYWNoKCB0ID0+IHQuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIGV2dCA9PiB7XHJcbiAgICBpZiAoIHRyaWdnZXJFbGVtZW50LmNoZWNrZWQgKSB7XHJcbiAgICAgIG9uQ2hlY2soIHRhcmdldEVsZW1lbnQsIGV2dCApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25VbmNoZWNrKCB0YXJnZXRFbGVtZW50LCBldnQgKTtcclxuICAgIH1cclxuICB9ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldElucHV0Rm9yY2VQaG9uZU51bWJlckZvcm1hdCggaW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50ICkge1xyXG4gIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgcGhvbmVJbnB1dCA9IHRoaXMudmFsdWU7XHJcblxyXG4gICAgY29uc3QgY2xlYW5QaG9uZUlucHV0ID0gcGhvbmVJbnB1dC5yZXBsYWNlKCAvXFxEL2csICcnICk7XHJcbiAgICBpZiAoIGNsZWFuUGhvbmVJbnB1dC5sZW5ndGggPiAxMSApIHtcclxuICAgICAgcGhvbmVJbnB1dCA9IGNsZWFuUGhvbmVJbnB1dC5zbGljZSggMCwgMTEgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGhvbmVOdW1iZXJGb3JtYXR0ZWQgPSB0b1Bob25lTnVtYmVyKCBwaG9uZUlucHV0ICk7XHJcblxyXG4gICAgaWYgKCBwaG9uZU51bWJlckZvcm1hdHRlZC5sZW5ndGggPT09IDEwICkge1xyXG4gICAgICBwaG9uZU51bWJlckZvcm1hdHRlZCA9IHBob25lTnVtYmVyRm9ybWF0dGVkLnJlcGxhY2VBbGwoICctJywgJycgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZhbHVlID0gcGhvbmVOdW1iZXJGb3JtYXR0ZWQ7XHJcbiAgfSApO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9iaWxlQnJvd3NlcigpIHtcclxuICByZXR1cm4gL0FuZHJvaWR8aVBob25lL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckRldmljZVR5cGUoKTogJ2FuZHJvaWQnIHwgJ2FwcGxlJyB8ICdkZXNrdG9wJyB7XHJcbiAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCAoIHdpbmRvdyBhcyBhbnkgKS5vcGVyYTtcclxuXHJcbiAgaWYgKCAvYW5kcm9pZC9pLnRlc3QoIHVzZXJBZ2VudCApICkge1xyXG4gICAgcmV0dXJuICdhbmRyb2lkJztcclxuICB9IGVsc2UgaWYgKCAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdCggdXNlckFnZW50ICkgJiYgISggd2luZG93IGFzIGFueSApLk1TU3RyZWFtICkge1xyXG4gICAgcmV0dXJuICdhcHBsZSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAnZGVza3RvcCc7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNPblNjcmVlbiggZWxlbWVudDogSFRNTEVsZW1lbnQgKSB7XHJcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIChcclxuICAgIHJlY3QudG9wID49IDAgJiZcclxuICAgIHJlY3QubGVmdCA+PSAwICYmXHJcbiAgICByZWN0LmJvdHRvbSA8PSAoIHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ICkgJiZcclxuICAgIHJlY3QucmlnaHQgPD0gKCB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggKVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kRWxlbWVudFZpZXdJZkNoZWNrZWQoIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCBvcHRpb25zID0ge1xyXG4gIG9uQ2hlY2s6ICggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ICkgPT4geyB9LFxyXG4gIG9uVW5jaGVjazogKCB0cmlnZ2VyRWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQgKSA9PiB7IH1cclxufSApIHtcclxuICBiaW5kRWxlbWVudHNCeUNoZWNrKFxyXG4gICAgdHJpZ2dlckVsZW1lbnQsXHJcbiAgICB0YXJnZXRFbGVtZW50LFxyXG4gICAgKCBlbDogSFRNTEVsZW1lbnQgKSA9PiB7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoICdzaG93JyApO1xyXG4gICAgICBvcHRpb25zLm9uQ2hlY2soIHRyaWdnZXJFbGVtZW50LCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgICB9LFxyXG4gICAgKCBlbDogSFRNTEVsZW1lbnQgKSA9PiB7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoICdzaG93JyApO1xyXG4gICAgICBvcHRpb25zLm9uVW5jaGVjayggdHJpZ2dlckVsZW1lbnQsIHRhcmdldEVsZW1lbnQgKTtcclxuICAgIH0sXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlRnJvbVJhZGlvR3JvdXAoIGdyb3VwTmFtZTogc3RyaW5nICk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBgW25hbWU9JHsgZ3JvdXBOYW1lIH1dOmNoZWNrZWRgICkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICBpZiAoIGVsICkge1xyXG4gICAgcmV0dXJuIGVsLnZhbHVlO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGwoIHRhcmdldFk6IG51bWJlciwgZHVyYXRpb246IG51bWJlciApOiB2b2lkIHtcclxuICBjb25zdCBzdGFydFkgPSB3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgbGV0IHN0YXJ0VGltZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGZ1bmN0aW9uIHN0ZXAoIGN1cnJlbnRUaW1lOiBudW1iZXIgKSB7XHJcbiAgICBpZiAoICFzdGFydFRpbWUgKSBzdGFydFRpbWUgPSBjdXJyZW50VGltZTtcclxuICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XHJcbiAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKCBlbGFwc2VkVGltZSAvIGR1cmF0aW9uLCAxICk7XHJcbiAgICBjb25zdCBlYXNlZFByb2dyZXNzID0gbGVycCggMCwgMSwgcHJvZ3Jlc3MgKTtcclxuICAgIHdpbmRvdy5zY3JvbGxUbyggMCwgbGVycCggc3RhcnRZLCB0YXJnZXRZLCBlYXNlZFByb2dyZXNzICkgKTtcclxuICAgIGlmICggZWxhcHNlZFRpbWUgPCBkdXJhdGlvbiApIHtcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBzdGVwICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHN0ZXAgKTtcclxufVxyXG5cclxuLy8gUmV0b3JuYSB1bWEgZnVuw6fDo28gcXVlIG7Do28gdmFpIHNlciBjb21wbGV0YWRhIGNhc28gc2VqYSBjaGFtYWRhIG5vdmFtZW50ZSBlbSB7IGRlbGF5IH0gbWlsaXNzZWd1bmRvc1xyXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2VGYWN0b3J5KCBmdW5jOiBGdW5jdGlvbiwgZGVsYXk6IG51bWJlciApOiBGdW5jdGlvbiB7XHJcbiAgbGV0IGluRGVib3VuY2U6IG51bWJlcjtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IHdpbmRvdztcclxuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICBjbGVhclRpbWVvdXQoIGluRGVib3VuY2UgKTtcclxuICAgIGluRGVib3VuY2UgPSB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4gZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApLCBkZWxheSApO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIFJldG9ybmEgdW1hIGZ1bsOnw6NvIHF1ZSBzw7MgcG9kZSBzZXIgY29tcGxldGFkYSB1bWEgdmV6IGEgY2FkYSB7IGxpbWl0IH0gbWlsaXNzZWd1bmRvcyBcclxuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlRmFjdG9yeSggZnVuYzogRnVuY3Rpb24sIGxpbWl0OiBudW1iZXIgKTogRnVuY3Rpb24ge1xyXG4gIGxldCBsYXN0RnVuYzogbnVtYmVyO1xyXG4gIGxldCBsYXN0UmFuOiBudW1iZXI7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSB3aW5kb3c7XHJcbiAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgaWYgKCAhbGFzdFJhbiApIHtcclxuICAgICAgZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApO1xyXG4gICAgICBsYXN0UmFuID0gRGF0ZS5ub3coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCggbGFzdEZ1bmMgKTtcclxuICAgICAgbGFzdEZ1bmMgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICggRGF0ZS5ub3coKSAtIGxhc3RSYW4gPj0gbGltaXQgKSB7XHJcbiAgICAgICAgICBmdW5jLmFwcGx5KCBjb250ZXh0LCBhcmdzICk7XHJcbiAgICAgICAgICBsYXN0UmFuID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGxpbWl0IC0gKCBEYXRlLm5vdygpIC0gbGFzdFJhbiApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoU2Nyb2xsVG8oIHBvczogbnVtYmVyICk6IHZvaWQge1xyXG4gIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG8oIHtcclxuICAgIHRvcDogcG9zLFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNtb290aFNjcm9sbFRvRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIHVzZUJyb3dzZXJEZWZhdWx0czogYm9vbGVhbiA9IHRydWUgKTogdm9pZCB7XHJcbiAgaWYgKCAhdXNlQnJvd3NlckRlZmF1bHRzICkge1xyXG4gICAgY29uc3QgdGFyZ2V0WSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnNjcm9sbFk7XHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IDEwMDA7IC8vIER1cmHDp8OjbyBmaXhhIGVtIG1pbGlzc2VndW5kb3MgKDEgc2VndW5kbylcclxuICAgIHNtb290aFNjcm9sbCggdGFyZ2V0WSwgZHVyYXRpb24gKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG8oIHtcclxuICAgIHRvcDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55LFxyXG4gICAgbGVmdDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54LFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE9wdGlvbkJ5VGV4dCggaWRTZWxlY3RFbGVtZW50OiBzdHJpbmcsIHNlYXJjaFRleHQ6IHN0cmluZywgY29udGFpbnM6IGJvb2xlYW4gPSBmYWxzZSApOiB2b2lkIHtcclxuICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGlkU2VsZWN0RWxlbWVudCApIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5cclxuICBpZiAoICFzZWxlY3RFbGVtZW50ICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3B0aW9uc0VsZW1lbnRvU2VsZWN0ID0gWy4uLnNlbGVjdEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCggJ29wdGlvbicgKV07XHJcblxyXG4gIGxldCBzZWxlY3RlZE9wdGlvbjtcclxuICBpZiAoIGNvbnRhaW5zICkge1xyXG4gICAgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zRWxlbWVudG9TZWxlY3RcclxuICAgICAgLmZpbHRlciggZWwgPT4gZWwudGV4dENvbnRlbnQgJiYgZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyggc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpICkgKVswXS52YWx1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zRWxlbWVudG9TZWxlY3RcclxuICAgICAgLmZpbHRlciggZWwgPT4gZWwudGV4dENvbnRlbnQgJiYgZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKSA9PT0gc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpIClbMF0udmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RFbGVtZW50LnZhbHVlID0gc2VsZWN0ZWRPcHRpb247XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjb25zdCByZWdleE51bWJlclBhdHRlcm4gPSAvLT9cXGQrXFwuP1xcZCovZztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnQyRCB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb25zIHtcclxuICB3aWR0aDogbnVtYmVyO1xyXG4gIGhlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb1JvdyggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIGluZGV4IC8gZ3JpZFdpZHRoICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmRleFRvQ29sKCBpbmRleDogbnVtYmVyLCBncmlkV2lkdGg6IG51bWJlciApIHtcclxuICByZXR1cm4gaW5kZXggJSBncmlkV2lkdGg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3dDb2xUb0luZGV4KCByb3c6IG51bWJlciwgY29sOiBudW1iZXIsIHdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuICggcm93ICogd2lkdGggKSArIGNvbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUNvb3JkaW5hdGVzRnJvbVBvaW50MkQoIGNvb3JkczogUG9pbnQyRCwgYW5nbGU6IG51bWJlciApOiBQb2ludDJEIHtcclxuICBjb25zdCByYWRpYW5zID0gKCBNYXRoLlBJIC8gMTgwICkgKiBhbmdsZTtcclxuICBjb25zdCBuZXdYID0gY29vcmRzLnggKiBNYXRoLmNvcyggcmFkaWFucyApIC0gY29vcmRzLnkgKiBNYXRoLnNpbiggcmFkaWFucyApO1xyXG4gIGNvbnN0IG5ld1kgPSBjb29yZHMueCAqIE1hdGguc2luKCByYWRpYW5zICkgKyBjb29yZHMueSAqIE1hdGguY29zKCByYWRpYW5zICk7XHJcbiAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSB9O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUNvb3JkaW5hdGVzKCB4OiBudW1iZXIsIHk6IG51bWJlciwgYW5nbGU6IG51bWJlciApOiBQb2ludDJEIHtcclxuICBjb25zdCByYWRpYW5zID0gKCBNYXRoLlBJIC8gMTgwICkgKiBhbmdsZTtcclxuICBjb25zdCBuZXdYID0geCAqIE1hdGguY29zKCByYWRpYW5zICkgLSB5ICogTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuICBjb25zdCBuZXdZID0geCAqIE1hdGguc2luKCByYWRpYW5zICkgKyB5ICogTWF0aC5jb3MoIHJhZGlhbnMgKTtcclxuICByZXR1cm4geyB4OiBuZXdYLCB5OiBuZXdZIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcmVEaWFnb25hbHMoIGluZGV4MTogbnVtYmVyLCBpbmRleDI6IG51bWJlciwgZ3JpZFNpemU6IG51bWJlciApOiBib29sZWFuIHtcclxuICBpZiAoIGluZGV4MSA8IDAgfHwgaW5kZXgyIDwgMCApIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggJ0ludmFsaWQgY2VsbCBpbmRpY2VzJyApO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgcm93MSA9IGluZGV4VG9Sb3coIGluZGV4MSwgZ3JpZFNpemUgKTtcclxuICBjb25zdCBjb2wxID0gaW5kZXhUb0NvbCggaW5kZXgxLCBncmlkU2l6ZSApO1xyXG5cclxuICBjb25zdCByb3cyID0gaW5kZXhUb1JvdyggaW5kZXgyLCBncmlkU2l6ZSApO1xyXG4gIGNvbnN0IGNvbDIgPSBpbmRleFRvQ29sKCBpbmRleDIsIGdyaWRTaXplICk7XHJcblxyXG4gIHJldHVybiBNYXRoLmFicyggcm93MSAtIHJvdzIgKSA9PT0gTWF0aC5hYnMoIGNvbDEgLSBjb2wyICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmRleFRvUG9pbnQyRCggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IGluZGV4VG9Db2woIGluZGV4LCBncmlkV2lkdGggKSxcclxuICAgIHk6IGluZGV4VG9Sb3coIGluZGV4LCBncmlkV2lkdGggKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAoIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgYW1vdW50OiBudW1iZXIgKTogbnVtYmVyIHtcclxuICByZXR1cm4gKCAxIC0gYW1vdW50ICkgKiBtaW4gKyBhbW91bnQgKiBtYXg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnNlTGVycCggYTogbnVtYmVyLCBiOiBudW1iZXIsIHZhbDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuICggdmFsIC0gYSApIC8gKCBiIC0gYSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtYXAoIGluTWluOiBudW1iZXIsIGluTWF4OiBudW1iZXIsIG91dE1pbjogbnVtYmVyLCBvdXRNYXg6IG51bWJlciwgdmFsOiBudW1iZXIgKTogbnVtYmVyIHtcclxuICByZXR1cm4gbGVycCggb3V0TWluLCBvdXRNYXgsIGludmVyc2VMZXJwKCBpbk1pbiwgaW5NYXgsIHZhbCApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21JbnRFeGNsdXNpdmUoIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciApIHtcclxuICByZXR1cm4gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqICggbWF4IC0gbWluICkgKyBtaW4gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWxTZXRzPFQ+KCBzZXQxOiBTZXQ8VD4sIHNldDI6IFNldDxUPiApIHtcclxuICByZXR1cm4gc2V0MS5zaXplID09PSBzZXQyLnNpemUgJiZcclxuICAgIFsuLi5zZXQxXS5ldmVyeSggKCB4ICkgPT4gc2V0Mi5oYXMoIHggKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50SW5jbHVzaXZlKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XHJcbiAgbWluID0gTWF0aC5jZWlsKCBtaW4gKTtcclxuICBtYXggPSBNYXRoLmZsb29yKCBtYXggKTtcclxuICByZXR1cm4gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqICggbWF4IC0gbWluICsgMSApICkgKyBtaW47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21Gcm9tQXJyYXk8VD4oIGFycjogQXJyYXk8VD4gKSB7XHJcbiAgcmV0dXJuIGFycltnZXRSYW5kb21JbnRFeGNsdXNpdmUoIDAsIGFyci5sZW5ndGggKV07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCggbnVtOiBudW1iZXIgPSAwLCBtaW46IG51bWJlciA9IDAsIG1heDogbnVtYmVyID0gMTAwICk6IG51bWJlciB7XHJcbiAgcmV0dXJuIE1hdGgubWF4KCBtaW4sIE1hdGgubWluKCBudW0sIG1heCApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaW51dGVzVG9NaWxsaXNlY29uZHMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zICogNjAwMDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb01pbnV0ZXMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zIC8gNjAwMDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb0hvdXJzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAvIDMuNmUrNjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pbGxpc2Vjb25kc1RvRGF5cyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgLyA4LjY0ZSs3O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWVnYWJ5dGVUb0J5dGUoIG1iOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1iICogMTAyNCAqIDEwMjQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBieXRlVG9NZWdhYnl0ZSggYjogbnVtYmVyICkge1xyXG4gIHJldHVybiBiIC8gMTAyNCAvIDEwMjQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBcnJheUZyb21SYW5nZSggc2l6ZTogbnVtYmVyLCBzdGFydGluZ0Zyb206IG51bWJlciA9IDAgKTogbnVtYmVyW10ge1xyXG4gIGxldCByZXN1bHQgPSBbLi4uQXJyYXkoIHNpemUgKS5rZXlzKCldXHJcblxyXG4gIGlmICggc3RhcnRpbmdGcm9tICE9IDAgKSB7XHJcbiAgICByZXN1bHQgPSByZXN1bHQubWFwKCBpID0+IGkgKyBzdGFydGluZ0Zyb20gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IE9iamVjdEV2ZW50TGlzdGVuZXIgfSBmcm9tICcuL09iamVjdEV2ZW50TGlzdGVuZXInO1xyXG5pbXBvcnQgeyBnZXREaXN0YW5jZUZyb21Cb3JkZXIsIGdldFRyYW5zZm9ybUNvb3Jkc0Zyb21FbGVtZW50LCByZWdleFJlbW92ZVRyYW5zbGF0ZUZyb21UcmFuc2Zvcm0gfSBmcm9tICcuLi9Ub29scy9ET01Ub29scyc7XHJcbmltcG9ydCB7IFBvaW50MkQgfSBmcm9tICcuLi9Ub29scy9NYXRoVG9vbHMnO1xyXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRNb3ZpbmdTdGF0ZSB7XHJcbiAgcG9zOiBQb2ludDJEO1xyXG4gIGRlbHRhOiB7XHJcbiAgICBkeDogbnVtYmVyLFxyXG4gICAgZHk6IG51bWJlclxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1vdmFibGVPcHRpb25zID0ge1xyXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gIG9uQmVmb3JlTW92ZT86IE9uTW92ZUV2ZW50O1xyXG4gIG9uQWZ0ZXJNb3ZlPzogT25Nb3ZlRXZlbnQ7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgdHlwZSBPbk1vdmVFdmVudCA9ICggKCBlbGVtZW50OiBIVE1MRWxlbWVudCwgZHJhZ2dhYmxlOiBNb3ZhYmxlRWxlbWVudCApID0+IHZvaWQgKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBNb3ZhYmxlRWxlbWVudCBleHRlbmRzIE9iamVjdEV2ZW50TGlzdGVuZXIge1xyXG4gIHB1YmxpYyByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICBwcm90ZWN0ZWQgbW92aW5nU3RhdGU6IEVsZW1lbnRNb3ZpbmdTdGF0ZTtcclxuICBwdWJsaWMgaW50ZXJ2YWxVcGRhdGVQb3NpdGlvbjogTm9kZUpTLlRpbWVvdXQ7XHJcbiAgcHVibGljIG9uQmVmb3JlTW92ZT86IE9uTW92ZUV2ZW50O1xyXG4gIHB1YmxpYyBvbkFmdGVyTW92ZT86IE9uTW92ZUV2ZW50O1xyXG5cclxuICBjb25zdHJ1Y3Rvciggb3B0aW9uczogTW92YWJsZU9wdGlvbnMgKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIGlmICggIW9wdGlvbnMuZWxlbWVudCApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIk51bGwgbW92YWJsZSBlbGVtZW50LiBQbGVhc2UgcGFzcyBhIHZhbGlkIGVsZW1lbnQgaW4gY29uc3RydWN0b3IuXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XHJcbiAgICB0aGlzLm9uQmVmb3JlTW92ZSA9IG9wdGlvbnMub25CZWZvcmVNb3ZlO1xyXG4gICAgdGhpcy5vbkFmdGVyTW92ZSA9IG9wdGlvbnMub25BZnRlck1vdmU7XHJcblxyXG4gICAgdGhpcy5tb3ZpbmdTdGF0ZSA9IHtcclxuICAgICAgcG9zOiB7XHJcbiAgICAgICAgeDogMCxcclxuICAgICAgICB5OiAwXHJcbiAgICAgIH0sXHJcbiAgICAgIGRlbHRhOiB7XHJcbiAgICAgICAgZHg6IDAsXHJcbiAgICAgICAgZHk6IDBcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmludGVydmFsVXBkYXRlUG9zaXRpb24gPSBzZXRJbnRlcnZhbCggdGhpcy51cGRhdGVQb3NpdGlvbi5iaW5kKCB0aGlzICksIDIwMCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBwb3NpdGlvbigpOiBQb2ludDJEIHtcclxuICAgIHJldHVybiB0aGlzLm1vdmluZ1N0YXRlLnBvcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgcG9zaXRpb24oIG5ld1BvczogUG9pbnQyRCApIHtcclxuICAgIHRoaXMubW92ZVRvUG9zaXRpb24oIG5ld1Bvcy54LCBuZXdQb3MueSApXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLm1vdmluZ1N0YXRlLnBvcy54O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCB4KCBuZXdYOiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLm1vdmVUb1Bvc2l0aW9uKCBuZXdYLCB0aGlzLnkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgeSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubW92aW5nU3RhdGUucG9zLnk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IHkoIG5ld1k6IG51bWJlciApIHtcclxuICAgIHRoaXMubW92ZVRvUG9zaXRpb24oIHRoaXMueCwgbmV3WSApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRUcmFuc2xhdGUoIG5ld1g6IG51bWJlciwgbmV3WTogbnVtYmVyICkge1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25CZWZvcmVNb3ZlJywgdGhpcy5lbGVtZW50LCB0aGlzICk7XHJcbiAgICBpZiAoIHRoaXMub25CZWZvcmVNb3ZlICkge1xyXG4gICAgICB0aGlzLm9uQmVmb3JlTW92ZSggdGhpcy5lbGVtZW50LCB0aGlzICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZXNldFRyYW5zbGF0ZSgpO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybSArPSBgdHJhbnNsYXRlKCR7IG5ld1ggfXB4LCAkeyBuZXdZIH1weClgO1xyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uQWZ0ZXJNb3ZlJywgdGhpcy5lbGVtZW50LCB0aGlzICk7XHJcbiAgICBpZiAoIHRoaXMub25BZnRlck1vdmUgKSB7XHJcbiAgICAgIHRoaXMub25BZnRlck1vdmUoIHRoaXMuZWxlbWVudCwgdGhpcyApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRUcmFuc2xhdGVCeVBvaW50MkQoIHBvaW50OiBQb2ludDJEICkge1xyXG4gICAgdGhpcy5zZXRUcmFuc2xhdGUoIHBvaW50LngsIHBvaW50LnkgKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCB1cGRhdGVQb3NpdGlvbigpOiB2b2lkIHtcclxuICAgIHRoaXMubW92aW5nU3RhdGUucG9zID0gZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQoIHRoaXMuZWxlbWVudCApO1xyXG4gICAgdGhpcy5tb3ZpbmdTdGF0ZS5kZWx0YS5keCA9IDA7XHJcbiAgICB0aGlzLm1vdmluZ1N0YXRlLmRlbHRhLmR5ID0gMDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRUcmFuc2xhdGUoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybS5yZXBsYWNlKCByZWdleFJlbW92ZVRyYW5zbGF0ZUZyb21UcmFuc2Zvcm0sICcnICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbW92ZVRvUG9zaXRpb24oIHg6IG51bWJlciwgeTogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5tb3ZpbmdTdGF0ZS5wb3MgPSB7IHg6IHggKyB0aGlzLm1vdmluZ1N0YXRlLmRlbHRhLmR4LCB5OiB5ICsgdGhpcy5tb3ZpbmdTdGF0ZS5kZWx0YS5keSB9O1xyXG4gICAgdGhpcy5zZXRUcmFuc2xhdGVCeVBvaW50MkQoIHRoaXMubW92aW5nU3RhdGUucG9zICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbW92ZVRvUG9pbnQyRCggcG9pbnQ6IFBvaW50MkQgKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vdmluZ1N0YXRlLnBvcyA9IHsgeDogcG9pbnQueCArIHRoaXMubW92aW5nU3RhdGUuZGVsdGEuZHgsIHk6IHBvaW50LnkgKyB0aGlzLm1vdmluZ1N0YXRlLmRlbHRhLmR5IH07XHJcbiAgICB0aGlzLnNldFRyYW5zbGF0ZUJ5UG9pbnQyRCggdGhpcy5tb3ZpbmdTdGF0ZS5wb3MgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBtb3ZlVG9UYXJnZXRFbGVtZW50KCB0YXJnZXQ6IEhUTUxFbGVtZW50ICkge1xyXG4gICAgY29uc3QgdGFyZ2V0UmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IGVsZW1lbnRUcmFuc2Zvcm1Qb3NpdGlvbiA9IGdldFRyYW5zZm9ybUNvb3Jkc0Zyb21FbGVtZW50KCB0aGlzLmVsZW1lbnQgKTtcclxuICAgIGNvbnN0IGRpc3RhbmNlRnJvbUJvcmRlciA9IGdldERpc3RhbmNlRnJvbUJvcmRlciggdGhpcy5lbGVtZW50LCB0YXJnZXQgKTtcclxuICAgIGNvbnN0IHRhcmdldFJpZ2h0UG9zaXRpb24gPSBlbGVtZW50VHJhbnNmb3JtUG9zaXRpb24ueCArIGRpc3RhbmNlRnJvbUJvcmRlci5yaWdodDtcclxuICAgIGNvbnN0IHRhcmdldEJvdHRvbVBvc2l0aW9uID0gZWxlbWVudFRyYW5zZm9ybVBvc2l0aW9uLnkgKyBkaXN0YW5jZUZyb21Cb3JkZXIuYm90dG9tO1xyXG5cclxuICAgIHRoaXMuc2V0VHJhbnNsYXRlQnlQb2ludDJEKCB7XHJcbiAgICAgIHg6IE1hdGgucm91bmQoIHRhcmdldFJpZ2h0UG9zaXRpb24gLSB0YXJnZXRSZWN0LndpZHRoICksXHJcbiAgICAgIHk6IE1hdGgucm91bmQoIHRhcmdldEJvdHRvbVBvc2l0aW9uIC0gdGFyZ2V0UmVjdC5oZWlnaHQgKVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG1vdmVUb0NlbnRlck9mVGFyZ2V0RWxlbWVudCggdGFyZ2V0OiBIVE1MRWxlbWVudCApOiB2b2lkIHtcclxuICAgIGNvbnN0IHRhcmdldFJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBlbGVtZW50VHJhbnNmb3JtUG9zaXRpb24gPSBnZXRUcmFuc2Zvcm1Db29yZHNGcm9tRWxlbWVudCggdGhpcy5lbGVtZW50ICk7XHJcbiAgICBjb25zdCBkaXN0YW5jZUZyb21Cb3JkZXIgPSBnZXREaXN0YW5jZUZyb21Cb3JkZXIoIHRoaXMuZWxlbWVudCwgdGFyZ2V0ICk7XHJcbiAgICBjb25zdCB0YXJnZXRSaWdodFBvc2l0aW9uID0gZWxlbWVudFRyYW5zZm9ybVBvc2l0aW9uLnggKyBkaXN0YW5jZUZyb21Cb3JkZXIucmlnaHQ7XHJcbiAgICBjb25zdCB0YXJnZXRCb3R0b21Qb3NpdGlvbiA9IGVsZW1lbnRUcmFuc2Zvcm1Qb3NpdGlvbi55ICsgZGlzdGFuY2VGcm9tQm9yZGVyLmJvdHRvbTtcclxuXHJcbiAgICB0aGlzLnNldFRyYW5zbGF0ZUJ5UG9pbnQyRCgge1xyXG4gICAgICB4OiBNYXRoLnJvdW5kKCB0YXJnZXRSaWdodFBvc2l0aW9uIC0gKCB0YXJnZXRSZWN0LndpZHRoIC8gMiApICksXHJcbiAgICAgIHk6IE1hdGgucm91bmQoIHRhcmdldEJvdHRvbVBvc2l0aW9uIC0gKCB0YXJnZXRSZWN0LmhlaWdodCAvIDIgKSApXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIG1ha2VFbGVtZW50TW92YWJsZSggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogTW92YWJsZUVsZW1lbnQge1xyXG4gICAgcmV0dXJuIG5ldyBNb3ZhYmxlRWxlbWVudCggeyBlbGVtZW50IH0gKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiT2JqZWN0RXZlbnRMaXN0ZW5lciIsImV2ZW50c0J5TmFtZSIsIk1hcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJldmVudCIsIm5ld0V2ZW50IiwiaWQiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwidGhpcyIsImhhcyIsInRvTG93ZXJDYXNlIiwiZ2V0IiwicHVzaCIsInNldCIsImdldEV2ZW50c0J5TmFtZSIsInJlbW92ZUV2ZW50QnlJZCIsImV2ZW50SWQiLCJmb3JFYWNoIiwidmFsdWUiLCJrZXkiLCJmaWx0ZXIiLCJlIiwiY2FsbEV2ZW50c0J5TmFtZSIsImV2ZW50QXJncyIsInJlZ2V4UmVtb3ZlVHJhbnNsYXRlRnJvbVRyYW5zZm9ybSIsInJlZ2V4R3JvdXBSb3RhdGVWYWx1ZSIsInJlZ2V4R3JvdXBSb3RhdGVYVmFsdWUiLCJyZWdleEdyb3VwUm90YXRlWVZhbHVlIiwicmVnZXhHcm91cFJvdGF0ZVpWYWx1ZSIsImRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSIsImRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0IiwiZGljdEtleXNCeUFjdGlvbktleXVwIiwiZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiIsImVsZW1lbnQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2VudGVyWCIsImxlZnQiLCJ3aWR0aCIsImNlbnRlclkiLCJ0b3AiLCJoZWlnaHQiLCJyb3RhdGlvbkFuZ2xlIiwibWF0Y2giLCJheGlzIiwiZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkJhc2VkT25BeGlzIiwiZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyIsImRvY3VtZW50IiwiYm9keSIsImV4ZWMiLCJzdHlsZSIsInRyYW5zZm9ybSIsInBhcnNlRmxvYXQiLCJnZXRCb2R5Um90YXRpb25JbkRlZ3JlZXMiLCJyYWRpYW5zIiwiTWF0aCIsIlBJIiwiY29zVGhldGEiLCJjb3MiLCJzaW5UaGV0YSIsInNpbiIsInJvdGF0ZWRYMSIsInJvdGF0ZWRZMSIsInJvdGF0ZWRYMiIsInJpZ2h0IiwiYm90dG9tIiwicm90YXRlZFkyIiwicm90YXRlZExlZnQiLCJtaW4iLCJyb3RhdGVkVG9wIiwicm90YXRlZEJvdHRvbSIsIm1heCIsInJvdGF0ZWRSaWdodCIsIngiLCJ5IiwidG9KU09OIiwiZ2V0RGlzdGFuY2VGcm9tQm9yZGVyIiwiZHJhZ2dhYmxlIiwidGFyZ2V0IiwiY2hlY2tCb2R5Um90YXRpb24iLCJyZWN0MSIsInJlY3QyIiwiY2VudGVyIiwiZWxlbWVudFRyYW5zZm9ybSIsImluY2x1ZGVzIiwiZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQiLCJhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZSIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJyZWdleE51bWJlclBhdHRlcm4iLCJtYXAiLCJuIiwicmVzdWx0IiwidW5kZWZpbmVkIiwicm91bmQiLCJib2R5QW5nbGUiLCJyZWdleE1hdGNoUm90YXRlVmFsdWUiLCJnZXRFbGVtZW50Um90YXRpb25JbkRlZ3JlZXMiLCJyb3RhdGVDb29yZGluYXRlcyIsImV2dCIsInJlcGVhdCIsInBhaXIiLCJjb2RlIiwia2JFdmVudCIsInJ1bk9ubHlPbmNlS2V5ZG93bkFjdGlvbnMiLCJydW5LZXlkb3duQWN0aW9uc1JlcGVhdCIsImFuZ2xlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiTW92YWJsZUVsZW1lbnQiLCJtb3ZpbmdTdGF0ZSIsImludGVydmFsVXBkYXRlUG9zaXRpb24iLCJvbkJlZm9yZU1vdmUiLCJvbkFmdGVyTW92ZSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInN1cGVyIiwiRXJyb3IiLCJwb3MiLCJkZWx0YSIsImR4IiwiZHkiLCJzZXRJbnRlcnZhbCIsInVwZGF0ZVBvc2l0aW9uIiwiYmluZCIsInBvc2l0aW9uIiwibmV3UG9zIiwibW92ZVRvUG9zaXRpb24iLCJuZXdYIiwibmV3WSIsInNldFRyYW5zbGF0ZSIsInJlc2V0VHJhbnNsYXRlIiwic2V0VHJhbnNsYXRlQnlQb2ludDJEIiwicG9pbnQiLCJyZXBsYWNlIiwibW92ZVRvUG9pbnQyRCIsIm1vdmVUb1RhcmdldEVsZW1lbnQiLCJ0YXJnZXRSZWN0IiwiZWxlbWVudFRyYW5zZm9ybVBvc2l0aW9uIiwiZGlzdGFuY2VGcm9tQm9yZGVyIiwidGFyZ2V0UmlnaHRQb3NpdGlvbiIsInRhcmdldEJvdHRvbVBvc2l0aW9uIiwibW92ZVRvQ2VudGVyT2ZUYXJnZXRFbGVtZW50IiwibWFrZUVsZW1lbnRNb3ZhYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==
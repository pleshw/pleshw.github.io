var CollisionAction;(()=>{"use strict";var t={33:(t,e,n)=>{n.d(e,{BorderDistanceExtras:()=>i});class i{collisionBorderDistances;constructor(t){this.collisionBorderDistances=t}anyGreaterThan(t){return this.collisionBorderDistances.top>t||this.collisionBorderDistances.right>t||this.collisionBorderDistances.bottom>t||this.collisionBorderDistances.left>t}anyLowerThan(t){return this.collisionBorderDistances.top<t||this.collisionBorderDistances.right<t||this.collisionBorderDistances.bottom<t||this.collisionBorderDistances.left<t}anyEquals(t){return this.collisionBorderDistances.top===t||this.collisionBorderDistances.right===t||this.collisionBorderDistances.bottom===t||this.collisionBorderDistances.left===t}}},125:(t,e,n)=>{n.r(e),n.d(e,{PinCollisionEvent:()=>s.PinCollisionEvent,ShareAttributeCollisionEvent:()=>o.ShareAttributeCollisionEvent,cleanNotCollidingElementsAttributesAndClasses:()=>h,getElementsCollidingByTarget:()=>u,getElementsCollidingByTrigger:()=>p,getElementsInteractingSet:()=>b,initComplexCollisionCheck:()=>E,insertIntoEventCheckList:()=>d,mapElementsCollidingByTargets:()=>r,mapElementsTriggeringEventsByTarget:()=>l,mapTargetsCollidingByTriggerElement:()=>a,setCollisionClasses:()=>m});var i=n(319),s=n(488),o=n(368);const r=new Map,a=new Map,l=new Map;let c;const g=new Map;function d(t,e,n){const i=g.get(e);i?i.push({triggerElement:t,events:n}):g.set(e,[{triggerElement:t,events:n}])}function h(t,e,n,i){t.delete(e)&&0===t.size&&i.triggerElement.classList.remove("colliding"),n.delete(i.triggerElement)&&0===n.size&&e.classList.remove("colliding")}function m(t,e){t.triggerElement.classList.add("colliding"),e.classList.add("colliding")}function u(t){return r.has(t)||r.set(t,new Set),r.get(t)}function p(t){return a.has(t)||a.set(t,new Set),a.get(t)}function f(){g.forEach((async(t,e)=>{!function(t,e){t.forEach((async t=>{const n=u(t);e.forEach((async e=>{if(e.triggerElement===t)return;const s=p(e.triggerElement);(0,i.checkElementCollision)(e.triggerElement,t,!0)?(s.add(t),n.add(e.triggerElement),m(e,t),await async function(t,e){const n=(0,i.getCollisionDirection)(t.triggerElement,e),s=(0,i.getDistanceFromBorder)(t.triggerElement,e);await Promise.all(t.events.map((i=>{i.enabled&&i.onColliding(t.triggerElement,e,n,s)})))}(e,t)):await async function(t,e,n,i){h(t,e,n,i),await Promise.all(i.events.map((t=>{t.enabled&&t.onNotColliding(i.triggerElement,e)})))}(s,t,n,e)}))}))}(Array.from(document.querySelectorAll(e)),t)})),requestAnimationFrame(f)}function E(t,e,n){d(t,e,n),c||requestAnimationFrame(f)}function b(t){return l.has(t)||l.set(t,new Set),l.get(t)}},476:(t,e,n)=>{n.d(e,{CollisionEvent:()=>o});var i=n(930),s=n(33);class o extends i.ObjectEventListener{enabled=!0;isValidTargetToTriggerEvent(t,e,n){return!!this.enabled&&(!(this.checkTargetClass&&!t.classList.contains(e))&&(!n||!new s.BorderDistanceExtras(n.distanceFromBorder).anyLowerThan(n.distanceThreshold)))}}},488:(t,e,n)=>{n.d(e,{PinCollisionEvent:()=>r});var i=n(319),s=n(125),o=n(476);class r extends o.CollisionEvent{onPinEvents;onUnpinEvents;pinPositionFormula;checkTargetClass;targetClass="pin-target";constructor({pinPositionFormula:t,onPin:e,onUnpin:n,checkTargetClass:i}){super(),this.pinPositionFormula=t||void 0,this.onPinEvents=e?[e]:[],this.onUnpinEvents=n?[n]:[],this.checkTargetClass=void 0!==i&&i}async onColliding(t,e,n,o){if(!this.isValidTargetToTriggerEvent(e,this.targetClass,{distanceFromBorder:o,distanceThreshold:0}))return;const r=(0,s.getElementsInteractingSet)(e),l="total-pinned-elements";if(t.classList.contains("dragging"))return t.classList.remove("pinned"),t.classList.add("ready-to-pin"),void(r.delete(t)&&(this.onElementInteractionChange(e,r,l),!this.onUnpinEvents||this.onUnpinEvents.forEach((n=>n(t,e))),this.getEventsByName("onunpin").forEach((n=>n(t,e)))));this.pinPositionFormula?function(t,e,n,s){const o=e.getBoundingClientRect(),r=s(t.getBoundingClientRect(),o,(0,i.getTransformCoordsFromElement)(t),n);a(t),t.style.transform+=`translate(${r.x}px, ${r.y}px)`}(t,e,o,this.pinPositionFormula):function(t,e,n){const s=e.getBoundingClientRect(),o=(0,i.getTransformCoordsFromElement)(t),r=o.x+n.right,l=o.y+n.bottom,c=Math.round(r-s.width/2),g=Math.round(l-s.height/2);a(t),t.style.transform+=`translate(${c}px, ${g}px)`}(t,e,o),r.has(t)||(r.add(t),!this.onPinEvents||this.onPinEvents.forEach((n=>n(t,e))),this.getEventsByName("onpin").forEach((n=>n(t,e)))),t.classList.add("pinned"),t.classList.remove("ready-to-pin"),this.onElementInteractionChange(e,r,l)}async onNotColliding(t,e){const n=(0,s.getElementsInteractingSet)(e);n.delete(t),n.size>0?e.classList.add("has-pinned-elements"):e.classList.remove("has-pinned-elements"),s.mapTargetsCollidingByTriggerElement.has(t)||s.mapTargetsCollidingByTriggerElement.set(t,new Set);const i=s.mapTargetsCollidingByTriggerElement.get(t);i.delete(e)&&0===i.size&&t.classList.remove("pinned","ready-to-pin")}onElementInteractionChange(t,e,n){e.size>0?t.classList.add("has-pinned-elements"):t.classList.remove("has-pinned-elements"),t.setAttribute(n,e.size.toString())}}function a(t){t.style.transform=t.style.transform.replace(i.regexRemoveTranslateFromTransform,"")}},368:(t,e,n)=>{n.d(e,{ShareAttributeCollisionEvent:()=>a});var i=n(319),s=n(125),o=n(476);const r={keepAttribute:!1};class a extends o.CollisionEvent{checkTargetClass;keepAttribute;targetClass="attribute-target";constructor(t=r){super(),this.keepAttribute=t.keepAttribute||!1,this.checkTargetClass=t.checkTargetClass||!0}async onColliding(t,e,n,i){const o=t.getAttribute("shared-attribute-name"),r=t.getAttribute("shared-attribute-value");if(!r||!o||!this.isValidTargetToTriggerEvent(e,this.targetClass))return;const a=(0,s.getElementsInteractingSet)(e),l="total-sharing-attributes";t.classList.contains("dragging")?(t.classList.remove("sharing-attribute"),t.classList.add("ready-to-share-attribute"),this.handleElementInteractionShareAttribute(t,e,a,l)):(t.classList.add("sharing-attribute"),t.classList.remove("ready-to-share-attribute"),e.setAttribute(o,r),a.add(t),this.handleElementInteractionShareAttribute(t,e,a,l))}async onNotColliding(t,e){(0,s.getElementsInteractingSet)(e).size>0?e.classList.add("sharing-attribute"):this.onSharedAttributeEmpty(t,e),s.mapTargetsCollidingByTriggerElement.has(t)||s.mapTargetsCollidingByTriggerElement.set(t,new Set);const n=s.mapTargetsCollidingByTriggerElement.get(t);(n.delete(e)||0===n.size)&&t.classList.remove("sharing-attribute","ready-to-share-attribute")}handleElementInteractionShareAttribute(t,e,n,i){n.size>0?e.classList.add("sharing-attribute"):this.onSharedAttributeEmpty(t,e),e.setAttribute(i,n.size.toString())}onSharedAttributeEmpty(t,e){e.classList.remove("sharing-attribute");const n=t.getAttribute("shared-attribute-name");if(n){const t=(0,i.getDefaultAttributeForTarget)(e,n);t?e.setAttribute(n,t):this.keepAttribute||e.removeAttribute(n)}}}},930:(t,e,n)=>{n.d(e,{ObjectEventListener:()=>i});class i{eventsByName=new Map;addEventListener(t,e){this.eventsByName.has(t.toLowerCase())?this.eventsByName.get(t.toLowerCase()).push(e):this.eventsByName.set(t.toLowerCase(),[e])}getEventsByName(t){return this.eventsByName.has(t.toLowerCase())||this.eventsByName.set(t.toLowerCase(),[]),this.eventsByName.get(t.toLowerCase())}callEventsByName(t,...e){this.getEventsByName(t).forEach((t=>t(...e)))}}},319:(t,e,n)=>{n.d(e,{checkElementCollision:()=>m,getCollisionDirection:()=>f,getDefaultAttributeForTarget:()=>p,getDistanceFromBorder:()=>E,getTransformCoordsFromElement:()=>y,regexRemoveTranslateFromTransform:()=>s});var i=n(739);const s=/translate\([^)]*\)/g,o=/rotate\((-?\d+\.?\d*)deg\)/,r=/rotateX\((-?\d+\.?\d*)deg\)/,a=/rotateY\((-?\d+\.?\d*)deg\)/,l=/rotateZ\((-?\d+\.?\d*)deg\)/,c=new Map,g=new Map,d=new Map;function h(t){const e=t.getBoundingClientRect(),n=e.left+e.width/2,i=e.top+e.height/2,s=function(){const t=function(t){switch(t){case"x":return r;case"y":return a;case"z":return l;default:return o}}(b(document.body)).exec(document.body.style.transform);return t?parseFloat(t[1]):0}(),c=Math.PI/180*s,g=Math.cos(c),d=Math.sin(c),h=n+(e.left-n)*g-(e.top-i)*d,m=i+(e.left-n)*d+(e.top-i)*g,u=n+(e.right-n)*g-(e.bottom-i)*d,p=i+(e.right-n)*d+(e.bottom-i)*g,f=Math.min(h,u),E=Math.min(m,p),y=Math.max(m,p),v=Math.max(h,u);return{x:f,y:E,width:e.width,height:e.height,toJSON:e.toJSON,left:f,top:E,bottom:y,right:v}}function m(t,e,n=!1){const i=n?h(t):t.getBoundingClientRect(),s=n?h(e):e.getBoundingClientRect();return!(i.top>s.bottom||i.right<s.left||i.bottom<s.top||i.left>s.right)}const u=new Map;function p(t,e){u.has(t)||u.set(t,new Map);let n="";const i=u.get(t);return n=(i.has(e)?i.get(e):t.getAttribute(e))||"",function(t,e,n){u.has(t)||u.set(t,new Map),u.get(t).set(e,n)}(t,e,n),n}function f(t,e,n=!1){const i=n?h(t):t.getBoundingClientRect(),s=n?h(e):e.getBoundingClientRect();return{top:i.bottom>s.top&&i.top<s.top+s.height/3,right:i.left<s.right&&i.right>s.right-s.width/3,center:i.top<s.bottom&&i.bottom>s.top&&i.left<s.right&&i.right>s.left,bottom:i.top<s.bottom-s.height/3&&i.bottom>s.bottom-s.height/3,left:i.right>s.left&&i.left<s.left+s.width/3}}function E(t,e,n=!1){const i=n?h(t):t.getBoundingClientRect(),s=n?h(e):e.getBoundingClientRect(),o=i.left+i.width/2,r=i.top+i.height/2;return{top:r-s.top,right:s.right-o,bottom:s.bottom-r,left:o-s.left}}function b(t){const e=t.style.transform.toLowerCase();return e.includes("x")?"x":e.includes("y")?"y":"z"}function y(t,e=!1){const n=(window.getComputedStyle(t).transform.match(i.regexNumberPattern)??[0,0]).map((t=>+t));let s={x:void 0!==n[4]?Math.round(n[4]):0,y:void 0!==n[5]?Math.round(n[5]):0};if(e){const e=function(t,e="x"){let n;switch(e){case"x":n=r;break;case"y":n=a;break;case"z":n=l;break;default:n=o}const i=n.exec(t.style.transform);return i?parseFloat(i[1]):0}(document.body,b(t))||0;return(0,i.rotateCoordinates)(s.x,s.y,e)}return s}window.addEventListener("keydown",(t=>{t.repeat||function(t){for(const e of c)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t),function(t){for(const e of g)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t)})),window.addEventListener("keyup",(t=>{for(const e of d)t.code===e[0]&&e[1].forEach((e=>e(t)))}))},739:(t,e,n)=>{n.d(e,{regexNumberPattern:()=>i,rotateCoordinates:()=>s});const i=/-?\d+\.?\d*/g;function s(t,e,n){const i=Math.PI/180*n;return{x:t*Math.cos(i)-e*Math.sin(i),y:t*Math.sin(i)+e*Math.cos(i)}}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i=n(125);CollisionAction=i})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxDLEdDcENJZ0QsRUFBMkIsQ0FBQyxFQUdoQyxTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCN0gsSUFBakI4SCxFQUNILE9BQU9BLEVBQWFDLFFBR3JCLElBQUlDLEVBQVNMLEVBQXlCRSxHQUFZLENBR2pERSxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkosR0FBVUcsRUFBUUEsRUFBT0QsUUFBU0gsR0FHL0NJLEVBQU9ELE9BQ2YsQ0NyQkFILEVBQW9CTSxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFAsRUFBb0JTLEVBQUVGLEVBQVlDLEtBQVNSLEVBQW9CUyxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU03TSxJQUFLd00sRUFBV0MsSUFFMUUsRUNORFIsRUFBb0JTLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVUosT0FBT0ssVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDbEZkLEVBQW9Ca0IsRUFBS2YsSUFDSCxvQkFBWGdCLFFBQTBCQSxPQUFPQyxhQUMxQ1YsT0FBT0MsZUFBZVIsRUFBU2dCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFgsT0FBT0MsZUFBZVIsRUFBUyxhQUFjLENBQUVrQixPQUFPLEdBQU8sRUNGOUQsSUFBSUMsRUFBc0J0QixFQUFvQixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0V4dHJhcy9Db2xsaXNpb25FdmVudHMvQm9yZGVyRGlzdGFuY2VFeHRyYXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0V4dHJhcy9Db2xsaXNpb25FdmVudHMvQ29sbGlzaW9uQWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9FeHRyYXMvQ29sbGlzaW9uRXZlbnRzL0NvbGxpc2lvbkV2ZW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0cmFzL0NvbGxpc2lvbkV2ZW50cy9QaW5Db2xsaXNpb25FdmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0cmFzL0NvbGxpc2lvbkV2ZW50cy9TaGFyZUF0dHJpYnV0ZUNvbGxpc2lvbkV2ZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvRE9NVG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Rvb2xzL01hdGhUb29scy50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly8vd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvcmRlckRpc3RhbmNlIH0gZnJvbSAnLi9UeXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQm9yZGVyRGlzdGFuY2VFeHRyYXMge1xyXG4gIGNvbGxpc2lvbkJvcmRlckRpc3RhbmNlczogQm9yZGVyRGlzdGFuY2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCBjb2xsaXNpb25Cb3JkZXJEaXN0YW5jZTogQm9yZGVyRGlzdGFuY2UgKSB7XHJcbiAgICB0aGlzLmNvbGxpc2lvbkJvcmRlckRpc3RhbmNlcyA9IGNvbGxpc2lvbkJvcmRlckRpc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFueUdyZWF0ZXJUaGFuKCBudW06IG51bWJlciApOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmNvbGxpc2lvbkJvcmRlckRpc3RhbmNlcy50b3AgPiBudW1cclxuICAgICAgfHwgdGhpcy5jb2xsaXNpb25Cb3JkZXJEaXN0YW5jZXMucmlnaHQgPiBudW1cclxuICAgICAgfHwgdGhpcy5jb2xsaXNpb25Cb3JkZXJEaXN0YW5jZXMuYm90dG9tID4gbnVtXHJcbiAgICAgIHx8IHRoaXMuY29sbGlzaW9uQm9yZGVyRGlzdGFuY2VzLmxlZnQgPiBudW07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYW55TG93ZXJUaGFuKCBudW06IG51bWJlciApOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmNvbGxpc2lvbkJvcmRlckRpc3RhbmNlcy50b3AgPCBudW1cclxuICAgICAgfHwgdGhpcy5jb2xsaXNpb25Cb3JkZXJEaXN0YW5jZXMucmlnaHQgPCBudW1cclxuICAgICAgfHwgdGhpcy5jb2xsaXNpb25Cb3JkZXJEaXN0YW5jZXMuYm90dG9tIDwgbnVtXHJcbiAgICAgIHx8IHRoaXMuY29sbGlzaW9uQm9yZGVyRGlzdGFuY2VzLmxlZnQgPCBudW07XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYW55RXF1YWxzKCBudW06IG51bWJlciApOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmNvbGxpc2lvbkJvcmRlckRpc3RhbmNlcy50b3AgPT09IG51bVxyXG4gICAgICB8fCB0aGlzLmNvbGxpc2lvbkJvcmRlckRpc3RhbmNlcy5yaWdodCA9PT0gbnVtXHJcbiAgICAgIHx8IHRoaXMuY29sbGlzaW9uQm9yZGVyRGlzdGFuY2VzLmJvdHRvbSA9PT0gbnVtXHJcbiAgICAgIHx8IHRoaXMuY29sbGlzaW9uQm9yZGVyRGlzdGFuY2VzLmxlZnQgPT09IG51bTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IGNoZWNrRWxlbWVudENvbGxpc2lvbiwgZ2V0Q29sbGlzaW9uRGlyZWN0aW9uLCBnZXREaXN0YW5jZUZyb21Cb3JkZXIgfSBmcm9tICcuLi8uLi9Ub29scy9ET01Ub29scyc7XHJcbmltcG9ydCB7IENvbGxpc2lvbkV2ZW50IH0gZnJvbSAnLi9Db2xsaXNpb25FdmVudHMnO1xyXG5pbXBvcnQgeyBQaW5Db2xsaXNpb25FdmVudCwgUGluUG9zaXRpb25Gb3JtdWxhIH0gZnJvbSAnLi9QaW5Db2xsaXNpb25FdmVudCc7XHJcbmltcG9ydCB7IFNoYXJlQXR0cmlidXRlQ29sbGlzaW9uRXZlbnQgfSBmcm9tICcuL1NoYXJlQXR0cmlidXRlQ29sbGlzaW9uRXZlbnQnO1xyXG5pbXBvcnQgeyBDb2xsaXNpb25UcmlnZ2VyT3B0aW9ucyB9IGZyb20gJy4vVHlwZXMnO1xyXG5cclxuXHJcbmV4cG9ydCB7IFNoYXJlQXR0cmlidXRlQ29sbGlzaW9uRXZlbnQsIFBpbkNvbGxpc2lvbkV2ZW50LCBQaW5Qb3NpdGlvbkZvcm11bGEgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBtYXBFbGVtZW50c0NvbGxpZGluZ0J5VGFyZ2V0cyA9IG5ldyBNYXA8SFRNTEVsZW1lbnQsIFNldDxIVE1MRWxlbWVudD4+KCk7XHJcbmV4cG9ydCBjb25zdCBtYXBUYXJnZXRzQ29sbGlkaW5nQnlUcmlnZ2VyRWxlbWVudCA9IG5ldyBNYXA8SFRNTEVsZW1lbnQsIFNldDxIVE1MRWxlbWVudD4+KCk7XHJcbmV4cG9ydCBjb25zdCBtYXBFbGVtZW50c1RyaWdnZXJpbmdFdmVudHNCeVRhcmdldCA9IG5ldyBNYXA8SFRNTEVsZW1lbnQsIFNldDxIVE1MRWxlbWVudD4+KCk7XHJcblxyXG5sZXQgY29sbGlzaW9uQ2hlY2tJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQ7XHJcbmNvbnN0IGNvbGxpc2lvbkV2ZW50c0J5U2VsZWN0b3JzID0gbmV3IE1hcDxzdHJpbmcsIENvbGxpc2lvblRyaWdnZXJPcHRpb25zW10+KCk7XHJcblxyXG4vLy8gcHVzaCBldmVudHMgdG8gYSBkaWN0aW9uYXJ5IGFuZCBpZiB0aGV5IGV4aXN0IGp1c3QgYWRkIG5ldyB0YXJnZXRzIHRvIHRoZW1cclxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEludG9FdmVudENoZWNrTGlzdCggZWxlbWVudFRvQ2hlY2s6IEhUTUxFbGVtZW50LCB0YXJnZXRRdWVyeVNlbGVjdG9yOiBzdHJpbmcsIGNvbGxpc2lvbkV2ZW50czogQ29sbGlzaW9uRXZlbnRbXSApIHtcclxuICBjb25zdCByZWZFeGlzdGluZ0V2ZW50OiBDb2xsaXNpb25UcmlnZ2VyT3B0aW9uc1tdIHwgdW5kZWZpbmVkID0gY29sbGlzaW9uRXZlbnRzQnlTZWxlY3RvcnMuZ2V0KCB0YXJnZXRRdWVyeVNlbGVjdG9yICk7XHJcbiAgaWYgKCByZWZFeGlzdGluZ0V2ZW50ICkge1xyXG4gICAgcmVmRXhpc3RpbmdFdmVudC5wdXNoKCB7XHJcbiAgICAgIHRyaWdnZXJFbGVtZW50OiBlbGVtZW50VG9DaGVjayxcclxuICAgICAgZXZlbnRzOiBjb2xsaXNpb25FdmVudHNcclxuICAgIH0gKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29sbGlzaW9uRXZlbnRzQnlTZWxlY3RvcnMuc2V0KCB0YXJnZXRRdWVyeVNlbGVjdG9yLCBbe1xyXG4gICAgICB0cmlnZ2VyRWxlbWVudDogZWxlbWVudFRvQ2hlY2ssXHJcbiAgICAgIGV2ZW50czogY29sbGlzaW9uRXZlbnRzXHJcbiAgICB9XSApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuTm90Q29sbGlkaW5nRWxlbWVudHNBdHRyaWJ1dGVzQW5kQ2xhc3NlcyggdHJpZ2dlckVsZW1lbnRzQ29sbGlzaW9uOiBTZXQ8SFRNTEVsZW1lbnQ+LCB0YXJnZXQ6IEhUTUxFbGVtZW50LCB0YXJnZXRDb2xsaXNpb246IFNldDxIVE1MRWxlbWVudD4sIGFnZW50OiBDb2xsaXNpb25UcmlnZ2VyT3B0aW9ucyApIHtcclxuICBpZiAoIHRyaWdnZXJFbGVtZW50c0NvbGxpc2lvbi5kZWxldGUoIHRhcmdldCBhcyBIVE1MRWxlbWVudCApICYmIHRyaWdnZXJFbGVtZW50c0NvbGxpc2lvbi5zaXplID09PSAwICkge1xyXG4gICAgYWdlbnQudHJpZ2dlckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ2NvbGxpZGluZycgKTtcclxuICB9XHJcblxyXG4gIGlmICggdGFyZ2V0Q29sbGlzaW9uLmRlbGV0ZSggYWdlbnQudHJpZ2dlckVsZW1lbnQgKSAmJiB0YXJnZXRDb2xsaXNpb24uc2l6ZSA9PT0gMCApIHtcclxuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCAnY29sbGlkaW5nJyApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldENvbGxpc2lvbkNsYXNzZXMoIGNvbGxpc2lvblRyaWdnZXI6IENvbGxpc2lvblRyaWdnZXJPcHRpb25zLCB0YXJnZXQ6IEhUTUxFbGVtZW50ICkge1xyXG4gIGNvbGxpc2lvblRyaWdnZXIudHJpZ2dlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ2NvbGxpZGluZycgKTtcclxuICB0YXJnZXQuY2xhc3NMaXN0LmFkZCggJ2NvbGxpZGluZycgKTtcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHRyaWdnZXJDb2xsaXNpb25FdmVudHNBc3luYyggY29sbGlzaW9uVHJpZ2dlcjogQ29sbGlzaW9uVHJpZ2dlck9wdGlvbnMsIHRhcmdldDogSFRNTEVsZW1lbnQgKSB7XHJcbiAgY29uc3QgY29sbGlkaW5nQXQgPSBnZXRDb2xsaXNpb25EaXJlY3Rpb24oIGNvbGxpc2lvblRyaWdnZXIudHJpZ2dlckVsZW1lbnQsIHRhcmdldCApO1xyXG4gIGNvbnN0IGRpc3RhbmNlRnJvbUJvcmRlciA9IGdldERpc3RhbmNlRnJvbUJvcmRlciggY29sbGlzaW9uVHJpZ2dlci50cmlnZ2VyRWxlbWVudCwgdGFyZ2V0ICk7XHJcbiAgYXdhaXQgUHJvbWlzZS5hbGwoIGNvbGxpc2lvblRyaWdnZXIuZXZlbnRzLm1hcCggZXZlbnQgPT4ge1xyXG4gICAgaWYgKCAhZXZlbnQuZW5hYmxlZCApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50Lm9uQ29sbGlkaW5nKFxyXG4gICAgICBjb2xsaXNpb25UcmlnZ2VyLnRyaWdnZXJFbGVtZW50LFxyXG4gICAgICB0YXJnZXQsXHJcbiAgICAgIGNvbGxpZGluZ0F0LFxyXG4gICAgICBkaXN0YW5jZUZyb21Cb3JkZXJcclxuICAgICk7XHJcbiAgfSApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50c0NvbGxpZGluZ0J5VGFyZ2V0KCB0YXJnZXQ6IEhUTUxFbGVtZW50ICk6IFNldDxIVE1MRWxlbWVudD4ge1xyXG4gIGlmICggIW1hcEVsZW1lbnRzQ29sbGlkaW5nQnlUYXJnZXRzLmhhcyggdGFyZ2V0ICkgKSB7XHJcbiAgICBtYXBFbGVtZW50c0NvbGxpZGluZ0J5VGFyZ2V0cy5zZXQoIHRhcmdldCwgbmV3IFNldDxIVE1MRWxlbWVudD4oKSApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1hcEVsZW1lbnRzQ29sbGlkaW5nQnlUYXJnZXRzLmdldCggdGFyZ2V0ICkhO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNDb2xsaWRpbmdCeVRyaWdnZXIoIHRyaWdnZXJFbGVtZW50OiBIVE1MRWxlbWVudCApOiBTZXQ8SFRNTEVsZW1lbnQ+IHtcclxuICBpZiAoICFtYXBUYXJnZXRzQ29sbGlkaW5nQnlUcmlnZ2VyRWxlbWVudC5oYXMoIHRyaWdnZXJFbGVtZW50ICkgKSB7XHJcbiAgICBtYXBUYXJnZXRzQ29sbGlkaW5nQnlUcmlnZ2VyRWxlbWVudC5zZXQoIHRyaWdnZXJFbGVtZW50LCBuZXcgU2V0PEhUTUxFbGVtZW50PigpICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWFwVGFyZ2V0c0NvbGxpZGluZ0J5VHJpZ2dlckVsZW1lbnQuZ2V0KCB0cmlnZ2VyRWxlbWVudCApITtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q29sbGlzaW9uQ2hlY2soKSB7XHJcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBjaGVja0VhY2hFbGVtZW50Q29sbGlzaW9uIClcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tFYWNoRWxlbWVudENvbGxpc2lvbigpIHtcclxuICBjb2xsaXNpb25FdmVudHNCeVNlbGVjdG9ycy5mb3JFYWNoKCBhc3luYyAoIGNvbGxpc2lvblRyaWdnZXJzLCBjb2xsaXNpb25UYXJnZXRTZWxlY3RvcnMgKSA9PiB7XHJcbiAgICBjb25zdCBhcnJUYXJnZXRzID0gQXJyYXkuZnJvbSggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggY29sbGlzaW9uVGFyZ2V0U2VsZWN0b3JzICkgKSBhcyBIVE1MRWxlbWVudFtdO1xyXG5cclxuICAgIHNldENvbGxpc2lvbkV2ZW50c0ZvclRhcmdldHMoIGFyclRhcmdldHMsIGNvbGxpc2lvblRyaWdnZXJzICk7XHJcbiAgfSApO1xyXG5cclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIGNoZWNrRWFjaEVsZW1lbnRDb2xsaXNpb24gKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q29sbGlzaW9uRXZlbnRzRm9yVGFyZ2V0cyggYXJyVGFyZ2V0czogSFRNTEVsZW1lbnRbXSwgY29sbGlzaW9uVHJpZ2dlcnM6IENvbGxpc2lvblRyaWdnZXJPcHRpb25zW10gKSB7XHJcbiAgYXJyVGFyZ2V0cy5mb3JFYWNoKCBhc3luYyB0YXJnZXQgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0Q29sbGlzaW9uU2V0OiBTZXQ8SFRNTEVsZW1lbnQ+ID0gZ2V0RWxlbWVudHNDb2xsaWRpbmdCeVRhcmdldCggdGFyZ2V0ICk7XHJcblxyXG4gICAgY29sbGlzaW9uVHJpZ2dlcnMuZm9yRWFjaCggYXN5bmMgdHJpZ2dlciA9PiB7XHJcbiAgICAgIGlmICggdHJpZ2dlci50cmlnZ2VyRWxlbWVudCA9PT0gdGFyZ2V0ICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdHJpZ2dlckNvbGxpc2lvblNldDogU2V0PEhUTUxFbGVtZW50PiA9IGdldEVsZW1lbnRzQ29sbGlkaW5nQnlUcmlnZ2VyKCB0cmlnZ2VyLnRyaWdnZXJFbGVtZW50ICk7XHJcblxyXG4gICAgICBjb25zdCBpc0NvbGxpc2lvbjogYm9vbGVhbiA9IGNoZWNrRWxlbWVudENvbGxpc2lvbiggdHJpZ2dlci50cmlnZ2VyRWxlbWVudCwgdGFyZ2V0LCB0cnVlICk7XHJcblxyXG4gICAgICBpZiAoICFpc0NvbGxpc2lvbiApIHtcclxuICAgICAgICBhd2FpdCBvbkVsZW1lbnRzTm90Q29sbGlkaW5nKCB0cmlnZ2VyQ29sbGlzaW9uU2V0LCB0YXJnZXQsIHRhcmdldENvbGxpc2lvblNldCwgdHJpZ2dlciApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdHJpZ2dlckNvbGxpc2lvblNldC5hZGQoIHRhcmdldCApO1xyXG4gICAgICB0YXJnZXRDb2xsaXNpb25TZXQuYWRkKCB0cmlnZ2VyLnRyaWdnZXJFbGVtZW50ICk7XHJcblxyXG4gICAgICBzZXRDb2xsaXNpb25DbGFzc2VzKCB0cmlnZ2VyLCB0YXJnZXQgKTtcclxuXHJcbiAgICAgIGF3YWl0IHRyaWdnZXJDb2xsaXNpb25FdmVudHNBc3luYyggdHJpZ2dlciwgdGFyZ2V0ICk7XHJcbiAgICB9ICk7XHJcbiAgfSApO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBvbkVsZW1lbnRzTm90Q29sbGlkaW5nKCB0cmlnZ2VyQ29sbGlzaW9uU2V0OiBTZXQ8SFRNTEVsZW1lbnQ+LCB0YXJnZXQ6IEhUTUxFbGVtZW50LCB0YXJnZXRDb2xsaXNpb25TZXQ6IFNldDxIVE1MRWxlbWVudD4sIHRyaWdnZXI6IENvbGxpc2lvblRyaWdnZXJPcHRpb25zICkge1xyXG4gIGNsZWFuTm90Q29sbGlkaW5nRWxlbWVudHNBdHRyaWJ1dGVzQW5kQ2xhc3NlcyhcclxuICAgIHRyaWdnZXJDb2xsaXNpb25TZXQsXHJcbiAgICB0YXJnZXQsXHJcbiAgICB0YXJnZXRDb2xsaXNpb25TZXQsXHJcbiAgICB0cmlnZ2VyXHJcbiAgKTtcclxuXHJcbiAgYXdhaXQgUHJvbWlzZS5hbGwoIHRyaWdnZXIuZXZlbnRzLm1hcCggZXZlbnQgPT4ge1xyXG4gICAgaWYgKCAhZXZlbnQuZW5hYmxlZCApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50Lm9uTm90Q29sbGlkaW5nKFxyXG4gICAgICB0cmlnZ2VyLnRyaWdnZXJFbGVtZW50LFxyXG4gICAgICB0YXJnZXRcclxuICAgICk7XHJcbiAgfSApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0Q29tcGxleENvbGxpc2lvbkNoZWNrKCBlbGVtZW50VG9DaGVjazogSFRNTEVsZW1lbnQsIHRhcmdldFF1ZXJ5U2VsZWN0b3I6IHN0cmluZywgY29sbGlzaW9uRXZlbnRzOiBDb2xsaXNpb25FdmVudFtdICk6IHZvaWQge1xyXG4gIGluc2VydEludG9FdmVudENoZWNrTGlzdCggZWxlbWVudFRvQ2hlY2ssIHRhcmdldFF1ZXJ5U2VsZWN0b3IsIGNvbGxpc2lvbkV2ZW50cyApO1xyXG5cclxuICBpZiAoIGNvbGxpc2lvbkNoZWNrSW50ZXJ2YWwgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBzZXRDb2xsaXNpb25DaGVjaygpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNJbnRlcmFjdGluZ1NldCggdGFyZ2V0OiBIVE1MRWxlbWVudCApOiBTZXQ8SFRNTEVsZW1lbnQ+IHtcclxuICBpZiAoICFtYXBFbGVtZW50c1RyaWdnZXJpbmdFdmVudHNCeVRhcmdldC5oYXMoIHRhcmdldCApICkge1xyXG4gICAgbWFwRWxlbWVudHNUcmlnZ2VyaW5nRXZlbnRzQnlUYXJnZXQuc2V0KCB0YXJnZXQsIG5ldyBTZXQ8SFRNTEVsZW1lbnQ+KCkgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBtYXBFbGVtZW50c1RyaWdnZXJpbmdFdmVudHNCeVRhcmdldC5nZXQoIHRhcmdldCApITtcclxufVxyXG4iLCJpbXBvcnQgeyBPYmplY3RFdmVudExpc3RlbmVyIH0gZnJvbSAnLi4vT2JqZWN0RXZlbnRMaXN0ZW5lcic7XHJcbmltcG9ydCB7IEJvcmRlckRpc3RhbmNlRXh0cmFzIH0gZnJvbSAnLi9Cb3JkZXJEaXN0YW5jZUV4dHJhcyc7XHJcbmltcG9ydCB7IFBpbkNvbGxpc2lvbkV2ZW50LCBQaW5Qb3NpdGlvbkZvcm11bGEgfSBmcm9tICcuL1BpbkNvbGxpc2lvbkV2ZW50JztcclxuaW1wb3J0IHsgU2hhcmVBdHRyaWJ1dGVDb2xsaXNpb25FdmVudCB9IGZyb20gJy4vU2hhcmVBdHRyaWJ1dGVDb2xsaXNpb25FdmVudCc7XHJcbmltcG9ydCB7IEJvcmRlckRpc3RhbmNlLCBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgSUNvbGxpc2lvbkV2ZW50IH0gZnJvbSAnLi9UeXBlcyc7XHJcblxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbGxpc2lvbkV2ZW50IGV4dGVuZHMgT2JqZWN0RXZlbnRMaXN0ZW5lciBpbXBsZW1lbnRzIElDb2xsaXNpb25FdmVudCB7XHJcbiAgYWJzdHJhY3QgdGFyZ2V0Q2xhc3M6IHN0cmluZztcclxuICBhYnN0cmFjdCBjaGVja1RhcmdldENsYXNzOiBib29sZWFuO1xyXG5cclxuICBwdWJsaWMgZW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gIGlzVmFsaWRUYXJnZXRUb1RyaWdnZXJFdmVudCggY3VycmVudFRhcmdldDogSFRNTEVsZW1lbnQsIHRhcmdldENsYXNzTmFtZTogc3RyaW5nLCB2YWxpZGF0ZURpc3RhbmNlPzogeyBkaXN0YW5jZVRocmVzaG9sZDogbnVtYmVyLCBkaXN0YW5jZUZyb21Cb3JkZXI6IEJvcmRlckRpc3RhbmNlIH0gKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoICF0aGlzLmVuYWJsZWQgKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHRoaXMuY2hlY2tUYXJnZXRDbGFzcyAmJiAhY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoIHRhcmdldENsYXNzTmFtZSApICkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCB2YWxpZGF0ZURpc3RhbmNlICkge1xyXG4gICAgICAvLy8gQ2hlY2tzIGhvdyBtYW55IHBpeGVscyB0aGUgZHJhZ2dhYmxlIGlzIGluc2lkZSBmcm9tIGVhY2ggYm9yZGVyOyBpZiB0aGUgZWxlbWVudCBpcyBvdmVyIHRoZSB0aHJlc2hvbGQgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRydWU7XHJcbiAgICAgIGNvbnN0IGNvbGxpc2lvbkJvcmRlckRpc3RhbmNlRXh0cmFzID0gbmV3IEJvcmRlckRpc3RhbmNlRXh0cmFzKCB2YWxpZGF0ZURpc3RhbmNlLmRpc3RhbmNlRnJvbUJvcmRlciApO1xyXG4gICAgICBpZiAoIGNvbGxpc2lvbkJvcmRlckRpc3RhbmNlRXh0cmFzLmFueUxvd2VyVGhhbiggdmFsaWRhdGVEaXN0YW5jZS5kaXN0YW5jZVRocmVzaG9sZCApICkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgYWJzdHJhY3Qgb25Db2xsaWRpbmcoIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNvbGxpZGluZ0F0OiBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSApOiBQcm9taXNlPHZvaWQ+O1xyXG4gIGFic3RyYWN0IG9uTm90Q29sbGlkaW5nKCBkcmFnZ2FibGU6IEhUTUxFbGVtZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50ICk6IFByb21pc2U8dm9pZD47XHJcbn1cclxuIiwiaW1wb3J0IHsgZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQsIHJlZ2V4UmVtb3ZlVHJhbnNsYXRlRnJvbVRyYW5zZm9ybSB9IGZyb20gJy4uLy4uL1Rvb2xzL0RPTVRvb2xzJztcclxuaW1wb3J0IHsgZ2V0RWxlbWVudHNJbnRlcmFjdGluZ1NldCwgbWFwVGFyZ2V0c0NvbGxpZGluZ0J5VHJpZ2dlckVsZW1lbnQgfSBmcm9tICcuL0NvbGxpc2lvbkFjdGlvbic7XHJcbmltcG9ydCB7IFBvaW50MkQgfSBmcm9tICcuLi8uLi9Ub29scy9NYXRoVG9vbHMnO1xyXG5pbXBvcnQgeyBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgQm9yZGVyRGlzdGFuY2UgfSBmcm9tICcuL1R5cGVzJztcclxuaW1wb3J0IHsgQ29sbGlzaW9uRXZlbnQgfSBmcm9tICcuL0NvbGxpc2lvbkV2ZW50cyc7XHJcblxyXG5leHBvcnQgdHlwZSBQaW5Qb3NpdGlvbkZvcm11bGEgPSAoICggZHJhZ2dhYmxlUmVjdDogRE9NUmVjdCwgdGFyZ2V0UmVjdDogRE9NUmVjdCwgZHJhZ2dhYmxlVHJhbnNmb3JtUG9zaXRpb246IFBvaW50MkQsIGRpc3RhbmNlRnJvbUJvcmRlcjogQm9yZGVyRGlzdGFuY2UgKSA9PiBQb2ludDJEIClcclxuXHJcbmV4cG9ydCB0eXBlIE9uUGluRXZlbnQgPSAoICggZHJhZ2dhYmxlOiBIVE1MRWxlbWVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCApID0+IHZvaWQgKVxyXG5cclxuZXhwb3J0IGNsYXNzIFBpbkNvbGxpc2lvbkV2ZW50IGV4dGVuZHMgQ29sbGlzaW9uRXZlbnQge1xyXG4gIHByaXZhdGUgb25QaW5FdmVudHM/OiBPblBpbkV2ZW50W107XHJcbiAgcHJpdmF0ZSBvblVucGluRXZlbnRzPzogT25QaW5FdmVudFtdO1xyXG4gIHByaXZhdGUgcGluUG9zaXRpb25Gb3JtdWxhPzogUGluUG9zaXRpb25Gb3JtdWxhO1xyXG5cclxuICBwdWJsaWMgb3ZlcnJpZGUgY2hlY2tUYXJnZXRDbGFzczogYm9vbGVhbjtcclxuICBwdWJsaWMgb3ZlcnJpZGUgdGFyZ2V0Q2xhc3M6IHN0cmluZyA9ICdwaW4tdGFyZ2V0JztcclxuXHJcbiAgY29uc3RydWN0b3IoIHsgcGluUG9zaXRpb25Gb3JtdWxhLCBvblBpbiwgb25VbnBpbiwgY2hlY2tUYXJnZXRDbGFzcyB9OiBQaW5Db2xsaXNpb25FdmVudE9wdGlvbnMgKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5waW5Qb3NpdGlvbkZvcm11bGEgPSBwaW5Qb3NpdGlvbkZvcm11bGEgfHwgdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5vblBpbkV2ZW50cyA9IG9uUGluID8gW29uUGluXSA6IFtdO1xyXG4gICAgdGhpcy5vblVucGluRXZlbnRzID0gb25VbnBpbiA/IFtvblVucGluXSA6IFtdO1xyXG4gICAgdGhpcy5jaGVja1RhcmdldENsYXNzID0gY2hlY2tUYXJnZXRDbGFzcyAhPT0gdW5kZWZpbmVkICYmIGNoZWNrVGFyZ2V0Q2xhc3M7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgb25Db2xsaWRpbmcoIG1haW5FbGVtZW50OiBIVE1MRWxlbWVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCwgX2NvbGxpZGluZ0F0OiBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSApIHtcclxuICAgIGlmICggIXRoaXMuaXNWYWxpZFRhcmdldFRvVHJpZ2dlckV2ZW50KCB0YXJnZXQsIHRoaXMudGFyZ2V0Q2xhc3MsIHtcclxuICAgICAgZGlzdGFuY2VGcm9tQm9yZGVyOiBkaXN0YW5jZUZyb21Cb3JkZXIsXHJcbiAgICAgIGRpc3RhbmNlVGhyZXNob2xkOiAwXHJcbiAgICB9ICkgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbGVtZW50c0ludGVyYWN0aW5nU2V0OiBTZXQ8SFRNTEVsZW1lbnQ+ID0gZ2V0RWxlbWVudHNJbnRlcmFjdGluZ1NldCggdGFyZ2V0ICk7XHJcbiAgICBjb25zdCBuYW1lQ291bnRFbGVtZW50c0ludGVyYWN0aW5nQXR0cmlidXRlID0gJ3RvdGFsLXBpbm5lZC1lbGVtZW50cyc7XHJcbiAgICBpZiAoIG1haW5FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyggJ2RyYWdnaW5nJyApICkge1xyXG4gICAgICBtYWluRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAncGlubmVkJyApO1xyXG4gICAgICBtYWluRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncmVhZHktdG8tcGluJyApO1xyXG5cclxuICAgICAgaWYgKCBlbGVtZW50c0ludGVyYWN0aW5nU2V0LmRlbGV0ZSggbWFpbkVsZW1lbnQgKSApIHtcclxuICAgICAgICB0aGlzLm9uRWxlbWVudEludGVyYWN0aW9uQ2hhbmdlKCB0YXJnZXQsIGVsZW1lbnRzSW50ZXJhY3RpbmdTZXQsIG5hbWVDb3VudEVsZW1lbnRzSW50ZXJhY3RpbmdBdHRyaWJ1dGUgKTtcclxuICAgICAgICB0aGlzLm9uVW5waW5FdmVudHMgPyB0aGlzLm9uVW5waW5FdmVudHMuZm9yRWFjaCggZXYgPT4gZXYoIG1haW5FbGVtZW50LCB0YXJnZXQgKSApIDoge307XHJcbiAgICAgICAgdGhpcy5nZXRFdmVudHNCeU5hbWUoICdvbnVucGluJyApLmZvckVhY2goIGV2ID0+IGV2KCBtYWluRWxlbWVudCwgdGFyZ2V0ICkgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggdGhpcy5waW5Qb3NpdGlvbkZvcm11bGEgKSB7XHJcbiAgICAgIHBpbkVsZW1lbnRCeUZvcm11bGEoIG1haW5FbGVtZW50LCB0YXJnZXQsIGRpc3RhbmNlRnJvbUJvcmRlciwgdGhpcy5waW5Qb3NpdGlvbkZvcm11bGEgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHBpbkVsZW1lbnRPbkNlbnRlciggbWFpbkVsZW1lbnQsIHRhcmdldCwgZGlzdGFuY2VGcm9tQm9yZGVyICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhZWxlbWVudHNJbnRlcmFjdGluZ1NldC5oYXMoIG1haW5FbGVtZW50ICkgKSB7XHJcbiAgICAgIGVsZW1lbnRzSW50ZXJhY3RpbmdTZXQuYWRkKCBtYWluRWxlbWVudCApO1xyXG4gICAgICB0aGlzLm9uUGluRXZlbnRzID8gdGhpcy5vblBpbkV2ZW50cy5mb3JFYWNoKCBldiA9PiBldiggbWFpbkVsZW1lbnQsIHRhcmdldCApICkgOiB7fTtcclxuICAgICAgdGhpcy5nZXRFdmVudHNCeU5hbWUoICdvbnBpbicgKS5mb3JFYWNoKCBldiA9PiBldiggbWFpbkVsZW1lbnQsIHRhcmdldCApICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG1haW5FbGVtZW50LmNsYXNzTGlzdC5hZGQoICdwaW5uZWQnICk7XHJcbiAgICBtYWluRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAncmVhZHktdG8tcGluJyApO1xyXG4gICAgdGhpcy5vbkVsZW1lbnRJbnRlcmFjdGlvbkNoYW5nZSggdGFyZ2V0LCBlbGVtZW50c0ludGVyYWN0aW5nU2V0LCBuYW1lQ291bnRFbGVtZW50c0ludGVyYWN0aW5nQXR0cmlidXRlICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgb25Ob3RDb2xsaWRpbmcoIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQgKSB7XHJcbiAgICBjb25zdCBlbGVtZW50c0ludGVyYWN0aW5nU2V0OiBTZXQ8SFRNTEVsZW1lbnQ+ID0gZ2V0RWxlbWVudHNJbnRlcmFjdGluZ1NldCggdGFyZ2V0ICk7XHJcbiAgICBlbGVtZW50c0ludGVyYWN0aW5nU2V0LmRlbGV0ZSggZHJhZ2dhYmxlICk7XHJcblxyXG4gICAgaWYgKCBlbGVtZW50c0ludGVyYWN0aW5nU2V0LnNpemUgPiAwICkge1xyXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCggJ2hhcy1waW5uZWQtZWxlbWVudHMnICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSggJ2hhcy1waW5uZWQtZWxlbWVudHMnICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhbWFwVGFyZ2V0c0NvbGxpZGluZ0J5VHJpZ2dlckVsZW1lbnQuaGFzKCBkcmFnZ2FibGUgKSApIHtcclxuICAgICAgbWFwVGFyZ2V0c0NvbGxpZGluZ0J5VHJpZ2dlckVsZW1lbnQuc2V0KCBkcmFnZ2FibGUsIG5ldyBTZXQ8SFRNTEVsZW1lbnQ+KCkgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhZ2VudENvbGxpc2lvblNldCA9IG1hcFRhcmdldHNDb2xsaWRpbmdCeVRyaWdnZXJFbGVtZW50LmdldCggZHJhZ2dhYmxlICkhO1xyXG4gICAgaWYgKCBhZ2VudENvbGxpc2lvblNldC5kZWxldGUoIHRhcmdldCBhcyBIVE1MRWxlbWVudCApICYmIGFnZW50Q29sbGlzaW9uU2V0LnNpemUgPT09IDAgKSB7XHJcbiAgICAgIGRyYWdnYWJsZS5jbGFzc0xpc3QucmVtb3ZlKCAncGlubmVkJywgJ3JlYWR5LXRvLXBpbicgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb25FbGVtZW50SW50ZXJhY3Rpb25DaGFuZ2UoIHRhcmdldDogSFRNTEVsZW1lbnQsIGVsZW1lbnRzSW50ZXJhY3RpbmdTZXQ6IFNldDxIVE1MRWxlbWVudD4sIG5hbWVDb3VudEVsZW1lbnRzSW50ZXJhY3RpbmdBdHRyaWJ1dGU6IHN0cmluZyApIHtcclxuICAgIGlmICggZWxlbWVudHNJbnRlcmFjdGluZ1NldC5zaXplID4gMCApIHtcclxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoICdoYXMtcGlubmVkLWVsZW1lbnRzJyApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoICdoYXMtcGlubmVkLWVsZW1lbnRzJyApO1xyXG4gICAgfVxyXG5cclxuICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoIG5hbWVDb3VudEVsZW1lbnRzSW50ZXJhY3RpbmdBdHRyaWJ1dGUsIGVsZW1lbnRzSW50ZXJhY3RpbmdTZXQuc2l6ZS50b1N0cmluZygpICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBQaW5Db2xsaXNpb25FdmVudE9wdGlvbnMgPSB7XHJcbiAgY2hlY2tUYXJnZXRDbGFzcz86IGJvb2xlYW47XHJcbiAgcGluUG9zaXRpb25Gb3JtdWxhPzogUGluUG9zaXRpb25Gb3JtdWxhO1xyXG4gIG9uUGluPzogT25QaW5FdmVudDtcclxuICBvblVucGluPzogT25QaW5FdmVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBpbkNvbGxpc2lvbkZvcm11bGFUb3BMZWZ0KCBkcmFnZ2FibGVSZWN0OiBET01SZWN0LCB0YXJnZXRSZWN0OiBET01SZWN0LCBkcmFnZ2FibGVUcmFuc2Zvcm1Qb3NpdGlvbjogUG9pbnQyRCwgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSwgbWFyZ2luTGVmdDogbnVtYmVyID0gMTAsIG1hcmdpblRvcDogbnVtYmVyID0gMTAgKSB7XHJcbiAgY29uc3QgdGFyZ2V0TGVmdFBvc2l0aW9uID0gZHJhZ2dhYmxlVHJhbnNmb3JtUG9zaXRpb24ueCAtIGRpc3RhbmNlRnJvbUJvcmRlci5sZWZ0ICsgKCBkcmFnZ2FibGVSZWN0LndpZHRoIC8gMiApOyAvLy8gYWRpY2lvbmEgYSBsYXJndXJhLzIgcG9ycXVlIGEgZGlzdGFuY2lhIGRhIGJvcmRhIMOpIGJhc2VhZGEgbm8gY2VudHJvIGRvIGRyYWdnYWJsZVxyXG4gIGNvbnN0IHRhcmdldFRvcFBvc2l0aW9uID0gZHJhZ2dhYmxlVHJhbnNmb3JtUG9zaXRpb24ueSAtIGRpc3RhbmNlRnJvbUJvcmRlci50b3AgKyAoIGRyYWdnYWJsZVJlY3QuaGVpZ2h0IC8gMiApO1xyXG4gIHJldHVybiB7XHJcbiAgICB4OiB0YXJnZXRMZWZ0UG9zaXRpb24gKyBtYXJnaW5MZWZ0LFxyXG4gICAgeTogdGFyZ2V0VG9wUG9zaXRpb24gKyBtYXJnaW5Ub3BcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwaW5Db2xsaXNpb25Gb3JtdWxhVG9wUmlnaHQoIGRyYWdnYWJsZVJlY3Q6IERPTVJlY3QsIHRhcmdldFJlY3Q6IERPTVJlY3QsIGRyYWdnYWJsZVRyYW5zZm9ybVBvc2l0aW9uOiBQb2ludDJELCBkaXN0YW5jZUZyb21Cb3JkZXI6IEJvcmRlckRpc3RhbmNlLCBtYXJnaW5SaWdodDogbnVtYmVyID0gMTAsIG1hcmdpblRvcDogbnVtYmVyID0gMTAgKSB7XHJcbiAgY29uc3QgdGFyZ2V0TGVmdFBvc2l0aW9uID0gZHJhZ2dhYmxlVHJhbnNmb3JtUG9zaXRpb24ueCArIGRpc3RhbmNlRnJvbUJvcmRlci5yaWdodCAtICggZHJhZ2dhYmxlUmVjdC53aWR0aCAvIDIgKTsgLy8vIGFkaWNpb25hIGEgbGFyZ3VyYS8yIHBvcnF1ZSBhIGRpc3RhbmNpYSBkYSBib3JkYSDDqSBiYXNlYWRhIG5vIGNlbnRybyBkbyBkcmFnZ2FibGVcclxuICBjb25zdCB0YXJnZXRUb3BQb3NpdGlvbiA9IGRyYWdnYWJsZVRyYW5zZm9ybVBvc2l0aW9uLnkgLSBkaXN0YW5jZUZyb21Cb3JkZXIudG9wICsgKCBkcmFnZ2FibGVSZWN0LmhlaWdodCAvIDIgKTtcclxuICByZXR1cm4ge1xyXG4gICAgeDogdGFyZ2V0TGVmdFBvc2l0aW9uIC0gbWFyZ2luUmlnaHQsXHJcbiAgICB5OiB0YXJnZXRUb3BQb3NpdGlvbiArIG1hcmdpblRvcFxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRUcmFuc2Zvcm0oIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICkge1xyXG4gIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0ucmVwbGFjZSggcmVnZXhSZW1vdmVUcmFuc2xhdGVGcm9tVHJhbnNmb3JtLCAnJyApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGluRWxlbWVudEJ5Rm9ybXVsYSggZHJhZ2dhYmxlOiBIVE1MRWxlbWVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCwgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSwgcGluUG9zaXRpb25Gb3JtdWxhOiBQaW5Qb3NpdGlvbkZvcm11bGEgKSB7XHJcbiAgY29uc3QgdGFyZ2V0UmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsvLyBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ICk7XHJcbiAgY29uc3QgZHJhZ2dhYmxlUmVjdCA9IGRyYWdnYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsvLyAgZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZHJhZ2dhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyApO1xyXG4gIGNvbnN0IGRyYWdnYWJsZVRyYW5zZm9ybVBvc2l0aW9uID0gZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQoIGRyYWdnYWJsZSApO1xyXG4gIGNvbnN0IHBpblBvc2l0aW9uOiBQb2ludDJEID0gcGluUG9zaXRpb25Gb3JtdWxhKCBkcmFnZ2FibGVSZWN0LCB0YXJnZXRSZWN0LCBkcmFnZ2FibGVUcmFuc2Zvcm1Qb3NpdGlvbiwgZGlzdGFuY2VGcm9tQm9yZGVyICk7XHJcbiAgcmVzZXRUcmFuc2Zvcm0oIGRyYWdnYWJsZSApO1xyXG4gIGRyYWdnYWJsZS5zdHlsZS50cmFuc2Zvcm0gKz0gYHRyYW5zbGF0ZSgkeyBwaW5Qb3NpdGlvbi54IH1weCwgJHsgcGluUG9zaXRpb24ueSB9cHgpYDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBpbkVsZW1lbnRPbkNlbnRlciggZHJhZ2dhYmxlOiBIVE1MRWxlbWVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCwgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSApIHtcclxuICBjb25zdCB0YXJnZXRSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOy8vIGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIHRhcmdldCApO1xyXG4gIGNvbnN0IGRyYWdnYWJsZVRyYW5zZm9ybVBvc2l0aW9uID0gZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQoIGRyYWdnYWJsZSApO1xyXG5cclxuICBjb25zdCB0YXJnZXRSaWdodFBvc2l0aW9uID0gZHJhZ2dhYmxlVHJhbnNmb3JtUG9zaXRpb24ueCArIGRpc3RhbmNlRnJvbUJvcmRlci5yaWdodDtcclxuICBjb25zdCB0YXJnZXRCb3R0b21Qb3NpdGlvbiA9IGRyYWdnYWJsZVRyYW5zZm9ybVBvc2l0aW9uLnkgKyBkaXN0YW5jZUZyb21Cb3JkZXIuYm90dG9tO1xyXG5cclxuICBjb25zdCBuZXdYID0gTWF0aC5yb3VuZCggdGFyZ2V0UmlnaHRQb3NpdGlvbiAtICggdGFyZ2V0UmVjdC53aWR0aCAvIDIgKSApO1xyXG4gIGNvbnN0IG5ld1kgPSBNYXRoLnJvdW5kKCB0YXJnZXRCb3R0b21Qb3NpdGlvbiAtICggdGFyZ2V0UmVjdC5oZWlnaHQgLyAyICkgKTtcclxuXHJcbiAgcmVzZXRUcmFuc2Zvcm0oIGRyYWdnYWJsZSApO1xyXG4gIGRyYWdnYWJsZS5zdHlsZS50cmFuc2Zvcm0gKz0gYHRyYW5zbGF0ZSgkeyBuZXdYIH1weCwgJHsgbmV3WSB9cHgpYDtcclxufVxyXG5cclxuIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCB9IGZyb20gJy4uLy4uL1Rvb2xzL0RPTVRvb2xzJztcclxuaW1wb3J0IHsgZ2V0RWxlbWVudHNJbnRlcmFjdGluZ1NldCwgbWFwVGFyZ2V0c0NvbGxpZGluZ0J5VHJpZ2dlckVsZW1lbnQgfSBmcm9tICcuL0NvbGxpc2lvbkFjdGlvbic7XHJcbmltcG9ydCB7IENvbGxpc2lvbkV2ZW50IH0gZnJvbSAnLi9Db2xsaXNpb25FdmVudHMnO1xyXG5pbXBvcnQgeyBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgQm9yZGVyRGlzdGFuY2UgfSBmcm9tICcuL1R5cGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIFNoYXJlQXR0cmlidXRlQ29sbGlzaW9uRXZlbnRPcHRpb25zID0ge1xyXG4gIGtlZXBBdHRyaWJ1dGU/OiBib29sZWFuO1xyXG4gIGNoZWNrVGFyZ2V0Q2xhc3M/OiBib29sZWFuO1xyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0U2hhcmVBdHRyaWJ1dGVDb2xsaXNpb25FdmVudE9wdGlvbnMgPSB7XHJcbiAga2VlcEF0dHJpYnV0ZTogZmFsc2VcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNoYXJlQXR0cmlidXRlQ29sbGlzaW9uRXZlbnQgZXh0ZW5kcyBDb2xsaXNpb25FdmVudCB7XHJcbiAgY2hlY2tUYXJnZXRDbGFzczogYm9vbGVhbjtcclxuICBrZWVwQXR0cmlidXRlOiBib29sZWFuO1xyXG5cclxuICBwdWJsaWMgdGFyZ2V0Q2xhc3M6IHN0cmluZyA9ICdhdHRyaWJ1dGUtdGFyZ2V0JztcclxuXHJcbiAgY29uc3RydWN0b3IoIG9wdGlvbnM6IFNoYXJlQXR0cmlidXRlQ29sbGlzaW9uRXZlbnRPcHRpb25zID0gZGVmYXVsdFNoYXJlQXR0cmlidXRlQ29sbGlzaW9uRXZlbnRPcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMua2VlcEF0dHJpYnV0ZSA9IG9wdGlvbnMua2VlcEF0dHJpYnV0ZSB8fCBmYWxzZTtcclxuICAgIHRoaXMuY2hlY2tUYXJnZXRDbGFzcyA9IG9wdGlvbnMuY2hlY2tUYXJnZXRDbGFzcyB8fCB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIG9uQ29sbGlkaW5nKCBkcmFnZ2FibGU6IEhUTUxFbGVtZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBfY29sbGlkaW5nQXQ6IENvbGxpc2lvbkRpcmVjdGlvbkNoZWNrLCBfZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSApIHtcclxuICAgIC8vLyBDaGVja3MgaWYgdGhlIGRyYWdnYWJsZSBoYXMgdGhlIGtleSBhdHRyaWJ1dGVzIHRoYXQgcmVwcmVzZW50cyB3aGF0IGF0dHJpYnV0ZSB3aWxsIGJlIGluc2VydGVkIG9uIHRhcmdldFxyXG4gICAgY29uc3Qgc2hhcmVkQXR0cmlidXRlTmFtZSA9IGRyYWdnYWJsZS5nZXRBdHRyaWJ1dGUoICdzaGFyZWQtYXR0cmlidXRlLW5hbWUnICk7XHJcbiAgICBjb25zdCBzaGFyZWRBdHRyaWJ1dGVWYWx1ZSA9IGRyYWdnYWJsZS5nZXRBdHRyaWJ1dGUoICdzaGFyZWQtYXR0cmlidXRlLXZhbHVlJyApO1xyXG4gICAgaWYgKCAhc2hhcmVkQXR0cmlidXRlVmFsdWUgfHwgIXNoYXJlZEF0dHJpYnV0ZU5hbWUgfHwgIXRoaXMuaXNWYWxpZFRhcmdldFRvVHJpZ2dlckV2ZW50KCB0YXJnZXQsIHRoaXMudGFyZ2V0Q2xhc3MgKSApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVsZW1lbnRzSW50ZXJhY3RpbmdTZXQ6IFNldDxIVE1MRWxlbWVudD4gPSBnZXRFbGVtZW50c0ludGVyYWN0aW5nU2V0KCB0YXJnZXQgKTtcclxuICAgIGNvbnN0IG5hbWVDb3VudEVsZW1lbnRzSW50ZXJhY3RpbmdBdHRyaWJ1dGUgPSAndG90YWwtc2hhcmluZy1hdHRyaWJ1dGVzJztcclxuXHJcbiAgICBpZiAoIGRyYWdnYWJsZS5jbGFzc0xpc3QuY29udGFpbnMoICdkcmFnZ2luZycgKSApIHtcclxuICAgICAgZHJhZ2dhYmxlLmNsYXNzTGlzdC5yZW1vdmUoICdzaGFyaW5nLWF0dHJpYnV0ZScgKTtcclxuICAgICAgZHJhZ2dhYmxlLmNsYXNzTGlzdC5hZGQoICdyZWFkeS10by1zaGFyZS1hdHRyaWJ1dGUnICk7XHJcblxyXG4gICAgICB0aGlzLmhhbmRsZUVsZW1lbnRJbnRlcmFjdGlvblNoYXJlQXR0cmlidXRlKCBkcmFnZ2FibGUsIHRhcmdldCwgZWxlbWVudHNJbnRlcmFjdGluZ1NldCwgbmFtZUNvdW50RWxlbWVudHNJbnRlcmFjdGluZ0F0dHJpYnV0ZSApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZHJhZ2dhYmxlLmNsYXNzTGlzdC5hZGQoICdzaGFyaW5nLWF0dHJpYnV0ZScgKTtcclxuICAgICAgZHJhZ2dhYmxlLmNsYXNzTGlzdC5yZW1vdmUoICdyZWFkeS10by1zaGFyZS1hdHRyaWJ1dGUnICk7XHJcblxyXG4gICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCBzaGFyZWRBdHRyaWJ1dGVOYW1lLCBzaGFyZWRBdHRyaWJ1dGVWYWx1ZSApO1xyXG5cclxuICAgICAgZWxlbWVudHNJbnRlcmFjdGluZ1NldC5hZGQoIGRyYWdnYWJsZSApO1xyXG4gICAgICB0aGlzLmhhbmRsZUVsZW1lbnRJbnRlcmFjdGlvblNoYXJlQXR0cmlidXRlKCBkcmFnZ2FibGUsIHRhcmdldCwgZWxlbWVudHNJbnRlcmFjdGluZ1NldCwgbmFtZUNvdW50RWxlbWVudHNJbnRlcmFjdGluZ0F0dHJpYnV0ZSApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIG9uTm90Q29sbGlkaW5nKCBkcmFnZ2FibGU6IEhUTUxFbGVtZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50ICkge1xyXG4gICAgY29uc3QgZWxlbWVudHNJbnRlcmFjdGluZ1NldDogU2V0PEhUTUxFbGVtZW50PiA9IGdldEVsZW1lbnRzSW50ZXJhY3RpbmdTZXQoIHRhcmdldCApO1xyXG5cclxuICAgIGlmICggZWxlbWVudHNJbnRlcmFjdGluZ1NldC5zaXplID4gMCApIHtcclxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoICdzaGFyaW5nLWF0dHJpYnV0ZScgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub25TaGFyZWRBdHRyaWJ1dGVFbXB0eSggZHJhZ2dhYmxlLCB0YXJnZXQgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoICFtYXBUYXJnZXRzQ29sbGlkaW5nQnlUcmlnZ2VyRWxlbWVudC5oYXMoIGRyYWdnYWJsZSApICkge1xyXG4gICAgICBtYXBUYXJnZXRzQ29sbGlkaW5nQnlUcmlnZ2VyRWxlbWVudC5zZXQoIGRyYWdnYWJsZSwgbmV3IFNldDxIVE1MRWxlbWVudD4oKSApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFnZW50Q29sbGlzaW9uU2V0ID0gbWFwVGFyZ2V0c0NvbGxpZGluZ0J5VHJpZ2dlckVsZW1lbnQuZ2V0KCBkcmFnZ2FibGUgKSE7XHJcbiAgICBpZiAoIGFnZW50Q29sbGlzaW9uU2V0LmRlbGV0ZSggdGFyZ2V0IGFzIEhUTUxFbGVtZW50ICkgfHwgYWdlbnRDb2xsaXNpb25TZXQuc2l6ZSA9PT0gMCApIHtcclxuICAgICAgZHJhZ2dhYmxlLmNsYXNzTGlzdC5yZW1vdmUoICdzaGFyaW5nLWF0dHJpYnV0ZScsICdyZWFkeS10by1zaGFyZS1hdHRyaWJ1dGUnICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaGFuZGxlRWxlbWVudEludGVyYWN0aW9uU2hhcmVBdHRyaWJ1dGUoIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGVsZW1lbnRzSW50ZXJhY3RpbmdTZXQ6IFNldDxIVE1MRWxlbWVudD4sIG5hbWVDb3VudEVsZW1lbnRzSW50ZXJhY3RpbmdBdHRyaWJ1dGU6IHN0cmluZyApIHtcclxuICAgIGlmICggZWxlbWVudHNJbnRlcmFjdGluZ1NldC5zaXplID4gMCApIHtcclxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoICdzaGFyaW5nLWF0dHJpYnV0ZScgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub25TaGFyZWRBdHRyaWJ1dGVFbXB0eSggZHJhZ2dhYmxlLCB0YXJnZXQgKTtcclxuICAgIH1cclxuXHJcbiAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCBuYW1lQ291bnRFbGVtZW50c0ludGVyYWN0aW5nQXR0cmlidXRlLCBlbGVtZW50c0ludGVyYWN0aW5nU2V0LnNpemUudG9TdHJpbmcoKSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uU2hhcmVkQXR0cmlidXRlRW1wdHkoIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQgKSB7XHJcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSggJ3NoYXJpbmctYXR0cmlidXRlJyApO1xyXG5cclxuICAgIC8vLyBSZXR1cm5zIHRoZSBhdHRyaWJ1dGUgdG8gdGhlIGZpcnN0IGF0dHJpYnV0ZSB0aGF0IHdhcyBzZXQgdG8gdGFyZ2V0XHJcbiAgICBjb25zdCBzaGFyZWRBdHRyaWJ1dGVOYW1lID0gZHJhZ2dhYmxlLmdldEF0dHJpYnV0ZSggJ3NoYXJlZC1hdHRyaWJ1dGUtbmFtZScgKTtcclxuICAgIGlmICggc2hhcmVkQXR0cmlidXRlTmFtZSApIHtcclxuICAgICAgY29uc3QgZGVmYXVsdFNoYXJlZEF0dHJpYnV0ZUZyb21UYXJnZXQgPSBnZXREZWZhdWx0QXR0cmlidXRlRm9yVGFyZ2V0KCB0YXJnZXQsIHNoYXJlZEF0dHJpYnV0ZU5hbWUgKTtcclxuICAgICAgaWYgKCBkZWZhdWx0U2hhcmVkQXR0cmlidXRlRnJvbVRhcmdldCApIHtcclxuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCBzaGFyZWRBdHRyaWJ1dGVOYW1lLCBkZWZhdWx0U2hhcmVkQXR0cmlidXRlRnJvbVRhcmdldCApO1xyXG4gICAgICB9IGVsc2UgaWYgKCAhdGhpcy5rZWVwQXR0cmlidXRlICkge1xyXG4gICAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoIHNoYXJlZEF0dHJpYnV0ZU5hbWUgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuIiwiXHJcbmV4cG9ydCBjbGFzcyBPYmplY3RFdmVudExpc3RlbmVyIHtcclxuICBwdWJsaWMgZXZlbnRzQnlOYW1lOiBNYXA8c3RyaW5nLCBGdW5jdGlvbltdPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgcHVibGljIGFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZTogc3RyaW5nLCBldmVudDogRnVuY3Rpb24gKSB7XHJcbiAgICBpZiAoICF0aGlzLmV2ZW50c0J5TmFtZS5oYXMoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkgKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzQnlOYW1lLnNldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCksIFtldmVudF0gKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZXZlbnRzQnlOYW1lLmdldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSEucHVzaCggZXZlbnQgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRFdmVudHNCeU5hbWUoIGV2ZW50TmFtZTogc3RyaW5nICk6IEZ1bmN0aW9uW10ge1xyXG4gICAgaWYgKCAhdGhpcy5ldmVudHNCeU5hbWUuaGFzKCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSApICkge1xyXG4gICAgICB0aGlzLmV2ZW50c0J5TmFtZS5zZXQoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpLCBbXSApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmV2ZW50c0J5TmFtZS5nZXQoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkhO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBjYWxsRXZlbnRzQnlOYW1lKCBldmVudE5hbWU6IHN0cmluZywgLi4uZXZlbnRBcmdzOiBhbnlbXSApOiB2b2lkIHtcclxuICAgIHRoaXMuZ2V0RXZlbnRzQnlOYW1lKCBldmVudE5hbWUgKS5mb3JFYWNoKCBlID0+IGUoIC4uLmV2ZW50QXJncyApICk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgRGltZW5zaW9ucywgUG9pbnQyRCwgbGVycCwgcmVnZXhOdW1iZXJQYXR0ZXJuLCByb3RhdGVDb29yZGluYXRlcywgcm90YXRlQ29vcmRpbmF0ZXNGcm9tUG9pbnQyRCB9IGZyb20gJy4vTWF0aFRvb2xzJztcclxuaW1wb3J0IHsgdG9QaG9uZU51bWJlciB9IGZyb20gJy4vU3RyaW5nVG9vbHMnO1xyXG5pbXBvcnQgeyBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgQm9yZGVyRGlzdGFuY2UgfSBmcm9tICcuLi9FeHRyYXMvQ29sbGlzaW9uRXZlbnRzL1R5cGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIEtleWJvYXJkRXZlbnRDYWxsYmFjayA9ICggZXZ0OiBLZXlib2FyZEV2ZW50ICkgPT4gdm9pZDtcclxuZXhwb3J0IGNvbnN0IHJlZ2V4UmVtb3ZlVHJhbnNsYXRlRnJvbVRyYW5zZm9ybSA9IC90cmFuc2xhdGVcXChbXildKlxcKS9nO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVZhbHVlID0gL3JvdGF0ZVxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZSA9IC9yb3RhdGVYXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlWVZhbHVlID0gL3JvdGF0ZVlcXCgoLT9cXGQrXFwuP1xcZCopZGVnXFwpLztcclxuZXhwb3J0IGNvbnN0IHJlZ2V4R3JvdXBSb3RhdGVaVmFsdWUgPSAvcm90YXRlWlxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSA9IG5ldyBNYXA8c3RyaW5nLCBLZXlib2FyZEV2ZW50Q2FsbGJhY2tbXT4oKTtcclxuZXhwb3J0IGNvbnN0IGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0ID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgY29uc3QgZGljdEtleXNCeUFjdGlvbktleXVwID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkQWN0aW9uS2V5KCB7IGtleSwga2V5ZG93bjogZXZlbnRLZXlkb3duLCBrZXl1cDogZXZlbnRLZXl1cCwgZXhlY3V0ZU9ubHlPbmNlID0gdHJ1ZSB9OiB7IGtleTogc3RyaW5nOyBrZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2s7IGtleXVwPzogS2V5Ym9hcmRFdmVudENhbGxiYWNrOyBleGVjdXRlT25seU9uY2U/OiBib29sZWFuOyB9ICkge1xyXG4gIGlmICggZXhlY3V0ZU9ubHlPbmNlICkge1xyXG4gICAgYWRkQWN0aW9uS2V5UnVuT25jZSgga2V5LCBldmVudEtleWRvd24sIGV2ZW50S2V5dXAgKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGFkZEFjdGlvbktleVJ1bk9uUmVwZWF0KCBrZXksIGV2ZW50S2V5ZG93biwgZXZlbnRLZXl1cCApO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTYWZlUHJvbWlzZTxUPiA9IHtcclxuICBkYXRhOiBUIHwgbnVsbDtcclxuICBlcnJvcjogRXJyb3IgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlUHJvbWlzZTxUPiggcHJvbWlzZTogUHJvbWlzZTxUPiApOiBQcm9taXNlPFNhZmVQcm9taXNlPFQ+PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwcm9taXNlO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGVycm9yOiBudWxsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKCBlcnJvciApIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoIGVycm9yICk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvciggU3RyaW5nKCBlcnJvciApIClcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudEZyb21IVE1MKCBodG1sOiBzdHJpbmcsIHRyaW06IGJvb2xlYW4gPSB0cnVlICkge1xyXG4gIGh0bWwgPSB0cmltID8gaHRtbC50cmltKCkgOiBodG1sO1xyXG5cclxuICBpZiAoICFodG1sICkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0ZW1wbGF0ZScgKTtcclxuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sO1xyXG4gIGNvbnN0IHJlc3VsdCA9IHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRyZW47XHJcblxyXG4gIGlmICggcmVzdWx0Lmxlbmd0aCA9PT0gMSApIHtcclxuICAgIHJldHVybiByZXN1bHRbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gQXJyYXkuZnJvbSggcmVzdWx0ICkgYXMgSFRNTEVsZW1lbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnREaW1lbnNpb25zQnlJZCggZWxlbWVudElkOiBzdHJpbmcgKTogRGltZW5zaW9ucyB7XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBlbGVtZW50SWQgKTtcclxuXHJcbiAgaWYgKCAhZWxlbWVudCApIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIGVsZW1lbnQgYXQgZ2V0RWxlbWVudERpbWVuc2lvbnNCeUlkIHdpdGggaWQ6IFwiICsgZWxlbWVudElkICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZ2V0RWxlbWVudERpbWVuc2lvbnMoIGVsZW1lbnQgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnREaW1lbnNpb25zKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiBEaW1lbnNpb25zIHtcclxuICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB3aWR0aDogcmVjdC53aWR0aCxcclxuICAgIGhlaWdodDogcmVjdC5oZWlnaHRcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiBET01SZWN0IHtcclxuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICBjb25zdCBjZW50ZXJYID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7XHJcbiAgY29uc3QgY2VudGVyWSA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xyXG5cclxuICAvLyBSb3RhdGlvbiBhbmdsZSBpbiBkZWdyZWVzIChleHRyYWN0ZWQgZnJvbSBzdHlsZS50cmFuc2Zvcm0gb3IgYW55IG90aGVyIHNvdXJjZSlcclxuICBjb25zdCByb3RhdGlvbkFuZ2xlID0gZ2V0Qm9keVJvdGF0aW9uSW5EZWdyZWVzKCk7XHJcblxyXG4gIGNvbnN0IHJhZGlhbnMgPSAoIE1hdGguUEkgLyAxODAgKSAqIHJvdGF0aW9uQW5nbGU7XHJcbiAgY29uc3QgY29zVGhldGEgPSBNYXRoLmNvcyggcmFkaWFucyApO1xyXG4gIGNvbnN0IHNpblRoZXRhID0gTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRoZSByb3RhdGVkIGNvb3JkaW5hdGVzXHJcbiAgY29uc3Qgcm90YXRlZFgxID0gY2VudGVyWCArICggcmVjdC5sZWZ0IC0gY2VudGVyWCApICogY29zVGhldGEgLSAoIHJlY3QudG9wIC0gY2VudGVyWSApICogc2luVGhldGE7XHJcbiAgY29uc3Qgcm90YXRlZFkxID0gY2VudGVyWSArICggcmVjdC5sZWZ0IC0gY2VudGVyWCApICogc2luVGhldGEgKyAoIHJlY3QudG9wIC0gY2VudGVyWSApICogY29zVGhldGE7XHJcblxyXG4gIGNvbnN0IHJvdGF0ZWRYMiA9IGNlbnRlclggKyAoIHJlY3QucmlnaHQgLSBjZW50ZXJYICkgKiBjb3NUaGV0YSAtICggcmVjdC5ib3R0b20gLSBjZW50ZXJZICkgKiBzaW5UaGV0YTtcclxuICBjb25zdCByb3RhdGVkWTIgPSBjZW50ZXJZICsgKCByZWN0LnJpZ2h0IC0gY2VudGVyWCApICogc2luVGhldGEgKyAoIHJlY3QuYm90dG9tIC0gY2VudGVyWSApICogY29zVGhldGE7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBsZWZ0LCB0b3AsIGJvdHRvbSwgYW5kIHJpZ2h0IGNvb3JkaW5hdGVzXHJcbiAgY29uc3Qgcm90YXRlZExlZnQgPSBNYXRoLm1pbiggcm90YXRlZFgxLCByb3RhdGVkWDIgKTtcclxuICBjb25zdCByb3RhdGVkVG9wID0gTWF0aC5taW4oIHJvdGF0ZWRZMSwgcm90YXRlZFkyICk7XHJcbiAgY29uc3Qgcm90YXRlZEJvdHRvbSA9IE1hdGgubWF4KCByb3RhdGVkWTEsIHJvdGF0ZWRZMiApO1xyXG4gIGNvbnN0IHJvdGF0ZWRSaWdodCA9IE1hdGgubWF4KCByb3RhdGVkWDEsIHJvdGF0ZWRYMiApO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgeDogcm90YXRlZExlZnQsXHJcbiAgICB5OiByb3RhdGVkVG9wLFxyXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXHJcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxyXG4gICAgdG9KU09OOiByZWN0LnRvSlNPTixcclxuICAgIGxlZnQ6IHJvdGF0ZWRMZWZ0LFxyXG4gICAgdG9wOiByb3RhdGVkVG9wLFxyXG4gICAgYm90dG9tOiByb3RhdGVkQm90dG9tLFxyXG4gICAgcmlnaHQ6IHJvdGF0ZWRSaWdodCxcclxuICB9IGFzIERPTVJlY3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEFjdGlvbktleVJ1bk9uY2UoIGtleTogc3RyaW5nLCBldmVudEtleWRvd246IEtleWJvYXJkRXZlbnRDYWxsYmFjaywgZXZlbnRLZXl1cD86IEtleWJvYXJkRXZlbnRDYWxsYmFjayApIHtcclxuICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5oYXMoIGtleSApICkge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLnNldCgga2V5LCBbZXZlbnRLZXlkb3duLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UuZ2V0KCBrZXkgKSFdIClcclxuICB9IGVsc2Uge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLnNldCgga2V5LCBbZXZlbnRLZXlkb3duXSApXHJcbiAgfVxyXG5cclxuICBpZiAoIGV2ZW50S2V5dXAgKSB7XHJcbiAgICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5oYXMoIGtleSApICkge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5dXAuZ2V0KCBrZXkgKSFdIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXBdIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEFjdGlvbktleVJ1bk9uUmVwZWF0KCBrZXk6IHN0cmluZywgZXZlbnRLZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2ssIGV2ZW50S2V5dXA/OiBLZXlib2FyZEV2ZW50Q2FsbGJhY2sgKSB7XHJcbiAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5oYXMoIGtleSApICkge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQuc2V0KCBrZXksIFtldmVudEtleWRvd24sIC4uLmRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LmdldCgga2V5ICkhXSApXHJcbiAgfSBlbHNlIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LnNldCgga2V5LCBbZXZlbnRLZXlkb3duXSApXHJcbiAgfVxyXG5cclxuICBpZiAoIGV2ZW50S2V5dXAgKSB7XHJcbiAgICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5oYXMoIGtleSApICkge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5dXAuZ2V0KCBrZXkgKSFdIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXBdIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0VsZW1lbnRDb2xsaXNpb24oIGVsZW1lbnQxOiBIVE1MRWxlbWVudCwgZWxlbWVudDI6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZWxlbWVudDEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50MSApO1xyXG4gIGNvbnN0IHJlY3QyID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZWxlbWVudDIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50MiApO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSAhKFxyXG4gICAgcmVjdDEudG9wID4gcmVjdDIuYm90dG9tIHx8XHJcbiAgICByZWN0MS5yaWdodCA8IHJlY3QyLmxlZnQgfHxcclxuICAgIHJlY3QxLmJvdHRvbSA8IHJlY3QyLnRvcCB8fFxyXG4gICAgcmVjdDEubGVmdCA+IHJlY3QyLnJpZ2h0XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvbGxGb3JWYXJpYWJsZTxUPiggdmFyaWFibGVOYW1lOiBzdHJpbmcsIHJlYWR5Q29uZGl0aW9uOiAoIHZhbHVlOiBUICkgPT4gYm9vbGVhbiwgY2FsbGJhY2s6ICggdmFsdWU6IFQgKSA9PiB2b2lkICkge1xyXG4gIGNvbnN0IHBvbGxJbnRlcnZhbCA9IDEwMDtcclxuICBjb25zdCBwb2xsID0gc2V0SW50ZXJ2YWwoICgpID0+IHtcclxuICAgIGlmICggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSAhPT0gdW5kZWZpbmVkICYmIHJlYWR5Q29uZGl0aW9uKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICkgKSB7XHJcbiAgICAgIC8vIElmIGJvdGggY29uZGl0aW9ucyBhcmUgbWV0LCBleGVjdXRlIHRoZSBjYWxsYmFjayBhbmQgc3RvcCBwb2xsaW5nXHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoIHBvbGwgKTtcclxuICAgICAgY2FsbGJhY2soICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gKTtcclxuICAgIH1cclxuICB9LCBwb2xsSW50ZXJ2YWwgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdhaXRVbnRpbEVsZW1lbnRFeGlzdHMoIHNlbGVjdG9yOiBzdHJpbmcgKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuICAgIGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApIHtcclxuICAgICAgcmV0dXJuIHJlc29sdmUoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCBtdXRhdGlvbnMgPT4ge1xyXG4gICAgICBpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKSB7XHJcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgIHJlc29sdmUoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIG9ic2VydmVyLm9ic2VydmUoIGRvY3VtZW50LmJvZHksIHtcclxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICBzdWJ0cmVlOiB0cnVlXHJcbiAgICB9ICk7XHJcbiAgfSApO1xyXG59XHJcblxyXG4vLy8gR2V0IHRoZSBkZWZhdWx0IGF0dHJpYnV0ZXMgZnJvbSB0aGUgdGFyZ2V0IGVsZW1lbnRcclxuLy8vIElmIGhhdmUgbm90IGRlZmF1bHQgYXR0cmlidXRlIHdpdGggdGhpcyBAYXR0cmlidXRlTmFtZSBvbiBtYXAgd2lsbCBzZXQgdGhlIGN1cnJlbnQgYXR0cmlidXRlIGFzIGRlZmF1bHRcclxuLy8vIElmIGhhdmUgbm90IGRlZmF1bHQgYXR0cmlidXRlIHdpdGggdGhpcyBAYXR0cmlidXRlTmFtZSB3aWxsIHJldHVybiBhbiBlbXB0eSBzdHJpbmdcclxuZXhwb3J0IGNvbnN0IG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50ID0gbmV3IE1hcDxIVE1MRWxlbWVudCwgTWFwPHN0cmluZywgc3RyaW5nPj4oKTtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQoIHRhcmdldDogSFRNTEVsZW1lbnQsIGF0dHJpYnV0ZU5hbWU6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIGlmICggIW1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmhhcyggdGFyZ2V0ICkgKSB7XHJcbiAgICBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5zZXQoIHRhcmdldCwgbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKSApO1xyXG4gIH1cclxuXHJcbiAgbGV0IHJlc3VsdDogc3RyaW5nID0gJyc7XHJcbiAgY29uc3QgZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZSA9IG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmdldCggdGFyZ2V0ICkhO1xyXG4gIGNvbnN0IHRhcmdldERlZmF1bHRBdHRyaWJ1dGUgPSAhZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZS5oYXMoIGF0dHJpYnV0ZU5hbWUgKSA/IHRhcmdldC5nZXRBdHRyaWJ1dGUoIGF0dHJpYnV0ZU5hbWUgKSA6IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNCeU5hbWUuZ2V0KCBhdHRyaWJ1dGVOYW1lICkhO1xyXG5cclxuICByZXN1bHQgPSB0YXJnZXREZWZhdWx0QXR0cmlidXRlID8gdGFyZ2V0RGVmYXVsdEF0dHJpYnV0ZSA6ICcnO1xyXG4gIHNldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQoIHRhcmdldCwgYXR0cmlidXRlTmFtZSwgcmVzdWx0ICk7XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0QXR0cmlidXRlRm9yVGFyZ2V0KCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcsIG5ld0RlZmF1bHRBdHRyaWJ1dGU6IHN0cmluZyApOiB2b2lkIHtcclxuICBpZiAoICFtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5oYXMoIHRhcmdldCApICkge1xyXG4gICAgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuc2V0KCB0YXJnZXQsIG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCkgKTtcclxuICB9XHJcblxyXG4gIG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmdldCggdGFyZ2V0ICkhLnNldCggYXR0cmlidXRlTmFtZSwgbmV3RGVmYXVsdEF0dHJpYnV0ZSApO1xyXG59XHJcblxyXG4vLy8gRGl2aWRlIG8gZWxlbWVudG8gQHRhcmdldCBlbSA5IFwicXVhZHJhZG9zXCIgaWd1YWlzIGUgcmV0b3JuYSBlbSBxdWFpcyBxdWFkcmFkb3MgbyBkcmFnZ2FibGUgZXN0w6EgY29saWRpbmRvIGNvbSBvIHRhcmdldFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sbGlzaW9uRGlyZWN0aW9uKCBkcmFnZ2FibGU6IEhUTUxFbGVtZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IENvbGxpc2lvbkRpcmVjdGlvbkNoZWNrIHtcclxuICBjb25zdCByZWN0MSA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGRyYWdnYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIGRyYWdnYWJsZSApO1xyXG4gIGNvbnN0IHJlY3QyID0gIWNoZWNrQm9keVJvdGF0aW9uID8gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggdGFyZ2V0ICk7XHJcblxyXG4gIGNvbnN0IGlzVG9wID0gcmVjdDEuYm90dG9tID4gcmVjdDIudG9wICYmIHJlY3QxLnRvcCA8IHJlY3QyLnRvcCArIHJlY3QyLmhlaWdodCAvIDM7XHJcbiAgY29uc3QgaXNSaWdodCA9IHJlY3QxLmxlZnQgPCByZWN0Mi5yaWdodCAmJiByZWN0MS5yaWdodCA+IHJlY3QyLnJpZ2h0IC0gcmVjdDIud2lkdGggLyAzO1xyXG4gIGNvbnN0IGlzQ2VudGVyID0gcmVjdDEudG9wIDwgcmVjdDIuYm90dG9tICYmIHJlY3QxLmJvdHRvbSA+IHJlY3QyLnRvcCAmJiByZWN0MS5sZWZ0IDwgcmVjdDIucmlnaHQgJiYgcmVjdDEucmlnaHQgPiByZWN0Mi5sZWZ0O1xyXG4gIGNvbnN0IGlzQm90dG9tID0gcmVjdDEudG9wIDwgcmVjdDIuYm90dG9tIC0gcmVjdDIuaGVpZ2h0IC8gMyAmJiByZWN0MS5ib3R0b20gPiByZWN0Mi5ib3R0b20gLSByZWN0Mi5oZWlnaHQgLyAzO1xyXG4gIGNvbnN0IGlzTGVmdCA9IHJlY3QxLnJpZ2h0ID4gcmVjdDIubGVmdCAmJiByZWN0MS5sZWZ0IDwgcmVjdDIubGVmdCArIHJlY3QyLndpZHRoIC8gMztcclxuXHJcbiAgcmV0dXJuIHsgdG9wOiBpc1RvcCwgcmlnaHQ6IGlzUmlnaHQsIGNlbnRlcjogaXNDZW50ZXIsIGJvdHRvbTogaXNCb3R0b20sIGxlZnQ6IGlzTGVmdCB9O1xyXG59XHJcblxyXG4vLy8gcmV0dXJuIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGRyYWdnYWJsZSB0byB0aGUgY2VudGVyIG9mIHRoZSB0YXJnZXQgZWxlbWVudCBmcm9tIGVhY2ggYm9yZGVyIFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlzdGFuY2VGcm9tQm9yZGVyKCBkcmFnZ2FibGU6IEhUTUxFbGVtZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IEJvcmRlckRpc3RhbmNlIHtcclxuICBjb25zdCByZWN0MSA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGRyYWdnYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIGRyYWdnYWJsZSApO1xyXG4gIGNvbnN0IHJlY3QyID0gIWNoZWNrQm9keVJvdGF0aW9uID8gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggdGFyZ2V0ICk7XHJcblxyXG4gIGNvbnN0IGNlbnRlciA9IHtcclxuICAgIHg6IHJlY3QxLmxlZnQgKyByZWN0MS53aWR0aCAvIDIsXHJcbiAgICB5OiByZWN0MS50b3AgKyByZWN0MS5oZWlnaHQgLyAyLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRpc3RhbmNlRnJvbUJvcmRlcjogQm9yZGVyRGlzdGFuY2UgPSB7XHJcbiAgICB0b3A6IGNlbnRlci55IC0gcmVjdDIudG9wLFxyXG4gICAgcmlnaHQ6IHJlY3QyLnJpZ2h0IC0gY2VudGVyLngsXHJcbiAgICBib3R0b206IHJlY3QyLmJvdHRvbSAtIGNlbnRlci55LFxyXG4gICAgbGVmdDogY2VudGVyLnggLSByZWN0Mi5sZWZ0LFxyXG4gIH07XHJcblxyXG4gIHJldHVybiBkaXN0YW5jZUZyb21Cb3JkZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJ1bk9ubHlPbmNlS2V5ZG93bkFjdGlvbnMoIGV2dDogS2V5Ym9hcmRFdmVudCApIHtcclxuICBmb3IgKCBjb25zdCBwYWlyIG9mIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSApIHtcclxuICAgIGlmICggZXZ0LmNvZGUgPT09IHBhaXJbMF0gKSB7XHJcbiAgICAgIHBhaXJbMV0uZm9yRWFjaCgga2JFdmVudCA9PiBrYkV2ZW50KCBldnQgKSApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcnVuS2V5ZG93bkFjdGlvbnNSZXBlYXQoIGV2dDogS2V5Ym9hcmRFdmVudCApIHtcclxuICBmb3IgKCBjb25zdCBwYWlyIG9mIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0ICkge1xyXG4gICAgaWYgKCBldnQuY29kZSA9PT0gcGFpclswXSApIHtcclxuICAgICAgcGFpclsxXS5mb3JFYWNoKCBrYkV2ZW50ID0+IGtiRXZlbnQoIGV2dCApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBldnQgPT4ge1xyXG4gIGlmICggIWV2dC5yZXBlYXQgKSB7XHJcbiAgICBydW5Pbmx5T25jZUtleWRvd25BY3Rpb25zKCBldnQgKTtcclxuICB9XHJcblxyXG4gIHJ1bktleWRvd25BY3Rpb25zUmVwZWF0KCBldnQgKTtcclxufSApO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIGV2dCA9PiB7XHJcbiAgZm9yICggY29uc3QgcGFpciBvZiBkaWN0S2V5c0J5QWN0aW9uS2V5dXAgKSB7XHJcbiAgICBpZiAoIGV2dC5jb2RlID09PSBwYWlyWzBdICkge1xyXG4gICAgICBwYWlyWzFdLmZvckVhY2goIGtiRXZlbnQgPT4ga2JFdmVudCggZXZ0ICkgKTtcclxuICAgIH1cclxuICB9XHJcbn0gKTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFJvdGF0aW9uSW5EZWdyZWVzKCBlbGVtZW50OiBIVE1MRWxlbWVudCwgYXhpczogJ3gnIHwgJ3knIHwgJ3onID0gJ3gnICk6IG51bWJlciB7XHJcbiAgbGV0IHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZTogUmVnRXhwO1xyXG4gIHN3aXRjaCAoIGF4aXMgKSB7XHJcbiAgICBjYXNlICd4JzpcclxuICAgICAgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlID0gcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICd5JzpcclxuICAgICAgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlID0gcmVnZXhHcm91cFJvdGF0ZVlWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICd6JzpcclxuICAgICAgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlID0gcmVnZXhHcm91cFJvdGF0ZVpWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlVmFsdWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWF0Y2ggPSByZWdleE1hdGNoUm90YXRlVmFsdWUuZXhlYyggZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gKTtcclxuICBpZiAoIG1hdGNoICkge1xyXG4gICAgY29uc3Qgcm90YXRpb25WYWx1ZSA9IHBhcnNlRmxvYXQoIG1hdGNoWzFdICk7XHJcbiAgICByZXR1cm4gcm90YXRpb25WYWx1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm9keVJvdGF0aW9uSW5EZWdyZWVzKCk6IG51bWJlciB7XHJcbiAgY29uc3QgbWF0Y2ggPSBnZXRSZWdleFJlbW92ZVJvdGF0aW9uRnJvbUJvZHkoKS5leGVjKCBkb2N1bWVudC5ib2R5LnN0eWxlLnRyYW5zZm9ybSApO1xyXG4gIGlmICggbWF0Y2ggKSB7XHJcbiAgICBjb25zdCByb3RhdGlvblZhbHVlID0gcGFyc2VGbG9hdCggbWF0Y2hbMV0gKTtcclxuICAgIHJldHVybiByb3RhdGlvblZhbHVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWdleFJlbW92ZVJvdGF0aW9uRnJvbUJvZHkoKSB7XHJcbiAgcmV0dXJuIGdldFJlZ2V4UmVtb3ZlUm90YXRpb25CYXNlZE9uQXhpcyggZ2V0Qm9keVJvdGF0aW9uQXhpcygpIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZ2V4UmVtb3ZlUm90YXRpb25CYXNlZE9uQXhpcyggYXhpczogJ3gnIHwgJ3knIHwgJ3onICkge1xyXG4gIHN3aXRjaCAoIGF4aXMgKSB7XHJcbiAgICBjYXNlICd4JzpcclxuICAgICAgcmV0dXJuIHJlZ2V4R3JvdXBSb3RhdGVYVmFsdWU7XHJcbiAgICBjYXNlICd5JzpcclxuICAgICAgcmV0dXJuIHJlZ2V4R3JvdXBSb3RhdGVZVmFsdWU7XHJcbiAgICBjYXNlICd6JzpcclxuICAgICAgcmV0dXJuIHJlZ2V4R3JvdXBSb3RhdGVaVmFsdWU7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVZhbHVlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvZHlSb3RhdGlvbkF4aXMoKTogJ3gnIHwgJ3knIHwgJ3onIHtcclxuICByZXR1cm4gZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyggZG9jdW1lbnQuYm9keSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogJ3gnIHwgJ3knIHwgJ3onIHtcclxuICBjb25zdCBlbGVtZW50VHJhbnNmb3JtID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0udG9Mb3dlckNhc2UoKTtcclxuICBpZiAoIGVsZW1lbnRUcmFuc2Zvcm0uaW5jbHVkZXMoICd4JyApICkge1xyXG4gICAgcmV0dXJuICd4JztcclxuICB9IGVsc2UgaWYgKCBlbGVtZW50VHJhbnNmb3JtLmluY2x1ZGVzKCAneScgKSApIHtcclxuICAgIHJldHVybiAneSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAneic7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IFBvaW50MkQge1xyXG4gIGNvbnN0IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlID0gKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbWVudCApLnRyYW5zZm9ybS5tYXRjaCggcmVnZXhOdW1iZXJQYXR0ZXJuICkgPz8gWzAsIDBdICkubWFwKCBuID0+ICtuICk7XHJcblxyXG4gIGxldCByZXN1bHQgPSB7XHJcbiAgICB4OiBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs0XSAhPT0gdW5kZWZpbmVkID8gTWF0aC5yb3VuZCggYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGVbNF0gKSA6IDAsXHJcbiAgICB5OiBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs1XSAhPT0gdW5kZWZpbmVkID8gTWF0aC5yb3VuZCggYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGVbNV0gKSA6IDBcclxuICB9XHJcblxyXG4gIGlmICggY2hlY2tCb2R5Um90YXRpb24gKSB7XHJcbiAgICBjb25zdCBib2R5QW5nbGUgPSBnZXRFbGVtZW50Um90YXRpb25JbkRlZ3JlZXMoIGRvY3VtZW50LmJvZHksIGdldEVsZW1lbnRSb3RhdGlvbkF4aXMoIGVsZW1lbnQgKSApIHx8IDA7XHJcbiAgICByZXR1cm4gcm90YXRlQ29vcmRpbmF0ZXMoIHJlc3VsdC54LCByZXN1bHQueSwgYm9keUFuZ2xlICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xpY2tFdmVudFRvQ29vcmRpbmF0ZXMoIGV2ZW50OiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCApIHtcclxuICBpZiAoIGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCApIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IGV2ZW50LmNsaWVudFgsXHJcbiAgICAgIHk6IGV2ZW50LmNsaWVudFlcclxuICAgIH07XHJcbiAgfSBlbHNlIGlmICggZXZlbnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50ICkge1xyXG4gICAgY29uc3QgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IHRvdWNoLmNsaWVudFgsXHJcbiAgICAgIHk6IHRvdWNoLmNsaWVudFlcclxuICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IFwiRXZlbnQgbm90IEZvdW5kXCI7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50KCB7IHBhcmVudEVsZW1lbnQsIGlkLCBwb3NpdGlvbiwgZGltZW5zaW9ucyB9OiB7IHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50OyBpZDogc3RyaW5nOyBwb3NpdGlvbj86IHsgdG9wOiBudW1iZXI7IGxlZnQ6IG51bWJlcjsgfTsgZGltZW5zaW9ucz86IERpbWVuc2lvbnM7IH0gKSB7XHJcbiAgdmFyIGludmlzaWJsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcblxyXG4gIGlmICggIXBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24gKSB7XHJcbiAgICBwYXJlbnRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICB9XHJcblxyXG4gIGludmlzaWJsZURpdi5pZCA9IGlkO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLndpZHRoID0gZGltZW5zaW9ucyAmJiBkaW1lbnNpb25zLndpZHRoID8gZGltZW5zaW9ucy53aWR0aC50b1N0cmluZygpICsgJ3B4JyA6ICcxMDAlJztcclxuICBpbnZpc2libGVEaXYuc3R5bGUuaGVpZ2h0ID0gZGltZW5zaW9ucyAmJiBkaW1lbnNpb25zLmhlaWdodCA/IGRpbWVuc2lvbnMuaGVpZ2h0LnRvU3RyaW5nKCkgKyAncHgnIDogJzEwMCUnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS50b3AgPSAoIHBvc2l0aW9uPy50b3AudG9TdHJpbmcoKSA/PyAnMCcgKSArICdweCc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLmxlZnQgPSAoIHBvc2l0aW9uPy5sZWZ0LnRvU3RyaW5nKCkgPz8gJzAnICkgKyAncHgnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5vcGFjaXR5ID0gJzAnOyAvLyBNYWtlIHRoZSBkaXYgaW52aXNpYmxlXHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7IC8vIEFsbG93IHRoZSBkaXYgdG8gaW50ZXJjZXB0IG1vdXNlIGV2ZW50c1xyXG5cclxuICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKCBpbnZpc2libGVEaXYgKTtcclxuXHJcbiAgcmV0dXJuIGludmlzaWJsZURpdjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVFbGVtZW50KCBlbGVtZW50OiBIVE1MRWxlbWVudCApIHtcclxuICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gIGVsZW1lbnQuc3R5bGUuekluZGV4ID0gJy0xJztcclxuICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgZWxlbWVudC5zdHlsZS53aWR0aCA9ICcwcHggIWltcG9ydGFudCc7XHJcbiAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMHB4ICFpbXBvcnRhbnQnO1xyXG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnaGlkZGVuJywgJycgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNsZWVwQXN5bmMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KCAoIHJlc29sdmUgKSA9PiBzZXRUaW1lb3V0KCAoKSA9PiByZXNvbHZlKCksIG1zICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRFbGVtZW50c0J5Q2hlY2soIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCwgb25DaGVjazogRnVuY3Rpb24sIG9uVW5jaGVjazogRnVuY3Rpb24gKSB7XHJcbiAgaWYgKCB0cmlnZ2VyRWxlbWVudC5jaGVja2VkICkge1xyXG4gICAgb25DaGVjayggdGFyZ2V0RWxlbWVudCApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdHJpZ2dlckdyb3VwID0gdHJpZ2dlckVsZW1lbnQubmFtZVxyXG4gICAgPyBBcnJheS5mcm9tKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBgW25hbWU9XCIkeyB0cmlnZ2VyRWxlbWVudC5uYW1lIH1cIl1gICkgKVxyXG4gICAgOiBbdHJpZ2dlckVsZW1lbnRdO1xyXG5cclxuICB0cmlnZ2VyR3JvdXAuZm9yRWFjaCggdCA9PiB0LmFkZEV2ZW50TGlzdGVuZXIoICdjaGFuZ2UnLCBldnQgPT4ge1xyXG4gICAgaWYgKCB0cmlnZ2VyRWxlbWVudC5jaGVja2VkICkge1xyXG4gICAgICBvbkNoZWNrKCB0YXJnZXRFbGVtZW50LCBldnQgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9uVW5jaGVjayggdGFyZ2V0RWxlbWVudCwgZXZ0ICk7XHJcbiAgICB9XHJcbiAgfSApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRJbnB1dEZvcmNlUGhvbmVOdW1iZXJGb3JtYXQoIGlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudCApIHtcclxuICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2lucHV0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHBob25lSW5wdXQgPSB0aGlzLnZhbHVlO1xyXG5cclxuICAgIGNvbnN0IGNsZWFuUGhvbmVJbnB1dCA9IHBob25lSW5wdXQucmVwbGFjZSggL1xcRC9nLCAnJyApO1xyXG4gICAgaWYgKCBjbGVhblBob25lSW5wdXQubGVuZ3RoID4gMTEgKSB7XHJcbiAgICAgIHBob25lSW5wdXQgPSBjbGVhblBob25lSW5wdXQuc2xpY2UoIDAsIDExICk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHBob25lTnVtYmVyRm9ybWF0dGVkID0gdG9QaG9uZU51bWJlciggcGhvbmVJbnB1dCApO1xyXG5cclxuICAgIGlmICggcGhvbmVOdW1iZXJGb3JtYXR0ZWQubGVuZ3RoID09PSAxMCApIHtcclxuICAgICAgcGhvbmVOdW1iZXJGb3JtYXR0ZWQgPSBwaG9uZU51bWJlckZvcm1hdHRlZC5yZXBsYWNlQWxsKCAnLScsICcnICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52YWx1ZSA9IHBob25lTnVtYmVyRm9ybWF0dGVkO1xyXG4gIH0gKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01vYmlsZUJyb3dzZXIoKSB7XHJcbiAgcmV0dXJuIC9BbmRyb2lkfGlQaG9uZS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJEZXZpY2VUeXBlKCk6ICdhbmRyb2lkJyB8ICdhcHBsZScgfCAnZGVza3RvcCcge1xyXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgKCB3aW5kb3cgYXMgYW55ICkub3BlcmE7XHJcblxyXG4gIGlmICggL2FuZHJvaWQvaS50ZXN0KCB1c2VyQWdlbnQgKSApIHtcclxuICAgIHJldHVybiAnYW5kcm9pZCc7XHJcbiAgfSBlbHNlIGlmICggL2lQYWR8aVBob25lfGlQb2QvLnRlc3QoIHVzZXJBZ2VudCApICYmICEoIHdpbmRvdyBhcyBhbnkgKS5NU1N0cmVhbSApIHtcclxuICAgIHJldHVybiAnYXBwbGUnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gJ2Rlc2t0b3AnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzT25TY3JlZW4oIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICkge1xyXG4gIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIHJldHVybiAoXHJcbiAgICByZWN0LnRvcCA+PSAwICYmXHJcbiAgICByZWN0LmxlZnQgPj0gMCAmJlxyXG4gICAgcmVjdC5ib3R0b20gPD0gKCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCApICYmXHJcbiAgICByZWN0LnJpZ2h0IDw9ICggd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIClcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmluZEVsZW1lbnRWaWV3SWZDaGVja2VkKCB0cmlnZ2VyRWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgb3B0aW9ucyA9IHtcclxuICBvbkNoZWNrOiAoIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCApID0+IHsgfSxcclxuICBvblVuY2hlY2s6ICggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ICkgPT4geyB9XHJcbn0gKSB7XHJcbiAgYmluZEVsZW1lbnRzQnlDaGVjayhcclxuICAgIHRyaWdnZXJFbGVtZW50LFxyXG4gICAgdGFyZ2V0RWxlbWVudCxcclxuICAgICggZWw6IEhUTUxFbGVtZW50ICkgPT4ge1xyXG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCAnc2hvdycgKTtcclxuICAgICAgb3B0aW9ucy5vbkNoZWNrKCB0cmlnZ2VyRWxlbWVudCwgdGFyZ2V0RWxlbWVudCApO1xyXG4gICAgfSxcclxuICAgICggZWw6IEhUTUxFbGVtZW50ICkgPT4ge1xyXG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCAnc2hvdycgKTtcclxuICAgICAgb3B0aW9ucy5vblVuY2hlY2soIHRyaWdnZXJFbGVtZW50LCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgICB9LFxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZUZyb21SYWRpb0dyb3VwKCBncm91cE5hbWU6IHN0cmluZyApOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggYFtuYW1lPSR7IGdyb3VwTmFtZSB9XTpjaGVja2VkYCApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgaWYgKCBlbCApIHtcclxuICAgIHJldHVybiBlbC52YWx1ZTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoU2Nyb2xsKCB0YXJnZXRZOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIgKTogdm9pZCB7XHJcbiAgY29uc3Qgc3RhcnRZID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gIGxldCBzdGFydFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICBmdW5jdGlvbiBzdGVwKCBjdXJyZW50VGltZTogbnVtYmVyICkge1xyXG4gICAgaWYgKCAhc3RhcnRUaW1lICkgc3RhcnRUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICBjb25zdCBlbGFwc2VkVGltZSA9IGN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lO1xyXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbiggZWxhcHNlZFRpbWUgLyBkdXJhdGlvbiwgMSApO1xyXG4gICAgY29uc3QgZWFzZWRQcm9ncmVzcyA9IGxlcnAoIDAsIDEsIHByb2dyZXNzICk7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oIDAsIGxlcnAoIHN0YXJ0WSwgdGFyZ2V0WSwgZWFzZWRQcm9ncmVzcyApICk7XHJcbiAgICBpZiAoIGVsYXBzZWRUaW1lIDwgZHVyYXRpb24gKSB7XHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSggc3RlcCApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBzdGVwICk7XHJcbn1cclxuXHJcbi8vIFJldG9ybmEgdW1hIGZ1bsOnw6NvIHF1ZSBuw6NvIHZhaSBzZXIgY29tcGxldGFkYSBjYXNvIHNlamEgY2hhbWFkYSBub3ZhbWVudGUgZW0geyBkZWxheSB9IG1pbGlzc2VndW5kb3NcclxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlRmFjdG9yeSggZnVuYzogRnVuY3Rpb24sIGRlbGF5OiBudW1iZXIgKTogRnVuY3Rpb24ge1xyXG4gIGxldCBpbkRlYm91bmNlOiBudW1iZXI7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSB3aW5kb3c7XHJcbiAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgY2xlYXJUaW1lb3V0KCBpbkRlYm91bmNlICk7XHJcbiAgICBpbkRlYm91bmNlID0gd2luZG93LnNldFRpbWVvdXQoICgpID0+IGZ1bmMuYXBwbHkoIGNvbnRleHQsIGFyZ3MgKSwgZGVsYXkgKTtcclxuICB9O1xyXG59XHJcblxyXG4vLyBSZXRvcm5hIHVtYSBmdW7Dp8OjbyBxdWUgc8OzIHBvZGUgc2VyIGNvbXBsZXRhZGEgdW1hIHZleiBhIGNhZGEgeyBsaW1pdCB9IG1pbGlzc2VndW5kb3MgXHJcbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZUZhY3RvcnkoIGZ1bmM6IEZ1bmN0aW9uLCBsaW1pdDogbnVtYmVyICk6IEZ1bmN0aW9uIHtcclxuICBsZXQgbGFzdEZ1bmM6IG51bWJlcjtcclxuICBsZXQgbGFzdFJhbjogbnVtYmVyO1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gd2luZG93O1xyXG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIGlmICggIWxhc3RSYW4gKSB7XHJcbiAgICAgIGZ1bmMuYXBwbHkoIGNvbnRleHQsIGFyZ3MgKTtcclxuICAgICAgbGFzdFJhbiA9IERhdGUubm93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbGVhclRpbWVvdXQoIGxhc3RGdW5jICk7XHJcbiAgICAgIGxhc3RGdW5jID0gd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIERhdGUubm93KCkgLSBsYXN0UmFuID49IGxpbWl0ICkge1xyXG4gICAgICAgICAgZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApO1xyXG4gICAgICAgICAgbGFzdFJhbiA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBsaW1pdCAtICggRGF0ZS5ub3coKSAtIGxhc3RSYW4gKSApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNtb290aFNjcm9sbFRvKCBwb3M6IG51bWJlciApOiB2b2lkIHtcclxuICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvKCB7XHJcbiAgICB0b3A6IHBvcyxcclxuICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGxUb0VsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCB1c2VCcm93c2VyRGVmYXVsdHM6IGJvb2xlYW4gPSB0cnVlICk6IHZvaWQge1xyXG4gIGlmICggIXVzZUJyb3dzZXJEZWZhdWx0cyApIHtcclxuICAgIGNvbnN0IHRhcmdldFkgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgY29uc3QgZHVyYXRpb24gPSAxMDAwOyAvLyBEdXJhw6fDo28gZml4YSBlbSBtaWxpc3NlZ3VuZG9zICgxIHNlZ3VuZG8pXHJcbiAgICBzbW9vdGhTY3JvbGwoIHRhcmdldFksIGR1cmF0aW9uICk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvKCB7XHJcbiAgICB0b3A6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueSxcclxuICAgIGxlZnQ6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueCxcclxuICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RPcHRpb25CeVRleHQoIGlkU2VsZWN0RWxlbWVudDogc3RyaW5nLCBzZWFyY2hUZXh0OiBzdHJpbmcsIGNvbnRhaW5zOiBib29sZWFuID0gZmFsc2UgKTogdm9pZCB7XHJcbiAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBpZFNlbGVjdEVsZW1lbnQgKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuXHJcbiAgaWYgKCAhc2VsZWN0RWxlbWVudCApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IG9wdGlvbnNFbGVtZW50b1NlbGVjdCA9IFsuLi5zZWxlY3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdvcHRpb24nICldO1xyXG5cclxuICBsZXQgc2VsZWN0ZWRPcHRpb247XHJcbiAgaWYgKCBjb250YWlucyApIHtcclxuICAgIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9uc0VsZW1lbnRvU2VsZWN0XHJcbiAgICAgIC5maWx0ZXIoIGVsID0+IGVsLnRleHRDb250ZW50ICYmIGVsLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoIHNlYXJjaFRleHQudG9Mb3dlckNhc2UoKSApIClbMF0udmFsdWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9uc0VsZW1lbnRvU2VsZWN0XHJcbiAgICAgIC5maWx0ZXIoIGVsID0+IGVsLnRleHRDb250ZW50ICYmIGVsLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkgPT09IHNlYXJjaFRleHQudG9Mb3dlckNhc2UoKSApWzBdLnZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0RWxlbWVudC52YWx1ZSA9IHNlbGVjdGVkT3B0aW9uO1xyXG59XHJcblxyXG4iLCJleHBvcnQgY29uc3QgcmVnZXhOdW1iZXJQYXR0ZXJuID0gLy0/XFxkK1xcLj9cXGQqL2c7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50MkQge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGltZW5zaW9ucyB7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4VG9Sb3coIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiBNYXRoLmZsb29yKCBpbmRleCAvIGdyaWRXaWR0aCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb0NvbCggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGluZGV4ICUgZ3JpZFdpZHRoO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm93Q29sVG9JbmRleCggcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCB3aWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiAoIHJvdyAqIHdpZHRoICkgKyBjb2w7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlc0Zyb21Qb2ludDJEKCBjb29yZHM6IFBvaW50MkQsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IGNvb3Jkcy54ICogTWF0aC5jb3MoIHJhZGlhbnMgKSAtIGNvb3Jkcy55ICogTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuICBjb25zdCBuZXdZID0gY29vcmRzLnggKiBNYXRoLnNpbiggcmFkaWFucyApICsgY29vcmRzLnkgKiBNYXRoLmNvcyggcmFkaWFucyApO1xyXG4gIHJldHVybiB7IHg6IG5ld1gsIHk6IG5ld1kgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlcyggeDogbnVtYmVyLCB5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IHggKiBNYXRoLmNvcyggcmFkaWFucyApIC0geSAqIE1hdGguc2luKCByYWRpYW5zICk7XHJcbiAgY29uc3QgbmV3WSA9IHggKiBNYXRoLnNpbiggcmFkaWFucyApICsgeSAqIE1hdGguY29zKCByYWRpYW5zICk7XHJcbiAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJlRGlhZ29uYWxzKCBpbmRleDE6IG51bWJlciwgaW5kZXgyOiBudW1iZXIsIGdyaWRTaXplOiBudW1iZXIgKTogYm9vbGVhbiB7XHJcbiAgaWYgKCBpbmRleDEgPCAwIHx8IGluZGV4MiA8IDAgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoICdJbnZhbGlkIGNlbGwgaW5kaWNlcycgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJvdzEgPSBpbmRleFRvUm93KCBpbmRleDEsIGdyaWRTaXplICk7XHJcbiAgY29uc3QgY29sMSA9IGluZGV4VG9Db2woIGluZGV4MSwgZ3JpZFNpemUgKTtcclxuXHJcbiAgY29uc3Qgcm93MiA9IGluZGV4VG9Sb3coIGluZGV4MiwgZ3JpZFNpemUgKTtcclxuICBjb25zdCBjb2wyID0gaW5kZXhUb0NvbCggaW5kZXgyLCBncmlkU2l6ZSApO1xyXG5cclxuICByZXR1cm4gTWF0aC5hYnMoIHJvdzEgLSByb3cyICkgPT09IE1hdGguYWJzKCBjb2wxIC0gY29sMiApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb1BvaW50MkQoIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICk6IFBvaW50MkQge1xyXG4gIHJldHVybiB7XHJcbiAgICB4OiBpbmRleFRvQ29sKCBpbmRleCwgZ3JpZFdpZHRoICksXHJcbiAgICB5OiBpbmRleFRvUm93KCBpbmRleCwgZ3JpZFdpZHRoIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsZXJwKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuICggMSAtIGFtb3VudCApICogbWluICsgYW1vdW50ICogbWF4O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZUxlcnAoIGE6IG51bWJlciwgYjogbnVtYmVyLCB2YWw6IG51bWJlciApOiBudW1iZXIge1xyXG4gIHJldHVybiAoIHZhbCAtIGEgKSAvICggYiAtIGEgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbWFwKCBpbk1pbjogbnVtYmVyLCBpbk1heDogbnVtYmVyLCBvdXRNaW46IG51bWJlciwgb3V0TWF4OiBudW1iZXIsIHZhbDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuIGxlcnAoIG91dE1pbiwgb3V0TWF4LCBpbnZlcnNlTGVycCggaW5NaW4sIGluTWF4LCB2YWwgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiApICsgbWluICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsU2V0czxUPiggc2V0MTogU2V0PFQ+LCBzZXQyOiBTZXQ8VD4gKSB7XHJcbiAgcmV0dXJuIHNldDEuc2l6ZSA9PT0gc2V0Mi5zaXplICYmXHJcbiAgICBbLi4uc2V0MV0uZXZlcnkoICggeCApID0+IHNldDIuaGFzKCB4ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUludEluY2x1c2l2ZSggbWluOiBudW1iZXIsIG1heDogbnVtYmVyICkge1xyXG4gIG1pbiA9IE1hdGguY2VpbCggbWluICk7XHJcbiAgbWF4ID0gTWF0aC5mbG9vciggbWF4ICk7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiArIDEgKSApICsgbWluO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRnJvbUFycmF5PFQ+KCBhcnI6IEFycmF5PFQ+ICkge1xyXG4gIHJldHVybiBhcnJbZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCAwLCBhcnIubGVuZ3RoICldO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAoIG51bTogbnVtYmVyID0gMCwgbWluOiBudW1iZXIgPSAwLCBtYXg6IG51bWJlciA9IDEwMCApOiBudW1iZXIge1xyXG4gIHJldHVybiBNYXRoLm1heCggbWluLCBNYXRoLm1pbiggbnVtLCBtYXggKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWludXRlc1RvTWlsbGlzZWNvbmRzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAqIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9NaW51dGVzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAvIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9Ib3VycyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgLyAzLjZlKzY7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb0RheXMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zIC8gOC42NGUrNztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1lZ2FieXRlVG9CeXRlKCBtYjogbnVtYmVyICkge1xyXG4gIHJldHVybiBtYiAqIDEwMjQgKiAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnl0ZVRvTWVnYWJ5dGUoIGI6IG51bWJlciApIHtcclxuICByZXR1cm4gYiAvIDEwMjQgLyAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJyYXlGcm9tUmFuZ2UoIHNpemU6IG51bWJlciwgc3RhcnRpbmdGcm9tOiBudW1iZXIgPSAwICk6IG51bWJlcltdIHtcclxuICBsZXQgcmVzdWx0ID0gWy4uLkFycmF5KCBzaXplICkua2V5cygpXVxyXG5cclxuICBpZiAoIHN0YXJ0aW5nRnJvbSAhPSAwICkge1xyXG4gICAgcmVzdWx0ID0gcmVzdWx0Lm1hcCggaSA9PiBpICsgc3RhcnRpbmdGcm9tICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KTtcbiJdLCJuYW1lcyI6WyJCb3JkZXJEaXN0YW5jZUV4dHJhcyIsImNvbGxpc2lvbkJvcmRlckRpc3RhbmNlcyIsImNvbnN0cnVjdG9yIiwiY29sbGlzaW9uQm9yZGVyRGlzdGFuY2UiLCJ0aGlzIiwiYW55R3JlYXRlclRoYW4iLCJudW0iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJhbnlMb3dlclRoYW4iLCJhbnlFcXVhbHMiLCJtYXBFbGVtZW50c0NvbGxpZGluZ0J5VGFyZ2V0cyIsIk1hcCIsIm1hcFRhcmdldHNDb2xsaWRpbmdCeVRyaWdnZXJFbGVtZW50IiwibWFwRWxlbWVudHNUcmlnZ2VyaW5nRXZlbnRzQnlUYXJnZXQiLCJjb2xsaXNpb25DaGVja0ludGVydmFsIiwiY29sbGlzaW9uRXZlbnRzQnlTZWxlY3RvcnMiLCJpbnNlcnRJbnRvRXZlbnRDaGVja0xpc3QiLCJlbGVtZW50VG9DaGVjayIsInRhcmdldFF1ZXJ5U2VsZWN0b3IiLCJjb2xsaXNpb25FdmVudHMiLCJyZWZFeGlzdGluZ0V2ZW50IiwiZ2V0IiwicHVzaCIsInRyaWdnZXJFbGVtZW50IiwiZXZlbnRzIiwic2V0IiwiY2xlYW5Ob3RDb2xsaWRpbmdFbGVtZW50c0F0dHJpYnV0ZXNBbmRDbGFzc2VzIiwidHJpZ2dlckVsZW1lbnRzQ29sbGlzaW9uIiwidGFyZ2V0IiwidGFyZ2V0Q29sbGlzaW9uIiwiYWdlbnQiLCJkZWxldGUiLCJzaXplIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic2V0Q29sbGlzaW9uQ2xhc3NlcyIsImNvbGxpc2lvblRyaWdnZXIiLCJhZGQiLCJnZXRFbGVtZW50c0NvbGxpZGluZ0J5VGFyZ2V0IiwiaGFzIiwiU2V0IiwiZ2V0RWxlbWVudHNDb2xsaWRpbmdCeVRyaWdnZXIiLCJjaGVja0VhY2hFbGVtZW50Q29sbGlzaW9uIiwiZm9yRWFjaCIsImFzeW5jIiwiY29sbGlzaW9uVHJpZ2dlcnMiLCJjb2xsaXNpb25UYXJnZXRTZWxlY3RvcnMiLCJhcnJUYXJnZXRzIiwidGFyZ2V0Q29sbGlzaW9uU2V0IiwidHJpZ2dlciIsInRyaWdnZXJDb2xsaXNpb25TZXQiLCJjaGVja0VsZW1lbnRDb2xsaXNpb24iLCJjb2xsaWRpbmdBdCIsImdldENvbGxpc2lvbkRpcmVjdGlvbiIsImRpc3RhbmNlRnJvbUJvcmRlciIsImdldERpc3RhbmNlRnJvbUJvcmRlciIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJldmVudCIsImVuYWJsZWQiLCJvbkNvbGxpZGluZyIsInRyaWdnZXJDb2xsaXNpb25FdmVudHNBc3luYyIsIm9uTm90Q29sbGlkaW5nIiwib25FbGVtZW50c05vdENvbGxpZGluZyIsInNldENvbGxpc2lvbkV2ZW50c0ZvclRhcmdldHMiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJpbml0Q29tcGxleENvbGxpc2lvbkNoZWNrIiwiZ2V0RWxlbWVudHNJbnRlcmFjdGluZ1NldCIsIkNvbGxpc2lvbkV2ZW50IiwiT2JqZWN0RXZlbnRMaXN0ZW5lciIsImlzVmFsaWRUYXJnZXRUb1RyaWdnZXJFdmVudCIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXRDbGFzc05hbWUiLCJ2YWxpZGF0ZURpc3RhbmNlIiwiY2hlY2tUYXJnZXRDbGFzcyIsImNvbnRhaW5zIiwiZGlzdGFuY2VUaHJlc2hvbGQiLCJQaW5Db2xsaXNpb25FdmVudCIsIm9uUGluRXZlbnRzIiwib25VbnBpbkV2ZW50cyIsInBpblBvc2l0aW9uRm9ybXVsYSIsInRhcmdldENsYXNzIiwib25QaW4iLCJvblVucGluIiwic3VwZXIiLCJ1bmRlZmluZWQiLCJtYWluRWxlbWVudCIsIl9jb2xsaWRpbmdBdCIsImVsZW1lbnRzSW50ZXJhY3RpbmdTZXQiLCJuYW1lQ291bnRFbGVtZW50c0ludGVyYWN0aW5nQXR0cmlidXRlIiwib25FbGVtZW50SW50ZXJhY3Rpb25DaGFuZ2UiLCJldiIsImdldEV2ZW50c0J5TmFtZSIsImRyYWdnYWJsZSIsInRhcmdldFJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwaW5Qb3NpdGlvbiIsImdldFRyYW5zZm9ybUNvb3Jkc0Zyb21FbGVtZW50IiwicmVzZXRUcmFuc2Zvcm0iLCJzdHlsZSIsInRyYW5zZm9ybSIsIngiLCJ5IiwicGluRWxlbWVudEJ5Rm9ybXVsYSIsImRyYWdnYWJsZVRyYW5zZm9ybVBvc2l0aW9uIiwidGFyZ2V0UmlnaHRQb3NpdGlvbiIsInRhcmdldEJvdHRvbVBvc2l0aW9uIiwibmV3WCIsIk1hdGgiLCJyb3VuZCIsIndpZHRoIiwibmV3WSIsImhlaWdodCIsInBpbkVsZW1lbnRPbkNlbnRlciIsImFnZW50Q29sbGlzaW9uU2V0Iiwic2V0QXR0cmlidXRlIiwidG9TdHJpbmciLCJlbGVtZW50IiwicmVwbGFjZSIsInJlZ2V4UmVtb3ZlVHJhbnNsYXRlRnJvbVRyYW5zZm9ybSIsImRlZmF1bHRTaGFyZUF0dHJpYnV0ZUNvbGxpc2lvbkV2ZW50T3B0aW9ucyIsImtlZXBBdHRyaWJ1dGUiLCJTaGFyZUF0dHJpYnV0ZUNvbGxpc2lvbkV2ZW50Iiwib3B0aW9ucyIsIl9kaXN0YW5jZUZyb21Cb3JkZXIiLCJzaGFyZWRBdHRyaWJ1dGVOYW1lIiwiZ2V0QXR0cmlidXRlIiwic2hhcmVkQXR0cmlidXRlVmFsdWUiLCJoYW5kbGVFbGVtZW50SW50ZXJhY3Rpb25TaGFyZUF0dHJpYnV0ZSIsIm9uU2hhcmVkQXR0cmlidXRlRW1wdHkiLCJkZWZhdWx0U2hhcmVkQXR0cmlidXRlRnJvbVRhcmdldCIsImdldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJldmVudHNCeU5hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnROYW1lIiwidG9Mb3dlckNhc2UiLCJjYWxsRXZlbnRzQnlOYW1lIiwiZXZlbnRBcmdzIiwiZSIsInJlZ2V4R3JvdXBSb3RhdGVWYWx1ZSIsInJlZ2V4R3JvdXBSb3RhdGVYVmFsdWUiLCJyZWdleEdyb3VwUm90YXRlWVZhbHVlIiwicmVnZXhHcm91cFJvdGF0ZVpWYWx1ZSIsImRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSIsImRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0IiwiZGljdEtleXNCeUFjdGlvbktleXVwIiwiZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiIsInJlY3QiLCJjZW50ZXJYIiwiY2VudGVyWSIsInJvdGF0aW9uQW5nbGUiLCJtYXRjaCIsImF4aXMiLCJnZXRSZWdleFJlbW92ZVJvdGF0aW9uQmFzZWRPbkF4aXMiLCJnZXRFbGVtZW50Um90YXRpb25BeGlzIiwiYm9keSIsImV4ZWMiLCJwYXJzZUZsb2F0IiwiZ2V0Qm9keVJvdGF0aW9uSW5EZWdyZWVzIiwicmFkaWFucyIsIlBJIiwiY29zVGhldGEiLCJjb3MiLCJzaW5UaGV0YSIsInNpbiIsInJvdGF0ZWRYMSIsInJvdGF0ZWRZMSIsInJvdGF0ZWRYMiIsInJvdGF0ZWRZMiIsInJvdGF0ZWRMZWZ0IiwibWluIiwicm90YXRlZFRvcCIsInJvdGF0ZWRCb3R0b20iLCJtYXgiLCJyb3RhdGVkUmlnaHQiLCJ0b0pTT04iLCJlbGVtZW50MSIsImVsZW1lbnQyIiwiY2hlY2tCb2R5Um90YXRpb24iLCJyZWN0MSIsInJlY3QyIiwibWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQiLCJhdHRyaWJ1dGVOYW1lIiwicmVzdWx0IiwiZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZSIsIm5ld0RlZmF1bHRBdHRyaWJ1dGUiLCJzZXREZWZhdWx0QXR0cmlidXRlRm9yVGFyZ2V0IiwiY2VudGVyIiwiZWxlbWVudFRyYW5zZm9ybSIsImluY2x1ZGVzIiwiYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGUiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwicmVnZXhOdW1iZXJQYXR0ZXJuIiwibiIsImJvZHlBbmdsZSIsInJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZSIsImdldEVsZW1lbnRSb3RhdGlvbkluRGVncmVlcyIsInJvdGF0ZUNvb3JkaW5hdGVzIiwiZXZ0IiwicmVwZWF0IiwicGFpciIsImNvZGUiLCJrYkV2ZW50IiwicnVuT25seU9uY2VLZXlkb3duQWN0aW9ucyIsInJ1bktleWRvd25BY3Rpb25zUmVwZWF0IiwiYW5nbGUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9
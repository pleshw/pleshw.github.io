var Soundboard;(()=>{"use strict";var t={173:(t,e,i)=>{i.d(e,{AudioComponent:()=>l});var n=i(7930),s=i(7353),r=i(1319),a=i(3164),o=i(6555);class l extends n.ObjectEventListener{src;audioElement;_container;_blockInteraction=!1;_divBlockInteraction;constructor(t){super(),this.src=t.src,this._container=t.container,this.audioElement=t.audioElement,this._blockInteraction=!!t.blockInteraction,t.audioElementId&&(this.audioElement.id=t.audioElementId),this.audioElement.classList.add("audio-component"),this.audioElement.addEventListener("ended",(()=>{this.stop()})),this._container.id||(this._container.id=t.audioElementId+"AudioComponentContainer"),this._container.classList.add("audio-component-container"),this._divBlockInteraction=this.getInvisibleDivBlockInteraction(this),this.setupInvisibleDivBlockInteraction(),this.setElementsAttributes()}get isPlaying(){return!this.audioElement.paused}get id(){return this.audioElement.id}get _videoInfoAttributeList(){return[["audio-component-src",this.src],["audio-component-name",(0,a.removeFilePath)(this.src)]]}setElementsAttributes(){(0,r.setAttributeListForElement)(this.audioElement,this._videoInfoAttributeList),(0,r.setAttributeListForElement)(this.container,this._videoInfoAttributeList),(0,r.setAttributeListForElement)(this.divBlockInteraction,this._videoInfoAttributeList)}get divBlockInteraction(){return this._divBlockInteraction}get container(){return this._container}get paused(){return this.audioElement.paused}get fileName(){return this.audioElement.src||this.audioElement.querySelector("source")?.src||""}get currentTime(){return this.audioElement.currentTime}set currentTime(t){this.audioElement.currentTime=t}get sourceElements(){return Array.from(this.audioElement.querySelectorAll("source"))}changeSource(t){this.src=t,this.audioElement.innerHTML=(0,s.sourceElementHTML)(this.src),this.audioElement.load(),this.setElementsAttributes(),this.stop()}playWithoutTriggerEvents(){var t=this.audioElement.play();return void 0!==t&&t.then((t=>{})).catch((()=>{this.stop()})),this.setClassesPlaying(),this}pauseWithoutTriggerEvents(){return this.audioElement.pause(),this.setClassesPaused(),this}setClassesPlaying(){this._container.classList.add("audio-component-playing"),this._divBlockInteraction.classList.add("audio-component-playing"),this._container.classList.remove("audio-component-paused"),this._divBlockInteraction.classList.remove("audio-component-paused")}setClassesPaused(){this._container.classList.add("audio-component-paused"),this._divBlockInteraction.classList.add("audio-component-paused"),this._container.classList.remove("audio-component-playing"),this._divBlockInteraction.classList.remove("audio-component-playing")}play(){return this.playWithoutTriggerEvents(),this.callEventsByName("onplay",this),this}pause(){return this.pauseWithoutTriggerEvents(),this.callEventsByName("onpause",this),this}stop(){return this.pause(),this.audioElement.currentTime=0,this.callEventsByName("onstop",this),this}toggle(){return this.paused?this.playWithoutTriggerEvents():this.pause(),this.callEventsByName("ontoggle",this),this}mute(){return this.audioElement.volume=0,this.callEventsByName("onmute",this),this}unmute(){return this.audioElement.volume=1,this.callEventsByName("onunmute",this),this}seek(t,e){return this.currentTime=t,this.callEventsByName("onseek",this),this}get dimensions(){return(0,r.getElementDimensions)(this._container)}getInvisibleDivBlockInteraction(t){const e=(0,r.createInvisibleDivAboveParent)({parentElement:t._container,id:`invisibleDivBlockInteraction${t._container.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:t.dimensions.height}});return e.classList.add("audio-component-div-block-interaction"),e}setupInvisibleDivBlockInteraction(){this._divBlockInteraction.style.display=this._blockInteraction?"block":"none",this._divBlockInteraction.style.zIndex="995",this._divBlockInteraction.addEventListener("click",(()=>{this.callEventsByName("onclickinteractionblocked",this,this._divBlockInteraction),this.callEventsByName("oninteractionblocked",this,this._divBlockInteraction)}))}static async createAudioComponentOnBody(t){const e=await new o.AudioComponentFactory(t.src).buildOnBody();return new l({src:t.src,container:e,audioElement:e.querySelector("audio"),audioElementId:t.audioElementId,blockInteraction:t.blockInteraction})}static async createAudioComponent(t){if(t.container===document.body||!t.container)return this.createAudioComponentOnBody(t);const e=await new o.AudioComponentFactory(t.src).build(t.container);return new l({src:t.src,container:e,audioElement:e.querySelector("audio"),audioElementId:t.audioElementId,blockInteraction:t.blockInteraction})}}},6555:(t,e,i)=>{i.d(e,{AudioComponentFactory:()=>r});var n=i(7353),s=i(6401);class r extends s.ComponentContainer{constructor(t,e){super("audioComponent",(0,n.createInvisiblePlayer)([t],e))}async buildSubComponents(t){}}},6401:(t,e,i)=>{i.d(e,{ComponentContainer:()=>n});class n{_element=null;templateElement;componentName;subComponentCountByName=new Map;subComponents=[];constructor(t,e){if("string"==typeof e){const t=document.getElementById(e);if(!t)throw new Error("Invalid template for scene component. Template id: "+e);this.templateElement=t}else this.templateElement=document.createElement("template"),this.templateElement.content.appendChild(e),document.body.appendChild(this.templateElement);this.componentName=t}getTemplateCloneNodes(){return this.templateElement.content.cloneNode(!0).children}async buildSingleSubComponent(t,e){this.subComponentCountByName.has(this.componentName)&&this.subComponentCountByName.set(this.componentName,0);let i=this.subComponentCountByName.get(this.componentName);return this.subComponentCountByName.set(this.componentName,i+1),await t.build(e,`${this.componentName}${t.componentName.capitalizeFirstLetter()}${i}`)}async buildOnBody(t){this._element=document.createElement("div"),t&&(this._element.id=t);for(let t of this.getTemplateCloneNodes())this._element.insertAdjacentElement("afterbegin",t);if(!this._element)throw new Error(`Fail building SceneComponent. ElementId: ${t}`);return await this.buildSubComponents(document.body),document.body.insertAdjacentElement("beforeend",this._element),this._element}async build(t,e){for(let e of this.getTemplateCloneNodes())t.insertAdjacentElement("afterbegin",e);return await this.buildSubComponents(t),t}}},6167:(t,e,i)=>{function n(t){return`\n  <div id="${t}SoundTableItem" class="sound-table-item-container">\n  </div>\n  `.trim()}function s(t,e,i="",n=""){return`\n    <div class="form-floating sound-table-input-container">\n      <input type="text" value="${i}" class="form-control sound-table-input" id="urlInput${t}" placeholder="${n}">\n      <label for="urlInput${t}">${e}</label>\n    </div>\n  `}i.d(e,{templateSoundboardInput:()=>s,templateSoundboardItemContainer:()=>n})},2152:(t,e,i)=>{function n(t){return`\n  <div id="${t}">\n  </div>\n  `.trim()}i.d(e,{templateBackgroundYoutubeIframeElement:()=>n})},5102:(t,e,i)=>{i.d(e,{YoutubeIframe:()=>o});var n=i(1319),s=(i(4763),i(739)),r=i(2152),a=(i(4785),i(3362),i(7930));class o extends a.ObjectEventListener{static arrObjectToSetOnEveryIframeReady=[];static _dictYoutubeIframeById=new Map;static _arrYoutubeIframeIdReady=[];player;_isPlayerReady=!1;id;_videoId;videoName="";videoThumb="";channelURL="";channelName="";_iframeElement=null;_iframeContainer;_iframeParentElement;_isPlaying=!1;_dimensions;topDiv;_startsAt;_blockInteraction=!1;_divBlockInteraction=null;_startMuted;_playingObserverInterval=null;_eventListener=new a.ObjectEventListener;constructor(t){if(o._dictYoutubeIframeById.has(t.iframeId))throw new Error("Invalid iframe there's already an iframe with this id.");super(),this.id=t.iframeId,this._startsAt=t.startsAt??0,this._videoId=t.videoId,this._startMuted=!!t.startMuted,this._blockInteraction=!!t.blockInteraction,this._iframeContainer=o.getYoutubeIframeElement({iframeId:t.iframeId,classList:t.classList}),this._iframeParentElement=o.setupParentFromYoutubeIframe({parentElement:t.parentElement??document.body,iframeContainer:this._iframeContainer}),this.setClassesIframePaused(),this._dimensions=t.dimensions??(0,n.getElementDimensions)(this._iframeParentElement),o._dictYoutubeIframeById.set(t.iframeId,this),this.setVideoInfo().then((()=>{this.setExternalHTMLElementsAttributes()}))}get videoId(){return(0,n.extractYouTubeId)(this._videoId)}async setVideoInfo(){const t=await this.getVideoInfo();this.videoName=t&&t.title?t.title:"",this.channelName=t&&t.author_name?t.author_name:"",this.videoThumb=t&&t.thumbnail_url?t.thumbnail_url:"",this.channelURL=t&&t.author_url?t.author_url:""}changeVideo(t){(0,n.isValidYoutubeUrlOrId)(t.videoId)&&(this.player&&this.player.loadVideoById?(this.prepareOptions(t),this.player.seekTo(this.startsAt,!0),this.isPlaying?this.playWithoutTriggerEvents():this.pauseWithoutTriggerEvents()):setTimeout((()=>this.changeVideo(t)),100))}prepareOptions(t){this.id=t.iframeId,this._videoId=t.videoId,this.startsAt=t.startsAt??this.startsAt,this.loadVideo()}loadVideo(){this.player.loadVideoById({videoId:this.videoId,startSeconds:this.startsAt,suggestedQuality:"highres"}),this.setVideoInfo().then((()=>{this.setExternalHTMLElementsAttributes()}))}async getVideoInfo(){const t=await(0,n.handlePromise)(fetch(`https://www.youtube.com/oembed?url=${this.videoURL}&format=json`));if(!t.error)return await t.data().json();console.error(t.error)}onPlayerReady(t){this._startMuted&&this.player.mute(),o._arrYoutubeIframeIdReady.push(this.id),this._iframeElement=document.getElementById(this.id),this.setClassesIframePaused(),this.player.setPlaybackQuality("highres"),this.player.seekTo(this._startsAt??0,!0),this.player.pauseVideo(),this._isPlayerReady=!0,this.callEventsByName("oniframeready",this),o.checkIfEveryIframeIsReady()}onPlayerStateChange(t){t.data===o._youtubeAPIReference.PlayerState.PLAYING?(this._isPlaying=!0,this._playingObserverInterval=setInterval((()=>this.callEventsByName("onplaying",this,this.isPlaying)),100),this.setClassesIframePlaying()):this._playingObserverInterval&&(clearInterval(this._playingObserverInterval),this.setClassesIframePaused(),this._isPlaying=!1,this._playingObserverInterval=null),this.callEventsByName("playerstatechange",this,this.isPlaying),this.callEventsByName("onplayerstatechange",this,this.isPlaying)}setClassesIframePlaying(){this._iframeElement&&(this._iframeElement.classList.remove("yt-paused"),this._iframeElement.classList.add("yt-playing")),this._iframeContainer.classList.remove("yt-paused"),this._iframeContainer.classList.add("yt-playing"),this._iframeParentElement.classList.remove("yt-paused"),this._iframeParentElement.classList.add("yt-playing")}setClassesIframePaused(){this._iframeElement&&(this._iframeElement.classList.add("yt-paused"),this._iframeElement.classList.remove("yt-playing")),this._iframeContainer.classList.add("yt-paused"),this._iframeContainer.classList.remove("yt-playing"),this._iframeParentElement.classList.add("yt-paused"),this._iframeParentElement.classList.remove("yt-playing")}onEveryYoutubeIframeReady(){this.callEventsByName("oneveryyoutubeiframeready")}get divBlockInteraction(){return this._divBlockInteraction}get videoURL(){return`https://www.youtube.com/watch?v=${this.videoId}`}get parentElement(){return this._iframeParentElement}get iframeElement(){if(!this._iframeElement)throw new Error("Iframe was called but it's not ready.");return this._iframeElement}get isPlayerReady(){return this._isPlayerReady}get duration(){return this.player.getDuration()-this._startsAt}get playerDuration(){return this.player.getDuration()}set currentTime(t){this.seek(t)}get currentTime(){return this.player.getCurrentTime()-this._startsAt}get playerCurrentTime(){return this.player.getCurrentTime()}get progressPercent(){return this.currentTime/this.duration}get playerProgressPercent(){return this.playerCurrentTime/this.playerDuration}get startMuted(){return this._startMuted}get isPlaying(){return this._isPlaying}get dimensions(){return this._dimensions}get startsAt(){return(0,s.clamp)(this._startsAt,0,this._startsAt)}set startsAt(t){this._startsAt=(0,s.clamp)(t,0,t)}toggle(){return this.isPlaying?this.pause():this.play(),this}play(){return this.playWithoutTriggerEvents(),this.callEventsByName("onplay",this),this}playWithoutTriggerEvents(){return this.player.playVideo(),this._isPlaying=!0,this.setClassesIframePlaying(),this}pause(){return this.pauseWithoutTriggerEvents(),this.callEventsByName("onpause",this),this}pauseWithoutTriggerEvents(){return this.player.pauseVideo(),this._isPlaying=!1,this.setClassesIframePaused(),this}seek(t,e=!1,i=!1){return this.callEventsByName("onseek",t,e,i,this),t+=i?this._startsAt:0,this.player.seekTo(t,e),this}mute(){return this.player.mute(),this}unmute(){return this.player.unmute(),this}static checkIfEveryIframeIsReady(){[...o._dictYoutubeIframeById.keys()].some((t=>!this._arrYoutubeIframeIdReady.includes(t)))||(this.arrObjectToSetOnEveryIframeReady.forEach((t=>t.setup(o._dictYoutubeIframeById))),o._dictYoutubeIframeById.forEach(((t,e)=>{t.onEveryYoutubeIframeReady()})))}static getYoutubeIframeElement({iframeId:t,classList:e}){const i=document.createElement("div");return i.classList.add("yt-iframe-container"),e&&i.classList.add(...e),i.id=`containerYoutubeIframe${t}`,i.insertAdjacentHTML("afterbegin",(0,r.templateBackgroundYoutubeIframeElement)(t)),i}static setupParentFromYoutubeIframe({parentElement:t,iframeContainer:e}){const i=t??document.body;return i.classList.add("yt-iframe-parent"),i.insertAdjacentElement("afterbegin",e),i}setExternalHTMLElements(){this.createInvisibleDivTop(),this.createInvisibleDivBlockInteraction(),this.setExternalHTMLElementsAttributes()}setExternalHTMLElementsAttributes(){this.setIframeContainerAttributes(),this.setTopDivAttributes(),this.setDivBlockInteractionAttributes()}createInvisibleDivTop(){this.topDiv=o.getInvisibleTopDiv(this),this.topDiv.style.zIndex="990"}createInvisibleDivBlockInteraction(){this._divBlockInteraction=o.getInvisibleDivBlockInteraction(this),this._divBlockInteraction.style.display=this._blockInteraction?"block":"none",this._divBlockInteraction.style.zIndex="995",this._divBlockInteraction.addEventListener("click",(t=>{this.callEventsByName("onclickinteractionblocked",this,this._divBlockInteraction),this.callEventsByName("oninteractionblocked",this,this._divBlockInteraction)}))}setDivBlockInteractionAttributes(){this.divBlockInteraction&&(0,n.setAttributeListForElement)(this.divBlockInteraction,this._videoInfoAttributeList)}setIframeContainerAttributes(){this._iframeContainer&&(0,n.setAttributeListForElement)(this._iframeContainer,this._videoInfoAttributeList)}setTopDivAttributes(){this.topDiv&&(0,n.setAttributeListForElement)(this.topDiv,this._videoInfoAttributeList)}set blockInteraction(t){this._blockInteraction=t,this._divBlockInteraction&&(this._divBlockInteraction.style.display=this._blockInteraction?"block":"none")}initPlayer(){this.player=new o._youtubeAPIReference.Player(this.id,{videoId:this.videoId,width:this.dimensions.width,height:this.dimensions.height,playerVars:{rel:0,iv_load_policy:3,showinfo:0,controls:0,autoplay:0},events:{onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)}})}static _youtubeAPIReference;get _videoInfoAttributeList(){return[["yt-iframe-id",this.id],["yt-iframe-video-name",this.videoName],["yt-iframe-video-channel-name",this.channelName],["yt-iframe-video-thumb-url",this.videoThumb],["yt-iframe-video-channel-url",this.channelURL]]}static async buildSingleIframe(t){if(!document.getElementById("ytIframeAPIScriptTag")){var e=document.createElement("script");e.id="ytIframeAPIScriptTag",e.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i&&i.parentNode&&i.parentNode.insertBefore(e,i)}return await(0,n.waitUntilElementExists)("#ytIframeAPIScriptTag"),await(0,n.pollForVariableAsync)("YT",(t=>"function"==typeof t.Player&&t.Player.prototype&&t.Player.prototype.constructor===t.Player&&t.loaded),(e=>{o._youtubeAPIReference=e,t.build()})),t}static buildIframes(){if(!document.getElementById("ytIframeAPIScriptTag")){var t=document.createElement("script");t.id="ytIframeAPIScriptTag",t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e&&e.parentNode&&e.parentNode.insertBefore(t,e)}(0,n.waitUntilElementExists)("#ytIframeAPIScriptTag").then((()=>{(0,n.pollForVariable)("YT",(t=>"function"==typeof t.Player&&t.Player.prototype&&t.Player.prototype.constructor===t.Player&&t.loaded),(t=>{o._youtubeAPIReference=t,o.setYoutubeIframeElements()}))}))}build(){this.setExternalHTMLElements(),this.initPlayer()}static setYoutubeIframeElements(){this._dictYoutubeIframeById.forEach(((t,e)=>{t.isPlayerReady||t.build()}))}static getInvisibleTopDiv(t){return(0,n.createInvisibleDivAboveParent)({parentElement:document.getElementById(t.id).parentElement,id:`invisibleTopDivHoldToDrag${t.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:.2*t.dimensions.height}})}static getInvisibleDivBlockInteraction(t){const e=(0,n.createInvisibleDivAboveParent)({parentElement:document.getElementById(t.id).parentElement,id:`invisibleDivBlockInteraction${t.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:t.dimensions.height}});return e.classList.add("yt-div-block-interaction"),e}}},4785:(t,e,i)=>{i.d(e,{YoutubeIframe:()=>n.YoutubeIframe});var n=i(5102)},3362:(t,e,i)=>{i(5102)},2976:()=>{String.prototype.isNullOrEmpty=function(){return"string"!=typeof this&&!this&&""!==this},String.prototype.truncate=function(t,e="..."){return(this.length>t?this.substring(0,t)+e:this).toString()},String.prototype.removeAccents=function(){return this.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},String.prototype.capitalizeFirstLetter=function(){return"string"!=typeof this?"":this.charAt(0).toUpperCase()+this.substring(1)},String.prototype.zeroBefore=function(){return this.padStart(2,"0")}},4763:(t,e,i)=>{i(1319),i(8586)},8586:(t,e,i)=>{i(1319)},7930:(t,e,i)=>{i.d(e,{ObjectEventListener:()=>n});class n{eventsByName=new Map;addEventListener(t,e){this.eventsByName.has(t.toLowerCase())?this.eventsByName.get(t.toLowerCase()).push(e):this.eventsByName.set(t.toLowerCase(),[e])}getEventsByName(t){return this.eventsByName.has(t.toLowerCase())||this.eventsByName.set(t.toLowerCase(),[]),this.eventsByName.get(t.toLowerCase())}callEventsByName(t,...e){this.getEventsByName(t).forEach((t=>t(...e)))}}},7353:(t,e,i)=>{i.d(e,{createInvisiblePlayer:()=>r,sourceElementHTML:()=>a}),i(2976);var n=i(1319),s=i(3164);function r(t,e){const i=(0,n.getElementFromHTML)(function(t,e){return`<audio controls ${e?function(t){return` ${t.id?'id="'+t.id+'"':""} ${t.autoPlay||t.autoplay?"autoplay":""} ${t.muted?"muted":""} ${t.loop?"loop":""} ${t.preload?'preload="'+t.preload+'"':""}`.trimEnd()}(e):""}>\n    ${t.map((t=>a(t))).reduce(((t,e)=>t+e),"")}\n  </audio>`}(t,e));return document.body.insertAdjacentElement("afterbegin",i),(0,n.hideElement)(i),i}function a(t){return`<source src="${t}" type="audio/${(0,s.getFileExtension)(t)}">`}i(173)},1319:(t,e,i)=>{i.d(e,{createInvisibleDivAboveParent:()=>y,extractYouTubeId:()=>l,getElementDimensions:()=>u,getElementFromHTML:()=>c,handlePromise:()=>a,hideElement:()=>v,isValidYoutubeUrlOrId:()=>o,pollForVariable:()=>m,pollForVariableAsync:()=>h,setAttributeListForElement:()=>d,waitUntilElementExists:()=>p});const n=new Map,s=new Map,r=new Map;async function a(t){try{const e=await t;return{data:()=>e,error:null}}catch(t){return console.error(t),{data:()=>{throw new Error("Couldn't fetch, check SafePromise.error for details.")},error:t instanceof Error?t:new Error(String(t))}}}function o(t){return/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(t)||/^[a-zA-Z0-9_-]{11}$/.test(t)}function l(t){const e=t.match(/[?&]v=([^?&]+)/);return e&&e[1]?e[1]:11===t.length?t:null}function d(t,e){e.forEach((([e,i])=>{t.setAttribute(e,i)}))}function c(t,e=!0){if(!(t=e?t.trim():t))return null;const i=document.createElement("template");i.innerHTML=t;const n=i.content.children;return 1===n.length?n[0]:Array.from(n)}function u(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}function m(t,e,i){const n=setInterval((()=>{void 0!==window[t]&&e(window[t])&&(clearInterval(n),i(window[t]))}),100)}async function h(t,e,i){return new Promise((n=>{const s=setInterval((()=>{void 0!==window[t]&&e(window[t])&&(clearInterval(s),i(window[t]),n())}),100)}))}function p(t){return new Promise((e=>{if(document.querySelector(t))return e(document.querySelector(t));const i=new MutationObserver((n=>{document.querySelector(t)&&(i.disconnect(),e(document.querySelector(t)))}));i.observe(document.body,{childList:!0,subtree:!0})}))}function y({parentElement:t,id:e,position:i,dimensions:n}){var s=document.createElement("div");return t.style.position||(t.style.position="relative"),s.id=e,s.style.position="absolute",s.style.width=n&&n.width?n.width.toString()+"px":"100%",s.style.height=n&&n.height?n.height.toString()+"px":"100%",s.style.top=(i?.top.toString()??"0")+"px",s.style.left=(i?.left.toString()??"0")+"px",s.style.opacity="0",s.style.pointerEvents="auto",t.appendChild(s),s}function v(t){t.style.display="block",t.style.position="absolute",t.style.zIndex="-1",t.style.opacity="0",t.style.width="0px !important",t.style.height="0px !important",t.setAttribute("hidden","")}new Map,window.addEventListener("keydown",(t=>{t.repeat||function(t){for(const e of n)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t),function(t){for(const e of s)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t)})),window.addEventListener("keyup",(t=>{for(const e of r)t.code===e[0]&&e[1].forEach((e=>e(t)))}))},3164:(t,e,i)=>{i.d(e,{getFileExtension:()=>r,removeFilePath:()=>s});var n=i(2843);function s(t){const e=/(?:.*[\\/])([^\\/]+)$/.exec(t);return e&&e.length>1?e[1]:t}function r(t){if((0,n.isNullOrEmpty)(t))return"";const e=t.split(".").pop();if(e&&e!==t)return e;const i=t.split("/").pop();return i&&i!==t?i:""}},739:(t,e,i)=>{function n(t=0,e=0,i=100){return Math.max(e,Math.min(t,i))}i.d(e,{clamp:()=>n})},2843:(t,e,i)=>{function n(t){return"string"!=typeof t||!t||""===t}i.d(e,{isNullOrEmpty:()=>n})}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{i.r(n),i.d(n,{Soundboard:()=>o});var t=i(7930),e=i(1319),s=i(173),r=i(4785),a=i(6167);class o extends t.ObjectEventListener{container;iframesClassList;containersClassList;_setMediaControllers=new Set;_mapMediaControllersById=new Map;_mapInputByComponentId=new Map;constructor(t){super(),this.container=t.container,this.iframesClassList=t.iframesClassList??[],this.containersClassList=t.containersClassList??[];const e=t.arrMediaSrc?t.arrMediaSrc.map((t=>this.getSourceInputDefaultOptions(t))):[],i=t.arrVideoId?t.arrVideoId.map((t=>this.getSourceInputDefaultOptions(t))):[];this.addAudioList(e),this.addYoutubeList(i)}getSourceInputDefaultOptions(t){return"string"==typeof t?{src:t,autoRepeatOnPlay:!0}:t}addYoutubeList(t=[]){t.map((t=>this.getSourceInputDefaultOptions(t))).forEach((t=>{this.addIframe(`${this.container.id}IframeTableItem${t.src}`,t)}))}addAudioList(t=[]){t.map((t=>this.getSourceInputDefaultOptions(t))).forEach((t=>{this.addAudioComponent(this.container.id,t)}))}addComponentInteractionBlockEvent(t,e){t.media.addEventListener("oninteractionblocked",(()=>{t.media.seek(0,!0),e.autoRepeatOnPlay?t.media.playWithoutTriggerEvents():t.media.toggle()}))}getInputBySource(t){if(!this._mapInputByComponentId.has(t))throw new Error("Element src not on sound table.");return this._mapInputByComponentId.get(t)}get componentsControllers(){return Array.from(this._setMediaControllers)}getElementMediaContainer(t){const i=(0,e.getElementFromHTML)((0,a.templateSoundboardItemContainer)(t));return i.classList.add(...this.containersClassList),i}addAudioComponent(t,e){const i=this.getElementMediaContainer(t);this.container.insertAdjacentElement("beforeend",i),s.AudioComponent.createAudioComponent({src:e.src,audioElementId:t,blockInteraction:!0,container:i}).then((t=>{const n=this.addInputElementToContainer(i,t,t.id,e.src),s={media:t,input:n.input,inputContainer:n.container};this._setMediaControllers.add(s),this._mapMediaControllersById.set(t.id,s),this.addComponentInteractionBlockEvent(s,e)}))}addIframe(t,e){if(this._mapMediaControllersById.has(t))throw new Error("A Iframe with this id already exists: "+t);const i=this.getElementMediaContainer(t);this.container.insertAdjacentElement("beforeend",i);const n=new r.YoutubeIframe({iframeId:t,videoId:e.src,parentElement:i,startsAt:0,classList:["sound-table-item",...this.iframesClassList],blockInteraction:!0}),s=this.addInputElementToContainer(i,n,n.id,e.src),a={media:n,input:s.input,inputContainer:s.container};this._setMediaControllers.add(a),this._mapMediaControllersById.set(n.id,a),r.YoutubeIframe.buildSingleIframe(n).then((()=>this.addComponentInteractionBlockEvent(a,e)))}changeComponentSourceToInputValue(t){const e=this._mapMediaControllersById.get(t);e&&(e.media instanceof r.YoutubeIframe?e.media.changeVideo({iframeId:e.input.value,videoId:e.input.value,startsAt:0}):e.media.changeSource(e.input.value),this._mapMediaControllersById.delete(t),this._mapMediaControllersById.set(e.media.id,e))}changeComponentSource(t,e){const i=this._mapMediaControllersById.get(t);i&&(i.media instanceof r.YoutubeIframe?i.media.changeVideo({iframeId:e,videoId:e,startsAt:0}):i.media.changeSource(e))}addInputElementToContainer(t,i,n,s){const r=(0,e.getElementFromHTML)((0,a.templateSoundboardInput)(n,"Source",s));t.insertAdjacentElement("beforeend",r);const o=r.querySelector("input");return o.addEventListener("input",(()=>{this.callEventsByName("input",o.value,i),this.callEventsByName("oninput",o.value,i),this.callEventsByName("inputchange",o.value,i),this.callEventsByName("oninputchange",o.value,i)})),{input:o,container:r}}}})(),Soundboard=n})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU03VSxhQUFjbUUsRUFBVW9MLE1BQU10SyxPQUdoRDNHLEtBQUt3Vix5QkFBeUIrQixPQUFRRCxHQUN0Q3RYLEtBQUt3Vix5QkFBeUJ6UCxJQUFLRixFQUFVMFEsTUFBTW5XLEdBQUl5RixHQUN6RCxDQUVPLHFCQUFBMlIsQ0FBdUJGLEVBQXFCRyxHQUNqRCxNQUFNNVIsRUFBWTdGLEtBQUt3Vix5QkFBeUJ2UCxJQUFLcVIsR0FDL0N6UixJQUlEQSxFQUFVMFEsaUJBQWlCLEVBQUF4UCxjQUM5QmxCLEVBQVUwUSxNQUFNcE4sWUFBYSxDQUMzQnJDLFNBQVUyUSxFQUNWclAsUUFBU3FQLEVBQ1R0UCxTQUFVLElBR1p0QyxFQUFVMFEsTUFBTTdVLGFBQWMrVixHQUVsQyxDQUVRLDBCQUFBVixDQUE0QjlXLEVBQXdCNEYsRUFBNEJ5UixFQUFxQkksR0FDM0csTUFBTUMsR0FBd0IsSUFBQTlILHFCQUFvQixJQUFBcEoseUJBQXlCNlEsRUFBYSxTQUFVSSxJQUNsR3pYLEVBQVVvRyxzQkFBdUIsWUFBYXNSLEdBRTlDLE1BQU1DLEVBQWVELEVBQXNCeFcsY0FBZSxTQVMxRCxPQVBBeVcsRUFBYXJYLGlCQUFrQixTQUFTLEtBQ3RDUCxLQUFLMEMsaUJBQWtCLFFBQVNrVixFQUFhalIsTUFBT2QsR0FDcEQ3RixLQUFLMEMsaUJBQWtCLFVBQVdrVixFQUFhalIsTUFBT2QsR0FDdEQ3RixLQUFLMEMsaUJBQWtCLGNBQWVrVixFQUFhalIsTUFBT2QsR0FDMUQ3RixLQUFLMEMsaUJBQWtCLGdCQUFpQmtWLEVBQWFqUixNQUFPZCxFQUFXLElBR2xFLENBQ0xvTCxNQUFPMkcsRUFDUDNYLFVBQVcwWCxFQUVmLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9BdWRpb0NvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9BdWRpb0NvbXBvbmVudEZhY3RvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvQ29tcG9uZW50Q29udGFpbmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1NvdW5kYm9hcmQvVGVtcGxhdGVzU291bmRib2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Zb3V0dWJlSWZyYW1lL1RlbXBsYXRlc1lvdXR1YmVJZnJhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvWW91dHViZUlmcmFtZS9Zb3V0dWJlSWZyYW1lLnRzIiwid2VicGFjazovLy8uL3NyYy9FeHRlbnNpb25zL1N0cmluZ0V4dGVuc2lvbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0V4dHJhcy9PYmplY3RFdmVudExpc3RlbmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9Ub29scy9BdWRpb1Rvb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9Ub29scy9ET01Ub29scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvRmlsZVRvb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9Ub29scy9NYXRoVG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Rvb2xzL1N0cmluZ1Rvb2xzLnRzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Tb3VuZGJvYXJkL1NvdW5kYm9hcmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JqZWN0RXZlbnRMaXN0ZW5lciB9IGZyb20gJy4uL0V4dHJhcy9PYmplY3RFdmVudExpc3RlbmVyJztcclxuaW1wb3J0IHsgc291cmNlRWxlbWVudEhUTUwgfSBmcm9tICcuLi9Ub29scy9BdWRpb1Rvb2xzJztcclxuaW1wb3J0IHsgY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQsIGdldEVsZW1lbnREaW1lbnNpb25zLCBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCB9IGZyb20gJy4uL1Rvb2xzL0RPTVRvb2xzJztcclxuaW1wb3J0IHsgcmVtb3ZlRmlsZVBhdGggfSBmcm9tICcuLi9Ub29scy9GaWxlVG9vbHMnO1xyXG5pbXBvcnQgeyBEaW1lbnNpb25zIH0gZnJvbSAnLi4vVG9vbHMvTWF0aFRvb2xzJztcclxuaW1wb3J0IHsgQXVkaW9Db21wb25lbnRGYWN0b3J5IH0gZnJvbSAnLi9BdWRpb0NvbXBvbmVudEZhY3RvcnknO1xyXG5pbXBvcnQgeyBJTWVkaWFQbGF5ZXJGdW5jdGlvbnMgfSBmcm9tICcuL1R5cGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIEF1ZGlvQ29tcG9uZW50T3B0aW9ucyA9IHtcclxuICBzcmM6IHN0cmluZztcclxuICBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQ7XHJcbiAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBhdWRpb0VsZW1lbnRJZD86IHN0cmluZztcclxuICBibG9ja0ludGVyYWN0aW9uPzogYm9vbGVhbjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIENyZWF0ZUF1ZGlvQ29tcG9uZW50T3B0aW9ucyA9IHtcclxuICBzcmM6IHN0cmluZztcclxuICBhdWRpb0VsZW1lbnRJZD86IHN0cmluZztcclxuICBibG9ja0ludGVyYWN0aW9uPzogYm9vbGVhbjtcclxuICBjb250YWluZXI/OiBIVE1MRWxlbWVudDtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBBdWRpb0NvbXBvbmVudCBleHRlbmRzIE9iamVjdEV2ZW50TGlzdGVuZXIgaW1wbGVtZW50cyBJTWVkaWFQbGF5ZXJGdW5jdGlvbnMge1xyXG4gIHB1YmxpYyBzcmM6IHN0cmluZztcclxuICBwdWJsaWMgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50O1xyXG4gIHByaXZhdGUgX2NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIHByb3RlY3RlZCBfYmxvY2tJbnRlcmFjdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByb3RlY3RlZCBfZGl2QmxvY2tJbnRlcmFjdGlvbjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCBvcHRpb25zOiBBdWRpb0NvbXBvbmVudE9wdGlvbnMgKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuc3JjID0gb3B0aW9ucy5zcmM7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50ID0gb3B0aW9ucy5hdWRpb0VsZW1lbnQ7XHJcbiAgICB0aGlzLl9ibG9ja0ludGVyYWN0aW9uID0gb3B0aW9ucy5ibG9ja0ludGVyYWN0aW9uID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIGlmICggb3B0aW9ucy5hdWRpb0VsZW1lbnRJZCApIHtcclxuICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuaWQgPSBvcHRpb25zLmF1ZGlvRWxlbWVudElkO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQnICk7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnZW5kZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgfSApO1xyXG5cclxuICAgIGlmICggIXRoaXMuX2NvbnRhaW5lci5pZCApIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyLmlkID0gb3B0aW9ucy5hdWRpb0VsZW1lbnRJZCArICdBdWRpb0NvbXBvbmVudENvbnRhaW5lcic7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ2F1ZGlvLWNvbXBvbmVudC1jb250YWluZXInICk7XHJcblxyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbiA9IHRoaXMuZ2V0SW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiggdGhpcyApO1xyXG4gICAgdGhpcy5zZXR1cEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oKTtcclxuICAgIHRoaXMuc2V0RWxlbWVudHNBdHRyaWJ1dGVzKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGdldCBpc1BsYXlpbmcoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIXRoaXMuYXVkaW9FbGVtZW50LnBhdXNlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgaWQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmF1ZGlvRWxlbWVudC5pZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0IF92aWRlb0luZm9BdHRyaWJ1dGVMaXN0KCk6IFtzdHJpbmcsIHN0cmluZ11bXSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBbJ2F1ZGlvLWNvbXBvbmVudC1zcmMnLCB0aGlzLnNyY10sXHJcbiAgICAgIFsnYXVkaW8tY29tcG9uZW50LW5hbWUnLCByZW1vdmVGaWxlUGF0aCggdGhpcy5zcmMgKV1cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEVsZW1lbnRzQXR0cmlidXRlcygpIHtcclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLmF1ZGlvRWxlbWVudCwgdGhpcy5fdmlkZW9JbmZvQXR0cmlidXRlTGlzdCApO1xyXG4gICAgc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQoIHRoaXMuY29udGFpbmVyLCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgICBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCggdGhpcy5kaXZCbG9ja0ludGVyYWN0aW9uLCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGRpdkJsb2NrSW50ZXJhY3Rpb24oKTogSFRNTEVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGNvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBwYXVzZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBmaWxlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50LnNyYyB8fCB0aGlzLmF1ZGlvRWxlbWVudC5xdWVyeVNlbGVjdG9yKCAnc291cmNlJyApPy5zcmMgfHwgJyc7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGN1cnJlbnRUaW1lKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IGN1cnJlbnRUaW1lKCB0OiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHNvdXJjZUVsZW1lbnRzKCk6IEhUTUxTb3VyY2VFbGVtZW50W10ge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oIHRoaXMuYXVkaW9FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdzb3VyY2UnICkgKSBhcyBIVE1MU291cmNlRWxlbWVudFtdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNoYW5nZVNvdXJjZSggc3JjOiBzdHJpbmcgKSB7XHJcbiAgICB0aGlzLnNyYyA9IHNyYztcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LmlubmVySFRNTCA9IHNvdXJjZUVsZW1lbnRIVE1MKCB0aGlzLnNyYyApO1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQubG9hZCgpO1xyXG4gICAgdGhpcy5zZXRFbGVtZW50c0F0dHJpYnV0ZXMoKTtcclxuICAgIHRoaXMuc3RvcCgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpIHtcclxuICAgIHZhciBwbGF5UHJvbWlzZSA9IHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKTtcclxuXHJcbiAgICBpZiAoIHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgIHBsYXlQcm9taXNlLnRoZW4oIF8gPT4geyB9IClcclxuICAgICAgICAuY2F0Y2goICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldENsYXNzZXNQbGF5aW5nKCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCkge1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgIHRoaXMuc2V0Q2xhc3Nlc1BhdXNlZCgpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBzZXRDbGFzc2VzUGxheWluZygpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50LXBsYXlpbmcnICk7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQtcGxheWluZycgKTtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSggJ2F1ZGlvLWNvbXBvbmVudC1wYXVzZWQnICk7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoICdhdWRpby1jb21wb25lbnQtcGF1c2VkJyApO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2xhc3Nlc1BhdXNlZCgpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50LXBhdXNlZCcgKTtcclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uY2xhc3NMaXN0LmFkZCggJ2F1ZGlvLWNvbXBvbmVudC1wYXVzZWQnICk7XHJcblxyXG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICdhdWRpby1jb21wb25lbnQtcGxheWluZycgKTtcclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSggJ2F1ZGlvLWNvbXBvbmVudC1wbGF5aW5nJyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXkoKSB7XHJcbiAgICB0aGlzLnBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25wbGF5JywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGF1c2UoKSB7XHJcbiAgICB0aGlzLnBhdXNlV2l0aG91dFRyaWdnZXJFdmVudHMoKTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucGF1c2UnLCB0aGlzICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdG9wKCkge1xyXG4gICAgdGhpcy5wYXVzZSgpO1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uc3RvcCcsIHRoaXMgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZSgpIHtcclxuICAgIGlmICggdGhpcy5wYXVzZWQgKSB7XHJcbiAgICAgIHRoaXMucGxheVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBhdXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb250b2dnbGUnLCB0aGlzICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIG11dGUoKSB7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC52b2x1bWUgPSAwO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25tdXRlJywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICB1bm11dGUoKSB7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC52b2x1bWUgPSAxO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb251bm11dGUnLCB0aGlzICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHNlZWsoIHNlZWtUaW1lOiBudW1iZXIsIF9yZWxvYWRCdWZmZXI/OiBib29sZWFuICkge1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IHNlZWtUaW1lO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25zZWVrJywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGRpbWVuc2lvbnMoKTogRGltZW5zaW9ucyB7XHJcbiAgICByZXR1cm4gZ2V0RWxlbWVudERpbWVuc2lvbnMoIHRoaXMuX2NvbnRhaW5lciApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCBhdWRpb0NvbXBvbmVudDogQXVkaW9Db21wb25lbnQgKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgZWxlbWVudEludmlzaWJsZURpdiA9IGNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50KCB7XHJcbiAgICAgIHBhcmVudEVsZW1lbnQ6IGF1ZGlvQ29tcG9uZW50Ll9jb250YWluZXIsXHJcbiAgICAgIGlkOiBgaW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiR7IGF1ZGlvQ29tcG9uZW50Ll9jb250YWluZXIuaWQgfWAsXHJcbiAgICAgIHBvc2l0aW9uOiB7IHRvcDogMCwgbGVmdDogMCB9LFxyXG4gICAgICBkaW1lbnNpb25zOiB7IHdpZHRoOiBhdWRpb0NvbXBvbmVudC5kaW1lbnNpb25zLndpZHRoLCBoZWlnaHQ6IGF1ZGlvQ29tcG9uZW50LmRpbWVuc2lvbnMuaGVpZ2h0IH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBlbGVtZW50SW52aXNpYmxlRGl2LmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQtZGl2LWJsb2NrLWludGVyYWN0aW9uJyApO1xyXG5cclxuICAgIHJldHVybiBlbGVtZW50SW52aXNpYmxlRGl2O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldHVwSW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbigpIHtcclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uc3R5bGUuZGlzcGxheSA9IHRoaXMuX2Jsb2NrSW50ZXJhY3Rpb24gPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5zdHlsZS56SW5kZXggPSAnOTk1JztcclxuXHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25jbGlja2ludGVyYWN0aW9uYmxvY2tlZCcsIHRoaXMsIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24gKTtcclxuICAgICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25pbnRlcmFjdGlvbmJsb2NrZWQnLCB0aGlzLCB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBhd2FpdHMgYXVkaW8gbG9hZHMgZnJvbSBzb3VyY2UgdGhlbiBjcmVhdGVzIHRoZSBjb21wb25lbnRcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZUF1ZGlvQ29tcG9uZW50T25Cb2R5KCBvcHRpb25zOiBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgKTogUHJvbWlzZTxBdWRpb0NvbXBvbmVudD4ge1xyXG4gICAgY29uc3QgYXVkaW9Db21wb25lbnRDb250YWluZXIgPSBhd2FpdCBuZXcgQXVkaW9Db21wb25lbnRGYWN0b3J5KCBvcHRpb25zLnNyYyApLmJ1aWxkT25Cb2R5KCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBdWRpb0NvbXBvbmVudCgge1xyXG4gICAgICBzcmM6IG9wdGlvbnMuc3JjLFxyXG4gICAgICBjb250YWluZXI6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLFxyXG4gICAgICBhdWRpb0VsZW1lbnQ6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoICdhdWRpbycgKSEsXHJcbiAgICAgIGF1ZGlvRWxlbWVudElkOiBvcHRpb25zLmF1ZGlvRWxlbWVudElkLFxyXG4gICAgICBibG9ja0ludGVyYWN0aW9uOiBvcHRpb25zLmJsb2NrSW50ZXJhY3Rpb25cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8vIGF3YWl0cyBhdWRpbyBsb2FkcyBmcm9tIHNvdXJjZSB0aGVuIGNyZWF0ZXMgdGhlIGNvbXBvbmVudFxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlQXVkaW9Db21wb25lbnQoIG9wdGlvbnM6IENyZWF0ZUF1ZGlvQ29tcG9uZW50T3B0aW9ucyApOiBQcm9taXNlPEF1ZGlvQ29tcG9uZW50PiB7XHJcbiAgICBpZiAoIG9wdGlvbnMuY29udGFpbmVyID09PSBkb2N1bWVudC5ib2R5IHx8ICFvcHRpb25zLmNvbnRhaW5lciApIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQXVkaW9Db21wb25lbnRPbkJvZHkoIG9wdGlvbnMgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhdWRpb0NvbXBvbmVudENvbnRhaW5lciA9IGF3YWl0IG5ldyBBdWRpb0NvbXBvbmVudEZhY3RvcnkoIG9wdGlvbnMuc3JjICkuYnVpbGQoIG9wdGlvbnMuY29udGFpbmVyICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBdWRpb0NvbXBvbmVudCgge1xyXG4gICAgICBzcmM6IG9wdGlvbnMuc3JjLFxyXG4gICAgICBjb250YWluZXI6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLFxyXG4gICAgICBhdWRpb0VsZW1lbnQ6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoICdhdWRpbycgKSEsXHJcbiAgICAgIGF1ZGlvRWxlbWVudElkOiBvcHRpb25zLmF1ZGlvRWxlbWVudElkLFxyXG4gICAgICBibG9ja0ludGVyYWN0aW9uOiBvcHRpb25zLmJsb2NrSW50ZXJhY3Rpb25cclxuICAgIH0gKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBBdWRpb1BsYXllckNvbmZpZywgY3JlYXRlSW52aXNpYmxlUGxheWVyIH0gZnJvbSAnLi4vVG9vbHMvQXVkaW9Ub29scyc7XHJcbmltcG9ydCB7IENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJy4vQ29tcG9uZW50Q29udGFpbmVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBdWRpb0NvbXBvbmVudEZhY3RvcnkgZXh0ZW5kcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gIGNvbnN0cnVjdG9yKCBzcmM6IHN0cmluZywgcGxheWVyQ29uZmlnPzogQXVkaW9QbGF5ZXJDb25maWcgKSB7XHJcbiAgICBzdXBlciggXCJhdWRpb0NvbXBvbmVudFwiLCBjcmVhdGVJbnZpc2libGVQbGF5ZXIoIFtzcmNdLCBwbGF5ZXJDb25maWcgKSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGJ1aWxkU3ViQ29tcG9uZW50cyggcGFyZW50OiBIVE1MRWxlbWVudCApOiBQcm9taXNlPEhUTUxFbGVtZW50W10gfCB2b2lkPiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG59IiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgcHJvdGVjdGVkIF9lbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gIHB1YmxpYyB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgcHVibGljIHJlYWRvbmx5IGNvbXBvbmVudE5hbWU6IHN0cmluZztcclxuICBwcm90ZWN0ZWQgc3ViQ29tcG9uZW50Q291bnRCeU5hbWU6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XHJcbiAgcHJvdGVjdGVkIHN1YkNvbXBvbmVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcbiAgLy8vIFRlbXBsYXRlIGlzIGVpdGhlciBhIGlkIGZvciBhIGh0bWwgdGVtcGxhdGUgZWxlbWVudCBvciBhbiBlbGVtZW50IHRoYXQgd2lsbCBiZSBpbnNlcnRlZCBhcyBhIHRlbXBsYXRlIGluc2lkZSBkb2N1bWVudC5ib2R5XHJcbiAgY29uc3RydWN0b3IoIGNvbXBvbmVudE5hbWU6IHN0cmluZywgdGVtcGxhdGU6IHN0cmluZyB8IEhUTUxFbGVtZW50ICkge1xyXG4gICAgaWYgKCB0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnICkge1xyXG4gICAgICBjb25zdCB0ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGVtcGxhdGUgKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG5cclxuICAgICAgaWYgKCAhdGVtcGxhdGVFbGVtZW50ICkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIHRlbXBsYXRlIGZvciBzY2VuZSBjb21wb25lbnQuIFRlbXBsYXRlIGlkOiBcIiArIHRlbXBsYXRlICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ID0gdGVtcGxhdGVFbGVtZW50O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInRlbXBsYXRlXCIgKTtcclxuICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudC5hcHBlbmRDaGlsZCggdGVtcGxhdGUgKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggdGhpcy50ZW1wbGF0ZUVsZW1lbnQgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldFRlbXBsYXRlQ2xvbmVOb2RlcygpOiBIVE1MQ29sbGVjdGlvbiB7XHJcbiAgICByZXR1cm4gKCB0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LmNsb25lTm9kZSggdHJ1ZSApIGFzIERvY3VtZW50RnJhZ21lbnQgKS5jaGlsZHJlbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhYnN0cmFjdCBidWlsZFN1YkNvbXBvbmVudHMoIHBhcmVudDogSFRNTEVsZW1lbnQgKTogUHJvbWlzZTxIVE1MRWxlbWVudFtdIHwgdm9pZD47XHJcblxyXG4gIHByb3RlY3RlZCBhc3luYyBidWlsZFNpbmdsZVN1YkNvbXBvbmVudCggY29tcG9uZW50OiBDb21wb25lbnRDb250YWluZXIsIHBhcmVudDogSFRNTEVsZW1lbnQgKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xyXG4gICAgaWYgKCB0aGlzLnN1YkNvbXBvbmVudENvdW50QnlOYW1lLmhhcyggdGhpcy5jb21wb25lbnROYW1lICkgKSB7XHJcbiAgICAgIHRoaXMuc3ViQ29tcG9uZW50Q291bnRCeU5hbWUuc2V0KCB0aGlzLmNvbXBvbmVudE5hbWUsIDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY29tcG9uZW50Q291bnQgPSB0aGlzLnN1YkNvbXBvbmVudENvdW50QnlOYW1lLmdldCggdGhpcy5jb21wb25lbnROYW1lICkhO1xyXG5cclxuICAgIHRoaXMuc3ViQ29tcG9uZW50Q291bnRCeU5hbWUuc2V0KCB0aGlzLmNvbXBvbmVudE5hbWUsIGNvbXBvbmVudENvdW50ICsgMSApO1xyXG5cclxuICAgIHJldHVybiBhd2FpdCBjb21wb25lbnQuYnVpbGQoIHBhcmVudCwgYCR7IHRoaXMuY29tcG9uZW50TmFtZSB9JHsgY29tcG9uZW50LmNvbXBvbmVudE5hbWUuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCkgfSR7IGNvbXBvbmVudENvdW50IH1gICk7XHJcbiAgfVxyXG5cclxuICAvLy8gR2V0cyB0aGUgdGVtcGxhdGUgbm9kZXMgYW5kIGluc2VydCB0aGVtIGludG8gYSBjb250YWluZXIgdGhlbiByZXR1cm5zIHRoZSBjb250YWluZXJcclxuICBwdWJsaWMgYXN5bmMgYnVpbGRPbkJvZHkoIGVsZW1lbnRJZD86IHN0cmluZyApOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuXHJcbiAgICBpZiAoIGVsZW1lbnRJZCApIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5pZCA9IGVsZW1lbnRJZDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKCBsZXQgaXRlbSBvZiB0aGlzLmdldFRlbXBsYXRlQ2xvbmVOb2RlcygpICkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2FmdGVyYmVnaW4nLCBpdGVtICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhdGhpcy5fZWxlbWVudCApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBgRmFpbCBidWlsZGluZyBTY2VuZUNvbXBvbmVudC4gRWxlbWVudElkOiAkeyBlbGVtZW50SWQgfWAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB0aGlzLmJ1aWxkU3ViQ29tcG9uZW50cyggZG9jdW1lbnQuYm9keSApO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgdGhpcy5fZWxlbWVudCApO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8vIEdldHMgdGhlIHRlbXBsYXRlIG5vZGVzIGFuZCBpbnNlcnQgdGhlbSBpbnRvIGEgY29udGFpbmVyIHRoZW4gcmV0dXJucyB0aGUgY29udGFpbmVyXHJcbiAgcHVibGljIGFzeW5jIGJ1aWxkKCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBlbGVtZW50SWQ/OiBzdHJpbmcgKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xyXG4gICAgZm9yICggbGV0IGl0ZW0gb2YgdGhpcy5nZXRUZW1wbGF0ZUNsb25lTm9kZXMoKSApIHtcclxuICAgICAgY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2FmdGVyYmVnaW4nLCBpdGVtICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy5idWlsZFN1YkNvbXBvbmVudHMoIGNvbnRhaW5lciApO1xyXG5cclxuICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgfVxyXG59IiwiXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZVNvdW5kYm9hcmRJdGVtQ29udGFpbmVyKCBpdGVtSWQ6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXHJcbiAgPGRpdiBpZD1cIiR7IGl0ZW1JZCB9U291bmRUYWJsZUl0ZW1cIiBjbGFzcz1cInNvdW5kLXRhYmxlLWl0ZW0tY29udGFpbmVyXCI+XHJcbiAgPC9kaXY+XHJcbiAgYC50cmltKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZVNvdW5kYm9hcmRJbnB1dCggaXRlbUlkOiBzdHJpbmcsIGxhYmVsVGV4dDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nID0gXCJcIiwgcGxhY2Vob2xkZXI6IHN0cmluZyA9IFwiXCIgKSB7XHJcbiAgcmV0dXJuIGBcclxuICAgIDxkaXYgY2xhc3M9XCJmb3JtLWZsb2F0aW5nIHNvdW5kLXRhYmxlLWlucHV0LWNvbnRhaW5lclwiPlxyXG4gICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiR7IHZhbHVlIH1cIiBjbGFzcz1cImZvcm0tY29udHJvbCBzb3VuZC10YWJsZS1pbnB1dFwiIGlkPVwidXJsSW5wdXQkeyBpdGVtSWQgfVwiIHBsYWNlaG9sZGVyPVwiJHsgcGxhY2Vob2xkZXIgfVwiPlxyXG4gICAgICA8bGFiZWwgZm9yPVwidXJsSW5wdXQkeyBpdGVtSWQgfVwiPiR7IGxhYmVsVGV4dCB9PC9sYWJlbD5cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcbn0iLCJcclxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlQmFja2dyb3VuZFlvdXR1YmVJZnJhbWVFbGVtZW50KCBpZnJhbWVJZDogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGBcclxuICA8ZGl2IGlkPVwiJHsgaWZyYW1lSWQgfVwiPlxyXG4gIDwvZGl2PlxyXG4gIGAudHJpbSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVZb3V0dWJlSWZyYW1lVGFibGVJdGVtKCBpZnJhbWVJZDogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGBcclxuICA8ZGl2IGlkPVwiJHsgaWZyYW1lSWQgfUlmcmFtZVRhYmxlSXRlbVwiIGNsYXNzPVwieXQtaWZyYW1lLXRhYmxlLWl0ZW0tY29udGFpbmVyXCI+XHJcbiAgPC9kaXY+XHJcbiAgYC50cmltKCk7XHJcbn0iLCJpbXBvcnQgeyBjcmVhdGVJbnZpc2libGVEaXZBYm92ZVBhcmVudCwgZXh0cmFjdFlvdVR1YmVJZCwgZ2V0RWxlbWVudERpbWVuc2lvbnMsIGhhbmRsZVByb21pc2UsIGlzVmFsaWRZb3VUdWJlVXJsLCBpc1ZhbGlkWW91dHViZVVybE9ySWQsIHBvbGxGb3JWYXJpYWJsZSwgcG9sbEZvclZhcmlhYmxlQXN5bmMsIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50LCB3YWl0VW50aWxFbGVtZW50RXhpc3RzIH0gZnJvbSAnLi4vLi4vVG9vbHMvRE9NVG9vbHMnO1xyXG5pbXBvcnQgeyBEcmFnZ2FibGVFbGVtZW50IH0gZnJvbSAnLi4vLi4vRXh0cmFzL0RyYWdnYWJsZUVsZW1lbnQnO1xyXG5pbXBvcnQgeyBEaW1lbnNpb25zLCBjbGFtcCB9IGZyb20gJy4uLy4uL1Rvb2xzL01hdGhUb29scyc7XHJcbmltcG9ydCB7IHRlbXBsYXRlQmFja2dyb3VuZFlvdXR1YmVJZnJhbWVFbGVtZW50IH0gZnJvbSAnLi9UZW1wbGF0ZXNZb3V0dWJlSWZyYW1lJztcclxuaW1wb3J0IHsgSU9iamVjdFRvU2V0T25Zb3V0dWJlSWZyYW1lc1JlYWR5IH0gZnJvbSAnLi9UeXBlcyc7XHJcbmltcG9ydCB7IFlvdXR1YmVJZnJhbWVTd2l0Y2hlciB9IGZyb20gJy4vWW91dHViZUlmcmFtZVN3aXRjaGVyJztcclxuaW1wb3J0IHsgWW91dHViZUlmcmFtZVN5bmMgfSBmcm9tICcuL1lvdXR1YmVJZnJhbWVTeW5jJztcclxuaW1wb3J0IHsgT2JqZWN0RXZlbnRMaXN0ZW5lciB9IGZyb20gJy4uLy4uL0V4dHJhcy9PYmplY3RFdmVudExpc3RlbmVyJztcclxuaW1wb3J0IHsgSU1lZGlhUGxheWVyRnVuY3Rpb25zIH0gZnJvbSAnLi4vVHlwZXMnO1xyXG5cclxuZXhwb3J0IHR5cGUgWW91dHViZUlmcmFtZU9wdGlvbnMgPSB7XHJcbiAgaWZyYW1lSWQ6IHN0cmluZztcclxuICB2aWRlb0lkOiBzdHJpbmc7XHJcbiAgZGltZW5zaW9ucz86IERpbWVuc2lvbnM7XHJcbiAgcGFyZW50RWxlbWVudD86IEhUTUxFbGVtZW50O1xyXG4gIGNsYXNzTGlzdD86IHN0cmluZ1tdO1xyXG4gIHN0YXJ0TXV0ZWQ/OiBib29sZWFuO1xyXG4gIHN0YXJ0c0F0PzogbnVtYmVyO1xyXG4gIGJsb2NrSW50ZXJhY3Rpb24/OiBib29sZWFuO1xyXG4gIHJlcGxheU9uRW5kPzogYm9vbGVhbjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFlvdXR1YmVJZnJhbWVDaGFuZ2VWaWRlb09wdGlvbnMgPSB7XHJcbiAgaWZyYW1lSWQ6IHN0cmluZztcclxuICB2aWRlb0lkOiBzdHJpbmc7XHJcbiAgc3RhcnRzQXQ/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcmFnZ2FibGVZb3V0dWJlSWZyYW1lKCB7IGlmcmFtZUlkLCB2aWRlb0lkLCBzdGFydHNBdCwgcGFyZW50RWxlbWVudCwgY2xhc3NMaXN0ID0gW10gfTogWW91dHViZUlmcmFtZU9wdGlvbnMgKSB7XHJcbiAgY29uc3QgaWZyYW1lQ29udHJvbGxlclJlc3VsdCA9IG5ldyBZb3V0dWJlSWZyYW1lKCB7IHN0YXJ0c0F0LCBpZnJhbWVJZCwgdmlkZW9JZCwgcGFyZW50RWxlbWVudCwgY2xhc3NMaXN0IH0gKTtcclxuXHJcbiAgY29uc3QgZHJhZ2dhYmxlUmVzdWx0ID0gbmV3IERyYWdnYWJsZUVsZW1lbnQoIHtcclxuICAgIGVsZW1lbnQ6IHBhcmVudEVsZW1lbnQgPz8gZG9jdW1lbnQuYm9keSxcclxuICAgIGFsbG93RHJhZ2dpbmdCeUlubmVyQ29udGVudDogdHJ1ZSxcclxuICAgIG9uRHJvcDogKCkgPT4ge1xyXG5cclxuICAgIH1cclxuICB9ICk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpZnJhbWVDb250cm9sbGVyOiBpZnJhbWVDb250cm9sbGVyUmVzdWx0LFxyXG4gICAgZHJhZ2dhYmxlOiBkcmFnZ2FibGVSZXN1bHRcclxuICB9O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFlvdXR1YmVJZnJhbWUgZXh0ZW5kcyBPYmplY3RFdmVudExpc3RlbmVyIGltcGxlbWVudHMgSU1lZGlhUGxheWVyRnVuY3Rpb25zIHtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGFyck9iamVjdFRvU2V0T25FdmVyeUlmcmFtZVJlYWR5OiBJT2JqZWN0VG9TZXRPbllvdXR1YmVJZnJhbWVzUmVhZHlbXSA9IFtdO1xyXG5cclxuICBwcm90ZWN0ZWQgc3RhdGljIF9kaWN0WW91dHViZUlmcmFtZUJ5SWQ6IE1hcDxzdHJpbmcsIFlvdXR1YmVJZnJhbWU+ID0gbmV3IE1hcCgpO1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgX2FycllvdXR1YmVJZnJhbWVJZFJlYWR5OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBwdWJsaWMgcGxheWVyOiBhbnkgfCBudWxsO1xyXG4gIHByb3RlY3RlZCBfaXNQbGF5ZXJSZWFkeTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBwdWJsaWMgaWQ6IHN0cmluZztcclxuICBwcml2YXRlIF92aWRlb0lkOiBzdHJpbmc7XHJcbiAgcHVibGljIHZpZGVvTmFtZTogc3RyaW5nID0gJyc7XHJcbiAgcHVibGljIHZpZGVvVGh1bWI6IHN0cmluZyA9ICcnO1xyXG4gIHB1YmxpYyBjaGFubmVsVVJMOiBzdHJpbmcgPSAnJztcclxuICBwdWJsaWMgY2hhbm5lbE5hbWU6IHN0cmluZyA9ICcnO1xyXG5cclxuICBwcm90ZWN0ZWQgX2lmcmFtZUVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIC8vIEEgZGl2IHdoaWNoIGlzIGNyZWF0ZWQgYWZ0ZXIgaWZyYW1lIHJlbmRlciBhbmQgaG9sZHMgaWZyYW1lIGVsZW1lbnRcclxuICBwcm90ZWN0ZWQgX2lmcmFtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIC8vIFRoZSBlbGVtZW50IHRoYXQgaG9sZHMgeyBfaWZyYW1lQ29udGFpbmVyIH1cclxuICBwcm90ZWN0ZWQgX2lmcmFtZVBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICBwcm90ZWN0ZWQgX2lzUGxheWluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByb3RlY3RlZCBfZGltZW5zaW9uczogRGltZW5zaW9ucztcclxuXHJcbiAgLy8vIENhbiBiZSB1c2VkIHRvIGRyYWcsIGlzIGFuIGludmlzaWJsZSBkaXYgcGxhY2VkIGF0IHRoZSB0b3Agb2YgdGhlIGNvbnRhaW5lclxyXG4gIHByb3RlY3RlZCB0b3BEaXY/OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgcHJpdmF0ZSBfc3RhcnRzQXQ6IG51bWJlcjtcclxuXHJcbiAgcHJvdGVjdGVkIF9ibG9ja0ludGVyYWN0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJvdGVjdGVkIF9kaXZCbG9ja0ludGVyYWN0aW9uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICBwcm90ZWN0ZWQgX3N0YXJ0TXV0ZWQ6IGJvb2xlYW47XHJcbiAgcHVibGljIF9wbGF5aW5nT2JzZXJ2ZXJJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJvdGVjdGVkIF9ldmVudExpc3RlbmVyOiBPYmplY3RFdmVudExpc3RlbmVyID0gbmV3IE9iamVjdEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcbiAgY29uc3RydWN0b3IoIG9wdGlvbnM6IFlvdXR1YmVJZnJhbWVPcHRpb25zICkge1xyXG4gICAgaWYgKCBZb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuaGFzKCBvcHRpb25zLmlmcmFtZUlkICkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIGlmcmFtZSB0aGVyZSdzIGFscmVhZHkgYW4gaWZyYW1lIHdpdGggdGhpcyBpZC5cIiApO1xyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5pZCA9IG9wdGlvbnMuaWZyYW1lSWQ7XHJcbiAgICB0aGlzLl9zdGFydHNBdCA9IG9wdGlvbnMuc3RhcnRzQXQgPz8gMDtcclxuICAgIHRoaXMuX3ZpZGVvSWQgPSBvcHRpb25zLnZpZGVvSWQ7XHJcblxyXG4gICAgdGhpcy5fc3RhcnRNdXRlZCA9IG9wdGlvbnMuc3RhcnRNdXRlZCA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMuX2Jsb2NrSW50ZXJhY3Rpb24gPSBvcHRpb25zLmJsb2NrSW50ZXJhY3Rpb24gPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyID0gWW91dHViZUlmcmFtZS5nZXRZb3V0dWJlSWZyYW1lRWxlbWVudCgge1xyXG4gICAgICBpZnJhbWVJZDogb3B0aW9ucy5pZnJhbWVJZCxcclxuICAgICAgY2xhc3NMaXN0OiBvcHRpb25zLmNsYXNzTGlzdFxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQgPSBZb3V0dWJlSWZyYW1lLnNldHVwUGFyZW50RnJvbVlvdXR1YmVJZnJhbWUoIHtcclxuICAgICAgcGFyZW50RWxlbWVudDogb3B0aW9ucy5wYXJlbnRFbGVtZW50ID8/IGRvY3VtZW50LmJvZHksXHJcbiAgICAgIGlmcmFtZUNvbnRhaW5lcjogdGhpcy5faWZyYW1lQ29udGFpbmVyXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zZXRDbGFzc2VzSWZyYW1lUGF1c2VkKCk7XHJcblxyXG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IG9wdGlvbnMuZGltZW5zaW9ucyA/PyBnZXRFbGVtZW50RGltZW5zaW9ucyggdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudCApO1xyXG5cclxuICAgIFlvdXR1YmVJZnJhbWUuX2RpY3RZb3V0dWJlSWZyYW1lQnlJZC5zZXQoIG9wdGlvbnMuaWZyYW1lSWQsIHRoaXMgKTtcclxuICAgIHRoaXMuc2V0VmlkZW9JbmZvKCkudGhlbiggKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldEV4dGVybmFsSFRNTEVsZW1lbnRzQXR0cmlidXRlcygpO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCB2aWRlb0lkKCkge1xyXG4gICAgcmV0dXJuIGV4dHJhY3RZb3VUdWJlSWQoIHRoaXMuX3ZpZGVvSWQgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgc2V0VmlkZW9JbmZvKCkge1xyXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRoaXMuZ2V0VmlkZW9JbmZvKCk7XHJcbiAgICB0aGlzLnZpZGVvTmFtZSA9IGluZm8gJiYgaW5mby50aXRsZSA/IGluZm8udGl0bGUgYXMgc3RyaW5nIDogJyc7XHJcbiAgICB0aGlzLmNoYW5uZWxOYW1lID0gaW5mbyAmJiBpbmZvLmF1dGhvcl9uYW1lID8gaW5mby5hdXRob3JfbmFtZSBhcyBzdHJpbmcgOiAnJztcclxuICAgIHRoaXMudmlkZW9UaHVtYiA9IGluZm8gJiYgaW5mby50aHVtYm5haWxfdXJsID8gaW5mby50aHVtYm5haWxfdXJsIGFzIHN0cmluZyA6ICcnO1xyXG4gICAgdGhpcy5jaGFubmVsVVJMID0gaW5mbyAmJiBpbmZvLmF1dGhvcl91cmwgPyBpbmZvLmF1dGhvcl91cmwgYXMgc3RyaW5nIDogJyc7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlVmlkZW8oIG9wdGlvbnM6IFlvdXR1YmVJZnJhbWVDaGFuZ2VWaWRlb09wdGlvbnMgKTogdm9pZCB7XHJcbiAgICBpZiAoICFpc1ZhbGlkWW91dHViZVVybE9ySWQoIG9wdGlvbnMudmlkZW9JZCApICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhdGhpcy5wbGF5ZXIgfHwgIXRoaXMucGxheWVyLmxvYWRWaWRlb0J5SWQgKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoICgpID0+IHRoaXMuY2hhbmdlVmlkZW8oIG9wdGlvbnMgKSwgMTAwICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnByZXBhcmVPcHRpb25zKCBvcHRpb25zICk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXIuc2Vla1RvKCB0aGlzLnN0YXJ0c0F0LCB0cnVlICk7XHJcbiAgICBpZiAoIHRoaXMuaXNQbGF5aW5nICkge1xyXG4gICAgICB0aGlzLnBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByZXBhcmVPcHRpb25zKCBvcHRpb25zOiBZb3V0dWJlSWZyYW1lQ2hhbmdlVmlkZW9PcHRpb25zICkge1xyXG4gICAgdGhpcy5pZCA9IG9wdGlvbnMuaWZyYW1lSWQ7XHJcbiAgICB0aGlzLl92aWRlb0lkID0gb3B0aW9ucy52aWRlb0lkO1xyXG4gICAgdGhpcy5zdGFydHNBdCA9IG9wdGlvbnMuc3RhcnRzQXQgPz8gdGhpcy5zdGFydHNBdDtcclxuXHJcbiAgICB0aGlzLmxvYWRWaWRlbygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBsb2FkVmlkZW8oKSB7XHJcbiAgICB0aGlzLnBsYXllci5sb2FkVmlkZW9CeUlkKCB7XHJcbiAgICAgICd2aWRlb0lkJzogdGhpcy52aWRlb0lkLFxyXG4gICAgICAnc3RhcnRTZWNvbmRzJzogdGhpcy5zdGFydHNBdCxcclxuICAgICAgJ3N1Z2dlc3RlZFF1YWxpdHknOiAnaGlnaHJlcydcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLnNldFZpZGVvSW5mbygpLnRoZW4oICgpID0+IHtcclxuICAgICAgdGhpcy5zZXRFeHRlcm5hbEhUTUxFbGVtZW50c0F0dHJpYnV0ZXMoKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgYXN5bmMgZ2V0VmlkZW9JbmZvKCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVQcm9taXNlPFJlc3BvbnNlPiggZmV0Y2goIGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9vZW1iZWQ/dXJsPSR7IHRoaXMudmlkZW9VUkwgfSZmb3JtYXQ9anNvbmAgKSApO1xyXG5cclxuICAgIGlmICggcmVzcG9uc2UuZXJyb3IgKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoIHJlc3BvbnNlLmVycm9yICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuZGF0YSgpLmpzb24oKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBvblBsYXllclJlYWR5KCBldmVudDogYW55ICkge1xyXG4gICAgaWYgKCB0aGlzLl9zdGFydE11dGVkICkge1xyXG4gICAgICB0aGlzLnBsYXllci5tdXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgWW91dHViZUlmcmFtZS5fYXJyWW91dHViZUlmcmFtZUlkUmVhZHkucHVzaCggdGhpcy5pZCApO1xyXG4gICAgdGhpcy5faWZyYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCB0aGlzLmlkICkhO1xyXG5cclxuICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBhdXNlZCgpO1xyXG5cclxuICAgIHRoaXMucGxheWVyLnNldFBsYXliYWNrUXVhbGl0eSggJ2hpZ2hyZXMnICk7XHJcbiAgICB0aGlzLnBsYXllci5zZWVrVG8oIHRoaXMuX3N0YXJ0c0F0ID8/IDAsIHRydWUgKTtcclxuICAgIHRoaXMucGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgIHRoaXMuX2lzUGxheWVyUmVhZHkgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaWZyYW1lcmVhZHknLCB0aGlzICk7XHJcblxyXG4gICAgWW91dHViZUlmcmFtZS5jaGVja0lmRXZlcnlJZnJhbWVJc1JlYWR5KCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgb25QbGF5ZXJTdGF0ZUNoYW5nZSggZXZlbnQ6IGFueSApIHtcclxuICAgIGlmICggZXZlbnQuZGF0YSA9PT0gWW91dHViZUlmcmFtZS5feW91dHViZUFQSVJlZmVyZW5jZS5QbGF5ZXJTdGF0ZS5QTEFZSU5HICkge1xyXG4gICAgICB0aGlzLl9pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLl9wbGF5aW5nT2JzZXJ2ZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCAoKSA9PiB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbnBsYXlpbmcnLCB0aGlzLCB0aGlzLmlzUGxheWluZyApLCAxMDAgKTtcclxuICAgICAgdGhpcy5zZXRDbGFzc2VzSWZyYW1lUGxheWluZygpO1xyXG4gICAgfSBlbHNlIGlmICggdGhpcy5fcGxheWluZ09ic2VydmVySW50ZXJ2YWwgKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoIHRoaXMuX3BsYXlpbmdPYnNlcnZlckludGVydmFsICk7XHJcbiAgICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBhdXNlZCgpO1xyXG4gICAgICB0aGlzLl9pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fcGxheWluZ09ic2VydmVySW50ZXJ2YWwgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ3BsYXllcnN0YXRlY2hhbmdlJywgdGhpcywgdGhpcy5pc1BsYXlpbmcgKTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucGxheWVyc3RhdGVjaGFuZ2UnLCB0aGlzLCB0aGlzLmlzUGxheWluZyApO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHNldENsYXNzZXNJZnJhbWVQbGF5aW5nKCkge1xyXG4gICAgaWYgKCB0aGlzLl9pZnJhbWVFbGVtZW50ICkge1xyXG4gICAgICB0aGlzLl9pZnJhbWVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoICd5dC1wYXVzZWQnICk7XHJcbiAgICAgIHRoaXMuX2lmcmFtZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3l0LXBsYXlpbmcnICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICd5dC1wYXVzZWQnICk7XHJcbiAgICB0aGlzLl9pZnJhbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ3l0LXBsYXlpbmcnICk7XHJcblxyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAneXQtcGF1c2VkJyApO1xyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCAneXQtcGxheWluZycgKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzZXRDbGFzc2VzSWZyYW1lUGF1c2VkKCkge1xyXG4gICAgaWYgKCB0aGlzLl9pZnJhbWVFbGVtZW50ICkge1xyXG4gICAgICB0aGlzLl9pZnJhbWVFbGVtZW50LmNsYXNzTGlzdC5hZGQoICd5dC1wYXVzZWQnICk7XHJcbiAgICAgIHRoaXMuX2lmcmFtZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ3l0LXBsYXlpbmcnICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoICd5dC1wYXVzZWQnICk7XHJcbiAgICB0aGlzLl9pZnJhbWVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSggJ3l0LXBsYXlpbmcnICk7XHJcblxyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCAneXQtcGF1c2VkJyApO1xyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAneXQtcGxheWluZycgKTtcclxuICB9XHJcblxyXG5cclxuICBwcm90ZWN0ZWQgb25FdmVyeVlvdXR1YmVJZnJhbWVSZWFkeSgpIHtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uZXZlcnl5b3V0dWJlaWZyYW1lcmVhZHknICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGRpdkJsb2NrSW50ZXJhY3Rpb24oKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCB2aWRlb1VSTCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PSR7IHRoaXMudmlkZW9JZCB9YDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcGFyZW50RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgaWZyYW1lRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICBpZiAoICF0aGlzLl9pZnJhbWVFbGVtZW50ICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSWZyYW1lIHdhcyBjYWxsZWQgYnV0IGl0J3Mgbm90IHJlYWR5LlwiICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2lmcmFtZUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGlzUGxheWVyUmVhZHkoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNQbGF5ZXJSZWFkeTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgZHVyYXRpb24oKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBsYXllci5nZXREdXJhdGlvbigpIC0gdGhpcy5fc3RhcnRzQXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHBsYXllckR1cmF0aW9uKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXIuZ2V0RHVyYXRpb24oKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgY3VycmVudFRpbWUoIHQ6IG51bWJlciApIHtcclxuICAgIHRoaXMuc2VlayggdCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBjdXJyZW50VGltZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucGxheWVyLmdldEN1cnJlbnRUaW1lKCkgLSB0aGlzLl9zdGFydHNBdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcGxheWVyQ3VycmVudFRpbWUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBwcm9ncmVzc1BlcmNlbnQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRUaW1lIC8gdGhpcy5kdXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcGxheWVyUHJvZ3Jlc3NQZXJjZW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXJDdXJyZW50VGltZSAvIHRoaXMucGxheWVyRHVyYXRpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHN0YXJ0TXV0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3RhcnRNdXRlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgaXNQbGF5aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzUGxheWluZztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgZGltZW5zaW9ucygpOiBEaW1lbnNpb25zIHtcclxuICAgIHJldHVybiB0aGlzLl9kaW1lbnNpb25zO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBzdGFydHNBdCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGNsYW1wKCB0aGlzLl9zdGFydHNBdCwgMCwgdGhpcy5fc3RhcnRzQXQgKTtcclxuICB9XHJcbiAgcHVibGljIHNldCBzdGFydHNBdCggdmFsOiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLl9zdGFydHNBdCA9IGNsYW1wKCB2YWwsIDAsIHZhbCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZSgpOiBJTWVkaWFQbGF5ZXJGdW5jdGlvbnMge1xyXG4gICAgaWYgKCB0aGlzLmlzUGxheWluZyApIHtcclxuICAgICAgdGhpcy5wYXVzZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGxheSgpIHtcclxuICAgIHRoaXMucGxheVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcblxyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25wbGF5JywgdGhpcyApO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpIHtcclxuICAgIHRoaXMucGxheWVyLnBsYXlWaWRlbygpO1xyXG4gICAgdGhpcy5faXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBsYXlpbmcoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYXVzZSgpIHtcclxuICAgIHRoaXMucGF1c2VXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25wYXVzZScsIHRoaXMgKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCkge1xyXG4gICAgdGhpcy5wbGF5ZXIucGF1c2VWaWRlbygpO1xyXG4gICAgdGhpcy5faXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNldENsYXNzZXNJZnJhbWVQYXVzZWQoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZWVrKCBzZWVrVGltZTogbnVtYmVyLCByZWxvYWRCdWZmZXI6IGJvb2xlYW4gPSBmYWxzZSwgY29uc2lkZXJTdGFydHNBdDogYm9vbGVhbiA9IGZhbHNlICkge1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25zZWVrJywgc2Vla1RpbWUsIHJlbG9hZEJ1ZmZlciwgY29uc2lkZXJTdGFydHNBdCwgdGhpcyApO1xyXG5cclxuICAgIHNlZWtUaW1lICs9IGNvbnNpZGVyU3RhcnRzQXQgPyB0aGlzLl9zdGFydHNBdCA6IDA7XHJcbiAgICB0aGlzLnBsYXllci5zZWVrVG8oIHNlZWtUaW1lLCByZWxvYWRCdWZmZXIgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG11dGUoKSB7XHJcbiAgICB0aGlzLnBsYXllci5tdXRlKCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1bm11dGUoKSB7XHJcbiAgICB0aGlzLnBsYXllci51bm11dGUoKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNoZWNrSWZFdmVyeUlmcmFtZUlzUmVhZHkoKSB7XHJcbiAgICBjb25zdCBhcnJFdmVyeUlmcmFtZUlkID0gWy4uLllvdXR1YmVJZnJhbWUuX2RpY3RZb3V0dWJlSWZyYW1lQnlJZC5rZXlzKCldO1xyXG4gICAgY29uc3QgaGFzSWZyYW1lTm90UmVhZHlZZXQgPSBhcnJFdmVyeUlmcmFtZUlkLnNvbWUoIHIgPT4gIXRoaXMuX2FycllvdXR1YmVJZnJhbWVJZFJlYWR5LmluY2x1ZGVzKCByICkgKTtcclxuXHJcbiAgICBpZiAoICFoYXNJZnJhbWVOb3RSZWFkeVlldCApIHtcclxuICAgICAgdGhpcy5hcnJPYmplY3RUb1NldE9uRXZlcnlJZnJhbWVSZWFkeS5mb3JFYWNoKCBvID0+IG8uc2V0dXAoIFlvdXR1YmVJZnJhbWUuX2RpY3RZb3V0dWJlSWZyYW1lQnlJZCApICk7XHJcblxyXG4gICAgICBZb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuZm9yRWFjaCggKCB2YWwsIGtleSApID0+IHtcclxuICAgICAgICB2YWwub25FdmVyeVlvdXR1YmVJZnJhbWVSZWFkeSgpO1xyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0WW91dHViZUlmcmFtZUVsZW1lbnQoIHsgaWZyYW1lSWQsIGNsYXNzTGlzdCB9OiB7IGlmcmFtZUlkOiBzdHJpbmc7IGNsYXNzTGlzdD86IHN0cmluZ1tdOyB9ICkge1xyXG4gICAgY29uc3QgY29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuICAgIGNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKCAneXQtaWZyYW1lLWNvbnRhaW5lcicgKTtcclxuICAgIGlmICggY2xhc3NMaXN0ICkge1xyXG4gICAgICBjb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZCggLi4uY2xhc3NMaXN0ICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbmVyRGl2LmlkID0gYGNvbnRhaW5lcllvdXR1YmVJZnJhbWUkeyBpZnJhbWVJZCB9YDtcclxuICAgIGNvbnRhaW5lckRpdi5pbnNlcnRBZGphY2VudEhUTUwoICdhZnRlcmJlZ2luJywgdGVtcGxhdGVCYWNrZ3JvdW5kWW91dHViZUlmcmFtZUVsZW1lbnQoIGlmcmFtZUlkICkgKTtcclxuICAgIHJldHVybiBjb250YWluZXJEaXY7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0dXBQYXJlbnRGcm9tWW91dHViZUlmcmFtZSggeyBwYXJlbnRFbGVtZW50LCBpZnJhbWVDb250YWluZXIgfTogeyBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudDsgaWZyYW1lQ29udGFpbmVyOiBIVE1MRWxlbWVudDsgfSApIHtcclxuICAgIGNvbnN0IGlmcmFtZVBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50ID8/IGRvY3VtZW50LmJvZHk7XHJcbiAgICBpZnJhbWVQYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoICd5dC1pZnJhbWUtcGFyZW50JyApO1xyXG4gICAgaWZyYW1lUGFyZW50RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdhZnRlcmJlZ2luJywgaWZyYW1lQ29udGFpbmVyICk7XHJcbiAgICByZXR1cm4gaWZyYW1lUGFyZW50RWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vIFNldHMgZGl2IHRvIGJsb2NrIGludGVyYWN0aW9uLCB0b3AgZGl2LCBjb250YWluZXIgYW5kIGFueSBvdGhlciBlbGVtZW50IHRoYXQgaXMgbm90IHRoZSBtYWluIGlmcmFtZVxyXG4gIHByaXZhdGUgc2V0RXh0ZXJuYWxIVE1MRWxlbWVudHMoKSB7XHJcbiAgICB0aGlzLmNyZWF0ZUludmlzaWJsZURpdlRvcCgpO1xyXG4gICAgdGhpcy5jcmVhdGVJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5zZXRFeHRlcm5hbEhUTUxFbGVtZW50c0F0dHJpYnV0ZXMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RXh0ZXJuYWxIVE1MRWxlbWVudHNBdHRyaWJ1dGVzKCkge1xyXG4gICAgdGhpcy5zZXRJZnJhbWVDb250YWluZXJBdHRyaWJ1dGVzKCk7XHJcbiAgICB0aGlzLnNldFRvcERpdkF0dHJpYnV0ZXMoKTtcclxuICAgIHRoaXMuc2V0RGl2QmxvY2tJbnRlcmFjdGlvbkF0dHJpYnV0ZXMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlSW52aXNpYmxlRGl2VG9wKCkge1xyXG4gICAgdGhpcy50b3BEaXYgPSBZb3V0dWJlSWZyYW1lLmdldEludmlzaWJsZVRvcERpdiggdGhpcyApO1xyXG4gICAgdGhpcy50b3BEaXYuc3R5bGUuekluZGV4ID0gJzk5MCc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uID0gWW91dHViZUlmcmFtZS5nZXRJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCB0aGlzICk7XHJcblxyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5zdHlsZS5kaXNwbGF5ID0gdGhpcy5fYmxvY2tJbnRlcmFjdGlvbiA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLnN0eWxlLnpJbmRleCA9ICc5OTUnO1xyXG5cclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBldnQgKSA9PiB7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uY2xpY2tpbnRlcmFjdGlvbmJsb2NrZWQnLCB0aGlzLCB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaW50ZXJhY3Rpb25ibG9ja2VkJywgdGhpcywgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbiApO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXREaXZCbG9ja0ludGVyYWN0aW9uQXR0cmlidXRlcygpIHtcclxuICAgIGlmICggIXRoaXMuZGl2QmxvY2tJbnRlcmFjdGlvbiApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLmRpdkJsb2NrSW50ZXJhY3Rpb24sIHRoaXMuX3ZpZGVvSW5mb0F0dHJpYnV0ZUxpc3QgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0SWZyYW1lQ29udGFpbmVyQXR0cmlidXRlcygpIHtcclxuICAgIGlmICggIXRoaXMuX2lmcmFtZUNvbnRhaW5lciApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLl9pZnJhbWVDb250YWluZXIsIHRoaXMuX3ZpZGVvSW5mb0F0dHJpYnV0ZUxpc3QgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VG9wRGl2QXR0cmlidXRlcygpIHtcclxuICAgIGlmICggIXRoaXMudG9wRGl2ICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQoIHRoaXMudG9wRGl2LCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IGJsb2NrSW50ZXJhY3Rpb24oIHZhbDogYm9vbGVhbiApIHtcclxuICAgIHRoaXMuX2Jsb2NrSW50ZXJhY3Rpb24gPSB2YWw7XHJcblxyXG4gICAgaWYgKCB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uICkge1xyXG4gICAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLnN0eWxlLmRpc3BsYXkgPSB0aGlzLl9ibG9ja0ludGVyYWN0aW9uID8gJ2Jsb2NrJyA6ICdub25lJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBpbml0UGxheWVyKCkge1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBuZXcgWW91dHViZUlmcmFtZS5feW91dHViZUFQSVJlZmVyZW5jZS5QbGF5ZXIoIHRoaXMuaWQsIHtcclxuICAgICAgdmlkZW9JZDogdGhpcy52aWRlb0lkLFxyXG4gICAgICB3aWR0aDogdGhpcy5kaW1lbnNpb25zLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHRoaXMuZGltZW5zaW9ucy5oZWlnaHQsXHJcbiAgICAgIHBsYXllclZhcnM6IHtcclxuICAgICAgICAncmVsJzogMCwgICAgICAgICAgICAvLyBEZXNhdGl2YSB2w61kZW9zIHJlbGFjaW9uYWRvc1xyXG4gICAgICAgICdpdl9sb2FkX3BvbGljeSc6IDMsIC8vIERlc2F0aXZhIHN1Z2VzdMO1ZXMgZGUgdsOtZGVvcyBkdXJhbnRlIGEgcGF1c2FcclxuICAgICAgICAnc2hvd2luZm8nOiAwLCAgICAgICAvLyBSZW1vdmUgaW5mb3JtYcOnw7VlcyBkbyB2w61kZW8gKHTDrXR1bG8sIGV0Yy4pXHJcbiAgICAgICAgJ2NvbnRyb2xzJzogMCwgICAgICAgLy8gUmVtb3ZlIG9zIGNvbnRyb2xlcyBkbyBwbGF5ZXJcclxuICAgICAgICAnYXV0b3BsYXknOiAwICAgICAgICAvLyBEZXNhdGl2YSBhIHJlcHJvZHXDp8OjbyBhdXRvbcOhdGljYVxyXG4gICAgICB9LFxyXG4gICAgICBldmVudHM6IHtcclxuICAgICAgICAnb25SZWFkeSc6IHRoaXMub25QbGF5ZXJSZWFkeS5iaW5kKCB0aGlzICksXHJcbiAgICAgICAgJ29uU3RhdGVDaGFuZ2UnOiB0aGlzLm9uUGxheWVyU3RhdGVDaGFuZ2UuYmluZCggdGhpcyApXHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzdGF0aWMgX3lvdXR1YmVBUElSZWZlcmVuY2U6IGFueTtcclxuXHJcbiAgcHJpdmF0ZSBnZXQgX3ZpZGVvSW5mb0F0dHJpYnV0ZUxpc3QoKTogW3N0cmluZywgc3RyaW5nXVtdIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIFsneXQtaWZyYW1lLWlkJywgdGhpcy5pZF0sXHJcbiAgICAgIFsneXQtaWZyYW1lLXZpZGVvLW5hbWUnLCB0aGlzLnZpZGVvTmFtZV0sXHJcbiAgICAgIFsneXQtaWZyYW1lLXZpZGVvLWNoYW5uZWwtbmFtZScsIHRoaXMuY2hhbm5lbE5hbWVdLFxyXG4gICAgICBbJ3l0LWlmcmFtZS12aWRlby10aHVtYi11cmwnLCB0aGlzLnZpZGVvVGh1bWJdLFxyXG4gICAgICBbJ3l0LWlmcmFtZS12aWRlby1jaGFubmVsLXVybCcsIHRoaXMuY2hhbm5lbFVSTF1cclxuICAgIF1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBidWlsZFNpbmdsZUlmcmFtZSggeW91dHViZUlmcmFtZTogWW91dHViZUlmcmFtZSApIHtcclxuICAgIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAneXRJZnJhbWVBUElTY3JpcHRUYWcnICkgKSB7XHJcbiAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc2NyaXB0JyApO1xyXG4gICAgICB0YWcuaWQgPSAneXRJZnJhbWVBUElTY3JpcHRUYWcnO1xyXG5cclxuICAgICAgdGFnLnNyYyA9IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaVwiO1xyXG4gICAgICB2YXIgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ3NjcmlwdCcgKVswXTtcclxuICAgICAgaWYgKCBmaXJzdFNjcmlwdFRhZyAmJiBmaXJzdFNjcmlwdFRhZy5wYXJlbnROb2RlICkge1xyXG4gICAgICAgIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCB0YWcsIGZpcnN0U2NyaXB0VGFnICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnRFeGlzdHMoICcjeXRJZnJhbWVBUElTY3JpcHRUYWcnICk7XHJcblxyXG4gICAgYXdhaXQgcG9sbEZvclZhcmlhYmxlQXN5bmM8YW55PiggJ1lUJyxcclxuICAgICAgKCB2YWx1ZTogYW55ICkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUuUGxheWVyID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAmJiB2YWx1ZS5QbGF5ZXIucHJvdG90eXBlXHJcbiAgICAgICAgICAmJiB2YWx1ZS5QbGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID09PSB2YWx1ZS5QbGF5ZXJcclxuICAgICAgICAgICYmIHZhbHVlLmxvYWRlZDtcclxuICAgICAgfSxcclxuICAgICAgKCB2YWx1ZSApID0+IHtcclxuICAgICAgICBZb3V0dWJlSWZyYW1lLl95b3V0dWJlQVBJUmVmZXJlbmNlID0gdmFsdWU7XHJcbiAgICAgICAgeW91dHViZUlmcmFtZS5idWlsZCgpO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIHlvdXR1YmVJZnJhbWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYnVpbGRJZnJhbWVzKCkge1xyXG4gICAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICd5dElmcmFtZUFQSVNjcmlwdFRhZycgKSApIHtcclxuICAgICAgdmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdzY3JpcHQnICk7XHJcbiAgICAgIHRhZy5pZCA9ICd5dElmcmFtZUFQSVNjcmlwdFRhZyc7XHJcblxyXG4gICAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpXCI7XHJcbiAgICAgIHZhciBmaXJzdFNjcmlwdFRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnc2NyaXB0JyApWzBdO1xyXG4gICAgICBpZiAoIGZpcnN0U2NyaXB0VGFnICYmIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUgKSB7XHJcbiAgICAgICAgZmlyc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIHRhZywgZmlyc3RTY3JpcHRUYWcgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdhaXRVbnRpbEVsZW1lbnRFeGlzdHMoICcjeXRJZnJhbWVBUElTY3JpcHRUYWcnICkudGhlbiggKCkgPT4ge1xyXG4gICAgICBwb2xsRm9yVmFyaWFibGU8YW55PiggJ1lUJyxcclxuICAgICAgICAoIHZhbHVlOiBhbnkgKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlLlBsYXllciA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICAmJiB2YWx1ZS5QbGF5ZXIucHJvdG90eXBlXHJcbiAgICAgICAgICAgICYmIHZhbHVlLlBsYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPT09IHZhbHVlLlBsYXllclxyXG4gICAgICAgICAgICAmJiB2YWx1ZS5sb2FkZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoIHZhbHVlICkgPT4ge1xyXG4gICAgICAgICAgWW91dHViZUlmcmFtZS5feW91dHViZUFQSVJlZmVyZW5jZSA9IHZhbHVlO1xyXG4gICAgICAgICAgWW91dHViZUlmcmFtZS5zZXRZb3V0dWJlSWZyYW1lRWxlbWVudHMoKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYnVpbGQoKSB7XHJcbiAgICB0aGlzLnNldEV4dGVybmFsSFRNTEVsZW1lbnRzKCk7XHJcbiAgICB0aGlzLmluaXRQbGF5ZXIoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRZb3V0dWJlSWZyYW1lRWxlbWVudHMoKSB7XHJcbiAgICB0aGlzLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuZm9yRWFjaCggKCB2YWwsIGtleSApID0+IHtcclxuICAgICAgaWYgKCAhdmFsLmlzUGxheWVyUmVhZHkgKSB7XHJcbiAgICAgICAgdmFsLmJ1aWxkKCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRJbnZpc2libGVUb3BEaXYoIHl0SWZyYW1lOiBZb3V0dWJlSWZyYW1lICk6IEhUTUxFbGVtZW50IHtcclxuICAgIHJldHVybiBjcmVhdGVJbnZpc2libGVEaXZBYm92ZVBhcmVudCgge1xyXG4gICAgICBwYXJlbnRFbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggeXRJZnJhbWUuaWQgKSEucGFyZW50RWxlbWVudCEsXHJcbiAgICAgIGlkOiBgaW52aXNpYmxlVG9wRGl2SG9sZFRvRHJhZyR7IHl0SWZyYW1lLmlkIH1gLFxyXG4gICAgICBwb3NpdGlvbjogeyB0b3A6IDAsIGxlZnQ6IDAgfSxcclxuICAgICAgZGltZW5zaW9uczogeyB3aWR0aDogeXRJZnJhbWUuZGltZW5zaW9ucy53aWR0aCwgaGVpZ2h0OiB5dElmcmFtZS5kaW1lbnNpb25zLmhlaWdodCAqIDAuMiB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc3RhdGljIGdldEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oIHl0SWZyYW1lOiBZb3V0dWJlSWZyYW1lICk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGVsZW1lbnRJbnZpc2libGVEaXYgPSBjcmVhdGVJbnZpc2libGVEaXZBYm92ZVBhcmVudCgge1xyXG4gICAgICBwYXJlbnRFbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggeXRJZnJhbWUuaWQgKSEucGFyZW50RWxlbWVudCEsXHJcbiAgICAgIGlkOiBgaW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiR7IHl0SWZyYW1lLmlkIH1gLFxyXG4gICAgICBwb3NpdGlvbjogeyB0b3A6IDAsIGxlZnQ6IDAgfSxcclxuICAgICAgZGltZW5zaW9uczogeyB3aWR0aDogeXRJZnJhbWUuZGltZW5zaW9ucy53aWR0aCwgaGVpZ2h0OiB5dElmcmFtZS5kaW1lbnNpb25zLmhlaWdodCB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgZWxlbWVudEludmlzaWJsZURpdi5jbGFzc0xpc3QuYWRkKCAneXQtZGl2LWJsb2NrLWludGVyYWN0aW9uJyApO1xyXG5cclxuICAgIHJldHVybiBlbGVtZW50SW52aXNpYmxlRGl2O1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCB7IFlvdXR1YmVJZnJhbWVTd2l0Y2hlciwgWW91dHViZUlmcmFtZVN5bmMgfTsiLCJcclxuaW50ZXJmYWNlIFN0cmluZyB7XHJcbiAgdHJ1bmNhdGUoIG1heDogbnVtYmVyLCBkZWNvcmF0b3I6IHN0cmluZyApOiBzdHJpbmc7XHJcbiAgcmVtb3ZlQWNjZW50cygpOiBzdHJpbmc7XHJcbiAgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCk6IHN0cmluZztcclxuICB6ZXJvQmVmb3JlKCk6IHN0cmluZztcclxuICBpc051bGxPckVtcHR5KCk6IGJvb2xlYW47XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUuaXNOdWxsT3JFbXB0eSA9IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcclxuICByZXR1cm4gdHlwZW9mIHRoaXMgIT09ICdzdHJpbmcnICYmICF0aGlzICYmIHRoaXMgIT09ICcnO1xyXG59O1xyXG5cclxuU3RyaW5nLnByb3RvdHlwZS50cnVuY2F0ZSA9IGZ1bmN0aW9uICggbWF4OiBudW1iZXIsIGRlY29yYXRvcjogc3RyaW5nID0gJy4uLicgKTogc3RyaW5nIHtcclxuICByZXR1cm4gKCB0aGlzLmxlbmd0aCA+IG1heCA/IHRoaXMuc3Vic3RyaW5nKCAwLCBtYXggKSArIGRlY29yYXRvciA6IHRoaXMgKS50b1N0cmluZygpO1xyXG59O1xyXG5cclxuU3RyaW5nLnByb3RvdHlwZS5yZW1vdmVBY2NlbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLm5vcm1hbGl6ZSggJ05GRCcgKS5yZXBsYWNlKCAvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIiApO1xyXG59XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLmNhcGl0YWxpemVGaXJzdExldHRlciA9IGZ1bmN0aW9uICgpOiBzdHJpbmcge1xyXG4gIGlmICggdHlwZW9mIHRoaXMgIT09ICdzdHJpbmcnICkge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXMuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIHRoaXMuc3Vic3RyaW5nKCAxICk7XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUuemVyb0JlZm9yZSA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5wYWRTdGFydCggMiwgJzAnICk7XHJcbn0iLCJcclxuZXhwb3J0IGNsYXNzIE9iamVjdEV2ZW50TGlzdGVuZXIge1xyXG4gIHB1YmxpYyBldmVudHNCeU5hbWU6IE1hcDxzdHJpbmcsIEZ1bmN0aW9uW10+ID0gbmV3IE1hcCgpO1xyXG5cclxuICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50OiBGdW5jdGlvbiApIHtcclxuICAgIGlmICggIXRoaXMuZXZlbnRzQnlOYW1lLmhhcyggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSApIHtcclxuICAgICAgdGhpcy5ldmVudHNCeU5hbWUuc2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSwgW2V2ZW50XSApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ldmVudHNCeU5hbWUuZ2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSApIS5wdXNoKCBldmVudCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEV2ZW50c0J5TmFtZSggZXZlbnROYW1lOiBzdHJpbmcgKTogRnVuY3Rpb25bXSB7XHJcbiAgICBpZiAoICF0aGlzLmV2ZW50c0J5TmFtZS5oYXMoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkgKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzQnlOYW1lLnNldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCksIFtdICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzQnlOYW1lLmdldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSE7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGNhbGxFdmVudHNCeU5hbWUoIGV2ZW50TmFtZTogc3RyaW5nLCAuLi5ldmVudEFyZ3M6IGFueVtdICk6IHZvaWQge1xyXG4gICAgdGhpcy5nZXRFdmVudHNCeU5hbWUoIGV2ZW50TmFtZSApLmZvckVhY2goIGUgPT4gZSggLi4uZXZlbnRBcmdzICkgKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgJy4uL0V4dGVuc2lvbnMvU3RyaW5nRXh0ZW5zaW9ucyc7XHJcbmltcG9ydCB7IGdldEVsZW1lbnRGcm9tSFRNTCwgaGlkZUVsZW1lbnQgfSBmcm9tICcuL0RPTVRvb2xzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUV4dGVuc2lvbiB9IGZyb20gJy4vRmlsZVRvb2xzJztcclxuaW1wb3J0IHsgQXVkaW9Db21wb25lbnQsIENyZWF0ZUF1ZGlvQ29tcG9uZW50T3B0aW9ucyB9IGZyb20gJy4uL0NvbXBvbmVudHMvQXVkaW9Db21wb25lbnQnO1xyXG5cclxuZXhwb3J0IHR5cGUgQXVkaW9QbGF5ZXJDb25maWcgPSB7XHJcbiAgaWQ/OiBzdHJpbmc7XHJcbiAgYXV0b1BsYXk/OiBib29sZWFuO1xyXG4gIGF1dG9wbGF5PzogYm9vbGVhbjtcclxuICBtdXRlZD86IGJvb2xlYW47XHJcbiAgbG9vcD86IGJvb2xlYW47XHJcbiAgcHJlbG9hZD86ICdhdXRvJyB8ICdtZXRhZGF0YScgfCAnbm9uZSc7XHJcbiAgb25wbGF5PzogKCBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgKSA9PiB2b2lkO1xyXG4gIG9ucGF1c2U/OiAoIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCApID0+IHZvaWQ7XHJcbiAgb25QbGF5PzogKCBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgKSA9PiB2b2lkO1xyXG4gIG9uUGF1c2U/OiAoIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCApID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBdWRpb0NvbXBvbmVudE9uQm9keSggb3B0aW9uczogQ3JlYXRlQXVkaW9Db21wb25lbnRPcHRpb25zICkge1xyXG4gIHJldHVybiBhd2FpdCBBdWRpb0NvbXBvbmVudC5jcmVhdGVBdWRpb0NvbXBvbmVudE9uQm9keSggb3B0aW9ucyApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW52aXNpYmxlUGxheWVyKCBhcnJTb3VyY2VzOiBzdHJpbmdbXSwgcGxheWVyQ29uZmlnPzogQXVkaW9QbGF5ZXJDb25maWcgKSB7XHJcbiAgY29uc3QgYXVkaW9FbGVtZW50ID0gZ2V0RWxlbWVudEZyb21IVE1MKCBhdWRpb0VsZW1lbnRIVE1MKCBhcnJTb3VyY2VzLCBwbGF5ZXJDb25maWcgKSApIGFzIEhUTUxFbGVtZW50O1xyXG4gIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYWZ0ZXJiZWdpbicsIGF1ZGlvRWxlbWVudCApO1xyXG4gIGhpZGVFbGVtZW50KCBhdWRpb0VsZW1lbnQgKTtcclxuICByZXR1cm4gYXVkaW9FbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXVkaW9FbGVtZW50SFRNTCggYXJyU291cmNlczogc3RyaW5nW10sIHBsYXllckNvbmZpZz86IEF1ZGlvUGxheWVyQ29uZmlnICkge1xyXG4gIHJldHVybiBgPGF1ZGlvIGNvbnRyb2xzICR7IHBsYXllckNvbmZpZyA/IGF1ZGlvRWxlbWVudFBhcmFtc0J5UGxheWVyQ29uZmlnKCBwbGF5ZXJDb25maWcgKSA6IFwiXCIgfT5cclxuICAgICR7IGFyclNvdXJjZXMubWFwKCBzcmMgPT4gc291cmNlRWxlbWVudEhUTUwoIHNyYyApICkucmVkdWNlKCAoIGFjYywgbmV4dCApID0+IGFjYyArIG5leHQsICcnICkgfVxyXG4gIDwvYXVkaW8+YDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNvdXJjZUVsZW1lbnRIVE1MKCBzcmM6IHN0cmluZyApIHtcclxuICByZXR1cm4gYDxzb3VyY2Ugc3JjPVwiJHsgc3JjIH1cIiB0eXBlPVwiYXVkaW8vJHsgZ2V0RmlsZUV4dGVuc2lvbiggc3JjICkgfVwiPmA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF1ZGlvRWxlbWVudFBhcmFtc0J5UGxheWVyQ29uZmlnKCBwbGF5ZXJDb25maWc6IEF1ZGlvUGxheWVyQ29uZmlnICkge1xyXG4gIGNvbnN0IHBhcmFtSWQgPSBwbGF5ZXJDb25maWcuaWQgPyAnaWQ9XCInICsgcGxheWVyQ29uZmlnLmlkICsgJ1wiJyA6ICcnO1xyXG4gIGNvbnN0IHBhcmFtQXV0b1BsYXkgPSBwbGF5ZXJDb25maWcuYXV0b1BsYXkgfHwgcGxheWVyQ29uZmlnLmF1dG9wbGF5ID8gJ2F1dG9wbGF5JyA6ICcnO1xyXG4gIGNvbnN0IHBhcmFtTXV0ZWQgPSBwbGF5ZXJDb25maWcubXV0ZWQgPyAnbXV0ZWQnIDogJyc7XHJcbiAgY29uc3QgcGFyYW1Mb29wID0gcGxheWVyQ29uZmlnLmxvb3AgPyAnbG9vcCcgOiAnJztcclxuICBjb25zdCBwYXJhbVByZWxvYWQgPSBwbGF5ZXJDb25maWcucHJlbG9hZCA/ICdwcmVsb2FkPVwiJyArIHBsYXllckNvbmZpZy5wcmVsb2FkICsgJ1wiJyA6ICcnO1xyXG5cclxuICByZXR1cm4gYCAkeyBwYXJhbUlkIH0gJHsgcGFyYW1BdXRvUGxheSB9ICR7IHBhcmFtTXV0ZWQgfSAkeyBwYXJhbUxvb3AgfSAkeyBwYXJhbVByZWxvYWQgfWAudHJpbUVuZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQbGF5QnV0dG9uRWxlbWVudCggYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50LCBwbGF5ZXJDb25maWc/OiBBdWRpb1BsYXllckNvbmZpZyApIHtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2J1dHRvbicgKTtcclxuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoICdwbGF5LWJ1dHRvbicgKTtcclxuXHJcbiAgc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgaWYgKCBhdWRpb0VsZW1lbnQucGF1c2VkICkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoICdwYXVzZWQnICk7XHJcbiAgICB9XHJcbiAgfSwgMzAwICk7XHJcblxyXG4gIGJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgaWYgKCBhdWRpb0VsZW1lbnQucGF1c2VkICkge1xyXG4gICAgICBhdWRpb0VsZW1lbnQucGxheSgpO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoICdwYXVzZWQnICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncGF1c2VkJyApO1xyXG4gICAgfVxyXG4gIH0gKTtcclxuXHJcbiAgc2V0QXVkaW9FbGVtZW50UGxheVBhdXNlRXZlbnRzKCBidXR0b25FbGVtZW50LCBhdWRpb0VsZW1lbnQsIHBsYXllckNvbmZpZyApO1xyXG5cclxuICByZXR1cm4gYnV0dG9uRWxlbWVudDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNldEF1ZGlvRWxlbWVudFBsYXlQYXVzZUV2ZW50cyggYnV0dG9uRWxlbWVudDogSFRNTEJ1dHRvbkVsZW1lbnQsIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCwgcGxheWVyQ29uZmlnPzogQXVkaW9QbGF5ZXJDb25maWcgKSB7XHJcbiAgYXVkaW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdwbGF5JywgKCkgPT4ge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAncGF1c2VkJyApO1xyXG4gICAgaWYgKCBwbGF5ZXJDb25maWcgJiYgcGxheWVyQ29uZmlnLm9uUGxheSApIHtcclxuICAgICAgcGxheWVyQ29uZmlnLm9uUGxheSggYXVkaW9FbGVtZW50ICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBwbGF5ZXJDb25maWcgJiYgcGxheWVyQ29uZmlnLm9ucGxheSApIHtcclxuICAgICAgcGxheWVyQ29uZmlnLm9ucGxheSggYXVkaW9FbGVtZW50ICk7XHJcbiAgICB9XHJcbiAgfSApO1xyXG5cclxuICBhdWRpb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3BhdXNlJywgKCkgPT4ge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncGF1c2VkJyApO1xyXG4gICAgaWYgKCBwbGF5ZXJDb25maWcgJiYgcGxheWVyQ29uZmlnLm9uUGF1c2UgKSB7XHJcbiAgICAgIHBsYXllckNvbmZpZy5vblBhdXNlKCBhdWRpb0VsZW1lbnQgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHBsYXllckNvbmZpZyAmJiBwbGF5ZXJDb25maWcub25wYXVzZSApIHtcclxuICAgICAgcGxheWVyQ29uZmlnLm9ucGF1c2UoIGF1ZGlvRWxlbWVudCApO1xyXG4gICAgfVxyXG4gIH0gKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwbGF5QnV0dG9uQ1NTKCkge1xyXG4gIHJldHVybiBgXHJcbiAgICAucGxheS1idXR0b24ge1xyXG4gICAgICBtYXJnaW46IDA7XHJcbiAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGJvcmRlcjogMDtcclxuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICAgIHdpZHRoOiAwO1xyXG4gICAgICBoZWlnaHQ6IDM0cHg7XHJcbiAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgIzIwMjAyMDtcclxuICAgICAgdHJhbnNpdGlvbjogMTAwbXMgYWxsIGVhc2U7XHJcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgYm9yZGVyLXN0eWxlOiBkb3VibGU7XHJcbiAgICAgIGJvcmRlci13aWR0aDogMHB4IDAgMHB4IDMwcHg7XHJcbiAgICB9XHJcblxyXG4gICAgLnBsYXktYnV0dG9uLnBhdXNlZCB7XHJcbiAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XHJcbiAgICAgIGJvcmRlci13aWR0aDogMjNweCAwcHggMjNweCAzNHB4O1xyXG4gICAgfVxyXG5cclxuICAgIC5wbGF5LWJ1dHRvbjpob3ZlciB7XHJcbiAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgIzQwNDA0MDtcclxuICAgIH1cclxuICBgO1xyXG59XHJcblxyXG5leHBvcnQgeyBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgfTsiLCJpbXBvcnQgeyBEaW1lbnNpb25zLCBQb2ludDJELCBsZXJwLCByZWdleE51bWJlclBhdHRlcm4sIHJvdGF0ZUNvb3JkaW5hdGVzLCByb3RhdGVDb29yZGluYXRlc0Zyb21Qb2ludDJEIH0gZnJvbSAnLi9NYXRoVG9vbHMnO1xyXG5pbXBvcnQgeyB0b1Bob25lTnVtYmVyIH0gZnJvbSAnLi9TdHJpbmdUb29scyc7XHJcbmltcG9ydCB7IENvbGxpc2lvbkRpcmVjdGlvbkNoZWNrLCBCb3JkZXJEaXN0YW5jZSB9IGZyb20gJy4uL0V4dHJhcy9Db2xsaXNpb25FdmVudHMvVHlwZXMnO1xyXG5cclxuZXhwb3J0IHR5cGUgS2V5Ym9hcmRFdmVudENhbGxiYWNrID0gKCBldnQ6IEtleWJvYXJkRXZlbnQgKSA9PiB2b2lkO1xyXG5leHBvcnQgY29uc3QgcmVnZXhSZW1vdmVUcmFuc2xhdGVGcm9tVHJhbnNmb3JtID0gL3RyYW5zbGF0ZVxcKFteKV0qXFwpL2c7XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlVmFsdWUgPSAvcm90YXRlXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlWFZhbHVlID0gL3JvdGF0ZVhcXCgoLT9cXGQrXFwuP1xcZCopZGVnXFwpLztcclxuZXhwb3J0IGNvbnN0IHJlZ2V4R3JvdXBSb3RhdGVZVmFsdWUgPSAvcm90YXRlWVxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVpWYWx1ZSA9IC9yb3RhdGVaXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcblxyXG5leHBvcnQgY29uc3QgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgY29uc3QgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQgPSBuZXcgTWFwPHN0cmluZywgS2V5Ym9hcmRFdmVudENhbGxiYWNrW10+KCk7XHJcbmV4cG9ydCBjb25zdCBkaWN0S2V5c0J5QWN0aW9uS2V5dXAgPSBuZXcgTWFwPHN0cmluZywgS2V5Ym9hcmRFdmVudENhbGxiYWNrW10+KCk7XHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRBY3Rpb25LZXkoIHsga2V5LCBrZXlkb3duOiBldmVudEtleWRvd24sIGtleXVwOiBldmVudEtleXVwLCBleGVjdXRlT25seU9uY2UgPSB0cnVlIH06IHsga2V5OiBzdHJpbmc7IGtleWRvd246IEtleWJvYXJkRXZlbnRDYWxsYmFjazsga2V5dXA/OiBLZXlib2FyZEV2ZW50Q2FsbGJhY2s7IGV4ZWN1dGVPbmx5T25jZT86IGJvb2xlYW47IH0gKSB7XHJcbiAgaWYgKCBleGVjdXRlT25seU9uY2UgKSB7XHJcbiAgICBhZGRBY3Rpb25LZXlSdW5PbmNlKCBrZXksIGV2ZW50S2V5ZG93biwgZXZlbnRLZXl1cCApO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYWRkQWN0aW9uS2V5UnVuT25SZXBlYXQoIGtleSwgZXZlbnRLZXlkb3duLCBldmVudEtleXVwICk7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNhZmVQcm9taXNlPFQ+ID0ge1xyXG4gIGRhdGE6ICgpID0+IFQ7XHJcbiAgZXJyb3I6IEVycm9yIHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVByb21pc2U8VD4oIHByb21pc2U6IFByb21pc2U8VD4gKTogUHJvbWlzZTxTYWZlUHJvbWlzZTxUPj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcHJvbWlzZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhOiAoKSA9PiBkYXRhLFxyXG4gICAgICBlcnJvcjogbnVsbFxyXG4gICAgfTtcclxuICB9IGNhdGNoICggZXJyb3IgKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCBlcnJvciApO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRhdGE6ICgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCBcIkNvdWxkbid0IGZldGNoLCBjaGVjayBTYWZlUHJvbWlzZS5lcnJvciBmb3IgZGV0YWlscy5cIiApOyB9LFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKCBTdHJpbmcoIGVycm9yICkgKVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkWW91dHViZVVybE9ySWQoIGlucHV0OiBzdHJpbmcgKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgdXJsUGF0dGVybiA9IC9eKGh0dHAocyk/OlxcL1xcLyk/KCh3KXszfS4pP3lvdXR1KGJlfC5iZSk/KFxcLmNvbSk/XFwvLisvO1xyXG4gIGNvbnN0IGlkUGF0dGVybiA9IC9eW2EtekEtWjAtOV8tXXsxMX0kLztcclxuXHJcbiAgcmV0dXJuIHVybFBhdHRlcm4udGVzdCggaW5wdXQgKSB8fCBpZFBhdHRlcm4udGVzdCggaW5wdXQgKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkWW91VHViZVVybCggdXJsOiBzdHJpbmcgKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgcGF0dGVybiA9IC9eKGh0dHAocyk/OlxcL1xcLyk/KCh3KXszfS4pP3lvdXR1KGJlfC5iZSk/KFxcLmNvbSk/XFwvLisvO1xyXG4gIHJldHVybiBwYXR0ZXJuLnRlc3QoIHVybCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFlvdVR1YmVJZCggaW5wdXQ6IHN0cmluZyApOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCByZWdleCA9IC9bPyZddj0oW14/Jl0rKS87XHJcbiAgY29uc3QgbWF0Y2ggPSBpbnB1dC5tYXRjaCggcmVnZXggKTtcclxuICBpZiAoIG1hdGNoICYmIG1hdGNoWzFdICkge1xyXG4gICAgcmV0dXJuIG1hdGNoWzFdO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBJZiBkaXJlY3QgdmlkZW8gSUQgaXMgcHJvdmlkZWRcclxuICAgIHJldHVybiBpbnB1dC5sZW5ndGggPT09IDExID8gaW5wdXQgOiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIGF0dHJMaXN0OiBbc3RyaW5nLCBzdHJpbmddW10gKSB7XHJcbiAgYXR0ckxpc3QuZm9yRWFjaCggKCBba2V5LCB2YWxdICkgPT4ge1xyXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoIGtleSwgdmFsICk7XHJcbiAgfSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudEZyb21IVE1MKCBodG1sOiBzdHJpbmcsIHRyaW06IGJvb2xlYW4gPSB0cnVlICkge1xyXG4gIGh0bWwgPSB0cmltID8gaHRtbC50cmltKCkgOiBodG1sO1xyXG5cclxuICBpZiAoICFodG1sICkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0ZW1wbGF0ZScgKTtcclxuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sO1xyXG4gIGNvbnN0IHJlc3VsdCA9IHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRyZW47XHJcblxyXG4gIGlmICggcmVzdWx0Lmxlbmd0aCA9PT0gMSApIHtcclxuICAgIHJldHVybiByZXN1bHRbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gQXJyYXkuZnJvbSggcmVzdWx0ICkgYXMgSFRNTEVsZW1lbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnREaW1lbnNpb25zQnlJZCggZWxlbWVudElkOiBzdHJpbmcgKTogRGltZW5zaW9ucyB7XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBlbGVtZW50SWQgKTtcclxuXHJcbiAgaWYgKCAhZWxlbWVudCApIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIGVsZW1lbnQgYXQgZ2V0RWxlbWVudERpbWVuc2lvbnNCeUlkIHdpdGggaWQ6IFwiICsgZWxlbWVudElkICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZ2V0RWxlbWVudERpbWVuc2lvbnMoIGVsZW1lbnQgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnREaW1lbnNpb25zKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiBEaW1lbnNpb25zIHtcclxuICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB3aWR0aDogcmVjdC53aWR0aCxcclxuICAgIGhlaWdodDogcmVjdC5oZWlnaHRcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiBET01SZWN0IHtcclxuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICBjb25zdCBjZW50ZXJYID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7XHJcbiAgY29uc3QgY2VudGVyWSA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xyXG5cclxuICAvLyBSb3RhdGlvbiBhbmdsZSBpbiBkZWdyZWVzIChleHRyYWN0ZWQgZnJvbSBzdHlsZS50cmFuc2Zvcm0gb3IgYW55IG90aGVyIHNvdXJjZSlcclxuICBjb25zdCByb3RhdGlvbkFuZ2xlID0gZ2V0Qm9keVJvdGF0aW9uSW5EZWdyZWVzKCk7XHJcblxyXG4gIGNvbnN0IHJhZGlhbnMgPSAoIE1hdGguUEkgLyAxODAgKSAqIHJvdGF0aW9uQW5nbGU7XHJcbiAgY29uc3QgY29zVGhldGEgPSBNYXRoLmNvcyggcmFkaWFucyApO1xyXG4gIGNvbnN0IHNpblRoZXRhID0gTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRoZSByb3RhdGVkIGNvb3JkaW5hdGVzXHJcbiAgY29uc3Qgcm90YXRlZFgxID0gY2VudGVyWCArICggcmVjdC5sZWZ0IC0gY2VudGVyWCApICogY29zVGhldGEgLSAoIHJlY3QudG9wIC0gY2VudGVyWSApICogc2luVGhldGE7XHJcbiAgY29uc3Qgcm90YXRlZFkxID0gY2VudGVyWSArICggcmVjdC5sZWZ0IC0gY2VudGVyWCApICogc2luVGhldGEgKyAoIHJlY3QudG9wIC0gY2VudGVyWSApICogY29zVGhldGE7XHJcblxyXG4gIGNvbnN0IHJvdGF0ZWRYMiA9IGNlbnRlclggKyAoIHJlY3QucmlnaHQgLSBjZW50ZXJYICkgKiBjb3NUaGV0YSAtICggcmVjdC5ib3R0b20gLSBjZW50ZXJZICkgKiBzaW5UaGV0YTtcclxuICBjb25zdCByb3RhdGVkWTIgPSBjZW50ZXJZICsgKCByZWN0LnJpZ2h0IC0gY2VudGVyWCApICogc2luVGhldGEgKyAoIHJlY3QuYm90dG9tIC0gY2VudGVyWSApICogY29zVGhldGE7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBsZWZ0LCB0b3AsIGJvdHRvbSwgYW5kIHJpZ2h0IGNvb3JkaW5hdGVzXHJcbiAgY29uc3Qgcm90YXRlZExlZnQgPSBNYXRoLm1pbiggcm90YXRlZFgxLCByb3RhdGVkWDIgKTtcclxuICBjb25zdCByb3RhdGVkVG9wID0gTWF0aC5taW4oIHJvdGF0ZWRZMSwgcm90YXRlZFkyICk7XHJcbiAgY29uc3Qgcm90YXRlZEJvdHRvbSA9IE1hdGgubWF4KCByb3RhdGVkWTEsIHJvdGF0ZWRZMiApO1xyXG4gIGNvbnN0IHJvdGF0ZWRSaWdodCA9IE1hdGgubWF4KCByb3RhdGVkWDEsIHJvdGF0ZWRYMiApO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgeDogcm90YXRlZExlZnQsXHJcbiAgICB5OiByb3RhdGVkVG9wLFxyXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXHJcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxyXG4gICAgdG9KU09OOiByZWN0LnRvSlNPTixcclxuICAgIGxlZnQ6IHJvdGF0ZWRMZWZ0LFxyXG4gICAgdG9wOiByb3RhdGVkVG9wLFxyXG4gICAgYm90dG9tOiByb3RhdGVkQm90dG9tLFxyXG4gICAgcmlnaHQ6IHJvdGF0ZWRSaWdodCxcclxuICB9IGFzIERPTVJlY3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEFjdGlvbktleVJ1bk9uY2UoIGtleTogc3RyaW5nLCBldmVudEtleWRvd246IEtleWJvYXJkRXZlbnRDYWxsYmFjaywgZXZlbnRLZXl1cD86IEtleWJvYXJkRXZlbnRDYWxsYmFjayApIHtcclxuICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5oYXMoIGtleSApICkge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLnNldCgga2V5LCBbZXZlbnRLZXlkb3duLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UuZ2V0KCBrZXkgKSFdIClcclxuICB9IGVsc2Uge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLnNldCgga2V5LCBbZXZlbnRLZXlkb3duXSApXHJcbiAgfVxyXG5cclxuICBpZiAoIGV2ZW50S2V5dXAgKSB7XHJcbiAgICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5oYXMoIGtleSApICkge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5dXAuZ2V0KCBrZXkgKSFdIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXBdIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEFjdGlvbktleVJ1bk9uUmVwZWF0KCBrZXk6IHN0cmluZywgZXZlbnRLZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2ssIGV2ZW50S2V5dXA/OiBLZXlib2FyZEV2ZW50Q2FsbGJhY2sgKSB7XHJcbiAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5oYXMoIGtleSApICkge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQuc2V0KCBrZXksIFtldmVudEtleWRvd24sIC4uLmRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LmdldCgga2V5ICkhXSApXHJcbiAgfSBlbHNlIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LnNldCgga2V5LCBbZXZlbnRLZXlkb3duXSApXHJcbiAgfVxyXG5cclxuICBpZiAoIGV2ZW50S2V5dXAgKSB7XHJcbiAgICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5oYXMoIGtleSApICkge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5dXAuZ2V0KCBrZXkgKSFdIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXBdIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0VsZW1lbnRDb2xsaXNpb24oIGVsZW1lbnQxOiBIVE1MRWxlbWVudCwgZWxlbWVudDI6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZWxlbWVudDEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50MSApO1xyXG4gIGNvbnN0IHJlY3QyID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZWxlbWVudDIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50MiApO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSAhKFxyXG4gICAgcmVjdDEudG9wID4gcmVjdDIuYm90dG9tIHx8XHJcbiAgICByZWN0MS5yaWdodCA8IHJlY3QyLmxlZnQgfHxcclxuICAgIHJlY3QxLmJvdHRvbSA8IHJlY3QyLnRvcCB8fFxyXG4gICAgcmVjdDEubGVmdCA+IHJlY3QyLnJpZ2h0XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvbGxGb3JWYXJpYWJsZTxUPiggdmFyaWFibGVOYW1lOiBzdHJpbmcsIHJlYWR5Q29uZGl0aW9uOiAoIHZhbHVlOiBUICkgPT4gYm9vbGVhbiwgY2FsbGJhY2s6ICggdmFsdWU6IFQgKSA9PiB2b2lkICkge1xyXG4gIGNvbnN0IHBvbGxJbnRlcnZhbCA9IDEwMDtcclxuICBjb25zdCBwb2xsID0gc2V0SW50ZXJ2YWwoICgpID0+IHtcclxuICAgIGlmICggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSAhPT0gdW5kZWZpbmVkICYmIHJlYWR5Q29uZGl0aW9uKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICkgKSB7XHJcbiAgICAgIC8vIElmIGJvdGggY29uZGl0aW9ucyBhcmUgbWV0LCBleGVjdXRlIHRoZSBjYWxsYmFjayBhbmQgc3RvcCBwb2xsaW5nXHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoIHBvbGwgKTtcclxuICAgICAgY2FsbGJhY2soICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gKTtcclxuICAgIH1cclxuICB9LCBwb2xsSW50ZXJ2YWwgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBvbGxGb3JWYXJpYWJsZUFzeW5jPFQ+KCB2YXJpYWJsZU5hbWU6IHN0cmluZywgcmVhZHlDb25kaXRpb246ICggdmFsdWU6IFQgKSA9PiBib29sZWFuLCBjYWxsYmFjazogKCB2YWx1ZTogVCApID0+IHZvaWQgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgcG9sbEludGVydmFsID0gMTAwO1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPiggKCByZXNvbHZlICkgPT4ge1xyXG4gICAgY29uc3QgcG9sbCA9IHNldEludGVydmFsKCAoKSA9PiB7XHJcbiAgICAgIGlmICggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSAhPT0gdW5kZWZpbmVkICYmIHJlYWR5Q29uZGl0aW9uKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICkgKSB7XHJcbiAgICAgICAgLy8gSWYgYm90aCBjb25kaXRpb25zIGFyZSBtZXQsIGV4ZWN1dGUgdGhlIGNhbGxiYWNrLCBzdG9wIHBvbGxpbmcsIGFuZCByZXNvbHZlIHRoZSBwcm9taXNlXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCggcG9sbCApO1xyXG4gICAgICAgIGNhbGxiYWNrKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICk7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LCBwb2xsSW50ZXJ2YWwgKTtcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3YWl0VW50aWxFbGVtZW50RXhpc3RzKCBzZWxlY3Rvcjogc3RyaW5nICkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICBpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKSB7XHJcbiAgICAgIHJldHVybiByZXNvbHZlKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlciggbXV0YXRpb25zID0+IHtcclxuICAgICAgaWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICkge1xyXG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICByZXNvbHZlKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBvYnNlcnZlci5vYnNlcnZlKCBkb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgc3VidHJlZTogdHJ1ZVxyXG4gICAgfSApO1xyXG4gIH0gKTtcclxufVxyXG5cclxuLy8vIEdldCB0aGUgZGVmYXVsdCBhdHRyaWJ1dGVzIGZyb20gdGhlIHRhcmdldCBlbGVtZW50XHJcbi8vLyBJZiBoYXZlIG5vdCBkZWZhdWx0IGF0dHJpYnV0ZSB3aXRoIHRoaXMgQGF0dHJpYnV0ZU5hbWUgb24gbWFwIHdpbGwgc2V0IHRoZSBjdXJyZW50IGF0dHJpYnV0ZSBhcyBkZWZhdWx0XHJcbi8vLyBJZiBoYXZlIG5vdCBkZWZhdWx0IGF0dHJpYnV0ZSB3aXRoIHRoaXMgQGF0dHJpYnV0ZU5hbWUgd2lsbCByZXR1cm4gYW4gZW1wdHkgc3RyaW5nXHJcbmV4cG9ydCBjb25zdCBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudCA9IG5ldyBNYXA8SFRNTEVsZW1lbnQsIE1hcDxzdHJpbmcsIHN0cmluZz4+KCk7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0QXR0cmlidXRlRm9yVGFyZ2V0KCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICBpZiAoICFtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5oYXMoIHRhcmdldCApICkge1xyXG4gICAgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuc2V0KCB0YXJnZXQsIG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCkgKTtcclxuICB9XHJcblxyXG4gIGxldCByZXN1bHQ6IHN0cmluZyA9ICcnO1xyXG4gIGNvbnN0IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNCeU5hbWUgPSBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5nZXQoIHRhcmdldCApITtcclxuICBjb25zdCB0YXJnZXREZWZhdWx0QXR0cmlidXRlID0gIWRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNCeU5hbWUuaGFzKCBhdHRyaWJ1dGVOYW1lICkgPyB0YXJnZXQuZ2V0QXR0cmlidXRlKCBhdHRyaWJ1dGVOYW1lICkgOiBkZWZhdWx0QXR0cmlidXRlVmFsdWVzQnlOYW1lLmdldCggYXR0cmlidXRlTmFtZSApITtcclxuXHJcbiAgcmVzdWx0ID0gdGFyZ2V0RGVmYXVsdEF0dHJpYnV0ZSA/IHRhcmdldERlZmF1bHRBdHRyaWJ1dGUgOiAnJztcclxuICBzZXREZWZhdWx0QXR0cmlidXRlRm9yVGFyZ2V0KCB0YXJnZXQsIGF0dHJpYnV0ZU5hbWUsIHJlc3VsdCApO1xyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCggdGFyZ2V0OiBIVE1MRWxlbWVudCwgYXR0cmlidXRlTmFtZTogc3RyaW5nLCBuZXdEZWZhdWx0QXR0cmlidXRlOiBzdHJpbmcgKTogdm9pZCB7XHJcbiAgaWYgKCAhbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuaGFzKCB0YXJnZXQgKSApIHtcclxuICAgIG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LnNldCggdGFyZ2V0LCBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpICk7XHJcbiAgfVxyXG5cclxuICBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5nZXQoIHRhcmdldCApIS5zZXQoIGF0dHJpYnV0ZU5hbWUsIG5ld0RlZmF1bHRBdHRyaWJ1dGUgKTtcclxufVxyXG5cclxuLy8vIERpdmlkZSBvIGVsZW1lbnRvIEB0YXJnZXQgZW0gOSBcInF1YWRyYWRvc1wiIGlndWFpcyBlIHJldG9ybmEgZW0gcXVhaXMgcXVhZHJhZG9zIG8gZHJhZ2dhYmxlIGVzdMOhIGNvbGlkaW5kbyBjb20gbyB0YXJnZXRcclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbGxpc2lvbkRpcmVjdGlvbiggZHJhZ2dhYmxlOiBIVE1MRWxlbWVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCwgY2hlY2tCb2R5Um90YXRpb246IGJvb2xlYW4gPSBmYWxzZSApOiBDb2xsaXNpb25EaXJlY3Rpb25DaGVjayB7XHJcbiAgY29uc3QgcmVjdDEgPSAhY2hlY2tCb2R5Um90YXRpb24gPyBkcmFnZ2FibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBkcmFnZ2FibGUgKTtcclxuICBjb25zdCByZWN0MiA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIHRhcmdldCApO1xyXG5cclxuICBjb25zdCBpc1RvcCA9IHJlY3QxLmJvdHRvbSA+IHJlY3QyLnRvcCAmJiByZWN0MS50b3AgPCByZWN0Mi50b3AgKyByZWN0Mi5oZWlnaHQgLyAzO1xyXG4gIGNvbnN0IGlzUmlnaHQgPSByZWN0MS5sZWZ0IDwgcmVjdDIucmlnaHQgJiYgcmVjdDEucmlnaHQgPiByZWN0Mi5yaWdodCAtIHJlY3QyLndpZHRoIC8gMztcclxuICBjb25zdCBpc0NlbnRlciA9IHJlY3QxLnRvcCA8IHJlY3QyLmJvdHRvbSAmJiByZWN0MS5ib3R0b20gPiByZWN0Mi50b3AgJiYgcmVjdDEubGVmdCA8IHJlY3QyLnJpZ2h0ICYmIHJlY3QxLnJpZ2h0ID4gcmVjdDIubGVmdDtcclxuICBjb25zdCBpc0JvdHRvbSA9IHJlY3QxLnRvcCA8IHJlY3QyLmJvdHRvbSAtIHJlY3QyLmhlaWdodCAvIDMgJiYgcmVjdDEuYm90dG9tID4gcmVjdDIuYm90dG9tIC0gcmVjdDIuaGVpZ2h0IC8gMztcclxuICBjb25zdCBpc0xlZnQgPSByZWN0MS5yaWdodCA+IHJlY3QyLmxlZnQgJiYgcmVjdDEubGVmdCA8IHJlY3QyLmxlZnQgKyByZWN0Mi53aWR0aCAvIDM7XHJcblxyXG4gIHJldHVybiB7IHRvcDogaXNUb3AsIHJpZ2h0OiBpc1JpZ2h0LCBjZW50ZXI6IGlzQ2VudGVyLCBib3R0b206IGlzQm90dG9tLCBsZWZ0OiBpc0xlZnQgfTtcclxufVxyXG5cclxuLy8vIHJldHVybiB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBkcmFnZ2FibGUgdG8gdGhlIGNlbnRlciBvZiB0aGUgdGFyZ2V0IGVsZW1lbnQgZnJvbSBlYWNoIGJvcmRlciBcclxuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlRnJvbUJvcmRlciggZHJhZ2dhYmxlOiBIVE1MRWxlbWVudCwgdGFyZ2V0OiBIVE1MRWxlbWVudCwgY2hlY2tCb2R5Um90YXRpb246IGJvb2xlYW4gPSBmYWxzZSApOiBCb3JkZXJEaXN0YW5jZSB7XHJcbiAgY29uc3QgcmVjdDEgPSAhY2hlY2tCb2R5Um90YXRpb24gPyBkcmFnZ2FibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBkcmFnZ2FibGUgKTtcclxuICBjb25zdCByZWN0MiA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIHRhcmdldCApO1xyXG5cclxuICBjb25zdCBjZW50ZXIgPSB7XHJcbiAgICB4OiByZWN0MS5sZWZ0ICsgcmVjdDEud2lkdGggLyAyLFxyXG4gICAgeTogcmVjdDEudG9wICsgcmVjdDEuaGVpZ2h0IC8gMixcclxuICB9O1xyXG5cclxuICBjb25zdCBkaXN0YW5jZUZyb21Cb3JkZXI6IEJvcmRlckRpc3RhbmNlID0ge1xyXG4gICAgdG9wOiBjZW50ZXIueSAtIHJlY3QyLnRvcCxcclxuICAgIHJpZ2h0OiByZWN0Mi5yaWdodCAtIGNlbnRlci54LFxyXG4gICAgYm90dG9tOiByZWN0Mi5ib3R0b20gLSBjZW50ZXIueSxcclxuICAgIGxlZnQ6IGNlbnRlci54IC0gcmVjdDIubGVmdCxcclxuICB9O1xyXG5cclxuICByZXR1cm4gZGlzdGFuY2VGcm9tQm9yZGVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBydW5Pbmx5T25jZUtleWRvd25BY3Rpb25zKCBldnQ6IEtleWJvYXJkRXZlbnQgKSB7XHJcbiAgZm9yICggY29uc3QgcGFpciBvZiBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UgKSB7XHJcbiAgICBpZiAoIGV2dC5jb2RlID09PSBwYWlyWzBdICkge1xyXG4gICAgICBwYWlyWzFdLmZvckVhY2goIGtiRXZlbnQgPT4ga2JFdmVudCggZXZ0ICkgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJ1bktleWRvd25BY3Rpb25zUmVwZWF0KCBldnQ6IEtleWJvYXJkRXZlbnQgKSB7XHJcbiAgZm9yICggY29uc3QgcGFpciBvZiBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdCApIHtcclxuICAgIGlmICggZXZ0LmNvZGUgPT09IHBhaXJbMF0gKSB7XHJcbiAgICAgIHBhaXJbMV0uZm9yRWFjaCgga2JFdmVudCA9PiBrYkV2ZW50KCBldnQgKSApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgZXZ0ID0+IHtcclxuICBpZiAoICFldnQucmVwZWF0ICkge1xyXG4gICAgcnVuT25seU9uY2VLZXlkb3duQWN0aW9ucyggZXZ0ICk7XHJcbiAgfVxyXG5cclxuICBydW5LZXlkb3duQWN0aW9uc1JlcGVhdCggZXZ0ICk7XHJcbn0gKTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAna2V5dXAnLCBldnQgPT4ge1xyXG4gIGZvciAoIGNvbnN0IHBhaXIgb2YgZGljdEtleXNCeUFjdGlvbktleXVwICkge1xyXG4gICAgaWYgKCBldnQuY29kZSA9PT0gcGFpclswXSApIHtcclxuICAgICAgcGFpclsxXS5mb3JFYWNoKCBrYkV2ZW50ID0+IGtiRXZlbnQoIGV2dCApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59ICk7XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRSb3RhdGlvbkluRGVncmVlcyggZWxlbWVudDogSFRNTEVsZW1lbnQsIGF4aXM6ICd4JyB8ICd5JyB8ICd6JyA9ICd4JyApOiBudW1iZXIge1xyXG4gIGxldCByZWdleE1hdGNoUm90YXRlVmFsdWU6IFJlZ0V4cDtcclxuICBzd2l0Y2ggKCBheGlzICkge1xyXG4gICAgY2FzZSAneCc6XHJcbiAgICAgIHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZSA9IHJlZ2V4R3JvdXBSb3RhdGVYVmFsdWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAneSc6XHJcbiAgICAgIHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZSA9IHJlZ2V4R3JvdXBSb3RhdGVZVmFsdWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAneic6XHJcbiAgICAgIHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZSA9IHJlZ2V4R3JvdXBSb3RhdGVaVmFsdWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlID0gcmVnZXhHcm91cFJvdGF0ZVZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcblxyXG4gIGNvbnN0IG1hdGNoID0gcmVnZXhNYXRjaFJvdGF0ZVZhbHVlLmV4ZWMoIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtICk7XHJcbiAgaWYgKCBtYXRjaCApIHtcclxuICAgIGNvbnN0IHJvdGF0aW9uVmFsdWUgPSBwYXJzZUZsb2F0KCBtYXRjaFsxXSApO1xyXG4gICAgcmV0dXJuIHJvdGF0aW9uVmFsdWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvZHlSb3RhdGlvbkluRGVncmVlcygpOiBudW1iZXIge1xyXG4gIGNvbnN0IG1hdGNoID0gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkZyb21Cb2R5KCkuZXhlYyggZG9jdW1lbnQuYm9keS5zdHlsZS50cmFuc2Zvcm0gKTtcclxuICBpZiAoIG1hdGNoICkge1xyXG4gICAgY29uc3Qgcm90YXRpb25WYWx1ZSA9IHBhcnNlRmxvYXQoIG1hdGNoWzFdICk7XHJcbiAgICByZXR1cm4gcm90YXRpb25WYWx1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkZyb21Cb2R5KCkge1xyXG4gIHJldHVybiBnZXRSZWdleFJlbW92ZVJvdGF0aW9uQmFzZWRPbkF4aXMoIGdldEJvZHlSb3RhdGlvbkF4aXMoKSApXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWdleFJlbW92ZVJvdGF0aW9uQmFzZWRPbkF4aXMoIGF4aXM6ICd4JyB8ICd5JyB8ICd6JyApIHtcclxuICBzd2l0Y2ggKCBheGlzICkge1xyXG4gICAgY2FzZSAneCc6XHJcbiAgICAgIHJldHVybiByZWdleEdyb3VwUm90YXRlWFZhbHVlO1xyXG4gICAgY2FzZSAneSc6XHJcbiAgICAgIHJldHVybiByZWdleEdyb3VwUm90YXRlWVZhbHVlO1xyXG4gICAgY2FzZSAneic6XHJcbiAgICAgIHJldHVybiByZWdleEdyb3VwUm90YXRlWlZhbHVlO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIHJlZ2V4R3JvdXBSb3RhdGVWYWx1ZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb2R5Um90YXRpb25BeGlzKCk6ICd4JyB8ICd5JyB8ICd6JyB7XHJcbiAgcmV0dXJuIGdldEVsZW1lbnRSb3RhdGlvbkF4aXMoIGRvY3VtZW50LmJvZHkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRSb3RhdGlvbkF4aXMoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICk6ICd4JyB8ICd5JyB8ICd6JyB7XHJcbiAgY29uc3QgZWxlbWVudFRyYW5zZm9ybSA9IGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtLnRvTG93ZXJDYXNlKCk7XHJcbiAgaWYgKCBlbGVtZW50VHJhbnNmb3JtLmluY2x1ZGVzKCAneCcgKSApIHtcclxuICAgIHJldHVybiAneCc7XHJcbiAgfSBlbHNlIGlmICggZWxlbWVudFRyYW5zZm9ybS5pbmNsdWRlcyggJ3knICkgKSB7XHJcbiAgICByZXR1cm4gJ3knO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gJ3onO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybUNvb3Jkc0Zyb21FbGVtZW50KCBlbGVtZW50OiBIVE1MRWxlbWVudCwgY2hlY2tCb2R5Um90YXRpb246IGJvb2xlYW4gPSBmYWxzZSApOiBQb2ludDJEIHtcclxuICBjb25zdCBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZSA9ICggd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsZW1lbnQgKS50cmFuc2Zvcm0ubWF0Y2goIHJlZ2V4TnVtYmVyUGF0dGVybiApID8/IFswLCAwXSApLm1hcCggbiA9PiArbiApO1xyXG5cclxuICBsZXQgcmVzdWx0ID0ge1xyXG4gICAgeDogYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGVbNF0gIT09IHVuZGVmaW5lZCA/IE1hdGgucm91bmQoIGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzRdICkgOiAwLFxyXG4gICAgeTogYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGVbNV0gIT09IHVuZGVmaW5lZCA/IE1hdGgucm91bmQoIGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzVdICkgOiAwXHJcbiAgfVxyXG5cclxuICBpZiAoIGNoZWNrQm9keVJvdGF0aW9uICkge1xyXG4gICAgY29uc3QgYm9keUFuZ2xlID0gZ2V0RWxlbWVudFJvdGF0aW9uSW5EZWdyZWVzKCBkb2N1bWVudC5ib2R5LCBnZXRFbGVtZW50Um90YXRpb25BeGlzKCBlbGVtZW50ICkgKSB8fCAwO1xyXG4gICAgcmV0dXJuIHJvdGF0ZUNvb3JkaW5hdGVzKCByZXN1bHQueCwgcmVzdWx0LnksIGJvZHlBbmdsZSApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsaWNrRXZlbnRUb0Nvb3JkaW5hdGVzKCBldmVudDogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQgKSB7XHJcbiAgaWYgKCBldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiBldmVudC5jbGllbnRYLFxyXG4gICAgICB5OiBldmVudC5jbGllbnRZXHJcbiAgICB9O1xyXG4gIH0gZWxzZSBpZiAoIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCApIHtcclxuICAgIGNvbnN0IHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiB0b3VjaC5jbGllbnRYLFxyXG4gICAgICB5OiB0b3VjaC5jbGllbnRZXHJcbiAgICB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aHJvdyBcIkV2ZW50IG5vdCBGb3VuZFwiO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbnZpc2libGVEaXZBYm92ZVBhcmVudCggeyBwYXJlbnRFbGVtZW50LCBpZCwgcG9zaXRpb24sIGRpbWVuc2lvbnMgfTogeyBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudDsgaWQ6IHN0cmluZzsgcG9zaXRpb24/OiB7IHRvcDogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IH07IGRpbWVuc2lvbnM/OiBEaW1lbnNpb25zOyB9ICkge1xyXG4gIHZhciBpbnZpc2libGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApO1xyXG5cclxuICBpZiAoICFwYXJlbnRFbGVtZW50LnN0eWxlLnBvc2l0aW9uICkge1xyXG4gICAgcGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcbiAgfVxyXG5cclxuICBpbnZpc2libGVEaXYuaWQgPSBpZDtcclxuICBpbnZpc2libGVEaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS53aWR0aCA9IGRpbWVuc2lvbnMgJiYgZGltZW5zaW9ucy53aWR0aCA/IGRpbWVuc2lvbnMud2lkdGgudG9TdHJpbmcoKSArICdweCcgOiAnMTAwJSc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLmhlaWdodCA9IGRpbWVuc2lvbnMgJiYgZGltZW5zaW9ucy5oZWlnaHQgPyBkaW1lbnNpb25zLmhlaWdodC50b1N0cmluZygpICsgJ3B4JyA6ICcxMDAlJztcclxuICBpbnZpc2libGVEaXYuc3R5bGUudG9wID0gKCBwb3NpdGlvbj8udG9wLnRvU3RyaW5nKCkgPz8gJzAnICkgKyAncHgnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5sZWZ0ID0gKCBwb3NpdGlvbj8ubGVmdC50b1N0cmluZygpID8/ICcwJyApICsgJ3B4JztcclxuICBpbnZpc2libGVEaXYuc3R5bGUub3BhY2l0eSA9ICcwJzsgLy8gTWFrZSB0aGUgZGl2IGludmlzaWJsZVxyXG4gIGludmlzaWJsZURpdi5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nOyAvLyBBbGxvdyB0aGUgZGl2IHRvIGludGVyY2VwdCBtb3VzZSBldmVudHNcclxuXHJcbiAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCggaW52aXNpYmxlRGl2ICk7XHJcblxyXG4gIHJldHVybiBpbnZpc2libGVEaXY7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoaWRlRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQgKSB7XHJcbiAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICBlbGVtZW50LnN0eWxlLnpJbmRleCA9ICctMSc7XHJcbiAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG4gIGVsZW1lbnQuc3R5bGUud2lkdGggPSAnMHB4ICFpbXBvcnRhbnQnO1xyXG4gIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzBweCAhaW1wb3J0YW50JztcclxuICBlbGVtZW50LnNldEF0dHJpYnV0ZSggJ2hpZGRlbicsICcnICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzbGVlcEFzeW5jKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPiggKCByZXNvbHZlICkgPT4gc2V0VGltZW91dCggKCkgPT4gcmVzb2x2ZSgpLCBtcyApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kRWxlbWVudHNCeUNoZWNrKCB0cmlnZ2VyRWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQsIG9uQ2hlY2s6IEZ1bmN0aW9uLCBvblVuY2hlY2s6IEZ1bmN0aW9uICkge1xyXG4gIGlmICggdHJpZ2dlckVsZW1lbnQuY2hlY2tlZCApIHtcclxuICAgIG9uQ2hlY2soIHRhcmdldEVsZW1lbnQgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRyaWdnZXJHcm91cCA9IHRyaWdnZXJFbGVtZW50Lm5hbWVcclxuICAgID8gQXJyYXkuZnJvbSggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggYFtuYW1lPVwiJHsgdHJpZ2dlckVsZW1lbnQubmFtZSB9XCJdYCApIClcclxuICAgIDogW3RyaWdnZXJFbGVtZW50XTtcclxuXHJcbiAgdHJpZ2dlckdyb3VwLmZvckVhY2goIHQgPT4gdC5hZGRFdmVudExpc3RlbmVyKCAnY2hhbmdlJywgZXZ0ID0+IHtcclxuICAgIGlmICggdHJpZ2dlckVsZW1lbnQuY2hlY2tlZCApIHtcclxuICAgICAgb25DaGVjayggdGFyZ2V0RWxlbWVudCwgZXZ0ICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvblVuY2hlY2soIHRhcmdldEVsZW1lbnQsIGV2dCApO1xyXG4gICAgfVxyXG4gIH0gKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0SW5wdXRGb3JjZVBob25lTnVtYmVyRm9ybWF0KCBpbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQgKSB7XHJcbiAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBwaG9uZUlucHV0ID0gdGhpcy52YWx1ZTtcclxuXHJcbiAgICBjb25zdCBjbGVhblBob25lSW5wdXQgPSBwaG9uZUlucHV0LnJlcGxhY2UoIC9cXEQvZywgJycgKTtcclxuICAgIGlmICggY2xlYW5QaG9uZUlucHV0Lmxlbmd0aCA+IDExICkge1xyXG4gICAgICBwaG9uZUlucHV0ID0gY2xlYW5QaG9uZUlucHV0LnNsaWNlKCAwLCAxMSApO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwaG9uZU51bWJlckZvcm1hdHRlZCA9IHRvUGhvbmVOdW1iZXIoIHBob25lSW5wdXQgKTtcclxuXHJcbiAgICBpZiAoIHBob25lTnVtYmVyRm9ybWF0dGVkLmxlbmd0aCA9PT0gMTAgKSB7XHJcbiAgICAgIHBob25lTnVtYmVyRm9ybWF0dGVkID0gcGhvbmVOdW1iZXJGb3JtYXR0ZWQucmVwbGFjZUFsbCggJy0nLCAnJyApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmFsdWUgPSBwaG9uZU51bWJlckZvcm1hdHRlZDtcclxuICB9ICk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNNb2JpbGVCcm93c2VyKCkge1xyXG4gIHJldHVybiAvQW5kcm9pZHxpUGhvbmUvaS50ZXN0KCBuYXZpZ2F0b3IudXNlckFnZW50ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyRGV2aWNlVHlwZSgpOiAnYW5kcm9pZCcgfCAnYXBwbGUnIHwgJ2Rlc2t0b3AnIHtcclxuICB2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8ICggd2luZG93IGFzIGFueSApLm9wZXJhO1xyXG5cclxuICBpZiAoIC9hbmRyb2lkL2kudGVzdCggdXNlckFnZW50ICkgKSB7XHJcbiAgICByZXR1cm4gJ2FuZHJvaWQnO1xyXG4gIH0gZWxzZSBpZiAoIC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KCB1c2VyQWdlbnQgKSAmJiAhKCB3aW5kb3cgYXMgYW55ICkuTVNTdHJlYW0gKSB7XHJcbiAgICByZXR1cm4gJ2FwcGxlJztcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuICdkZXNrdG9wJztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc09uU2NyZWVuKCBlbGVtZW50OiBIVE1MRWxlbWVudCApIHtcclxuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICByZXR1cm4gKFxyXG4gICAgcmVjdC50b3AgPj0gMCAmJlxyXG4gICAgcmVjdC5sZWZ0ID49IDAgJiZcclxuICAgIHJlY3QuYm90dG9tIDw9ICggd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgKSAmJlxyXG4gICAgcmVjdC5yaWdodCA8PSAoIHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCApXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRFbGVtZW50Vmlld0lmQ2hlY2tlZCggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIG9wdGlvbnMgPSB7XHJcbiAgb25DaGVjazogKCB0cmlnZ2VyRWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQgKSA9PiB7IH0sXHJcbiAgb25VbmNoZWNrOiAoIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCApID0+IHsgfVxyXG59ICkge1xyXG4gIGJpbmRFbGVtZW50c0J5Q2hlY2soXHJcbiAgICB0cmlnZ2VyRWxlbWVudCxcclxuICAgIHRhcmdldEVsZW1lbnQsXHJcbiAgICAoIGVsOiBIVE1MRWxlbWVudCApID0+IHtcclxuICAgICAgZWwuY2xhc3NMaXN0LmFkZCggJ3Nob3cnICk7XHJcbiAgICAgIG9wdGlvbnMub25DaGVjayggdHJpZ2dlckVsZW1lbnQsIHRhcmdldEVsZW1lbnQgKTtcclxuICAgIH0sXHJcbiAgICAoIGVsOiBIVE1MRWxlbWVudCApID0+IHtcclxuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSggJ3Nob3cnICk7XHJcbiAgICAgIG9wdGlvbnMub25VbmNoZWNrKCB0cmlnZ2VyRWxlbWVudCwgdGFyZ2V0RWxlbWVudCApO1xyXG4gICAgfSxcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVGcm9tUmFkaW9Hcm91cCggZ3JvdXBOYW1lOiBzdHJpbmcgKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIGBbbmFtZT0keyBncm91cE5hbWUgfV06Y2hlY2tlZGAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGlmICggZWwgKSB7XHJcbiAgICByZXR1cm4gZWwudmFsdWU7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNtb290aFNjcm9sbCggdGFyZ2V0WTogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyICk6IHZvaWQge1xyXG4gIGNvbnN0IHN0YXJ0WSA9IHdpbmRvdy5zY3JvbGxZIHx8IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICBsZXQgc3RhcnRUaW1lOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgZnVuY3Rpb24gc3RlcCggY3VycmVudFRpbWU6IG51bWJlciApIHtcclxuICAgIGlmICggIXN0YXJ0VGltZSApIHN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgY29uc3QgZWxhcHNlZFRpbWUgPSBjdXJyZW50VGltZSAtIHN0YXJ0VGltZTtcclxuICAgIGNvbnN0IHByb2dyZXNzID0gTWF0aC5taW4oIGVsYXBzZWRUaW1lIC8gZHVyYXRpb24sIDEgKTtcclxuICAgIGNvbnN0IGVhc2VkUHJvZ3Jlc3MgPSBsZXJwKCAwLCAxLCBwcm9ncmVzcyApO1xyXG4gICAgd2luZG93LnNjcm9sbFRvKCAwLCBsZXJwKCBzdGFydFksIHRhcmdldFksIGVhc2VkUHJvZ3Jlc3MgKSApO1xyXG4gICAgaWYgKCBlbGFwc2VkVGltZSA8IGR1cmF0aW9uICkge1xyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHN0ZXAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSggc3RlcCApO1xyXG59XHJcblxyXG4vLyBSZXRvcm5hIHVtYSBmdW7Dp8OjbyBxdWUgbsOjbyB2YWkgc2VyIGNvbXBsZXRhZGEgY2FzbyBzZWphIGNoYW1hZGEgbm92YW1lbnRlIGVtIHsgZGVsYXkgfSBtaWxpc3NlZ3VuZG9zXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZUZhY3RvcnkoIGZ1bmM6IEZ1bmN0aW9uLCBkZWxheTogbnVtYmVyICk6IEZ1bmN0aW9uIHtcclxuICBsZXQgaW5EZWJvdW5jZTogbnVtYmVyO1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gd2luZG93O1xyXG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIGNsZWFyVGltZW91dCggaW5EZWJvdW5jZSApO1xyXG4gICAgaW5EZWJvdW5jZSA9IHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiBmdW5jLmFwcGx5KCBjb250ZXh0LCBhcmdzICksIGRlbGF5ICk7XHJcbiAgfTtcclxufVxyXG5cclxuLy8gUmV0b3JuYSB1bWEgZnVuw6fDo28gcXVlIHPDsyBwb2RlIHNlciBjb21wbGV0YWRhIHVtYSB2ZXogYSBjYWRhIHsgbGltaXQgfSBtaWxpc3NlZ3VuZG9zIFxyXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGVGYWN0b3J5KCBmdW5jOiBGdW5jdGlvbiwgbGltaXQ6IG51bWJlciApOiBGdW5jdGlvbiB7XHJcbiAgbGV0IGxhc3RGdW5jOiBudW1iZXI7XHJcbiAgbGV0IGxhc3RSYW46IG51bWJlcjtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IHdpbmRvdztcclxuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICBpZiAoICFsYXN0UmFuICkge1xyXG4gICAgICBmdW5jLmFwcGx5KCBjb250ZXh0LCBhcmdzICk7XHJcbiAgICAgIGxhc3RSYW4gPSBEYXRlLm5vdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KCBsYXN0RnVuYyApO1xyXG4gICAgICBsYXN0RnVuYyA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCBEYXRlLm5vdygpIC0gbGFzdFJhbiA+PSBsaW1pdCApIHtcclxuICAgICAgICAgIGZ1bmMuYXBwbHkoIGNvbnRleHQsIGFyZ3MgKTtcclxuICAgICAgICAgIGxhc3RSYW4gPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgbGltaXQgLSAoIERhdGUubm93KCkgLSBsYXN0UmFuICkgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGxUbyggcG9zOiBudW1iZXIgKTogdm9pZCB7XHJcbiAgZG9jdW1lbnQuYm9keS5zY3JvbGxUbygge1xyXG4gICAgdG9wOiBwb3MsXHJcbiAgICBiZWhhdmlvcjogJ3Ntb290aCcsXHJcbiAgfSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoU2Nyb2xsVG9FbGVtZW50KCBlbGVtZW50OiBIVE1MRWxlbWVudCwgdXNlQnJvd3NlckRlZmF1bHRzOiBib29sZWFuID0gdHJ1ZSApOiB2b2lkIHtcclxuICBpZiAoICF1c2VCcm93c2VyRGVmYXVsdHMgKSB7XHJcbiAgICBjb25zdCB0YXJnZXRZID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cuc2Nyb2xsWTtcclxuICAgIGNvbnN0IGR1cmF0aW9uID0gMTAwMDsgLy8gRHVyYcOnw6NvIGZpeGEgZW0gbWlsaXNzZWd1bmRvcyAoMSBzZWd1bmRvKVxyXG4gICAgc21vb3RoU2Nyb2xsKCB0YXJnZXRZLCBkdXJhdGlvbiApO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgZG9jdW1lbnQuYm9keS5zY3JvbGxUbygge1xyXG4gICAgdG9wOiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnksXHJcbiAgICBsZWZ0OiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLngsXHJcbiAgICBiZWhhdmlvcjogJ3Ntb290aCcsXHJcbiAgfSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0T3B0aW9uQnlUZXh0KCBpZFNlbGVjdEVsZW1lbnQ6IHN0cmluZywgc2VhcmNoVGV4dDogc3RyaW5nLCBjb250YWluczogYm9vbGVhbiA9IGZhbHNlICk6IHZvaWQge1xyXG4gIGNvbnN0IHNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggaWRTZWxlY3RFbGVtZW50ICkgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XHJcblxyXG4gIGlmICggIXNlbGVjdEVsZW1lbnQgKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvcHRpb25zRWxlbWVudG9TZWxlY3QgPSBbLi4uc2VsZWN0RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnb3B0aW9uJyApXTtcclxuXHJcbiAgbGV0IHNlbGVjdGVkT3B0aW9uO1xyXG4gIGlmICggY29udGFpbnMgKSB7XHJcbiAgICBzZWxlY3RlZE9wdGlvbiA9IG9wdGlvbnNFbGVtZW50b1NlbGVjdFxyXG4gICAgICAuZmlsdGVyKCBlbCA9PiBlbC50ZXh0Q29udGVudCAmJiBlbC50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCBzZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCkgKSApWzBdLnZhbHVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzZWxlY3RlZE9wdGlvbiA9IG9wdGlvbnNFbGVtZW50b1NlbGVjdFxyXG4gICAgICAuZmlsdGVyKCBlbCA9PiBlbC50ZXh0Q29udGVudCAmJiBlbC50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpID09PSBzZWFyY2hUZXh0LnRvTG93ZXJDYXNlKCkgKVswXS52YWx1ZTtcclxuICB9XHJcblxyXG4gIHNlbGVjdEVsZW1lbnQudmFsdWUgPSBzZWxlY3RlZE9wdGlvbjtcclxufVxyXG5cclxuIiwiXHJcbi8vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNjI0NTc2Ny9jcmVhdGluZy1hLWJsb2ItZnJvbS1hLWJhc2U2NC1zdHJpbmctaW4tamF2YXNjcmlwdFxyXG4vLy8gRGl2aWRlIHVtIGFycXVpdm8gYmluw6FyaW8gZW0gdsOhcmlhcyBwYXJ0ZXMsIHBhcmEgcXVlIGEgY29udmVyc8OjbyBzZWphIG90aW1pemFkYSwgZSByZXRvcm5hIHVtYSBibG9iIGNvbSBvIGFycXVpdm9cclxuXHJcbmltcG9ydCB7IGlzTnVsbE9yRW1wdHkgfSBmcm9tICcuL1N0cmluZ1Rvb2xzJztcclxuXHJcbi8vLyBAcGFyYW0gb25Qcm9ncmVzc28gVW0gY2FsbGJhY2sgcXVlIHJlY2ViZSBhIHBvcmNlbnRhZ2VtIGRlIHByb2dyZXNzbyBhdHVhbCBkYSBjb252ZXJzw6NvXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXNlNjRUb0Jsb2IoIHRleHRvQmFzZTY0OiBzdHJpbmcsIGNvbnRlbnRUeXBlOiBzdHJpbmcsIHRhbWFuaG9QYXJ0ZXMgPSAxMDI0LCBvblByb2dyZXNzID0gKCBwcm9ncmVzc29BdHVhbDogbnVtYmVyICkgPT4geyBjb25zb2xlLmxvZyggcHJvZ3Jlc3NvQXR1YWwgKSB9ICkge1xyXG4gIGNvbnN0IGJ5dGVBcnJheXMgPSBuZXcgQXJyYXk8VWludDhBcnJheT4oKTtcclxuICBjb25zdCBmaWxlU2l6ZSA9IHRleHRvQmFzZTY0Lmxlbmd0aDtcclxuXHJcbiAgLy8vIHByZWVuY2hlIGBieXRlQXJyYXlzYCBjb20gb3MgYnl0ZXMgZG8gYXJxdWl2byBwZWdhbmRvIHVtYSBwYXJ0ZSBkZSBcInRhbWFuaG9QYXJ0ZXNcIiBwb3IgdmV6XHJcbiAgZm9yICggbGV0IG9mZnNldCA9IDA7IG9mZnNldCA8IGZpbGVTaXplOyBvZmZzZXQgKz0gdGFtYW5ob1BhcnRlcyApIHtcclxuICAgIC8vLyBwZWdhbmRvIHVtIHBhcnRlIGRlIHRhbWFuaG8ge3RhbWFuaG9QYXJ0ZXN9IGRvIGFycXVpdm9cclxuICAgIGNvbnN0IGNodW5rID0gdGV4dG9CYXNlNjQuc2xpY2UoIG9mZnNldCwgb2Zmc2V0ICsgdGFtYW5ob1BhcnRlcyApO1xyXG5cclxuICAgIC8vLyBjb252ZXJ0ZW5kbyBhIHBhcnRlIGVtIHVtIGFycmF5IGNvbSBjYWRhIGJ5dGUgZGVzc2UgcGVkYcOnbyBkbyBhcnF1aXZvXHJcbiAgICBjb25zdCBhcnJCeXRlc0NodW5rID0gbmV3IEFycmF5PG51bWJlcj4oIGNodW5rLmxlbmd0aCApO1xyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgY2h1bmsubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgIGFyckJ5dGVzQ2h1bmtbaV0gPSBjaHVuay5jaGFyQ29kZUF0KCBpICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8vIHRyYW5zZm9ybWFuZG8gZXNzZSBhcnJheSBlbSB1bSBhcnJheSBjb20gY2FtcG9zIGRvIHRhbWFuaG8gZGUgdW0gYnl0ZVxyXG4gICAgLy8vIGUgdW5pbmRvIGFzIHBhcnRlcyBqw6EgY29uY2x1w61kYXMgZG8gYXJxdWl2b1xyXG4gICAgYnl0ZUFycmF5cy5wdXNoKCBuZXcgVWludDhBcnJheSggYXJyQnl0ZXNDaHVuayApICk7XHJcblxyXG4gICAgLy8vIENoYW1hbmRvIGNhbGxiYWNrIHF1ZSBleGliZSBvIHByb2dyZXNzbyBxdWFuZG8gbyBwYXNzbyBhdHVhbCBmb3IgY29uY2x1w61kb1xyXG4gICAgYXdhaXQgb25Qcm9ncmVzcyggKCBvZmZzZXQgLyBmaWxlU2l6ZSApICogMTAwICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbmV3IEJsb2IoIGJ5dGVBcnJheXMsIHsgdHlwZTogY29udGVudFR5cGUgfSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZG93bmxvYWRGaWxlRnJvbUJsb2IoIGJsb2I6IEJsb2IsIHRpdGxlOiBzdHJpbmcgKSB7XHJcbiAgbGV0IGZpbGUgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKCBibG9iICk7XHJcblxyXG4gIGlmICggZmlsZSApIHtcclxuICAgIGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2EnICk7XHJcbiAgICBhLmhyZWYgPSBmaWxlO1xyXG4gICAgYS5kb3dubG9hZCA9IHRpdGxlO1xyXG4gICAgYS5jbGljaygpO1xyXG4gICAgYS5yZW1vdmUoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWxlUGF0aCggZmlsZVBhdGg6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIGNvbnN0IHJlZ2V4ID0gLyg/Oi4qW1xcXFwvXSkoW15cXFxcL10rKSQvO1xyXG5cclxuICBjb25zdCBtYXRjaCA9IHJlZ2V4LmV4ZWMoIGZpbGVQYXRoICk7XHJcbiAgaWYgKCBtYXRjaCAmJiBtYXRjaC5sZW5ndGggPiAxICkge1xyXG4gICAgcmV0dXJuIG1hdGNoWzFdO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmlsZVBhdGg7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUV4dGVuc2lvbiggZmlsZU5hbWU6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIGlmICggaXNOdWxsT3JFbXB0eSggZmlsZU5hbWUgKSApIHJldHVybiAnJztcclxuXHJcbiAgY29uc3QgZGVmYXVsdEZpbGVTcmMgPSBmaWxlTmFtZS5zcGxpdCggJy4nICkucG9wKCk7XHJcbiAgaWYgKCBkZWZhdWx0RmlsZVNyYyAmJiBkZWZhdWx0RmlsZVNyYyAhPT0gZmlsZU5hbWUgKSB7XHJcbiAgICByZXR1cm4gZGVmYXVsdEZpbGVTcmM7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmaWxlVHlwZVN0ciA9IGZpbGVOYW1lLnNwbGl0KCAnLycgKS5wb3AoKTtcclxuICBpZiAoIGZpbGVUeXBlU3RyICYmIGZpbGVUeXBlU3RyICE9PSBmaWxlTmFtZSApIHtcclxuICAgIHJldHVybiBmaWxlVHlwZVN0cjtcclxuICB9XHJcblxyXG4gIHJldHVybiAnJztcclxufSIsImV4cG9ydCBjb25zdCByZWdleE51bWJlclBhdHRlcm4gPSAvLT9cXGQrXFwuP1xcZCovZztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUG9pbnQyRCB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb25zIHtcclxuICB3aWR0aDogbnVtYmVyO1xyXG4gIGhlaWdodDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb1JvdyggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIGluZGV4IC8gZ3JpZFdpZHRoICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmRleFRvQ29sKCBpbmRleDogbnVtYmVyLCBncmlkV2lkdGg6IG51bWJlciApIHtcclxuICByZXR1cm4gaW5kZXggJSBncmlkV2lkdGg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3dDb2xUb0luZGV4KCByb3c6IG51bWJlciwgY29sOiBudW1iZXIsIHdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuICggcm93ICogd2lkdGggKSArIGNvbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUNvb3JkaW5hdGVzRnJvbVBvaW50MkQoIGNvb3JkczogUG9pbnQyRCwgYW5nbGU6IG51bWJlciApOiBQb2ludDJEIHtcclxuICBjb25zdCByYWRpYW5zID0gKCBNYXRoLlBJIC8gMTgwICkgKiBhbmdsZTtcclxuICBjb25zdCBuZXdYID0gY29vcmRzLnggKiBNYXRoLmNvcyggcmFkaWFucyApIC0gY29vcmRzLnkgKiBNYXRoLnNpbiggcmFkaWFucyApO1xyXG4gIGNvbnN0IG5ld1kgPSBjb29yZHMueCAqIE1hdGguc2luKCByYWRpYW5zICkgKyBjb29yZHMueSAqIE1hdGguY29zKCByYWRpYW5zICk7XHJcbiAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSB9O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUNvb3JkaW5hdGVzKCB4OiBudW1iZXIsIHk6IG51bWJlciwgYW5nbGU6IG51bWJlciApOiBQb2ludDJEIHtcclxuICBjb25zdCByYWRpYW5zID0gKCBNYXRoLlBJIC8gMTgwICkgKiBhbmdsZTtcclxuICBjb25zdCBuZXdYID0geCAqIE1hdGguY29zKCByYWRpYW5zICkgLSB5ICogTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuICBjb25zdCBuZXdZID0geCAqIE1hdGguc2luKCByYWRpYW5zICkgKyB5ICogTWF0aC5jb3MoIHJhZGlhbnMgKTtcclxuICByZXR1cm4geyB4OiBuZXdYLCB5OiBuZXdZIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcmVEaWFnb25hbHMoIGluZGV4MTogbnVtYmVyLCBpbmRleDI6IG51bWJlciwgZ3JpZFNpemU6IG51bWJlciApOiBib29sZWFuIHtcclxuICBpZiAoIGluZGV4MSA8IDAgfHwgaW5kZXgyIDwgMCApIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggJ0ludmFsaWQgY2VsbCBpbmRpY2VzJyApO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgcm93MSA9IGluZGV4VG9Sb3coIGluZGV4MSwgZ3JpZFNpemUgKTtcclxuICBjb25zdCBjb2wxID0gaW5kZXhUb0NvbCggaW5kZXgxLCBncmlkU2l6ZSApO1xyXG5cclxuICBjb25zdCByb3cyID0gaW5kZXhUb1JvdyggaW5kZXgyLCBncmlkU2l6ZSApO1xyXG4gIGNvbnN0IGNvbDIgPSBpbmRleFRvQ29sKCBpbmRleDIsIGdyaWRTaXplICk7XHJcblxyXG4gIHJldHVybiBNYXRoLmFicyggcm93MSAtIHJvdzIgKSA9PT0gTWF0aC5hYnMoIGNvbDEgLSBjb2wyICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmRleFRvUG9pbnQyRCggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IGluZGV4VG9Db2woIGluZGV4LCBncmlkV2lkdGggKSxcclxuICAgIHk6IGluZGV4VG9Sb3coIGluZGV4LCBncmlkV2lkdGggKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAoIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgYW1vdW50OiBudW1iZXIgKTogbnVtYmVyIHtcclxuICByZXR1cm4gKCAxIC0gYW1vdW50ICkgKiBtaW4gKyBhbW91bnQgKiBtYXg7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnNlTGVycCggYTogbnVtYmVyLCBiOiBudW1iZXIsIHZhbDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuICggdmFsIC0gYSApIC8gKCBiIC0gYSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtYXAoIGluTWluOiBudW1iZXIsIGluTWF4OiBudW1iZXIsIG91dE1pbjogbnVtYmVyLCBvdXRNYXg6IG51bWJlciwgdmFsOiBudW1iZXIgKTogbnVtYmVyIHtcclxuICByZXR1cm4gbGVycCggb3V0TWluLCBvdXRNYXgsIGludmVyc2VMZXJwKCBpbk1pbiwgaW5NYXgsIHZhbCApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21JbnRFeGNsdXNpdmUoIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciApIHtcclxuICByZXR1cm4gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqICggbWF4IC0gbWluICkgKyBtaW4gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YWxTZXRzPFQ+KCBzZXQxOiBTZXQ8VD4sIHNldDI6IFNldDxUPiApIHtcclxuICByZXR1cm4gc2V0MS5zaXplID09PSBzZXQyLnNpemUgJiZcclxuICAgIFsuLi5zZXQxXS5ldmVyeSggKCB4ICkgPT4gc2V0Mi5oYXMoIHggKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50SW5jbHVzaXZlKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XHJcbiAgbWluID0gTWF0aC5jZWlsKCBtaW4gKTtcclxuICBtYXggPSBNYXRoLmZsb29yKCBtYXggKTtcclxuICByZXR1cm4gTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqICggbWF4IC0gbWluICsgMSApICkgKyBtaW47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21Gcm9tQXJyYXk8VD4oIGFycjogQXJyYXk8VD4gKSB7XHJcbiAgcmV0dXJuIGFycltnZXRSYW5kb21JbnRFeGNsdXNpdmUoIDAsIGFyci5sZW5ndGggKV07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCggbnVtOiBudW1iZXIgPSAwLCBtaW46IG51bWJlciA9IDAsIG1heDogbnVtYmVyID0gMTAwICk6IG51bWJlciB7XHJcbiAgcmV0dXJuIE1hdGgubWF4KCBtaW4sIE1hdGgubWluKCBudW0sIG1heCApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaW51dGVzVG9NaWxsaXNlY29uZHMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zICogNjAwMDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb01pbnV0ZXMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zIC8gNjAwMDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb0hvdXJzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAvIDMuNmUrNjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pbGxpc2Vjb25kc1RvRGF5cyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgLyA4LjY0ZSs3O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWVnYWJ5dGVUb0J5dGUoIG1iOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1iICogMTAyNCAqIDEwMjQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBieXRlVG9NZWdhYnl0ZSggYjogbnVtYmVyICkge1xyXG4gIHJldHVybiBiIC8gMTAyNCAvIDEwMjQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBcnJheUZyb21SYW5nZSggc2l6ZTogbnVtYmVyLCBzdGFydGluZ0Zyb206IG51bWJlciA9IDAgKTogbnVtYmVyW10ge1xyXG4gIGxldCByZXN1bHQgPSBbLi4uQXJyYXkoIHNpemUgKS5rZXlzKCldXHJcblxyXG4gIGlmICggc3RhcnRpbmdGcm9tICE9IDAgKSB7XHJcbiAgICByZXN1bHQgPSByZXN1bHQubWFwKCBpID0+IGkgKyBzdGFydGluZ0Zyb20gKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn0iLCJleHBvcnQgZnVuY3Rpb24gcmVtb3ZlQWNjZW50cyggc3RyOiBzdHJpbmcgKSB7XHJcbiAgcmV0dXJuIHN0ci5ub3JtYWxpemUoICdORkQnICkucmVwbGFjZSggL1tcXHUwMzAwLVxcdTAzNmZdL2csIFwiXCIgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdExldHRlciggc3RyOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICBpZiAoIHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnICkge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuICByZXR1cm4gc3RyLmNoYXJBdCggMCApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyaW5nKCAxICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2hUZXJtKCBzdHJpbmdBcnJheTogc3RyaW5nW10sIHNlYXJjaFRlcm06IHN0cmluZyApOiBzdHJpbmdbXSB7XHJcbiAgcmV0dXJuIHN0cmluZ0FycmF5XHJcbiAgICAuZmlsdGVyKCAoIHY6IHN0cmluZyApID0+IHYudG9Mb3dlckNhc2UoKS5pbmRleE9mKCBzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkgKSA+IC0xIClcclxuICAgIC5zbGljZSggMCwgMTAgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gemVyb0JlZm9yZSggbjogbnVtYmVyICkge1xyXG4gIHJldHVybiBuLnRvU3RyaW5nKCkucGFkU3RhcnQoIDIsICcwJyApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNOdWxsT3JFbXB0eSggc3RyOiBzdHJpbmcgKSB7XHJcbiAgcmV0dXJuIHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnIHx8ICFzdHIgfHwgc3RyID09PSAnJ1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9QaG9uZU51bWJlciggaW5wdXRUZXh0OiBzdHJpbmcgKSB7XHJcbiAgY29uc3QgY2xlYW5OdW1iZXIgPSBpbnB1dFRleHQucmVwbGFjZSggL1xcRC9nLCAnJyApO1xyXG5cclxuICBsZXQgcmVzdWx0O1xyXG4gIGlmICggY2xlYW5OdW1iZXIubGVuZ3RoIDw9IDEwICkge1xyXG4gICAgY29uc3QgcmVnZXggPSAvXihcXGR7Mn0pKFxcZHs0fSkoXFxkezAsNH0pJC87XHJcbiAgICByZXN1bHQgPSBjbGVhbk51bWJlci5yZXBsYWNlKCByZWdleCwgJygkMSkgJDItJDMnICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHJlZ2V4ID0gL14oXFxkezJ9KShcXGR7NX0pKFxcZHswLDR9KSQvO1xyXG4gICAgcmVzdWx0ID0gY2xlYW5OdW1iZXIucmVwbGFjZSggcmVnZXgsICcoJDEpICQyLSQzJyApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBPYmplY3RFdmVudExpc3RlbmVyIH0gZnJvbSAnLi4vLi4vRXh0cmFzL09iamVjdEV2ZW50TGlzdGVuZXInO1xyXG5pbXBvcnQgeyBnZXRFbGVtZW50RnJvbUhUTUwgfSBmcm9tICcuLi8uLi9Ub29scy9ET01Ub29scyc7XHJcbmltcG9ydCB7IEF1ZGlvQ29tcG9uZW50IH0gZnJvbSAnLi4vQXVkaW9Db21wb25lbnQnO1xyXG5pbXBvcnQgeyBZb3V0dWJlSWZyYW1lIH0gZnJvbSAnLi4vWW91dHViZUlmcmFtZS9Zb3V0dWJlSWZyYW1lU3dpdGNoZXInO1xyXG5pbXBvcnQgeyB0ZW1wbGF0ZVNvdW5kYm9hcmRJbnB1dCwgdGVtcGxhdGVTb3VuZGJvYXJkSXRlbUNvbnRhaW5lciB9IGZyb20gJy4vVGVtcGxhdGVzU291bmRib2FyZCc7XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgU291bmRib2FyZEl0ZW1PcHRpb25zID0ge1xyXG4gIHNyYzogc3RyaW5nO1xyXG4gIGF1dG9SZXBlYXRPblBsYXk6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dCA9IHN0cmluZyB8IFNvdW5kYm9hcmRJdGVtT3B0aW9ucztcclxuXHJcbmV4cG9ydCB0eXBlIFNvdW5kYm9hcmRPcHRpb25zID0ge1xyXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgYXJyTWVkaWFTcmM/OiBTb3VuZGJvYXJkSXRlbVBvc3NpYmxlSW5wdXRbXTtcclxuICBhcnJWaWRlb0lkPzogU291bmRib2FyZEl0ZW1Qb3NzaWJsZUlucHV0W107XHJcbiAgaWZyYW1lc0NsYXNzTGlzdDogc3RyaW5nW107XHJcbiAgY29udGFpbmVyc0NsYXNzTGlzdDogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNvdW5kYm9hcmRNZWRpYSA9IFlvdXR1YmVJZnJhbWUgfCBBdWRpb0NvbXBvbmVudDtcclxuXHJcbmV4cG9ydCB0eXBlIFNvdW5kYm9hcmRDb21wb25lbnQgPSB7XHJcbiAgbWVkaWE6IFNvdW5kYm9hcmRNZWRpYTtcclxuICBpbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuICBpbnB1dENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgU291bmRib2FyZCBleHRlbmRzIE9iamVjdEV2ZW50TGlzdGVuZXIge1xyXG4gIHB1YmxpYyByZWFkb25seSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHB1YmxpYyBpZnJhbWVzQ2xhc3NMaXN0OiBzdHJpbmdbXTtcclxuICBwdWJsaWMgY29udGFpbmVyc0NsYXNzTGlzdDogc3RyaW5nW107XHJcblxyXG4gIHByaXZhdGUgX3NldE1lZGlhQ29udHJvbGxlcnMgPSBuZXcgU2V0PFNvdW5kYm9hcmRDb21wb25lbnQ+KCk7XHJcbiAgcHJpdmF0ZSBfbWFwTWVkaWFDb250cm9sbGVyc0J5SWQgPSBuZXcgTWFwPHN0cmluZywgU291bmRib2FyZENvbXBvbmVudD4oKTtcclxuICBwcml2YXRlIF9tYXBJbnB1dEJ5Q29tcG9uZW50SWQ6IE1hcDxzdHJpbmcsIEhUTUxJbnB1dEVsZW1lbnQ+ID0gbmV3IE1hcDxzdHJpbmcsIEhUTUxJbnB1dEVsZW1lbnQ+KCk7O1xyXG5cclxuICBjb25zdHJ1Y3Rvciggb3B0aW9uczogU291bmRib2FyZE9wdGlvbnMgKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XHJcblxyXG4gICAgdGhpcy5pZnJhbWVzQ2xhc3NMaXN0ID0gb3B0aW9ucy5pZnJhbWVzQ2xhc3NMaXN0ID8/IFtdO1xyXG4gICAgdGhpcy5jb250YWluZXJzQ2xhc3NMaXN0ID0gb3B0aW9ucy5jb250YWluZXJzQ2xhc3NMaXN0ID8/IFtdO1xyXG5cclxuICAgIGNvbnN0IGFyck1lZGlhU3JjID0gb3B0aW9ucy5hcnJNZWRpYVNyY1xyXG4gICAgICA/IG9wdGlvbnMuYXJyTWVkaWFTcmMubWFwKCBzcmMgPT4gdGhpcy5nZXRTb3VyY2VJbnB1dERlZmF1bHRPcHRpb25zKCBzcmMgKSApXHJcbiAgICAgIDogW107XHJcblxyXG4gICAgY29uc3QgYXJyVmlkZW9JZCA9IG9wdGlvbnMuYXJyVmlkZW9JZFxyXG4gICAgICA/IG9wdGlvbnMuYXJyVmlkZW9JZC5tYXAoIHNyYyA9PiB0aGlzLmdldFNvdXJjZUlucHV0RGVmYXVsdE9wdGlvbnMoIHNyYyApIClcclxuICAgICAgOiBbXTtcclxuXHJcbiAgICB0aGlzLmFkZEF1ZGlvTGlzdCggYXJyTWVkaWFTcmMgKTtcclxuICAgIHRoaXMuYWRkWW91dHViZUxpc3QoIGFyclZpZGVvSWQgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0U291cmNlSW5wdXREZWZhdWx0T3B0aW9ucyggaW5wdXQ6IFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dCApOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMge1xyXG4gICAgaWYgKCB0eXBlb2YgKCBpbnB1dCApID09PSAnc3RyaW5nJyApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzcmM6IGlucHV0LFxyXG4gICAgICAgIGF1dG9SZXBlYXRPblBsYXk6IHRydWUsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGlucHV0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZFlvdXR1YmVMaXN0KCBhcnJWaWRlb09wdGlvbnM6IFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dFtdID0gW10gKSB7XHJcbiAgICBjb25zdCBhcnJNZWRpYUlucHV0cyA9IGFyclZpZGVvT3B0aW9ucy5tYXAoIHNyYyA9PiB0aGlzLmdldFNvdXJjZUlucHV0RGVmYXVsdE9wdGlvbnMoIHNyYyApICk7XHJcbiAgICBhcnJNZWRpYUlucHV0cy5mb3JFYWNoKCB2aWRlb0lkID0+IHtcclxuICAgICAgdGhpcy5hZGRJZnJhbWUoIGAkeyB0aGlzLmNvbnRhaW5lci5pZCB9SWZyYW1lVGFibGVJdGVtJHsgdmlkZW9JZC5zcmMgfWAsIHZpZGVvSWQgKVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZEF1ZGlvTGlzdCggYXJyTWVkaWFPcHRpb25zOiBTb3VuZGJvYXJkSXRlbVBvc3NpYmxlSW5wdXRbXSA9IFtdICkge1xyXG4gICAgY29uc3QgYXJyTWVkaWFJbnB1dHMgPSBhcnJNZWRpYU9wdGlvbnMubWFwKCBzcmMgPT4gdGhpcy5nZXRTb3VyY2VJbnB1dERlZmF1bHRPcHRpb25zKCBzcmMgKSApO1xyXG4gICAgYXJyTWVkaWFJbnB1dHMuZm9yRWFjaCggbWVkaWFJbnB1dCA9PiB7XHJcbiAgICAgIHRoaXMuYWRkQXVkaW9Db21wb25lbnQoIHRoaXMuY29udGFpbmVyLmlkLCBtZWRpYUlucHV0IClcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkQ29tcG9uZW50SW50ZXJhY3Rpb25CbG9ja0V2ZW50KCBjb21wb25lbnQ6IFNvdW5kYm9hcmRDb21wb25lbnQsIG1lZGlhT3B0aW9uczogU291bmRib2FyZEl0ZW1PcHRpb25zICkge1xyXG4gICAgY29tcG9uZW50Lm1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoICdvbmludGVyYWN0aW9uYmxvY2tlZCcsICgpID0+IHtcclxuICAgICAgY29tcG9uZW50Lm1lZGlhLnNlZWsoIDAsIHRydWUgKTtcclxuICAgICAgaWYgKCBtZWRpYU9wdGlvbnMuYXV0b1JlcGVhdE9uUGxheSApIHtcclxuICAgICAgICBjb21wb25lbnQubWVkaWEucGxheVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29tcG9uZW50Lm1lZGlhLnRvZ2dsZSgpO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0SW5wdXRCeVNvdXJjZSggc3JjOiBzdHJpbmcgKSB7XHJcbiAgICBpZiAoICF0aGlzLl9tYXBJbnB1dEJ5Q29tcG9uZW50SWQuaGFzKCBzcmMgKSApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIkVsZW1lbnQgc3JjIG5vdCBvbiBzb3VuZCB0YWJsZS5cIiApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLl9tYXBJbnB1dEJ5Q29tcG9uZW50SWQuZ2V0KCBzcmMgKSE7XHJcbiAgfVxyXG5cclxuICBnZXQgY29tcG9uZW50c0NvbnRyb2xsZXJzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oIHRoaXMuX3NldE1lZGlhQ29udHJvbGxlcnMgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0RWxlbWVudE1lZGlhQ29udGFpbmVyKCBjb250YWluZXJJZDogc3RyaW5nICkge1xyXG4gICAgY29uc3QgZWxlbWVudE1lZGlhQ29udGFpbmVyID0gZ2V0RWxlbWVudEZyb21IVE1MKCB0ZW1wbGF0ZVNvdW5kYm9hcmRJdGVtQ29udGFpbmVyKCBjb250YWluZXJJZCApICkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBlbGVtZW50TWVkaWFDb250YWluZXIuY2xhc3NMaXN0LmFkZCggLi4udGhpcy5jb250YWluZXJzQ2xhc3NMaXN0ICk7XHJcbiAgICByZXR1cm4gZWxlbWVudE1lZGlhQ29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRBdWRpb0NvbXBvbmVudCggYXVkaW9FbGVtZW50SWQ6IHN0cmluZywgbWVkaWFPcHRpb25zOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMgKSB7XHJcbiAgICBjb25zdCBhdWRpb0NvbnRhaW5lciA9IHRoaXMuZ2V0RWxlbWVudE1lZGlhQ29udGFpbmVyKCBhdWRpb0VsZW1lbnRJZCApO1xyXG4gICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgYXVkaW9Db250YWluZXIgKTtcclxuXHJcbiAgICBBdWRpb0NvbXBvbmVudC5jcmVhdGVBdWRpb0NvbXBvbmVudCgge1xyXG4gICAgICBzcmM6IG1lZGlhT3B0aW9ucy5zcmMsXHJcbiAgICAgIGF1ZGlvRWxlbWVudElkOiBhdWRpb0VsZW1lbnRJZCxcclxuICAgICAgYmxvY2tJbnRlcmFjdGlvbjogdHJ1ZSxcclxuICAgICAgY29udGFpbmVyOiBhdWRpb0NvbnRhaW5lclxyXG4gICAgfSApLnRoZW4oIGF1ZGlvQ29tcG9uZW50ID0+IHtcclxuXHJcbiAgICAgIGNvbnN0IGlucHV0SW5mbyA9IHRoaXMuYWRkSW5wdXRFbGVtZW50VG9Db250YWluZXIoIGF1ZGlvQ29udGFpbmVyLCBhdWRpb0NvbXBvbmVudCwgYXVkaW9Db21wb25lbnQuaWQsIG1lZGlhT3B0aW9ucy5zcmMgKTtcclxuICAgICAgY29uc3Qgc291bmRib2FyZEF1ZGlvQ29tcG9uZW50OiBTb3VuZGJvYXJkQ29tcG9uZW50ID0ge1xyXG4gICAgICAgIG1lZGlhOiBhdWRpb0NvbXBvbmVudCxcclxuICAgICAgICBpbnB1dDogaW5wdXRJbmZvLmlucHV0LFxyXG4gICAgICAgIGlucHV0Q29udGFpbmVyOiBpbnB1dEluZm8uY29udGFpbmVyXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLl9zZXRNZWRpYUNvbnRyb2xsZXJzLmFkZCggc291bmRib2FyZEF1ZGlvQ29tcG9uZW50ICk7XHJcbiAgICAgIHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLnNldCggYXVkaW9Db21wb25lbnQuaWQsIHNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudCApO1xyXG5cclxuICAgICAgdGhpcy5hZGRDb21wb25lbnRJbnRlcmFjdGlvbkJsb2NrRXZlbnQoIHNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudCwgbWVkaWFPcHRpb25zICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJpdmF0ZSBhZGRJZnJhbWUoIGlmcmFtZUlkOiBzdHJpbmcsIG1lZGlhT3B0aW9uczogU291bmRib2FyZEl0ZW1PcHRpb25zICkge1xyXG4gICAgaWYgKCB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5oYXMoIGlmcmFtZUlkICkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJBIElmcmFtZSB3aXRoIHRoaXMgaWQgYWxyZWFkeSBleGlzdHM6IFwiICsgaWZyYW1lSWQgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbGVtZW50SWZyYW1lQ29udGFpbmVyID0gdGhpcy5nZXRFbGVtZW50TWVkaWFDb250YWluZXIoIGlmcmFtZUlkICk7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCBlbGVtZW50SWZyYW1lQ29udGFpbmVyICk7XHJcblxyXG4gICAgY29uc3QgbmV3SWZyYW1lID0gbmV3IFlvdXR1YmVJZnJhbWUoIHtcclxuICAgICAgaWZyYW1lSWQ6IGlmcmFtZUlkLFxyXG4gICAgICB2aWRlb0lkOiBtZWRpYU9wdGlvbnMuc3JjLFxyXG4gICAgICBwYXJlbnRFbGVtZW50OiBlbGVtZW50SWZyYW1lQ29udGFpbmVyLFxyXG4gICAgICBzdGFydHNBdDogMCxcclxuICAgICAgY2xhc3NMaXN0OiBbJ3NvdW5kLXRhYmxlLWl0ZW0nLCAuLi50aGlzLmlmcmFtZXNDbGFzc0xpc3RdLFxyXG4gICAgICBibG9ja0ludGVyYWN0aW9uOiB0cnVlXHJcbiAgICB9ICk7XHJcblxyXG4gICAgY29uc3QgaW5wdXRJbmZvID0gdGhpcy5hZGRJbnB1dEVsZW1lbnRUb0NvbnRhaW5lciggZWxlbWVudElmcmFtZUNvbnRhaW5lciwgbmV3SWZyYW1lLCBuZXdJZnJhbWUuaWQsIG1lZGlhT3B0aW9ucy5zcmMgKTtcclxuICAgIGNvbnN0IHNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50OiBTb3VuZGJvYXJkQ29tcG9uZW50ID0ge1xyXG4gICAgICBtZWRpYTogbmV3SWZyYW1lLFxyXG4gICAgICBpbnB1dDogaW5wdXRJbmZvLmlucHV0LFxyXG4gICAgICBpbnB1dENvbnRhaW5lcjogaW5wdXRJbmZvLmNvbnRhaW5lcixcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5fc2V0TWVkaWFDb250cm9sbGVycy5hZGQoIHNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50ICk7XHJcbiAgICB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5zZXQoIG5ld0lmcmFtZS5pZCwgc291bmRib2FyZFlvdXR1YmVDb21wb25lbnQgKTtcclxuXHJcbiAgICBZb3V0dWJlSWZyYW1lLmJ1aWxkU2luZ2xlSWZyYW1lKCBuZXdJZnJhbWUgKS50aGVuKCAoKSA9PiB0aGlzLmFkZENvbXBvbmVudEludGVyYWN0aW9uQmxvY2tFdmVudCggc291bmRib2FyZFlvdXR1YmVDb21wb25lbnQsIG1lZGlhT3B0aW9ucyApICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlQ29tcG9uZW50U291cmNlVG9JbnB1dFZhbHVlKCBjb21wb25lbnRJZDogc3RyaW5nICk6IHZvaWQge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuZ2V0KCBjb21wb25lbnRJZCApITtcclxuICAgIGlmICggIWNvbXBvbmVudCApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggY29tcG9uZW50Lm1lZGlhIGluc3RhbmNlb2YgWW91dHViZUlmcmFtZSApIHtcclxuICAgICAgY29tcG9uZW50Lm1lZGlhLmNoYW5nZVZpZGVvKCB7XHJcbiAgICAgICAgaWZyYW1lSWQ6IGNvbXBvbmVudC5pbnB1dC52YWx1ZSxcclxuICAgICAgICB2aWRlb0lkOiBjb21wb25lbnQuaW5wdXQudmFsdWUsXHJcbiAgICAgICAgc3RhcnRzQXQ6IDBcclxuICAgICAgfSApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29tcG9uZW50Lm1lZGlhLmNoYW5nZVNvdXJjZSggY29tcG9uZW50LmlucHV0LnZhbHVlICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuZGVsZXRlKCBjb21wb25lbnRJZCApO1xyXG4gICAgdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuc2V0KCBjb21wb25lbnQubWVkaWEuaWQsIGNvbXBvbmVudCApXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2hhbmdlQ29tcG9uZW50U291cmNlKCBjb21wb25lbnRJZDogc3RyaW5nLCBuZXdTb3VyY2U6IHN0cmluZyApOiB2b2lkIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmdldCggY29tcG9uZW50SWQgKSE7XHJcbiAgICBpZiAoICFjb21wb25lbnQgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIGNvbXBvbmVudC5tZWRpYSBpbnN0YW5jZW9mIFlvdXR1YmVJZnJhbWUgKSB7XHJcbiAgICAgIGNvbXBvbmVudC5tZWRpYS5jaGFuZ2VWaWRlbygge1xyXG4gICAgICAgIGlmcmFtZUlkOiBuZXdTb3VyY2UsXHJcbiAgICAgICAgdmlkZW9JZDogbmV3U291cmNlLFxyXG4gICAgICAgIHN0YXJ0c0F0OiAwXHJcbiAgICAgIH0gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbXBvbmVudC5tZWRpYS5jaGFuZ2VTb3VyY2UoIG5ld1NvdXJjZSApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRJbnB1dEVsZW1lbnRUb0NvbnRhaW5lciggY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY29tcG9uZW50OiBTb3VuZGJvYXJkTWVkaWEsIGNvbXBvbmVudElkOiBzdHJpbmcsIGlucHV0U291cmNlOiBzdHJpbmcgKSB7XHJcbiAgICBjb25zdCBpbnB1dEVsZW1lbnRDb250YWluZXIgPSBnZXRFbGVtZW50RnJvbUhUTUwoIHRlbXBsYXRlU291bmRib2FyZElucHV0KCBjb21wb25lbnRJZCwgJ1NvdXJjZScsIGlucHV0U291cmNlICkgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGlucHV0RWxlbWVudENvbnRhaW5lciApO1xyXG5cclxuICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGlucHV0RWxlbWVudENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCAnaW5wdXQnICkhO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ2lucHV0JywgaW5wdXRFbGVtZW50LnZhbHVlLCBjb21wb25lbnQgKTtcclxuICAgICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25pbnB1dCcsIGlucHV0RWxlbWVudC52YWx1ZSwgY29tcG9uZW50ICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ2lucHV0Y2hhbmdlJywgaW5wdXRFbGVtZW50LnZhbHVlLCBjb21wb25lbnQgKTtcclxuICAgICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25pbnB1dGNoYW5nZScsIGlucHV0RWxlbWVudC52YWx1ZSwgY29tcG9uZW50ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaW5wdXQ6IGlucHV0RWxlbWVudCxcclxuICAgICAgY29udGFpbmVyOiBpbnB1dEVsZW1lbnRDb250YWluZXIsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQXVkaW9Db21wb25lbnQiLCJPYmplY3RFdmVudExpc3RlbmVyIiwic3JjIiwiYXVkaW9FbGVtZW50IiwiX2NvbnRhaW5lciIsIl9ibG9ja0ludGVyYWN0aW9uIiwiX2RpdkJsb2NrSW50ZXJhY3Rpb24iLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJzdXBlciIsInRoaXMiLCJjb250YWluZXIiLCJibG9ja0ludGVyYWN0aW9uIiwiYXVkaW9FbGVtZW50SWQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wIiwiZ2V0SW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiIsInNldHVwSW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiIsInNldEVsZW1lbnRzQXR0cmlidXRlcyIsImlzUGxheWluZyIsInBhdXNlZCIsIl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0IiwicmVtb3ZlRmlsZVBhdGgiLCJzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCIsImRpdkJsb2NrSW50ZXJhY3Rpb24iLCJmaWxlTmFtZSIsInF1ZXJ5U2VsZWN0b3IiLCJjdXJyZW50VGltZSIsInQiLCJzb3VyY2VFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGFuZ2VTb3VyY2UiLCJpbm5lckhUTUwiLCJzb3VyY2VFbGVtZW50SFRNTCIsImxvYWQiLCJwbGF5V2l0aG91dFRyaWdnZXJFdmVudHMiLCJwbGF5UHJvbWlzZSIsInBsYXkiLCJ1bmRlZmluZWQiLCJ0aGVuIiwiXyIsImNhdGNoIiwic2V0Q2xhc3Nlc1BsYXlpbmciLCJwYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzIiwicGF1c2UiLCJzZXRDbGFzc2VzUGF1c2VkIiwicmVtb3ZlIiwiY2FsbEV2ZW50c0J5TmFtZSIsInRvZ2dsZSIsIm11dGUiLCJ2b2x1bWUiLCJ1bm11dGUiLCJzZWVrIiwic2Vla1RpbWUiLCJfcmVsb2FkQnVmZmVyIiwiZGltZW5zaW9ucyIsImdldEVsZW1lbnREaW1lbnNpb25zIiwiYXVkaW9Db21wb25lbnQiLCJlbGVtZW50SW52aXNpYmxlRGl2IiwiY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQiLCJwYXJlbnRFbGVtZW50IiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsImRpc3BsYXkiLCJ6SW5kZXgiLCJjcmVhdGVBdWRpb0NvbXBvbmVudE9uQm9keSIsImF1ZGlvQ29tcG9uZW50Q29udGFpbmVyIiwiQXVkaW9Db21wb25lbnRGYWN0b3J5IiwiYnVpbGRPbkJvZHkiLCJjcmVhdGVBdWRpb0NvbXBvbmVudCIsImRvY3VtZW50IiwiYm9keSIsImJ1aWxkIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicGxheWVyQ29uZmlnIiwiY3JlYXRlSW52aXNpYmxlUGxheWVyIiwiYnVpbGRTdWJDb21wb25lbnRzIiwicGFyZW50IiwiX2VsZW1lbnQiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJjb21wb25lbnROYW1lIiwic3ViQ29tcG9uZW50Q291bnRCeU5hbWUiLCJNYXAiLCJzdWJDb21wb25lbnRzIiwidGVtcGxhdGUiLCJnZXRFbGVtZW50QnlJZCIsIkVycm9yIiwiY3JlYXRlRWxlbWVudCIsImNvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImdldFRlbXBsYXRlQ2xvbmVOb2RlcyIsImNsb25lTm9kZSIsImNoaWxkcmVuIiwiYnVpbGRTaW5nbGVTdWJDb21wb25lbnQiLCJjb21wb25lbnQiLCJoYXMiLCJzZXQiLCJjb21wb25lbnRDb3VudCIsImdldCIsImNhcGl0YWxpemVGaXJzdExldHRlciIsImVsZW1lbnRJZCIsIml0ZW0iLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJ0ZW1wbGF0ZVNvdW5kYm9hcmRJdGVtQ29udGFpbmVyIiwiaXRlbUlkIiwidHJpbSIsInRlbXBsYXRlU291bmRib2FyZElucHV0IiwibGFiZWxUZXh0IiwidmFsdWUiLCJwbGFjZWhvbGRlciIsInRlbXBsYXRlQmFja2dyb3VuZFlvdXR1YmVJZnJhbWVFbGVtZW50IiwiaWZyYW1lSWQiLCJZb3V0dWJlSWZyYW1lIiwic3RhdGljIiwicGxheWVyIiwiX2lzUGxheWVyUmVhZHkiLCJfdmlkZW9JZCIsInZpZGVvTmFtZSIsInZpZGVvVGh1bWIiLCJjaGFubmVsVVJMIiwiY2hhbm5lbE5hbWUiLCJfaWZyYW1lRWxlbWVudCIsIl9pZnJhbWVDb250YWluZXIiLCJfaWZyYW1lUGFyZW50RWxlbWVudCIsIl9pc1BsYXlpbmciLCJfZGltZW5zaW9ucyIsInRvcERpdiIsIl9zdGFydHNBdCIsIl9zdGFydE11dGVkIiwiX3BsYXlpbmdPYnNlcnZlckludGVydmFsIiwiX2V2ZW50TGlzdGVuZXIiLCJfZGljdFlvdXR1YmVJZnJhbWVCeUlkIiwic3RhcnRzQXQiLCJ2aWRlb0lkIiwic3RhcnRNdXRlZCIsImdldFlvdXR1YmVJZnJhbWVFbGVtZW50Iiwic2V0dXBQYXJlbnRGcm9tWW91dHViZUlmcmFtZSIsImlmcmFtZUNvbnRhaW5lciIsInNldENsYXNzZXNJZnJhbWVQYXVzZWQiLCJzZXRWaWRlb0luZm8iLCJzZXRFeHRlcm5hbEhUTUxFbGVtZW50c0F0dHJpYnV0ZXMiLCJleHRyYWN0WW91VHViZUlkIiwiaW5mbyIsImdldFZpZGVvSW5mbyIsInRpdGxlIiwiYXV0aG9yX25hbWUiLCJ0aHVtYm5haWxfdXJsIiwiYXV0aG9yX3VybCIsImNoYW5nZVZpZGVvIiwiaXNWYWxpZFlvdXR1YmVVcmxPcklkIiwibG9hZFZpZGVvQnlJZCIsInByZXBhcmVPcHRpb25zIiwic2Vla1RvIiwic2V0VGltZW91dCIsImxvYWRWaWRlbyIsInJlc3BvbnNlIiwiaGFuZGxlUHJvbWlzZSIsImZldGNoIiwidmlkZW9VUkwiLCJlcnJvciIsImRhdGEiLCJqc29uIiwiY29uc29sZSIsIm9uUGxheWVyUmVhZHkiLCJldmVudCIsIl9hcnJZb3V0dWJlSWZyYW1lSWRSZWFkeSIsInB1c2giLCJzZXRQbGF5YmFja1F1YWxpdHkiLCJwYXVzZVZpZGVvIiwiY2hlY2tJZkV2ZXJ5SWZyYW1lSXNSZWFkeSIsIm9uUGxheWVyU3RhdGVDaGFuZ2UiLCJfeW91dHViZUFQSVJlZmVyZW5jZSIsIlBsYXllclN0YXRlIiwiUExBWUlORyIsInNldEludGVydmFsIiwic2V0Q2xhc3Nlc0lmcmFtZVBsYXlpbmciLCJjbGVhckludGVydmFsIiwib25FdmVyeVlvdXR1YmVJZnJhbWVSZWFkeSIsImlmcmFtZUVsZW1lbnQiLCJpc1BsYXllclJlYWR5IiwiZHVyYXRpb24iLCJnZXREdXJhdGlvbiIsInBsYXllckR1cmF0aW9uIiwiZ2V0Q3VycmVudFRpbWUiLCJwbGF5ZXJDdXJyZW50VGltZSIsInByb2dyZXNzUGVyY2VudCIsInBsYXllclByb2dyZXNzUGVyY2VudCIsImNsYW1wIiwidmFsIiwicGxheVZpZGVvIiwicmVsb2FkQnVmZmVyIiwiY29uc2lkZXJTdGFydHNBdCIsImtleXMiLCJzb21lIiwiciIsImluY2x1ZGVzIiwiYXJyT2JqZWN0VG9TZXRPbkV2ZXJ5SWZyYW1lUmVhZHkiLCJmb3JFYWNoIiwibyIsInNldHVwIiwia2V5IiwiY29udGFpbmVyRGl2IiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiaWZyYW1lUGFyZW50RWxlbWVudCIsInNldEV4dGVybmFsSFRNTEVsZW1lbnRzIiwiY3JlYXRlSW52aXNpYmxlRGl2VG9wIiwiY3JlYXRlSW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiIsInNldElmcmFtZUNvbnRhaW5lckF0dHJpYnV0ZXMiLCJzZXRUb3BEaXZBdHRyaWJ1dGVzIiwic2V0RGl2QmxvY2tJbnRlcmFjdGlvbkF0dHJpYnV0ZXMiLCJnZXRJbnZpc2libGVUb3BEaXYiLCJldnQiLCJpbml0UGxheWVyIiwiUGxheWVyIiwicGxheWVyVmFycyIsImV2ZW50cyIsImJpbmQiLCJidWlsZFNpbmdsZUlmcmFtZSIsInlvdXR1YmVJZnJhbWUiLCJ0YWciLCJmaXJzdFNjcmlwdFRhZyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIndhaXRVbnRpbEVsZW1lbnRFeGlzdHMiLCJwb2xsRm9yVmFyaWFibGVBc3luYyIsInByb3RvdHlwZSIsImxvYWRlZCIsImJ1aWxkSWZyYW1lcyIsInBvbGxGb3JWYXJpYWJsZSIsInNldFlvdXR1YmVJZnJhbWVFbGVtZW50cyIsInl0SWZyYW1lIiwiU3RyaW5nIiwiaXNOdWxsT3JFbXB0eSIsInRydW5jYXRlIiwibWF4IiwiZGVjb3JhdG9yIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwidG9TdHJpbmciLCJyZW1vdmVBY2NlbnRzIiwibm9ybWFsaXplIiwicmVwbGFjZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiemVyb0JlZm9yZSIsInBhZFN0YXJ0IiwiZXZlbnRzQnlOYW1lIiwiZXZlbnROYW1lIiwidG9Mb3dlckNhc2UiLCJnZXRFdmVudHNCeU5hbWUiLCJldmVudEFyZ3MiLCJlIiwiYXJyU291cmNlcyIsImdldEVsZW1lbnRGcm9tSFRNTCIsImF1dG9QbGF5IiwiYXV0b3BsYXkiLCJtdXRlZCIsImxvb3AiLCJwcmVsb2FkIiwidHJpbUVuZCIsImF1ZGlvRWxlbWVudFBhcmFtc0J5UGxheWVyQ29uZmlnIiwibWFwIiwicmVkdWNlIiwiYWNjIiwibmV4dCIsImF1ZGlvRWxlbWVudEhUTUwiLCJoaWRlRWxlbWVudCIsImdldEZpbGVFeHRlbnNpb24iLCJkaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UiLCJkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdCIsImRpY3RLZXlzQnlBY3Rpb25LZXl1cCIsImFzeW5jIiwicHJvbWlzZSIsImlucHV0IiwidGVzdCIsIm1hdGNoIiwiZWxlbWVudCIsImF0dHJMaXN0Iiwic2V0QXR0cmlidXRlIiwiaHRtbCIsInJlc3VsdCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ2YXJpYWJsZU5hbWUiLCJyZWFkeUNvbmRpdGlvbiIsImNhbGxiYWNrIiwicG9sbCIsIndpbmRvdyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2VsZWN0b3IiLCJvYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJtdXRhdGlvbnMiLCJkaXNjb25uZWN0Iiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJpbnZpc2libGVEaXYiLCJvcGFjaXR5IiwicG9pbnRlckV2ZW50cyIsInJlcGVhdCIsInBhaXIiLCJjb2RlIiwia2JFdmVudCIsInJ1bk9ubHlPbmNlS2V5ZG93bkFjdGlvbnMiLCJydW5LZXlkb3duQWN0aW9uc1JlcGVhdCIsImZpbGVQYXRoIiwiZXhlYyIsImRlZmF1bHRGaWxlU3JjIiwic3BsaXQiLCJwb3AiLCJmaWxlVHlwZVN0ciIsIm51bSIsIm1pbiIsIk1hdGgiLCJzdHIiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiU291bmRib2FyZCIsImlmcmFtZXNDbGFzc0xpc3QiLCJjb250YWluZXJzQ2xhc3NMaXN0IiwiX3NldE1lZGlhQ29udHJvbGxlcnMiLCJTZXQiLCJfbWFwTWVkaWFDb250cm9sbGVyc0J5SWQiLCJfbWFwSW5wdXRCeUNvbXBvbmVudElkIiwiYXJyTWVkaWFTcmMiLCJnZXRTb3VyY2VJbnB1dERlZmF1bHRPcHRpb25zIiwiYXJyVmlkZW9JZCIsImFkZEF1ZGlvTGlzdCIsImFkZFlvdXR1YmVMaXN0IiwiYXV0b1JlcGVhdE9uUGxheSIsImFyclZpZGVvT3B0aW9ucyIsImFkZElmcmFtZSIsImFyck1lZGlhT3B0aW9ucyIsIm1lZGlhSW5wdXQiLCJhZGRBdWRpb0NvbXBvbmVudCIsImFkZENvbXBvbmVudEludGVyYWN0aW9uQmxvY2tFdmVudCIsIm1lZGlhT3B0aW9ucyIsIm1lZGlhIiwiZ2V0SW5wdXRCeVNvdXJjZSIsImNvbXBvbmVudHNDb250cm9sbGVycyIsImdldEVsZW1lbnRNZWRpYUNvbnRhaW5lciIsImNvbnRhaW5lcklkIiwiZWxlbWVudE1lZGlhQ29udGFpbmVyIiwiYXVkaW9Db250YWluZXIiLCJpbnB1dEluZm8iLCJhZGRJbnB1dEVsZW1lbnRUb0NvbnRhaW5lciIsInNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudCIsImlucHV0Q29udGFpbmVyIiwiZWxlbWVudElmcmFtZUNvbnRhaW5lciIsIm5ld0lmcmFtZSIsInNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50IiwiY2hhbmdlQ29tcG9uZW50U291cmNlVG9JbnB1dFZhbHVlIiwiY29tcG9uZW50SWQiLCJkZWxldGUiLCJjaGFuZ2VDb21wb25lbnRTb3VyY2UiLCJuZXdTb3VyY2UiLCJpbnB1dFNvdXJjZSIsImlucHV0RWxlbWVudENvbnRhaW5lciIsImlucHV0RWxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=
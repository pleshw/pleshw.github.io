var Soundboard;(()=>{"use strict";var t={173:(t,e,n)=>{n.d(e,{AudioComponent:()=>l});var i=n(7930),s=n(7353),o=n(1319),r=n(3164),a=n(6555);class l extends i.ObjectEventListener{src;audioElement;_container;_blockInteraction=!1;_divBlockInteraction;constructor(t){super(),this.src=t.src,this._container=t.container,this.audioElement=t.audioElement,this._blockInteraction=!!t.blockInteraction,t.audioElementId&&(this.audioElement.id=t.audioElementId),this.audioElement.classList.add("audio-component"),this.audioElement.addEventListener("ended",(()=>{this.stop()})),this._container.id||(this._container.id=t.audioElementId+"AudioComponentContainer"),this._container.classList.add("audio-component-container"),this._divBlockInteraction=this.getInvisibleDivBlockInteraction(this),this.setupInvisibleDivBlockInteraction(),this.setElementsAttributes()}destroy(){this.container.remove()}get isPlaying(){return!this.audioElement.paused}set id(t){this.audioElement.id=t}get id(){return this.audioElement.id}get _videoInfoAttributeList(){return[["audio-component-src",this.src],["audio-component-name",(0,r.removeFilePath)(this.src)]]}get name(){return(0,r.removeFilePath)(this.src)}setElementsAttributes(){(0,o.setAttributeListForElement)(this.audioElement,this._videoInfoAttributeList),(0,o.setAttributeListForElement)(this.container,this._videoInfoAttributeList),(0,o.setAttributeListForElement)(this.divBlockInteraction,this._videoInfoAttributeList)}get divBlockInteraction(){return this._divBlockInteraction}get container(){return this._container}get paused(){return this.audioElement.paused}get fileName(){return this.audioElement.src||this.audioElement.querySelector("source")?.src||""}get currentTime(){return this.audioElement.currentTime}set currentTime(t){this.audioElement.currentTime=t}get sourceElements(){return Array.from(this.audioElement.querySelectorAll("source"))}changeSource(t,e){this.id=e,this.src=t,this.audioElement.innerHTML=(0,s.sourceElementHTML)(this.src),this.audioElement.load(),this.setElementsAttributes(),this.stop()}playWithoutTriggerEvents(){var t=this.audioElement.play();return void 0!==t&&t.then((t=>{})).catch((()=>{this.stop()})),this.setClassesPlaying(),this}pauseWithoutTriggerEvents(){return this.audioElement.pause(),this.setClassesPaused(),this}setClassesPlaying(){this._container.classList.add("audio-component-playing"),this._divBlockInteraction.classList.add("audio-component-playing"),this._container.classList.remove("audio-component-paused"),this._divBlockInteraction.classList.remove("audio-component-paused")}setClassesPaused(){this._container.classList.add("audio-component-paused"),this._divBlockInteraction.classList.add("audio-component-paused"),this._container.classList.remove("audio-component-playing"),this._divBlockInteraction.classList.remove("audio-component-playing")}play(){return this.playWithoutTriggerEvents(),this.callEventsByName("onplay",this),this}pause(){return this.pauseWithoutTriggerEvents(),this.callEventsByName("onpause",this),this}stop(){return this.pause(),this.audioElement.currentTime=0,this.callEventsByName("onstop",this),this}toggle(){return this.paused?this.playWithoutTriggerEvents():this.pause(),this.callEventsByName("ontoggle",this),this}mute(){return this.audioElement.volume=0,this.callEventsByName("onmute",this),this}unmute(){return this.audioElement.volume=1,this.callEventsByName("onunmute",this),this}seek(t,e){return this.currentTime=t,this.callEventsByName("onseek",this),this}get dimensions(){return(0,o.getElementDimensions)(this._container)}getInvisibleDivBlockInteraction(t){const e=(0,o.createInvisibleDivAboveParent)({parentElement:t._container,id:`invisibleDivBlockInteraction${t._container.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:t.dimensions.height}});return e.classList.add("audio-component-div-block-interaction"),e}setupInvisibleDivBlockInteraction(){this._divBlockInteraction.style.display=this._blockInteraction?"block":"none",this._divBlockInteraction.style.zIndex="995",this._divBlockInteraction.addEventListener("click",(()=>{this.callEventsByName("onclickinteractionblocked",this,this._divBlockInteraction),this.callEventsByName("oninteractionblocked",this,this._divBlockInteraction)}))}static async createAudioComponentOnBody(t){const e=await new a.AudioComponentFactory(t.src).buildOnBody();return new l({src:t.src,container:e,audioElement:e.querySelector("audio"),audioElementId:t.audioElementId,blockInteraction:t.blockInteraction})}static async createAudioComponent(t){if(t.container===document.body||!t.container)return this.createAudioComponentOnBody(t);const e=await new a.AudioComponentFactory(t.src).build(t.container);return new l({src:t.src,container:e,audioElement:e.querySelector("audio"),audioElementId:t.audioElementId,blockInteraction:t.blockInteraction})}}},6555:(t,e,n)=>{n.d(e,{AudioComponentFactory:()=>o});var i=n(7353),s=n(6401);class o extends s.ComponentContainer{constructor(t,e){super("audioComponent",(0,i.createInvisiblePlayer)([t],e))}async buildSubComponents(t){}}},6401:(t,e,n)=>{n.d(e,{ComponentContainer:()=>i});class i{_element=null;templateElement;componentName;subComponentCountByName=new Map;subComponents=[];constructor(t,e){if("string"==typeof e){const t=document.getElementById(e);if(!t)throw new Error("Invalid template for scene component. Template id: "+e);this.templateElement=t}else this.templateElement=document.createElement("template"),this.templateElement.content.appendChild(e),document.body.appendChild(this.templateElement);this.componentName=t}getTemplateCloneNodes(){return this.templateElement.content.cloneNode(!0).children}async buildSingleSubComponent(t,e){this.subComponentCountByName.has(this.componentName)&&this.subComponentCountByName.set(this.componentName,0);let n=this.subComponentCountByName.get(this.componentName);return this.subComponentCountByName.set(this.componentName,n+1),await t.build(e,`${this.componentName}${t.componentName.capitalizeFirstLetter()}${n}`)}async buildOnBody(t){this._element=document.createElement("div"),t&&(this._element.id=t);for(let t of this.getTemplateCloneNodes())this._element.insertAdjacentElement("afterbegin",t);if(!this._element)throw new Error(`Fail building SceneComponent. ElementId: ${t}`);return await this.buildSubComponents(document.body),document.body.insertAdjacentElement("beforeend",this._element),this._element}async build(t,e){for(let e of this.getTemplateCloneNodes())t.insertAdjacentElement("afterbegin",e);return await this.buildSubComponents(t),t}}},6167:(t,e,n)=>{n.d(e,{templateSoundboardInput:()=>o,templateSoundboardItemContainer:()=>s});var i=n(2843);function s(t,e=""){return`\n  <div id="${t}SoundTableItem" class="sound-table-item-container">\n      <div class="sound-table-media-name-container position-absolute bottom-100 start-0 text-truncate" style="max-width: 100%;">\n        <span class="sound-table-media-name fw-bolder text-dark text-truncate" title="${(0,i.replacePercentEncoding)(e)}">\n          ${(0,i.replacePercentEncoding)(e)}\n        </span>\n      </div>\n  </div>\n  `.trim()}function o(t,e,n="",i=""){return`\n    <div class="sound-table-input-container text-truncate position-absolute top-0 start-0 w-100 h-100" style="z-index: 999 !important; pointer-events: none !important;">\n      <div class="form-floating position-absolute bottom-0 start-0" style="pointer-events: auto !important;">\n        <input type="text" value="${n}" class="form-control sound-table-input text-truncate" id="urlInput${t}" placeholder="${i}">\n        <label for="urlInput${t}">${e}</label>\n      </div>\n\n      <div class="sound-table-remove-item-container position-absolute top-0 end-0" style="pointer-events: auto !important;">\n        <button type="button" class="sound-table-remove-item-button btn-close badge rounded-0 bg-danger opacity-100 p-3">\n        </button>\n      </div>\n    </div>\n  `}},2152:(t,e,n)=>{function i(t){return`\n  <div id="${t}">\n  </div>\n  `.trim()}n.d(e,{templateBackgroundYoutubeIframeElement:()=>i})},5102:(t,e,n)=>{n.d(e,{YoutubeIframe:()=>a});var i=n(1319),s=(n(4763),n(739)),o=n(2152),r=(n(4785),n(3362),n(7930));class a extends r.ObjectEventListener{static arrObjectToSetOnEveryIframeReady=[];static _dictYoutubeIframeById=new Map;static _arrYoutubeIframeIdReady=[];player;_isPlayerReady=!1;id;_videoId;videoName="";videoThumb="";channelURL="";channelName="";_iframeElement=null;_iframeContainer;_iframeParentElement;_isPlaying=!1;_dimensions;topDiv;_startsAt;_blockInteraction=!1;_divBlockInteraction=null;_startMuted;_playingObserverInterval=null;_eventListener=new r.ObjectEventListener;constructor(t){if(a._dictYoutubeIframeById.has(t.iframeId))throw new Error("Invalid iframe there's already an iframe with this id.");super(),this.id=t.iframeId,this._startsAt=t.startsAt??0,this._videoId=t.videoId,this._startMuted=!!t.startMuted,this._blockInteraction=!!t.blockInteraction,this._iframeContainer=a.getYoutubeIframeElement({iframeId:t.iframeId,classList:t.classList}),this._iframeParentElement=a.setupParentFromYoutubeIframe({parentElement:t.parentElement??document.body,iframeContainer:this._iframeContainer}),this.setClassesIframePaused(),this._dimensions=t.dimensions??(0,i.getElementDimensions)(this._iframeParentElement),a._dictYoutubeIframeById.set(t.iframeId,this),this.setVideoInfo().then((()=>{this.setExternalHTMLElementsAttributes()}))}get name(){return this.videoName}get container(){return this._iframeContainer}get videoId(){return(0,i.extractYouTubeId)(this._videoId)}destroy(){this.player.destroy(),this.container.remove(),a._dictYoutubeIframeById.delete(this.id)}async setVideoInfo(){const t=await this.getVideoInfo();this.videoName=t&&t.title?t.title:"",this.channelName=t&&t.author_name?t.author_name:"",this.videoThumb=t&&t.thumbnail_url?t.thumbnail_url:"",this.channelURL=t&&t.author_url?t.author_url:""}async changeVideo(t){if((0,i.isValidYoutubeUrlOrId)(t.videoId)){for(;!this.player||!this.player.loadVideoById;)await(0,i.delay)(100);this.prepareOptions(t),await this.loadVideo(),this.player.seekTo(this.startsAt,!0),this.isPlaying?this.playWithoutTriggerEvents():this.pauseWithoutTriggerEvents()}}prepareOptions(t){this.id=t.iframeId,this._videoId=t.videoId,this.startsAt=t.startsAt??this.startsAt}async loadVideo(){this.player.loadVideoById({videoId:this.videoId,startSeconds:this.startsAt,suggestedQuality:"highres"}),await this.setVideoInfo(),this.setExternalHTMLElementsAttributes()}async getVideoInfo(){const t=await(0,i.handlePromise)(fetch(`https://www.youtube.com/oembed?url=${this.videoURL}&format=json`));if(!t.error)return await t.data().json();console.error(t.error)}onPlayerReady(t){this._startMuted&&this.player.mute(),a._arrYoutubeIframeIdReady.push(this.id),this._iframeElement=document.getElementById(this.id),this.setClassesIframePaused(),this.player.setPlaybackQuality("highres"),this.player.seekTo(this._startsAt??0,!0),this.player.pauseVideo(),this._isPlayerReady=!0,this.callEventsByName("oniframeready",this),a.checkIfEveryIframeIsReady()}onPlayerStateChange(t){t.data===a._youtubeAPIReference.PlayerState.PLAYING?(this._isPlaying=!0,this._playingObserverInterval=setInterval((()=>this.callEventsByName("onplaying",this,this.isPlaying)),100),this.setClassesIframePlaying()):this._playingObserverInterval&&(clearInterval(this._playingObserverInterval),this.setClassesIframePaused(),this._isPlaying=!1,this._playingObserverInterval=null),this.callEventsByName("playerstatechange",this,this.isPlaying),this.callEventsByName("onplayerstatechange",this,this.isPlaying)}setClassesIframePlaying(){this._iframeElement&&(this._iframeElement.classList.remove("yt-paused"),this._iframeElement.classList.add("yt-playing")),this._iframeContainer.classList.remove("yt-paused"),this._iframeContainer.classList.add("yt-playing"),this._iframeParentElement.classList.remove("yt-paused"),this._iframeParentElement.classList.add("yt-playing")}setClassesIframePaused(){this._iframeElement&&(this._iframeElement.classList.add("yt-paused"),this._iframeElement.classList.remove("yt-playing")),this._iframeContainer.classList.add("yt-paused"),this._iframeContainer.classList.remove("yt-playing"),this._iframeParentElement.classList.add("yt-paused"),this._iframeParentElement.classList.remove("yt-playing")}onEveryYoutubeIframeReady(){this.callEventsByName("oneveryyoutubeiframeready")}get divBlockInteraction(){return this._divBlockInteraction}get videoURL(){return`https://www.youtube.com/watch?v=${this.videoId}`}get parentElement(){return this._iframeParentElement}get iframeElement(){if(!this._iframeElement)throw new Error("Iframe was called but it's not ready.");return this._iframeElement}get isPlayerReady(){return this._isPlayerReady}get duration(){return this.player.getDuration()-this._startsAt}get playerDuration(){return this.player.getDuration()}set currentTime(t){this.seek(t)}get currentTime(){return this.player.getCurrentTime()-this._startsAt}get playerCurrentTime(){return this.player.getCurrentTime()}get progressPercent(){return this.currentTime/this.duration}get playerProgressPercent(){return this.playerCurrentTime/this.playerDuration}get startMuted(){return this._startMuted}get isPlaying(){return this._isPlaying}get dimensions(){return this._dimensions}get startsAt(){return(0,s.clamp)(this._startsAt,0,this._startsAt)}set startsAt(t){this._startsAt=(0,s.clamp)(t,0,t)}toggle(){return this.isPlaying?this.pause():this.play(),this}play(){return this.playWithoutTriggerEvents(),this.callEventsByName("onplay",this),this}playWithoutTriggerEvents(){return this.player.playVideo(),this._isPlaying=!0,this.setClassesIframePlaying(),this}pause(){return this.pauseWithoutTriggerEvents(),this.callEventsByName("onpause",this),this}pauseWithoutTriggerEvents(){return this.player.pauseVideo(),this._isPlaying=!1,this.setClassesIframePaused(),this}seek(t,e=!1,n=!1){return this.callEventsByName("onseek",t,e,n,this),t+=n?this._startsAt:0,this.player.seekTo(t,e),this}mute(){return this.player.mute(),this}unmute(){return this.player.unmute(),this}static checkIfEveryIframeIsReady(){[...a._dictYoutubeIframeById.keys()].some((t=>!this._arrYoutubeIframeIdReady.includes(t)))||(this.arrObjectToSetOnEveryIframeReady.forEach((t=>t.setup(a._dictYoutubeIframeById))),a._dictYoutubeIframeById.forEach(((t,e)=>{t.onEveryYoutubeIframeReady()})))}static getYoutubeIframeElement({iframeId:t,classList:e}){const n=document.createElement("div");return n.classList.add("yt-iframe-container"),e&&n.classList.add(...e),n.id=`containerYoutubeIframe${t}`,n.insertAdjacentHTML("afterbegin",(0,o.templateBackgroundYoutubeIframeElement)(t)),n}static setupParentFromYoutubeIframe({parentElement:t,iframeContainer:e}){const n=t??document.body;return n.classList.add("yt-iframe-parent"),n.insertAdjacentElement("afterbegin",e),n}setExternalHTMLElements(){this.createInvisibleDivTop(),this.createInvisibleDivBlockInteraction(),this.setExternalHTMLElementsAttributes()}setExternalHTMLElementsAttributes(){this.setIframeContainerAttributes(),this.setTopDivAttributes(),this.setDivBlockInteractionAttributes()}createInvisibleDivTop(){this.topDiv=a.getInvisibleTopDiv(this),this.topDiv.style.zIndex="990"}createInvisibleDivBlockInteraction(){this._divBlockInteraction=a.getInvisibleDivBlockInteraction(this),this._divBlockInteraction.style.display=this._blockInteraction?"block":"none",this._divBlockInteraction.style.zIndex="995",this._divBlockInteraction.addEventListener("click",(t=>{this.callEventsByName("onclickinteractionblocked",this,this._divBlockInteraction),this.callEventsByName("oninteractionblocked",this,this._divBlockInteraction)}))}setDivBlockInteractionAttributes(){this.divBlockInteraction&&(0,i.setAttributeListForElement)(this.divBlockInteraction,this._videoInfoAttributeList)}setIframeContainerAttributes(){this._iframeContainer&&(0,i.setAttributeListForElement)(this._iframeContainer,this._videoInfoAttributeList)}setTopDivAttributes(){this.topDiv&&(0,i.setAttributeListForElement)(this.topDiv,this._videoInfoAttributeList)}set blockInteraction(t){this._blockInteraction=t,this._divBlockInteraction&&(this._divBlockInteraction.style.display=this._blockInteraction?"block":"none")}initPlayer(){this.player=new a._youtubeAPIReference.Player(this.id,{videoId:this.videoId,width:this.dimensions.width,height:this.dimensions.height,playerVars:{rel:0,iv_load_policy:3,showinfo:0,controls:0,autoplay:0},events:{onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)}})}static _youtubeAPIReference;get _videoInfoAttributeList(){return[["yt-iframe-id",this.id],["yt-iframe-video-name",this.videoName],["yt-iframe-video-channel-name",this.channelName],["yt-iframe-video-thumb-url",this.videoThumb],["yt-iframe-video-channel-url",this.channelURL]]}static async buildSingleIframe(t){if(!document.getElementById("ytIframeAPIScriptTag")){var e=document.createElement("script");e.id="ytIframeAPIScriptTag",e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n&&n.parentNode&&n.parentNode.insertBefore(e,n)}return await(0,i.waitUntilElementExists)("#ytIframeAPIScriptTag"),await(0,i.pollForVariableAsync)("YT",(t=>"function"==typeof t.Player&&t.Player.prototype&&t.Player.prototype.constructor===t.Player&&t.loaded),(e=>{a._youtubeAPIReference=e,t.build()})),t}static buildIframes(){if(!document.getElementById("ytIframeAPIScriptTag")){var t=document.createElement("script");t.id="ytIframeAPIScriptTag",t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e&&e.parentNode&&e.parentNode.insertBefore(t,e)}(0,i.waitUntilElementExists)("#ytIframeAPIScriptTag").then((()=>{(0,i.pollForVariable)("YT",(t=>"function"==typeof t.Player&&t.Player.prototype&&t.Player.prototype.constructor===t.Player&&t.loaded),(t=>{a._youtubeAPIReference=t,a.setYoutubeIframeElements()}))}))}build(){this.setExternalHTMLElements(),this.initPlayer()}static setYoutubeIframeElements(){this._dictYoutubeIframeById.forEach(((t,e)=>{t.isPlayerReady||t.build()}))}static getInvisibleTopDiv(t){return(0,i.createInvisibleDivAboveParent)({parentElement:document.getElementById(t.id).parentElement,id:`invisibleTopDivHoldToDrag${t.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:.2*t.dimensions.height}})}static getInvisibleDivBlockInteraction(t){const e=(0,i.createInvisibleDivAboveParent)({parentElement:document.getElementById(t.id).parentElement,id:`invisibleDivBlockInteraction${t.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:t.dimensions.height}});return e.classList.add("yt-div-block-interaction"),e}}},4785:(t,e,n)=>{n.d(e,{YoutubeIframe:()=>i.YoutubeIframe});var i=n(5102)},3362:(t,e,n)=>{n(5102)},2976:()=>{String.prototype.isNullOrEmpty=function(){return"string"!=typeof this&&!this&&""!==this},String.prototype.truncate=function(t,e="..."){return(this.length>t?this.substring(0,t)+e:this).toString()},String.prototype.removeAccents=function(){return this.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},String.prototype.capitalizeFirstLetter=function(){return"string"!=typeof this?"":this.charAt(0).toUpperCase()+this.substring(1)},String.prototype.zeroBefore=function(){return this.padStart(2,"0")}},4763:(t,e,n)=>{n(1319),n(8586)},8586:(t,e,n)=>{n(1319)},7930:(t,e,n)=>{n.d(e,{ObjectEventListener:()=>i});class i{eventsByName=new Map;addEventListener(t,e){this.eventsByName.has(t.toLowerCase())?this.eventsByName.get(t.toLowerCase()).push(e):this.eventsByName.set(t.toLowerCase(),[e])}getEventsByName(t){return this.eventsByName.has(t.toLowerCase())||this.eventsByName.set(t.toLowerCase(),[]),this.eventsByName.get(t.toLowerCase())}callEventsByName(t,...e){this.getEventsByName(t).forEach((t=>t(...e)))}}},7353:(t,e,n)=>{n.d(e,{createInvisiblePlayer:()=>o,sourceElementHTML:()=>r}),n(2976);var i=n(1319),s=n(3164);function o(t,e){const n=(0,i.getElementFromHTML)(function(t,e){return`<audio controls ${e?function(t){return` ${t.id?'id="'+t.id+'"':""} ${t.autoPlay||t.autoplay?"autoplay":""} ${t.muted?"muted":""} ${t.loop?"loop":""} ${t.preload?'preload="'+t.preload+'"':""}`.trimEnd()}(e):""}>\n    ${t.map((t=>r(t))).reduce(((t,e)=>t+e),"")}\n  </audio>`}(t,e));return document.body.insertAdjacentElement("afterbegin",n),(0,i.hideElement)(n),n}function r(t){return`<source src="${t}" type="audio/${(0,s.getFileExtension)(t)}">`}n(173)},1319:(t,e,n)=>{n.d(e,{createInvisibleDivAboveParent:()=>I,delay:()=>y,extractYouTubeId:()=>l,getElementDimensions:()=>u,getElementFromHTML:()=>c,handlePromise:()=>r,hideElement:()=>v,isValidYoutubeUrlOrId:()=>a,pollForVariable:()=>m,pollForVariableAsync:()=>h,setAttributeListForElement:()=>d,waitUntilElementExists:()=>p});const i=new Map,s=new Map,o=new Map;async function r(t){try{const e=await t;return{data:()=>e,error:null}}catch(t){return console.error(t),{data:()=>{throw new Error("Couldn't fetch, check SafePromise.error for details.")},error:t instanceof Error?t:new Error(String(t))}}}function a(t){return/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(t)||/^[a-zA-Z0-9_-]{11}$/.test(t)}function l(t){const e=t.match(/[?&]v=([^?&]+)/);return e&&e[1]?e[1]:11===t.length?t:null}function d(t,e){e.forEach((([e,n])=>{t.setAttribute(e,n)}))}function c(t,e=!0){if(!(t=e?t.trim():t))return null;const n=document.createElement("template");n.innerHTML=t;const i=n.content.children;return 1===i.length?i[0]:Array.from(i)}function u(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}function m(t,e,n){const i=setInterval((()=>{void 0!==window[t]&&e(window[t])&&(clearInterval(i),n(window[t]))}),100)}async function h(t,e,n){return new Promise((i=>{const s=setInterval((()=>{void 0!==window[t]&&e(window[t])&&(clearInterval(s),n(window[t]),i())}),100)}))}function p(t){return new Promise((e=>{if(document.querySelector(t))return e(document.querySelector(t));const n=new MutationObserver((i=>{document.querySelector(t)&&(n.disconnect(),e(document.querySelector(t)))}));n.observe(document.body,{childList:!0,subtree:!0})}))}async function y(t){return new Promise((e=>setTimeout(e,t)))}function I({parentElement:t,id:e,position:n,dimensions:i}){var s=document.createElement("div");return t.style.position||(t.style.position="relative"),s.id=e,s.style.position="absolute",s.style.width=i&&i.width?i.width.toString()+"px":"100%",s.style.height=i&&i.height?i.height.toString()+"px":"100%",s.style.top=(n?.top.toString()??"0")+"px",s.style.left=(n?.left.toString()??"0")+"px",s.style.opacity="0",s.style.pointerEvents="auto",t.appendChild(s),s}function v(t){t.style.display="block",t.style.position="absolute",t.style.zIndex="-1",t.style.opacity="0",t.style.width="0px !important",t.style.height="0px !important",t.setAttribute("hidden","")}new Map,window.addEventListener("keydown",(t=>{t.repeat||function(t){for(const e of i)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t),function(t){for(const e of s)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t)})),window.addEventListener("keyup",(t=>{for(const e of o)t.code===e[0]&&e[1].forEach((e=>e(t)))}))},3164:(t,e,n)=>{n.d(e,{getFileExtension:()=>o,removeFilePath:()=>s});var i=n(2843);function s(t){const e=/(?:.*[\\/])([^\\/]+)$/.exec(t);return e&&e.length>1?e[1]:t}function o(t){if((0,i.isNullOrEmpty)(t))return"";const e=t.split(".").pop();if(e&&e!==t)return e;const n=t.split("/").pop();return n&&n!==t?n:""}},739:(t,e,n)=>{function i(t=0,e=0,n=100){return Math.max(e,Math.min(t,n))}n.d(e,{clamp:()=>i})},2843:(t,e,n)=>{function i(t){return"string"!=typeof t||!t||""===t}function s(t){return t.replace(/[^a-zA-Z0-9]/g,"")}function o(t){return t.replace(/%20/g," ")}n.d(e,{isNullOrEmpty:()=>i,removeSpecialCharacters:()=>s,replacePercentEncoding:()=>o})}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{n.r(i),n.d(i,{Soundboard:()=>d});var t=n(7930),e=n(1319),s=n(3164),o=n(2843),r=n(173),a=n(4785),l=n(6167);class d extends t.ObjectEventListener{container;containersClassList;itemClassList;_setMediaControllers=new Set;_mapMediaControllersById=new Map;_mapInputByComponentId=new Map;constructor(t){super(),this.container=t.container,this.containersClassList=t.containersClassList??[],this.itemClassList=t.itemClassList??[],this.addMediaList(t.arrMediaSrc)}static getInstantMP3DownloadLink(t){if(!d.isMyInstantsLink(t))throw new Error("Not a MyInstants link");const e=t.match(/\/instant\/([^/]+)\/?/);return!e||e.length<2?t:`https://www.myinstants.com/media/sounds/${e[1].replace(/-\d+$/,"")}.mp3`}static isMyInstantsLink(t){return t.includes("myinstants.com")}async addMediaList(t){let e=[];for(let n=0;n<t.length;++n){const i=this.getSourceInputDefaultOptions(t[n]),s=await this.addMedia(i);e.push(s)}return e}getCustomAudioComponentMediaOptions(t){const e=structuredClone(t);return d.isMyInstantsLink(t.src)&&(e.src=d.getInstantMP3DownloadLink(t.src)),e}async addMedia(t){let n;return n=(0,e.isValidYoutubeUrlOrId)(t.src)?await this.addIframe(this.container.id,t):await this.addAudioComponent(this.container.id,this.getCustomAudioComponentMediaOptions(t)),this.setComponentNameById(n.media.id,n.media.name),n}getSourceInputDefaultOptions(t){return"string"==typeof t?{src:t,autoRepeatOnPlay:!0}:t}addYoutubeList(t=[]){t.map((t=>this.getSourceInputDefaultOptions(t))).forEach((t=>{this.addIframe(`${this.container.id}IframeTableItem${t.src}`,t)}))}addAudioList(t=[]){t.map((t=>this.getSourceInputDefaultOptions(t))).forEach((t=>this.addAudioComponent(this.container.id,this.getCustomAudioComponentMediaOptions(t))))}addComponentInteractionBlockEvent(t,e){t.media.addEventListener("oninteractionblocked",(()=>{t.media.seek(0,!0),e.autoRepeatOnPlay?t.media.playWithoutTriggerEvents():t.media.toggle()}))}getInputBySource(t){if(!this._mapInputByComponentId.has(t))throw new Error("Element src not on sound table.");return this._mapInputByComponentId.get(t)}get componentsControllers(){return Array.from(this._setMediaControllers)}getElementMediaContainer(t,n=""){const i=(0,e.getElementFromHTML)((0,l.templateSoundboardItemContainer)(t,n));return i.classList.add(...this.containersClassList),i}setComponentNameById(t,e){const n=this.getElementItemNameContainerById(t);n.innerHTML=(0,o.replacePercentEncoding)(e),n.setAttribute("title",(0,o.replacePercentEncoding)(e))}getElementItemNameContainerById(t){const e=this._mapMediaControllersById.get(t);if(!e)throw new Error("Component does not exist.");const n=e.mediaContainer.querySelector(".sound-table-media-name");if(!n)throw new Error("Media name for this element was removed.");return n}getNewAudioComponentId(t,e){return(0,o.removeSpecialCharacters)(t+"AudioElement"+(0,s.removeFilePath)(e.src))}getNewYoutubeIframeId(t,e){return(0,o.removeSpecialCharacters)(t+"YoutubeIframe"+(0,s.removeFilePath)(e.src))}async addAudioComponent(t,e){const n=this.getNewAudioComponentId(t,e);if(this._mapMediaControllersById.has(n))throw new Error("A component with this id already exists: "+n);const i=this.getElementMediaContainer(t);this.container.insertAdjacentElement("beforeend",i);const s=await r.AudioComponent.createAudioComponent({src:e.src,audioElementId:n,blockInteraction:!0,container:i}),o=this.addInputElementToContainer(i,s,s.id,e.src),a={media:s,input:o.input,inputContainer:o.container,buttonRemoveItem:o.buttonElement,mediaContainer:i,itemOptions:e};return s.container.classList.add("sound-table-item",...this.itemClassList),this._setMediaControllers.add(a),this._mapMediaControllersById.set(s.id,a),this.addComponentInteractionBlockEvent(a,e),this.setComponentNameById(s.id,s.name),a}async addIframe(t,e){const n=this.getNewYoutubeIframeId(t,e);if(this._mapMediaControllersById.has(n))throw new Error("A component with this id already exists: "+n);const i=this.getElementMediaContainer(t);this.container.insertAdjacentElement("beforeend",i);const s=new a.YoutubeIframe({iframeId:n,videoId:e.src,parentElement:i,startsAt:0,classList:["sound-table-item","overflow-hidden",...this.itemClassList],blockInteraction:!0}),o=this.addInputElementToContainer(i,s,s.id,e.src),r={media:s,input:o.input,inputContainer:o.container,buttonRemoveItem:o.buttonElement,mediaContainer:i,itemOptions:e};return this._setMediaControllers.add(r),this._mapMediaControllersById.set(s.id,r),await a.YoutubeIframe.buildSingleIframe(s),this.addComponentInteractionBlockEvent(r,e),this.setComponentNameById(n,s.videoName),r}async changeComponentSourceToInputValue(t){const e=this._mapMediaControllersById.get(t);if(!e)throw new Error("Component id does not exist");return e.media instanceof a.YoutubeIframe?this.changeYoutubeIframeSource(t,e.input.value):this.changeAudioComponentSource(t,e.input.value),this._mapMediaControllersById.delete(t),this._mapMediaControllersById.set(e.media.id,e),this.setComponentNameById(e.media.id,e.media.name),e}async changeComponentSource(t,e){const n=this._mapMediaControllersById.get(t);if(!n)throw new Error("Component id does not exist");return n.media instanceof a.YoutubeIframe?this.changeYoutubeIframeSource(t,e):this.changeAudioComponentSource(t,e),this._mapMediaControllersById.delete(t),this._mapMediaControllersById.set(n.media.id,n),this.setComponentNameById(n.media.id,n.media.name),n}changeAudioComponentSource(t,e){const n=this._mapMediaControllersById.get(t);if(!n)throw new Error("Component id does not exist");if(!(n.media instanceof r.AudioComponent))throw new Error("Invalid operation");n.itemOptions.src=e;const i=this.getCustomAudioComponentMediaOptions(n.itemOptions),s=this.getNewAudioComponentId(n.mediaContainer.id,i);if(this._mapMediaControllersById.has(s))throw new Error("A component with this id already exists: "+s);n.media.changeSource(i.src,s)}async changeYoutubeIframeSource(t,n){const i=this._mapMediaControllersById.get(t);if(!i)throw new Error("Component id does not exist");if(!(i.media instanceof a.YoutubeIframe))throw new Error("Invalid operation");if(!(0,e.isValidYoutubeUrlOrId)(n))throw new Error("Invalid youtube URL");i.itemOptions.src=n;const s=this.getNewYoutubeIframeId(i.mediaContainer.id,i.itemOptions);if(this._mapMediaControllersById.has(s))throw new Error("A component with this id already exists: "+s);await i.media.changeVideo({iframeId:s,videoId:n,startsAt:0})}addInputElementToContainer(t,n,i,s){const o=(0,e.getElementFromHTML)((0,l.templateSoundboardInput)(i,"Source",s));t.insertAdjacentElement("beforeend",o);const r=o.querySelector(".sound-table-input"),a=o.querySelector(".sound-table-remove-item-button");return r.addEventListener("input",(()=>{this.callEventsByName("input",r.value,n),this.callEventsByName("oninput",r.value,n),this.callEventsByName("inputchange",r.value,n),this.callEventsByName("oninputchange",r.value,n)})),a.addEventListener("click",(()=>{this.removeItem(n),this.callEventsByName("removeelement",r.value,n),this.callEventsByName("onremoveelement",r.value,n),this.callEventsByName("removeitem",r.value,n),this.callEventsByName("onremoveitem",r.value,n)})),{input:r,container:o,buttonElement:a}}removeComponent(t){return this.removeItemById(t.media.id)}removeItem(t){return this.removeItemById(t.id)}removeItemById(t){const e=this._mapMediaControllersById.get(t);e&&(e.media.destroy(),e.mediaContainer.remove(),this._mapMediaControllersById.delete(t),this._mapInputByComponentId.delete(t),this._setMediaControllers.delete(e))}}})(),Soundboard=i})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3BDM0csS0FBSytWLHFCQUFxQjVNLE9BQVFsRCxHQUNwQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvQXVkaW9Db21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvQXVkaW9Db21wb25lbnRGYWN0b3J5LnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL0NvbXBvbmVudENvbnRhaW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Tb3VuZGJvYXJkL1RlbXBsYXRlc1NvdW5kYm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvWW91dHViZUlmcmFtZS9UZW1wbGF0ZXNZb3V0dWJlSWZyYW1lLnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1lvdXR1YmVJZnJhbWUvWW91dHViZUlmcmFtZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0ZW5zaW9ucy9TdHJpbmdFeHRlbnNpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvQXVkaW9Ub29scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvRE9NVG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Rvb2xzL0ZpbGVUb29scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvTWF0aFRvb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9Ub29scy9TdHJpbmdUb29scy50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvU291bmRib2FyZC9Tb3VuZGJvYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdEV2ZW50TGlzdGVuZXIgfSBmcm9tICcuLi9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lcic7XHJcbmltcG9ydCB7IHNvdXJjZUVsZW1lbnRIVE1MIH0gZnJvbSAnLi4vVG9vbHMvQXVkaW9Ub29scyc7XHJcbmltcG9ydCB7IGNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50LCBnZXRFbGVtZW50RGltZW5zaW9ucywgc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQgfSBmcm9tICcuLi9Ub29scy9ET01Ub29scyc7XHJcbmltcG9ydCB7IHJlbW92ZUZpbGVQYXRoIH0gZnJvbSAnLi4vVG9vbHMvRmlsZVRvb2xzJztcclxuaW1wb3J0IHsgRGltZW5zaW9ucyB9IGZyb20gJy4uL1Rvb2xzL01hdGhUb29scyc7XHJcbmltcG9ydCB7IEF1ZGlvQ29tcG9uZW50RmFjdG9yeSB9IGZyb20gJy4vQXVkaW9Db21wb25lbnRGYWN0b3J5JztcclxuaW1wb3J0IHsgSU1lZGlhUGxheWVyRnVuY3Rpb25zIH0gZnJvbSAnLi9UeXBlcyc7XHJcblxyXG5leHBvcnQgdHlwZSBBdWRpb0NvbXBvbmVudE9wdGlvbnMgPSB7XHJcbiAgc3JjOiBzdHJpbmc7XHJcbiAgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50O1xyXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgYXVkaW9FbGVtZW50SWQ/OiBzdHJpbmc7XHJcbiAgYmxvY2tJbnRlcmFjdGlvbj86IGJvb2xlYW47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgPSB7XHJcbiAgc3JjOiBzdHJpbmc7XHJcbiAgYXVkaW9FbGVtZW50SWQ/OiBzdHJpbmc7XHJcbiAgYmxvY2tJbnRlcmFjdGlvbj86IGJvb2xlYW47XHJcbiAgY29udGFpbmVyPzogSFRNTEVsZW1lbnQ7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgQXVkaW9Db21wb25lbnQgZXh0ZW5kcyBPYmplY3RFdmVudExpc3RlbmVyIGltcGxlbWVudHMgSU1lZGlhUGxheWVyRnVuY3Rpb25zIHtcclxuICBwdWJsaWMgc3JjOiBzdHJpbmc7XHJcbiAgcHVibGljIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudDtcclxuICBwcml2YXRlIF9jb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuICBwcm90ZWN0ZWQgX2Jsb2NrSW50ZXJhY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcm90ZWN0ZWQgX2RpdkJsb2NrSW50ZXJhY3Rpb246IEhUTUxFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3Rvciggb3B0aW9uczogQXVkaW9Db21wb25lbnRPcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLnNyYyA9IG9wdGlvbnMuc3JjO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IG9wdGlvbnMuYXVkaW9FbGVtZW50O1xyXG4gICAgdGhpcy5fYmxvY2tJbnRlcmFjdGlvbiA9IG9wdGlvbnMuYmxvY2tJbnRlcmFjdGlvbiA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICBpZiAoIG9wdGlvbnMuYXVkaW9FbGVtZW50SWQgKSB7XHJcbiAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmlkID0gb3B0aW9ucy5hdWRpb0VsZW1lbnRJZDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50JyApO1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2VuZGVkJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLnN0b3AoKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICBpZiAoICF0aGlzLl9jb250YWluZXIuaWQgKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5pZCA9IG9wdGlvbnMuYXVkaW9FbGVtZW50SWQgKyAnQXVkaW9Db21wb25lbnRDb250YWluZXInO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQtY29udGFpbmVyJyApO1xyXG5cclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24gPSB0aGlzLmdldEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oIHRoaXMgKTtcclxuICAgIHRoaXMuc2V0dXBJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCk7XHJcbiAgICB0aGlzLnNldEVsZW1lbnRzQXR0cmlidXRlcygpO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveSgpIHtcclxuICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBpc1BsYXlpbmcoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIXRoaXMuYXVkaW9FbGVtZW50LnBhdXNlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgaWQoIHZhbDogc3RyaW5nICkge1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQuaWQgPSB2YWw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGlkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5hdWRpb0VsZW1lbnQuaWQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBfdmlkZW9JbmZvQXR0cmlidXRlTGlzdCgpOiBbc3RyaW5nLCBzdHJpbmddW10ge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgWydhdWRpby1jb21wb25lbnQtc3JjJywgdGhpcy5zcmNdLFxyXG4gICAgICBbJ2F1ZGlvLWNvbXBvbmVudC1uYW1lJywgcmVtb3ZlRmlsZVBhdGgoIHRoaXMuc3JjICldXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gcmVtb3ZlRmlsZVBhdGgoIHRoaXMuc3JjICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEVsZW1lbnRzQXR0cmlidXRlcygpIHtcclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLmF1ZGlvRWxlbWVudCwgdGhpcy5fdmlkZW9JbmZvQXR0cmlidXRlTGlzdCApO1xyXG4gICAgc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQoIHRoaXMuY29udGFpbmVyLCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgICBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCggdGhpcy5kaXZCbG9ja0ludGVyYWN0aW9uLCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGRpdkJsb2NrSW50ZXJhY3Rpb24oKTogSFRNTEVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGNvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBwYXVzZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5hdWRpb0VsZW1lbnQucGF1c2VkO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBmaWxlTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50LnNyYyB8fCB0aGlzLmF1ZGlvRWxlbWVudC5xdWVyeVNlbGVjdG9yKCAnc291cmNlJyApPy5zcmMgfHwgJyc7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGN1cnJlbnRUaW1lKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IGN1cnJlbnRUaW1lKCB0OiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5jdXJyZW50VGltZSA9IHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHNvdXJjZUVsZW1lbnRzKCk6IEhUTUxTb3VyY2VFbGVtZW50W10ge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oIHRoaXMuYXVkaW9FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdzb3VyY2UnICkgKSBhcyBIVE1MU291cmNlRWxlbWVudFtdO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNoYW5nZVNvdXJjZSggc3JjOiBzdHJpbmcsIG5ld0lkOiBzdHJpbmcgKSB7XHJcbiAgICB0aGlzLmlkID0gbmV3SWQ7XHJcbiAgICB0aGlzLnNyYyA9IHNyYztcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LmlubmVySFRNTCA9IHNvdXJjZUVsZW1lbnRIVE1MKCB0aGlzLnNyYyApO1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQubG9hZCgpO1xyXG4gICAgdGhpcy5zZXRFbGVtZW50c0F0dHJpYnV0ZXMoKTtcclxuICAgIHRoaXMuc3RvcCgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpIHtcclxuICAgIHZhciBwbGF5UHJvbWlzZSA9IHRoaXMuYXVkaW9FbGVtZW50LnBsYXkoKTtcclxuXHJcbiAgICBpZiAoIHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgIHBsYXlQcm9taXNlLnRoZW4oIF8gPT4geyB9IClcclxuICAgICAgICAuY2F0Y2goICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgIH0gKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldENsYXNzZXNQbGF5aW5nKCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCkge1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgIHRoaXMuc2V0Q2xhc3Nlc1BhdXNlZCgpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBzZXRDbGFzc2VzUGxheWluZygpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50LXBsYXlpbmcnICk7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQtcGxheWluZycgKTtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSggJ2F1ZGlvLWNvbXBvbmVudC1wYXVzZWQnICk7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoICdhdWRpby1jb21wb25lbnQtcGF1c2VkJyApO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2xhc3Nlc1BhdXNlZCgpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50LXBhdXNlZCcgKTtcclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uY2xhc3NMaXN0LmFkZCggJ2F1ZGlvLWNvbXBvbmVudC1wYXVzZWQnICk7XHJcblxyXG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICdhdWRpby1jb21wb25lbnQtcGxheWluZycgKTtcclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSggJ2F1ZGlvLWNvbXBvbmVudC1wbGF5aW5nJyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXkoKSB7XHJcbiAgICB0aGlzLnBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25wbGF5JywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGF1c2UoKSB7XHJcbiAgICB0aGlzLnBhdXNlV2l0aG91dFRyaWdnZXJFdmVudHMoKTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucGF1c2UnLCB0aGlzICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdG9wKCkge1xyXG4gICAgdGhpcy5wYXVzZSgpO1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwO1xyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uc3RvcCcsIHRoaXMgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZSgpIHtcclxuICAgIGlmICggdGhpcy5wYXVzZWQgKSB7XHJcbiAgICAgIHRoaXMucGxheVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBhdXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb250b2dnbGUnLCB0aGlzICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIG11dGUoKSB7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC52b2x1bWUgPSAwO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25tdXRlJywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICB1bm11dGUoKSB7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC52b2x1bWUgPSAxO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb251bm11dGUnLCB0aGlzICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHNlZWsoIHNlZWtUaW1lOiBudW1iZXIsIF9yZWxvYWRCdWZmZXI/OiBib29sZWFuICkge1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IHNlZWtUaW1lO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25zZWVrJywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGRpbWVuc2lvbnMoKTogRGltZW5zaW9ucyB7XHJcbiAgICByZXR1cm4gZ2V0RWxlbWVudERpbWVuc2lvbnMoIHRoaXMuX2NvbnRhaW5lciApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCBhdWRpb0NvbXBvbmVudDogQXVkaW9Db21wb25lbnQgKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgZWxlbWVudEludmlzaWJsZURpdiA9IGNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50KCB7XHJcbiAgICAgIHBhcmVudEVsZW1lbnQ6IGF1ZGlvQ29tcG9uZW50Ll9jb250YWluZXIsXHJcbiAgICAgIGlkOiBgaW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiR7IGF1ZGlvQ29tcG9uZW50Ll9jb250YWluZXIuaWQgfWAsXHJcbiAgICAgIHBvc2l0aW9uOiB7IHRvcDogMCwgbGVmdDogMCB9LFxyXG4gICAgICBkaW1lbnNpb25zOiB7IHdpZHRoOiBhdWRpb0NvbXBvbmVudC5kaW1lbnNpb25zLndpZHRoLCBoZWlnaHQ6IGF1ZGlvQ29tcG9uZW50LmRpbWVuc2lvbnMuaGVpZ2h0IH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBlbGVtZW50SW52aXNpYmxlRGl2LmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQtZGl2LWJsb2NrLWludGVyYWN0aW9uJyApO1xyXG5cclxuICAgIHJldHVybiBlbGVtZW50SW52aXNpYmxlRGl2O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldHVwSW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbigpIHtcclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uc3R5bGUuZGlzcGxheSA9IHRoaXMuX2Jsb2NrSW50ZXJhY3Rpb24gPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5zdHlsZS56SW5kZXggPSAnOTk1JztcclxuXHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25jbGlja2ludGVyYWN0aW9uYmxvY2tlZCcsIHRoaXMsIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24gKTtcclxuICAgICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25pbnRlcmFjdGlvbmJsb2NrZWQnLCB0aGlzLCB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBhd2FpdHMgYXVkaW8gbG9hZHMgZnJvbSBzb3VyY2UgdGhlbiBjcmVhdGVzIHRoZSBjb21wb25lbnRcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZUF1ZGlvQ29tcG9uZW50T25Cb2R5KCBvcHRpb25zOiBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgKTogUHJvbWlzZTxBdWRpb0NvbXBvbmVudD4ge1xyXG4gICAgY29uc3QgYXVkaW9Db21wb25lbnRDb250YWluZXIgPSBhd2FpdCBuZXcgQXVkaW9Db21wb25lbnRGYWN0b3J5KCBvcHRpb25zLnNyYyApLmJ1aWxkT25Cb2R5KCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBdWRpb0NvbXBvbmVudCgge1xyXG4gICAgICBzcmM6IG9wdGlvbnMuc3JjLFxyXG4gICAgICBjb250YWluZXI6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLFxyXG4gICAgICBhdWRpb0VsZW1lbnQ6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoICdhdWRpbycgKSEsXHJcbiAgICAgIGF1ZGlvRWxlbWVudElkOiBvcHRpb25zLmF1ZGlvRWxlbWVudElkLFxyXG4gICAgICBibG9ja0ludGVyYWN0aW9uOiBvcHRpb25zLmJsb2NrSW50ZXJhY3Rpb25cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIC8vIGF3YWl0cyBhdWRpbyBsb2FkcyBmcm9tIHNvdXJjZSB0aGVuIGNyZWF0ZXMgdGhlIGNvbXBvbmVudFxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlQXVkaW9Db21wb25lbnQoIG9wdGlvbnM6IENyZWF0ZUF1ZGlvQ29tcG9uZW50T3B0aW9ucyApOiBQcm9taXNlPEF1ZGlvQ29tcG9uZW50PiB7XHJcbiAgICBpZiAoIG9wdGlvbnMuY29udGFpbmVyID09PSBkb2N1bWVudC5ib2R5IHx8ICFvcHRpb25zLmNvbnRhaW5lciApIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQXVkaW9Db21wb25lbnRPbkJvZHkoIG9wdGlvbnMgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhdWRpb0NvbXBvbmVudENvbnRhaW5lciA9IGF3YWl0IG5ldyBBdWRpb0NvbXBvbmVudEZhY3RvcnkoIG9wdGlvbnMuc3JjICkuYnVpbGQoIG9wdGlvbnMuY29udGFpbmVyICk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBdWRpb0NvbXBvbmVudCgge1xyXG4gICAgICBzcmM6IG9wdGlvbnMuc3JjLFxyXG4gICAgICBjb250YWluZXI6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLFxyXG4gICAgICBhdWRpb0VsZW1lbnQ6IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoICdhdWRpbycgKSEsXHJcbiAgICAgIGF1ZGlvRWxlbWVudElkOiBvcHRpb25zLmF1ZGlvRWxlbWVudElkLFxyXG4gICAgICBibG9ja0ludGVyYWN0aW9uOiBvcHRpb25zLmJsb2NrSW50ZXJhY3Rpb25cclxuICAgIH0gKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBBdWRpb1BsYXllckNvbmZpZywgY3JlYXRlSW52aXNpYmxlUGxheWVyIH0gZnJvbSAnLi4vVG9vbHMvQXVkaW9Ub29scyc7XHJcbmltcG9ydCB7IENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJy4vQ29tcG9uZW50Q29udGFpbmVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBdWRpb0NvbXBvbmVudEZhY3RvcnkgZXh0ZW5kcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gIGNvbnN0cnVjdG9yKCBzcmM6IHN0cmluZywgcGxheWVyQ29uZmlnPzogQXVkaW9QbGF5ZXJDb25maWcgKSB7XHJcbiAgICBzdXBlciggXCJhdWRpb0NvbXBvbmVudFwiLCBjcmVhdGVJbnZpc2libGVQbGF5ZXIoIFtzcmNdLCBwbGF5ZXJDb25maWcgKSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGJ1aWxkU3ViQ29tcG9uZW50cyggcGFyZW50OiBIVE1MRWxlbWVudCApOiBQcm9taXNlPEhUTUxFbGVtZW50W10gfCB2b2lkPiB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG59IiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgcHJvdGVjdGVkIF9lbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gIHB1YmxpYyB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgcHVibGljIHJlYWRvbmx5IGNvbXBvbmVudE5hbWU6IHN0cmluZztcclxuICBwcm90ZWN0ZWQgc3ViQ29tcG9uZW50Q291bnRCeU5hbWU6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XHJcbiAgcHJvdGVjdGVkIHN1YkNvbXBvbmVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcclxuXHJcbiAgLy8vIFRlbXBsYXRlIGlzIGVpdGhlciBhIGlkIGZvciBhIGh0bWwgdGVtcGxhdGUgZWxlbWVudCBvciBhbiBlbGVtZW50IHRoYXQgd2lsbCBiZSBpbnNlcnRlZCBhcyBhIHRlbXBsYXRlIGluc2lkZSBkb2N1bWVudC5ib2R5XHJcbiAgY29uc3RydWN0b3IoIGNvbXBvbmVudE5hbWU6IHN0cmluZywgdGVtcGxhdGU6IHN0cmluZyB8IEhUTUxFbGVtZW50ICkge1xyXG4gICAgaWYgKCB0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnICkge1xyXG4gICAgICBjb25zdCB0ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGVtcGxhdGUgKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG5cclxuICAgICAgaWYgKCAhdGVtcGxhdGVFbGVtZW50ICkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIHRlbXBsYXRlIGZvciBzY2VuZSBjb21wb25lbnQuIFRlbXBsYXRlIGlkOiBcIiArIHRlbXBsYXRlICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ID0gdGVtcGxhdGVFbGVtZW50O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInRlbXBsYXRlXCIgKTtcclxuICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudC5hcHBlbmRDaGlsZCggdGVtcGxhdGUgKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggdGhpcy50ZW1wbGF0ZUVsZW1lbnQgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldFRlbXBsYXRlQ2xvbmVOb2RlcygpOiBIVE1MQ29sbGVjdGlvbiB7XHJcbiAgICByZXR1cm4gKCB0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LmNsb25lTm9kZSggdHJ1ZSApIGFzIERvY3VtZW50RnJhZ21lbnQgKS5jaGlsZHJlbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhYnN0cmFjdCBidWlsZFN1YkNvbXBvbmVudHMoIHBhcmVudDogSFRNTEVsZW1lbnQgKTogUHJvbWlzZTxIVE1MRWxlbWVudFtdIHwgdm9pZD47XHJcblxyXG4gIHByb3RlY3RlZCBhc3luYyBidWlsZFNpbmdsZVN1YkNvbXBvbmVudCggY29tcG9uZW50OiBDb21wb25lbnRDb250YWluZXIsIHBhcmVudDogSFRNTEVsZW1lbnQgKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xyXG4gICAgaWYgKCB0aGlzLnN1YkNvbXBvbmVudENvdW50QnlOYW1lLmhhcyggdGhpcy5jb21wb25lbnROYW1lICkgKSB7XHJcbiAgICAgIHRoaXMuc3ViQ29tcG9uZW50Q291bnRCeU5hbWUuc2V0KCB0aGlzLmNvbXBvbmVudE5hbWUsIDAgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY29tcG9uZW50Q291bnQgPSB0aGlzLnN1YkNvbXBvbmVudENvdW50QnlOYW1lLmdldCggdGhpcy5jb21wb25lbnROYW1lICkhO1xyXG5cclxuICAgIHRoaXMuc3ViQ29tcG9uZW50Q291bnRCeU5hbWUuc2V0KCB0aGlzLmNvbXBvbmVudE5hbWUsIGNvbXBvbmVudENvdW50ICsgMSApO1xyXG5cclxuICAgIHJldHVybiBhd2FpdCBjb21wb25lbnQuYnVpbGQoIHBhcmVudCwgYCR7IHRoaXMuY29tcG9uZW50TmFtZSB9JHsgY29tcG9uZW50LmNvbXBvbmVudE5hbWUuY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCkgfSR7IGNvbXBvbmVudENvdW50IH1gICk7XHJcbiAgfVxyXG5cclxuICAvLy8gR2V0cyB0aGUgdGVtcGxhdGUgbm9kZXMgYW5kIGluc2VydCB0aGVtIGludG8gYSBjb250YWluZXIgdGhlbiByZXR1cm5zIHRoZSBjb250YWluZXJcclxuICBwdWJsaWMgYXN5bmMgYnVpbGRPbkJvZHkoIGVsZW1lbnRJZD86IHN0cmluZyApOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuXHJcbiAgICBpZiAoIGVsZW1lbnRJZCApIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5pZCA9IGVsZW1lbnRJZDtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKCBsZXQgaXRlbSBvZiB0aGlzLmdldFRlbXBsYXRlQ2xvbmVOb2RlcygpICkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2FmdGVyYmVnaW4nLCBpdGVtICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhdGhpcy5fZWxlbWVudCApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBgRmFpbCBidWlsZGluZyBTY2VuZUNvbXBvbmVudC4gRWxlbWVudElkOiAkeyBlbGVtZW50SWQgfWAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB0aGlzLmJ1aWxkU3ViQ29tcG9uZW50cyggZG9jdW1lbnQuYm9keSApO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgdGhpcy5fZWxlbWVudCApO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8vIEdldHMgdGhlIHRlbXBsYXRlIG5vZGVzIGFuZCBpbnNlcnQgdGhlbSBpbnRvIGEgY29udGFpbmVyIHRoZW4gcmV0dXJucyB0aGUgY29udGFpbmVyXHJcbiAgcHVibGljIGFzeW5jIGJ1aWxkKCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBlbGVtZW50SWQ/OiBzdHJpbmcgKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xyXG4gICAgZm9yICggbGV0IGl0ZW0gb2YgdGhpcy5nZXRUZW1wbGF0ZUNsb25lTm9kZXMoKSApIHtcclxuICAgICAgY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2FmdGVyYmVnaW4nLCBpdGVtICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy5idWlsZFN1YkNvbXBvbmVudHMoIGNvbnRhaW5lciApO1xyXG5cclxuICAgIHJldHVybiBjb250YWluZXI7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgcmVwbGFjZVBlcmNlbnRFbmNvZGluZyB9IGZyb20gJy4uLy4uL1Rvb2xzL1N0cmluZ1Rvb2xzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZVNvdW5kYm9hcmRJdGVtQ29udGFpbmVyKCBpdGVtSWQ6IHN0cmluZywgbWVkaWFOYW1lOiBzdHJpbmcgPSBcIlwiICk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGBcclxuICA8ZGl2IGlkPVwiJHsgaXRlbUlkIH1Tb3VuZFRhYmxlSXRlbVwiIGNsYXNzPVwic291bmQtdGFibGUtaXRlbS1jb250YWluZXJcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInNvdW5kLXRhYmxlLW1lZGlhLW5hbWUtY29udGFpbmVyIHBvc2l0aW9uLWFic29sdXRlIGJvdHRvbS0xMDAgc3RhcnQtMCB0ZXh0LXRydW5jYXRlXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3VuZC10YWJsZS1tZWRpYS1uYW1lIGZ3LWJvbGRlciB0ZXh0LWRhcmsgdGV4dC10cnVuY2F0ZVwiIHRpdGxlPVwiJHsgcmVwbGFjZVBlcmNlbnRFbmNvZGluZyggbWVkaWFOYW1lICkgfVwiPlxyXG4gICAgICAgICAgJHsgcmVwbGFjZVBlcmNlbnRFbmNvZGluZyggbWVkaWFOYW1lICkgfVxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbiAgYC50cmltKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZVNvdW5kYm9hcmRJbnB1dCggaXRlbUlkOiBzdHJpbmcsIGxhYmVsVGV4dDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nID0gXCJcIiwgcGxhY2Vob2xkZXI6IHN0cmluZyA9IFwiXCIgKSB7XHJcbiAgcmV0dXJuIGBcclxuICAgIDxkaXYgY2xhc3M9XCJzb3VuZC10YWJsZS1pbnB1dC1jb250YWluZXIgdGV4dC10cnVuY2F0ZSBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBzdGFydC0wIHctMTAwIGgtMTAwXCIgc3R5bGU9XCJ6LWluZGV4OiA5OTkgIWltcG9ydGFudDsgcG9pbnRlci1ldmVudHM6IG5vbmUgIWltcG9ydGFudDtcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZmxvYXRpbmcgcG9zaXRpb24tYWJzb2x1dGUgYm90dG9tLTAgc3RhcnQtMFwiIHN0eWxlPVwicG9pbnRlci1ldmVudHM6IGF1dG8gIWltcG9ydGFudDtcIj5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiR7IHZhbHVlIH1cIiBjbGFzcz1cImZvcm0tY29udHJvbCBzb3VuZC10YWJsZS1pbnB1dCB0ZXh0LXRydW5jYXRlXCIgaWQ9XCJ1cmxJbnB1dCR7IGl0ZW1JZCB9XCIgcGxhY2Vob2xkZXI9XCIkeyBwbGFjZWhvbGRlciB9XCI+XHJcbiAgICAgICAgPGxhYmVsIGZvcj1cInVybElucHV0JHsgaXRlbUlkIH1cIj4keyBsYWJlbFRleHQgfTwvbGFiZWw+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzcz1cInNvdW5kLXRhYmxlLXJlbW92ZS1pdGVtLWNvbnRhaW5lciBwb3NpdGlvbi1hYnNvbHV0ZSB0b3AtMCBlbmQtMFwiIHN0eWxlPVwicG9pbnRlci1ldmVudHM6IGF1dG8gIWltcG9ydGFudDtcIj5cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInNvdW5kLXRhYmxlLXJlbW92ZS1pdGVtLWJ1dHRvbiBidG4tY2xvc2UgYmFkZ2Ugcm91bmRlZC0wIGJnLWRhbmdlciBvcGFjaXR5LTEwMCBwLTNcIj5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcbiIsIlxyXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVCYWNrZ3JvdW5kWW91dHViZUlmcmFtZUVsZW1lbnQoIGlmcmFtZUlkOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICByZXR1cm4gYFxyXG4gIDxkaXYgaWQ9XCIkeyBpZnJhbWVJZCB9XCI+XHJcbiAgPC9kaXY+XHJcbiAgYC50cmltKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZVlvdXR1YmVJZnJhbWVUYWJsZUl0ZW0oIGlmcmFtZUlkOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICByZXR1cm4gYFxyXG4gIDxkaXYgaWQ9XCIkeyBpZnJhbWVJZCB9SWZyYW1lVGFibGVJdGVtXCIgY2xhc3M9XCJ5dC1pZnJhbWUtdGFibGUtaXRlbS1jb250YWluZXJcIj5cclxuICA8L2Rpdj5cclxuICBgLnRyaW0oKTtcclxufSIsImltcG9ydCB7IGNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50LCBkZWxheSwgZXh0cmFjdFlvdVR1YmVJZCwgZ2V0RWxlbWVudERpbWVuc2lvbnMsIGhhbmRsZVByb21pc2UsIGlzVmFsaWRZb3VUdWJlVXJsLCBpc1ZhbGlkWW91dHViZVVybE9ySWQsIHBvbGxGb3JWYXJpYWJsZSwgcG9sbEZvclZhcmlhYmxlQXN5bmMsIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50LCB3YWl0VW50aWxFbGVtZW50RXhpc3RzIH0gZnJvbSAnLi4vLi4vVG9vbHMvRE9NVG9vbHMnO1xyXG5pbXBvcnQgeyBEcmFnZ2FibGVFbGVtZW50IH0gZnJvbSAnLi4vLi4vRXh0cmFzL0RyYWdnYWJsZUVsZW1lbnQnO1xyXG5pbXBvcnQgeyBEaW1lbnNpb25zLCBjbGFtcCB9IGZyb20gJy4uLy4uL1Rvb2xzL01hdGhUb29scyc7XHJcbmltcG9ydCB7IHRlbXBsYXRlQmFja2dyb3VuZFlvdXR1YmVJZnJhbWVFbGVtZW50IH0gZnJvbSAnLi9UZW1wbGF0ZXNZb3V0dWJlSWZyYW1lJztcclxuaW1wb3J0IHsgSU9iamVjdFRvU2V0T25Zb3V0dWJlSWZyYW1lc1JlYWR5IH0gZnJvbSAnLi9UeXBlcyc7XHJcbmltcG9ydCB7IFlvdXR1YmVJZnJhbWVTd2l0Y2hlciB9IGZyb20gJy4vWW91dHViZUlmcmFtZVN3aXRjaGVyJztcclxuaW1wb3J0IHsgWW91dHViZUlmcmFtZVN5bmMgfSBmcm9tICcuL1lvdXR1YmVJZnJhbWVTeW5jJztcclxuaW1wb3J0IHsgT2JqZWN0RXZlbnRMaXN0ZW5lciB9IGZyb20gJy4uLy4uL0V4dHJhcy9PYmplY3RFdmVudExpc3RlbmVyJztcclxuaW1wb3J0IHsgSU1lZGlhUGxheWVyRnVuY3Rpb25zIH0gZnJvbSAnLi4vVHlwZXMnO1xyXG5cclxuZXhwb3J0IHR5cGUgWW91dHViZUlmcmFtZU9wdGlvbnMgPSB7XHJcbiAgaWZyYW1lSWQ6IHN0cmluZztcclxuICB2aWRlb0lkOiBzdHJpbmc7XHJcbiAgZGltZW5zaW9ucz86IERpbWVuc2lvbnM7XHJcbiAgcGFyZW50RWxlbWVudD86IEhUTUxFbGVtZW50O1xyXG4gIGNsYXNzTGlzdD86IHN0cmluZ1tdO1xyXG4gIHN0YXJ0TXV0ZWQ/OiBib29sZWFuO1xyXG4gIHN0YXJ0c0F0PzogbnVtYmVyO1xyXG4gIGJsb2NrSW50ZXJhY3Rpb24/OiBib29sZWFuO1xyXG4gIHJlcGxheU9uRW5kPzogYm9vbGVhbjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFlvdXR1YmVJZnJhbWVDaGFuZ2VWaWRlb09wdGlvbnMgPSB7XHJcbiAgaWZyYW1lSWQ6IHN0cmluZztcclxuICB2aWRlb0lkOiBzdHJpbmc7XHJcbiAgc3RhcnRzQXQ/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcmFnZ2FibGVZb3V0dWJlSWZyYW1lKCB7IGlmcmFtZUlkLCB2aWRlb0lkLCBzdGFydHNBdCwgcGFyZW50RWxlbWVudCwgY2xhc3NMaXN0ID0gW10gfTogWW91dHViZUlmcmFtZU9wdGlvbnMgKSB7XHJcbiAgY29uc3QgaWZyYW1lQ29udHJvbGxlclJlc3VsdCA9IG5ldyBZb3V0dWJlSWZyYW1lKCB7IHN0YXJ0c0F0LCBpZnJhbWVJZCwgdmlkZW9JZCwgcGFyZW50RWxlbWVudCwgY2xhc3NMaXN0IH0gKTtcclxuXHJcbiAgY29uc3QgZHJhZ2dhYmxlUmVzdWx0ID0gbmV3IERyYWdnYWJsZUVsZW1lbnQoIHtcclxuICAgIGVsZW1lbnQ6IHBhcmVudEVsZW1lbnQgPz8gZG9jdW1lbnQuYm9keSxcclxuICAgIGFsbG93RHJhZ2dpbmdCeUlubmVyQ29udGVudDogdHJ1ZSxcclxuICAgIG9uRHJvcDogKCkgPT4ge1xyXG5cclxuICAgIH1cclxuICB9ICk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpZnJhbWVDb250cm9sbGVyOiBpZnJhbWVDb250cm9sbGVyUmVzdWx0LFxyXG4gICAgZHJhZ2dhYmxlOiBkcmFnZ2FibGVSZXN1bHRcclxuICB9O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFlvdXR1YmVJZnJhbWUgZXh0ZW5kcyBPYmplY3RFdmVudExpc3RlbmVyIGltcGxlbWVudHMgSU1lZGlhUGxheWVyRnVuY3Rpb25zIHtcclxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGFyck9iamVjdFRvU2V0T25FdmVyeUlmcmFtZVJlYWR5OiBJT2JqZWN0VG9TZXRPbllvdXR1YmVJZnJhbWVzUmVhZHlbXSA9IFtdO1xyXG5cclxuICBwcm90ZWN0ZWQgc3RhdGljIF9kaWN0WW91dHViZUlmcmFtZUJ5SWQ6IE1hcDxzdHJpbmcsIFlvdXR1YmVJZnJhbWU+ID0gbmV3IE1hcCgpO1xyXG4gIHByb3RlY3RlZCBzdGF0aWMgX2FycllvdXR1YmVJZnJhbWVJZFJlYWR5OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBwdWJsaWMgcGxheWVyOiBhbnkgfCBudWxsO1xyXG4gIHByb3RlY3RlZCBfaXNQbGF5ZXJSZWFkeTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBwdWJsaWMgaWQ6IHN0cmluZztcclxuICBwcml2YXRlIF92aWRlb0lkOiBzdHJpbmc7XHJcbiAgcHVibGljIHZpZGVvTmFtZTogc3RyaW5nID0gJyc7XHJcbiAgcHVibGljIHZpZGVvVGh1bWI6IHN0cmluZyA9ICcnO1xyXG4gIHB1YmxpYyBjaGFubmVsVVJMOiBzdHJpbmcgPSAnJztcclxuICBwdWJsaWMgY2hhbm5lbE5hbWU6IHN0cmluZyA9ICcnO1xyXG5cclxuICBwcm90ZWN0ZWQgX2lmcmFtZUVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIC8vIEEgZGl2IHdoaWNoIGlzIGNyZWF0ZWQgYWZ0ZXIgaWZyYW1lIHJlbmRlciBhbmQgaG9sZHMgaWZyYW1lIGVsZW1lbnRcclxuICBwcm90ZWN0ZWQgX2lmcmFtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIC8vIFRoZSBlbGVtZW50IHRoYXQgaG9sZHMgeyBfaWZyYW1lQ29udGFpbmVyIH1cclxuICBwcm90ZWN0ZWQgX2lmcmFtZVBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICBwcm90ZWN0ZWQgX2lzUGxheWluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByb3RlY3RlZCBfZGltZW5zaW9uczogRGltZW5zaW9ucztcclxuXHJcbiAgLy8vIENhbiBiZSB1c2VkIHRvIGRyYWcsIGlzIGFuIGludmlzaWJsZSBkaXYgcGxhY2VkIGF0IHRoZSB0b3Agb2YgdGhlIGNvbnRhaW5lclxyXG4gIHByb3RlY3RlZCB0b3BEaXY/OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgcHJpdmF0ZSBfc3RhcnRzQXQ6IG51bWJlcjtcclxuXHJcbiAgcHJvdGVjdGVkIF9ibG9ja0ludGVyYWN0aW9uOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJvdGVjdGVkIF9kaXZCbG9ja0ludGVyYWN0aW9uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICBwcm90ZWN0ZWQgX3N0YXJ0TXV0ZWQ6IGJvb2xlYW47XHJcbiAgcHVibGljIF9wbGF5aW5nT2JzZXJ2ZXJJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJvdGVjdGVkIF9ldmVudExpc3RlbmVyOiBPYmplY3RFdmVudExpc3RlbmVyID0gbmV3IE9iamVjdEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcbiAgY29uc3RydWN0b3IoIG9wdGlvbnM6IFlvdXR1YmVJZnJhbWVPcHRpb25zICkge1xyXG4gICAgaWYgKCBZb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuaGFzKCBvcHRpb25zLmlmcmFtZUlkICkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIGlmcmFtZSB0aGVyZSdzIGFscmVhZHkgYW4gaWZyYW1lIHdpdGggdGhpcyBpZC5cIiApO1xyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5pZCA9IG9wdGlvbnMuaWZyYW1lSWQ7XHJcbiAgICB0aGlzLl9zdGFydHNBdCA9IG9wdGlvbnMuc3RhcnRzQXQgPz8gMDtcclxuICAgIHRoaXMuX3ZpZGVvSWQgPSBvcHRpb25zLnZpZGVvSWQ7XHJcblxyXG4gICAgdGhpcy5fc3RhcnRNdXRlZCA9IG9wdGlvbnMuc3RhcnRNdXRlZCA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMuX2Jsb2NrSW50ZXJhY3Rpb24gPSBvcHRpb25zLmJsb2NrSW50ZXJhY3Rpb24gPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyID0gWW91dHViZUlmcmFtZS5nZXRZb3V0dWJlSWZyYW1lRWxlbWVudCgge1xyXG4gICAgICBpZnJhbWVJZDogb3B0aW9ucy5pZnJhbWVJZCxcclxuICAgICAgY2xhc3NMaXN0OiBvcHRpb25zLmNsYXNzTGlzdFxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQgPSBZb3V0dWJlSWZyYW1lLnNldHVwUGFyZW50RnJvbVlvdXR1YmVJZnJhbWUoIHtcclxuICAgICAgcGFyZW50RWxlbWVudDogb3B0aW9ucy5wYXJlbnRFbGVtZW50ID8/IGRvY3VtZW50LmJvZHksXHJcbiAgICAgIGlmcmFtZUNvbnRhaW5lcjogdGhpcy5faWZyYW1lQ29udGFpbmVyXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zZXRDbGFzc2VzSWZyYW1lUGF1c2VkKCk7XHJcblxyXG4gICAgdGhpcy5fZGltZW5zaW9ucyA9IG9wdGlvbnMuZGltZW5zaW9ucyA/PyBnZXRFbGVtZW50RGltZW5zaW9ucyggdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudCApO1xyXG5cclxuICAgIFlvdXR1YmVJZnJhbWUuX2RpY3RZb3V0dWJlSWZyYW1lQnlJZC5zZXQoIG9wdGlvbnMuaWZyYW1lSWQsIHRoaXMgKTtcclxuICAgIHRoaXMuc2V0VmlkZW9JbmZvKCkudGhlbiggKCkgPT4ge1xyXG4gICAgICB0aGlzLnNldEV4dGVybmFsSFRNTEVsZW1lbnRzQXR0cmlidXRlcygpO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBuYW1lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudmlkZW9OYW1lO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBjb250YWluZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWZyYW1lQ29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCB2aWRlb0lkKCkge1xyXG4gICAgcmV0dXJuIGV4dHJhY3RZb3VUdWJlSWQoIHRoaXMuX3ZpZGVvSWQgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBkZXN0cm95KCkge1xyXG4gICAgdGhpcy5wbGF5ZXIuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5jb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICBZb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuZGVsZXRlKCB0aGlzLmlkICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHNldFZpZGVvSW5mbygpIHtcclxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLmdldFZpZGVvSW5mbygpO1xyXG4gICAgdGhpcy52aWRlb05hbWUgPSBpbmZvICYmIGluZm8udGl0bGUgPyBpbmZvLnRpdGxlIGFzIHN0cmluZyA6ICcnO1xyXG4gICAgdGhpcy5jaGFubmVsTmFtZSA9IGluZm8gJiYgaW5mby5hdXRob3JfbmFtZSA/IGluZm8uYXV0aG9yX25hbWUgYXMgc3RyaW5nIDogJyc7XHJcbiAgICB0aGlzLnZpZGVvVGh1bWIgPSBpbmZvICYmIGluZm8udGh1bWJuYWlsX3VybCA/IGluZm8udGh1bWJuYWlsX3VybCBhcyBzdHJpbmcgOiAnJztcclxuICAgIHRoaXMuY2hhbm5lbFVSTCA9IGluZm8gJiYgaW5mby5hdXRob3JfdXJsID8gaW5mby5hdXRob3JfdXJsIGFzIHN0cmluZyA6ICcnO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGNoYW5nZVZpZGVvKCBvcHRpb25zOiBZb3V0dWJlSWZyYW1lQ2hhbmdlVmlkZW9PcHRpb25zICk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgaWYgKCAhaXNWYWxpZFlvdXR1YmVVcmxPcklkKCBvcHRpb25zLnZpZGVvSWQgKSApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHdoaWxlICggIXRoaXMucGxheWVyIHx8ICF0aGlzLnBsYXllci5sb2FkVmlkZW9CeUlkICkge1xyXG4gICAgICBhd2FpdCBkZWxheSggMTAwICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wcmVwYXJlT3B0aW9ucyggb3B0aW9ucyApO1xyXG4gICAgYXdhaXQgdGhpcy5sb2FkVmlkZW8oKTtcclxuXHJcbiAgICB0aGlzLnBsYXllci5zZWVrVG8oIHRoaXMuc3RhcnRzQXQsIHRydWUgKTtcclxuICAgIGlmICggdGhpcy5pc1BsYXlpbmcgKSB7XHJcbiAgICAgIHRoaXMucGxheVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnBhdXNlV2l0aG91dFRyaWdnZXJFdmVudHMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJlcGFyZU9wdGlvbnMoIG9wdGlvbnM6IFlvdXR1YmVJZnJhbWVDaGFuZ2VWaWRlb09wdGlvbnMgKSB7XHJcbiAgICB0aGlzLmlkID0gb3B0aW9ucy5pZnJhbWVJZDtcclxuICAgIHRoaXMuX3ZpZGVvSWQgPSBvcHRpb25zLnZpZGVvSWQ7XHJcbiAgICB0aGlzLnN0YXJ0c0F0ID0gb3B0aW9ucy5zdGFydHNBdCA/PyB0aGlzLnN0YXJ0c0F0O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBsb2FkVmlkZW8oKSB7XHJcbiAgICB0aGlzLnBsYXllci5sb2FkVmlkZW9CeUlkKCB7XHJcbiAgICAgICd2aWRlb0lkJzogdGhpcy52aWRlb0lkLFxyXG4gICAgICAnc3RhcnRTZWNvbmRzJzogdGhpcy5zdGFydHNBdCxcclxuICAgICAgJ3N1Z2dlc3RlZFF1YWxpdHknOiAnaGlnaHJlcydcclxuICAgIH0gKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLnNldFZpZGVvSW5mbygpO1xyXG4gICAgdGhpcy5zZXRFeHRlcm5hbEhUTUxFbGVtZW50c0F0dHJpYnV0ZXMoKTtcclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgYXN5bmMgZ2V0VmlkZW9JbmZvKCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVQcm9taXNlPFJlc3BvbnNlPiggZmV0Y2goIGBodHRwczovL3d3dy55b3V0dWJlLmNvbS9vZW1iZWQ/dXJsPSR7IHRoaXMudmlkZW9VUkwgfSZmb3JtYXQ9anNvbmAgKSApO1xyXG5cclxuICAgIGlmICggcmVzcG9uc2UuZXJyb3IgKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoIHJlc3BvbnNlLmVycm9yICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuZGF0YSgpLmpzb24oKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBvblBsYXllclJlYWR5KCBldmVudDogYW55ICkge1xyXG4gICAgaWYgKCB0aGlzLl9zdGFydE11dGVkICkge1xyXG4gICAgICB0aGlzLnBsYXllci5tdXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgWW91dHViZUlmcmFtZS5fYXJyWW91dHViZUlmcmFtZUlkUmVhZHkucHVzaCggdGhpcy5pZCApO1xyXG4gICAgdGhpcy5faWZyYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCB0aGlzLmlkICkhO1xyXG5cclxuICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBhdXNlZCgpO1xyXG5cclxuICAgIHRoaXMucGxheWVyLnNldFBsYXliYWNrUXVhbGl0eSggJ2hpZ2hyZXMnICk7XHJcbiAgICB0aGlzLnBsYXllci5zZWVrVG8oIHRoaXMuX3N0YXJ0c0F0ID8/IDAsIHRydWUgKTtcclxuICAgIHRoaXMucGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgIHRoaXMuX2lzUGxheWVyUmVhZHkgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaWZyYW1lcmVhZHknLCB0aGlzICk7XHJcblxyXG4gICAgWW91dHViZUlmcmFtZS5jaGVja0lmRXZlcnlJZnJhbWVJc1JlYWR5KCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgb25QbGF5ZXJTdGF0ZUNoYW5nZSggZXZlbnQ6IGFueSApIHtcclxuICAgIGlmICggZXZlbnQuZGF0YSA9PT0gWW91dHViZUlmcmFtZS5feW91dHViZUFQSVJlZmVyZW5jZS5QbGF5ZXJTdGF0ZS5QTEFZSU5HICkge1xyXG4gICAgICB0aGlzLl9pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLl9wbGF5aW5nT2JzZXJ2ZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCAoKSA9PiB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbnBsYXlpbmcnLCB0aGlzLCB0aGlzLmlzUGxheWluZyApLCAxMDAgKTtcclxuICAgICAgdGhpcy5zZXRDbGFzc2VzSWZyYW1lUGxheWluZygpO1xyXG4gICAgfSBlbHNlIGlmICggdGhpcy5fcGxheWluZ09ic2VydmVySW50ZXJ2YWwgKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoIHRoaXMuX3BsYXlpbmdPYnNlcnZlckludGVydmFsICk7XHJcbiAgICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBhdXNlZCgpO1xyXG4gICAgICB0aGlzLl9pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fcGxheWluZ09ic2VydmVySW50ZXJ2YWwgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ3BsYXllcnN0YXRlY2hhbmdlJywgdGhpcywgdGhpcy5pc1BsYXlpbmcgKTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucGxheWVyc3RhdGVjaGFuZ2UnLCB0aGlzLCB0aGlzLmlzUGxheWluZyApO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHNldENsYXNzZXNJZnJhbWVQbGF5aW5nKCkge1xyXG4gICAgaWYgKCB0aGlzLl9pZnJhbWVFbGVtZW50ICkge1xyXG4gICAgICB0aGlzLl9pZnJhbWVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoICd5dC1wYXVzZWQnICk7XHJcbiAgICAgIHRoaXMuX2lmcmFtZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3l0LXBsYXlpbmcnICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICd5dC1wYXVzZWQnICk7XHJcbiAgICB0aGlzLl9pZnJhbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ3l0LXBsYXlpbmcnICk7XHJcblxyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAneXQtcGF1c2VkJyApO1xyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCAneXQtcGxheWluZycgKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzZXRDbGFzc2VzSWZyYW1lUGF1c2VkKCkge1xyXG4gICAgaWYgKCB0aGlzLl9pZnJhbWVFbGVtZW50ICkge1xyXG4gICAgICB0aGlzLl9pZnJhbWVFbGVtZW50LmNsYXNzTGlzdC5hZGQoICd5dC1wYXVzZWQnICk7XHJcbiAgICAgIHRoaXMuX2lmcmFtZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ3l0LXBsYXlpbmcnICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoICd5dC1wYXVzZWQnICk7XHJcbiAgICB0aGlzLl9pZnJhbWVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSggJ3l0LXBsYXlpbmcnICk7XHJcblxyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCAneXQtcGF1c2VkJyApO1xyXG4gICAgdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAneXQtcGxheWluZycgKTtcclxuICB9XHJcblxyXG5cclxuICBwcm90ZWN0ZWQgb25FdmVyeVlvdXR1YmVJZnJhbWVSZWFkeSgpIHtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uZXZlcnl5b3V0dWJlaWZyYW1lcmVhZHknICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGRpdkJsb2NrSW50ZXJhY3Rpb24oKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCB2aWRlb1VSTCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PSR7IHRoaXMudmlkZW9JZCB9YDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcGFyZW50RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5faWZyYW1lUGFyZW50RWxlbWVudDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgaWZyYW1lRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICBpZiAoICF0aGlzLl9pZnJhbWVFbGVtZW50ICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSWZyYW1lIHdhcyBjYWxsZWQgYnV0IGl0J3Mgbm90IHJlYWR5LlwiICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2lmcmFtZUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGlzUGxheWVyUmVhZHkoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNQbGF5ZXJSZWFkeTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgZHVyYXRpb24oKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBsYXllci5nZXREdXJhdGlvbigpIC0gdGhpcy5fc3RhcnRzQXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHBsYXllckR1cmF0aW9uKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXIuZ2V0RHVyYXRpb24oKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgY3VycmVudFRpbWUoIHQ6IG51bWJlciApIHtcclxuICAgIHRoaXMuc2VlayggdCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBjdXJyZW50VGltZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucGxheWVyLmdldEN1cnJlbnRUaW1lKCkgLSB0aGlzLl9zdGFydHNBdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcGxheWVyQ3VycmVudFRpbWUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBwcm9ncmVzc1BlcmNlbnQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRUaW1lIC8gdGhpcy5kdXJhdGlvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcGxheWVyUHJvZ3Jlc3NQZXJjZW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXJDdXJyZW50VGltZSAvIHRoaXMucGxheWVyRHVyYXRpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHN0YXJ0TXV0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3RhcnRNdXRlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgaXNQbGF5aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzUGxheWluZztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgZGltZW5zaW9ucygpOiBEaW1lbnNpb25zIHtcclxuICAgIHJldHVybiB0aGlzLl9kaW1lbnNpb25zO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBzdGFydHNBdCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGNsYW1wKCB0aGlzLl9zdGFydHNBdCwgMCwgdGhpcy5fc3RhcnRzQXQgKTtcclxuICB9XHJcbiAgcHVibGljIHNldCBzdGFydHNBdCggdmFsOiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLl9zdGFydHNBdCA9IGNsYW1wKCB2YWwsIDAsIHZhbCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHRvZ2dsZSgpOiBJTWVkaWFQbGF5ZXJGdW5jdGlvbnMge1xyXG4gICAgaWYgKCB0aGlzLmlzUGxheWluZyApIHtcclxuICAgICAgdGhpcy5wYXVzZSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wbGF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGxheSgpIHtcclxuICAgIHRoaXMucGxheVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcblxyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25wbGF5JywgdGhpcyApO1xyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpIHtcclxuICAgIHRoaXMucGxheWVyLnBsYXlWaWRlbygpO1xyXG4gICAgdGhpcy5faXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBsYXlpbmcoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYXVzZSgpIHtcclxuICAgIHRoaXMucGF1c2VXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25wYXVzZScsIHRoaXMgKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCkge1xyXG4gICAgdGhpcy5wbGF5ZXIucGF1c2VWaWRlbygpO1xyXG4gICAgdGhpcy5faXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNldENsYXNzZXNJZnJhbWVQYXVzZWQoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZWVrKCBzZWVrVGltZTogbnVtYmVyLCByZWxvYWRCdWZmZXI6IGJvb2xlYW4gPSBmYWxzZSwgY29uc2lkZXJTdGFydHNBdDogYm9vbGVhbiA9IGZhbHNlICkge1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25zZWVrJywgc2Vla1RpbWUsIHJlbG9hZEJ1ZmZlciwgY29uc2lkZXJTdGFydHNBdCwgdGhpcyApO1xyXG5cclxuICAgIHNlZWtUaW1lICs9IGNvbnNpZGVyU3RhcnRzQXQgPyB0aGlzLl9zdGFydHNBdCA6IDA7XHJcbiAgICB0aGlzLnBsYXllci5zZWVrVG8oIHNlZWtUaW1lLCByZWxvYWRCdWZmZXIgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG11dGUoKSB7XHJcbiAgICB0aGlzLnBsYXllci5tdXRlKCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyB1bm11dGUoKSB7XHJcbiAgICB0aGlzLnBsYXllci51bm11dGUoKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNoZWNrSWZFdmVyeUlmcmFtZUlzUmVhZHkoKSB7XHJcbiAgICBjb25zdCBhcnJFdmVyeUlmcmFtZUlkID0gWy4uLllvdXR1YmVJZnJhbWUuX2RpY3RZb3V0dWJlSWZyYW1lQnlJZC5rZXlzKCldO1xyXG4gICAgY29uc3QgaGFzSWZyYW1lTm90UmVhZHlZZXQgPSBhcnJFdmVyeUlmcmFtZUlkLnNvbWUoIHIgPT4gIXRoaXMuX2FycllvdXR1YmVJZnJhbWVJZFJlYWR5LmluY2x1ZGVzKCByICkgKTtcclxuXHJcbiAgICBpZiAoICFoYXNJZnJhbWVOb3RSZWFkeVlldCApIHtcclxuICAgICAgdGhpcy5hcnJPYmplY3RUb1NldE9uRXZlcnlJZnJhbWVSZWFkeS5mb3JFYWNoKCBvID0+IG8uc2V0dXAoIFlvdXR1YmVJZnJhbWUuX2RpY3RZb3V0dWJlSWZyYW1lQnlJZCApICk7XHJcblxyXG4gICAgICBZb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuZm9yRWFjaCggKCB2YWwsIGtleSApID0+IHtcclxuICAgICAgICB2YWwub25FdmVyeVlvdXR1YmVJZnJhbWVSZWFkeSgpO1xyXG4gICAgICB9ICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0WW91dHViZUlmcmFtZUVsZW1lbnQoIHsgaWZyYW1lSWQsIGNsYXNzTGlzdCB9OiB7IGlmcmFtZUlkOiBzdHJpbmc7IGNsYXNzTGlzdD86IHN0cmluZ1tdOyB9ICkge1xyXG4gICAgY29uc3QgY29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuICAgIGNvbnRhaW5lckRpdi5jbGFzc0xpc3QuYWRkKCAneXQtaWZyYW1lLWNvbnRhaW5lcicgKTtcclxuICAgIGlmICggY2xhc3NMaXN0ICkge1xyXG4gICAgICBjb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZCggLi4uY2xhc3NMaXN0ICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbmVyRGl2LmlkID0gYGNvbnRhaW5lcllvdXR1YmVJZnJhbWUkeyBpZnJhbWVJZCB9YDtcclxuICAgIGNvbnRhaW5lckRpdi5pbnNlcnRBZGphY2VudEhUTUwoICdhZnRlcmJlZ2luJywgdGVtcGxhdGVCYWNrZ3JvdW5kWW91dHViZUlmcmFtZUVsZW1lbnQoIGlmcmFtZUlkICkgKTtcclxuICAgIHJldHVybiBjb250YWluZXJEaXY7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0dXBQYXJlbnRGcm9tWW91dHViZUlmcmFtZSggeyBwYXJlbnRFbGVtZW50LCBpZnJhbWVDb250YWluZXIgfTogeyBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudDsgaWZyYW1lQ29udGFpbmVyOiBIVE1MRWxlbWVudDsgfSApIHtcclxuICAgIGNvbnN0IGlmcmFtZVBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50ID8/IGRvY3VtZW50LmJvZHk7XHJcbiAgICBpZnJhbWVQYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoICd5dC1pZnJhbWUtcGFyZW50JyApO1xyXG4gICAgaWZyYW1lUGFyZW50RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdhZnRlcmJlZ2luJywgaWZyYW1lQ29udGFpbmVyICk7XHJcbiAgICByZXR1cm4gaWZyYW1lUGFyZW50RWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vIFNldHMgZGl2IHRvIGJsb2NrIGludGVyYWN0aW9uLCB0b3AgZGl2LCBjb250YWluZXIgYW5kIGFueSBvdGhlciBlbGVtZW50IHRoYXQgaXMgbm90IHRoZSBtYWluIGlmcmFtZVxyXG4gIHByaXZhdGUgc2V0RXh0ZXJuYWxIVE1MRWxlbWVudHMoKSB7XHJcbiAgICB0aGlzLmNyZWF0ZUludmlzaWJsZURpdlRvcCgpO1xyXG4gICAgdGhpcy5jcmVhdGVJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5zZXRFeHRlcm5hbEhUTUxFbGVtZW50c0F0dHJpYnV0ZXMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RXh0ZXJuYWxIVE1MRWxlbWVudHNBdHRyaWJ1dGVzKCkge1xyXG4gICAgdGhpcy5zZXRJZnJhbWVDb250YWluZXJBdHRyaWJ1dGVzKCk7XHJcbiAgICB0aGlzLnNldFRvcERpdkF0dHJpYnV0ZXMoKTtcclxuICAgIHRoaXMuc2V0RGl2QmxvY2tJbnRlcmFjdGlvbkF0dHJpYnV0ZXMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlSW52aXNpYmxlRGl2VG9wKCkge1xyXG4gICAgdGhpcy50b3BEaXYgPSBZb3V0dWJlSWZyYW1lLmdldEludmlzaWJsZVRvcERpdiggdGhpcyApO1xyXG4gICAgdGhpcy50b3BEaXYuc3R5bGUuekluZGV4ID0gJzk5MCc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uID0gWW91dHViZUlmcmFtZS5nZXRJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCB0aGlzICk7XHJcblxyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5zdHlsZS5kaXNwbGF5ID0gdGhpcy5fYmxvY2tJbnRlcmFjdGlvbiA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLnN0eWxlLnpJbmRleCA9ICc5OTUnO1xyXG5cclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBldnQgKSA9PiB7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uY2xpY2tpbnRlcmFjdGlvbmJsb2NrZWQnLCB0aGlzLCB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaW50ZXJhY3Rpb25ibG9ja2VkJywgdGhpcywgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbiApO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXREaXZCbG9ja0ludGVyYWN0aW9uQXR0cmlidXRlcygpIHtcclxuICAgIGlmICggIXRoaXMuZGl2QmxvY2tJbnRlcmFjdGlvbiApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLmRpdkJsb2NrSW50ZXJhY3Rpb24sIHRoaXMuX3ZpZGVvSW5mb0F0dHJpYnV0ZUxpc3QgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0SWZyYW1lQ29udGFpbmVyQXR0cmlidXRlcygpIHtcclxuICAgIGlmICggIXRoaXMuX2lmcmFtZUNvbnRhaW5lciApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLl9pZnJhbWVDb250YWluZXIsIHRoaXMuX3ZpZGVvSW5mb0F0dHJpYnV0ZUxpc3QgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0VG9wRGl2QXR0cmlidXRlcygpIHtcclxuICAgIGlmICggIXRoaXMudG9wRGl2ICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQoIHRoaXMudG9wRGl2LCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IGJsb2NrSW50ZXJhY3Rpb24oIHZhbDogYm9vbGVhbiApIHtcclxuICAgIHRoaXMuX2Jsb2NrSW50ZXJhY3Rpb24gPSB2YWw7XHJcblxyXG4gICAgaWYgKCB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uICkge1xyXG4gICAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLnN0eWxlLmRpc3BsYXkgPSB0aGlzLl9ibG9ja0ludGVyYWN0aW9uID8gJ2Jsb2NrJyA6ICdub25lJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBpbml0UGxheWVyKCkge1xyXG4gICAgdGhpcy5wbGF5ZXIgPSBuZXcgWW91dHViZUlmcmFtZS5feW91dHViZUFQSVJlZmVyZW5jZS5QbGF5ZXIoIHRoaXMuaWQsIHtcclxuICAgICAgdmlkZW9JZDogdGhpcy52aWRlb0lkLFxyXG4gICAgICB3aWR0aDogdGhpcy5kaW1lbnNpb25zLndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHRoaXMuZGltZW5zaW9ucy5oZWlnaHQsXHJcbiAgICAgIHBsYXllclZhcnM6IHtcclxuICAgICAgICAncmVsJzogMCwgICAgICAgICAgICAvLyBEZXNhdGl2YSB2w61kZW9zIHJlbGFjaW9uYWRvc1xyXG4gICAgICAgICdpdl9sb2FkX3BvbGljeSc6IDMsIC8vIERlc2F0aXZhIHN1Z2VzdMO1ZXMgZGUgdsOtZGVvcyBkdXJhbnRlIGEgcGF1c2FcclxuICAgICAgICAnc2hvd2luZm8nOiAwLCAgICAgICAvLyBSZW1vdmUgaW5mb3JtYcOnw7VlcyBkbyB2w61kZW8gKHTDrXR1bG8sIGV0Yy4pXHJcbiAgICAgICAgJ2NvbnRyb2xzJzogMCwgICAgICAgLy8gUmVtb3ZlIG9zIGNvbnRyb2xlcyBkbyBwbGF5ZXJcclxuICAgICAgICAnYXV0b3BsYXknOiAwICAgICAgICAvLyBEZXNhdGl2YSBhIHJlcHJvZHXDp8OjbyBhdXRvbcOhdGljYVxyXG4gICAgICB9LFxyXG4gICAgICBldmVudHM6IHtcclxuICAgICAgICAnb25SZWFkeSc6IHRoaXMub25QbGF5ZXJSZWFkeS5iaW5kKCB0aGlzICksXHJcbiAgICAgICAgJ29uU3RhdGVDaGFuZ2UnOiB0aGlzLm9uUGxheWVyU3RhdGVDaGFuZ2UuYmluZCggdGhpcyApXHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzdGF0aWMgX3lvdXR1YmVBUElSZWZlcmVuY2U6IGFueTtcclxuXHJcbiAgcHJpdmF0ZSBnZXQgX3ZpZGVvSW5mb0F0dHJpYnV0ZUxpc3QoKTogW3N0cmluZywgc3RyaW5nXVtdIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIFsneXQtaWZyYW1lLWlkJywgdGhpcy5pZF0sXHJcbiAgICAgIFsneXQtaWZyYW1lLXZpZGVvLW5hbWUnLCB0aGlzLnZpZGVvTmFtZV0sXHJcbiAgICAgIFsneXQtaWZyYW1lLXZpZGVvLWNoYW5uZWwtbmFtZScsIHRoaXMuY2hhbm5lbE5hbWVdLFxyXG4gICAgICBbJ3l0LWlmcmFtZS12aWRlby10aHVtYi11cmwnLCB0aGlzLnZpZGVvVGh1bWJdLFxyXG4gICAgICBbJ3l0LWlmcmFtZS12aWRlby1jaGFubmVsLXVybCcsIHRoaXMuY2hhbm5lbFVSTF1cclxuICAgIF1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBidWlsZFNpbmdsZUlmcmFtZSggeW91dHViZUlmcmFtZTogWW91dHViZUlmcmFtZSApIHtcclxuICAgIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAneXRJZnJhbWVBUElTY3JpcHRUYWcnICkgKSB7XHJcbiAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc2NyaXB0JyApO1xyXG4gICAgICB0YWcuaWQgPSAneXRJZnJhbWVBUElTY3JpcHRUYWcnO1xyXG5cclxuICAgICAgdGFnLnNyYyA9IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaVwiO1xyXG4gICAgICB2YXIgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ3NjcmlwdCcgKVswXTtcclxuICAgICAgaWYgKCBmaXJzdFNjcmlwdFRhZyAmJiBmaXJzdFNjcmlwdFRhZy5wYXJlbnROb2RlICkge1xyXG4gICAgICAgIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCB0YWcsIGZpcnN0U2NyaXB0VGFnICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGF3YWl0IHdhaXRVbnRpbEVsZW1lbnRFeGlzdHMoICcjeXRJZnJhbWVBUElTY3JpcHRUYWcnICk7XHJcblxyXG4gICAgYXdhaXQgcG9sbEZvclZhcmlhYmxlQXN5bmM8YW55PiggJ1lUJyxcclxuICAgICAgKCB2YWx1ZTogYW55ICkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUuUGxheWVyID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAmJiB2YWx1ZS5QbGF5ZXIucHJvdG90eXBlXHJcbiAgICAgICAgICAmJiB2YWx1ZS5QbGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID09PSB2YWx1ZS5QbGF5ZXJcclxuICAgICAgICAgICYmIHZhbHVlLmxvYWRlZDtcclxuICAgICAgfSxcclxuICAgICAgKCB2YWx1ZSApID0+IHtcclxuICAgICAgICBZb3V0dWJlSWZyYW1lLl95b3V0dWJlQVBJUmVmZXJlbmNlID0gdmFsdWU7XHJcbiAgICAgICAgeW91dHViZUlmcmFtZS5idWlsZCgpO1xyXG4gICAgICB9ICk7XHJcblxyXG4gICAgcmV0dXJuIHlvdXR1YmVJZnJhbWU7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYnVpbGRJZnJhbWVzKCkge1xyXG4gICAgaWYgKCAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICd5dElmcmFtZUFQSVNjcmlwdFRhZycgKSApIHtcclxuICAgICAgdmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdzY3JpcHQnICk7XHJcbiAgICAgIHRhZy5pZCA9ICd5dElmcmFtZUFQSVNjcmlwdFRhZyc7XHJcblxyXG4gICAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpXCI7XHJcbiAgICAgIHZhciBmaXJzdFNjcmlwdFRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnc2NyaXB0JyApWzBdO1xyXG4gICAgICBpZiAoIGZpcnN0U2NyaXB0VGFnICYmIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUgKSB7XHJcbiAgICAgICAgZmlyc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIHRhZywgZmlyc3RTY3JpcHRUYWcgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdhaXRVbnRpbEVsZW1lbnRFeGlzdHMoICcjeXRJZnJhbWVBUElTY3JpcHRUYWcnICkudGhlbiggKCkgPT4ge1xyXG4gICAgICBwb2xsRm9yVmFyaWFibGU8YW55PiggJ1lUJyxcclxuICAgICAgICAoIHZhbHVlOiBhbnkgKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlLlBsYXllciA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICAmJiB2YWx1ZS5QbGF5ZXIucHJvdG90eXBlXHJcbiAgICAgICAgICAgICYmIHZhbHVlLlBsYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPT09IHZhbHVlLlBsYXllclxyXG4gICAgICAgICAgICAmJiB2YWx1ZS5sb2FkZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoIHZhbHVlICkgPT4ge1xyXG4gICAgICAgICAgWW91dHViZUlmcmFtZS5feW91dHViZUFQSVJlZmVyZW5jZSA9IHZhbHVlO1xyXG4gICAgICAgICAgWW91dHViZUlmcmFtZS5zZXRZb3V0dWJlSWZyYW1lRWxlbWVudHMoKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYnVpbGQoKSB7XHJcbiAgICB0aGlzLnNldEV4dGVybmFsSFRNTEVsZW1lbnRzKCk7XHJcbiAgICB0aGlzLmluaXRQbGF5ZXIoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRZb3V0dWJlSWZyYW1lRWxlbWVudHMoKSB7XHJcbiAgICB0aGlzLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuZm9yRWFjaCggKCB2YWwsIGtleSApID0+IHtcclxuICAgICAgaWYgKCAhdmFsLmlzUGxheWVyUmVhZHkgKSB7XHJcbiAgICAgICAgdmFsLmJ1aWxkKCk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRJbnZpc2libGVUb3BEaXYoIHl0SWZyYW1lOiBZb3V0dWJlSWZyYW1lICk6IEhUTUxFbGVtZW50IHtcclxuICAgIHJldHVybiBjcmVhdGVJbnZpc2libGVEaXZBYm92ZVBhcmVudCgge1xyXG4gICAgICBwYXJlbnRFbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggeXRJZnJhbWUuaWQgKSEucGFyZW50RWxlbWVudCEsXHJcbiAgICAgIGlkOiBgaW52aXNpYmxlVG9wRGl2SG9sZFRvRHJhZyR7IHl0SWZyYW1lLmlkIH1gLFxyXG4gICAgICBwb3NpdGlvbjogeyB0b3A6IDAsIGxlZnQ6IDAgfSxcclxuICAgICAgZGltZW5zaW9uczogeyB3aWR0aDogeXRJZnJhbWUuZGltZW5zaW9ucy53aWR0aCwgaGVpZ2h0OiB5dElmcmFtZS5kaW1lbnNpb25zLmhlaWdodCAqIDAuMiB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc3RhdGljIGdldEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oIHl0SWZyYW1lOiBZb3V0dWJlSWZyYW1lICk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGVsZW1lbnRJbnZpc2libGVEaXYgPSBjcmVhdGVJbnZpc2libGVEaXZBYm92ZVBhcmVudCgge1xyXG4gICAgICBwYXJlbnRFbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggeXRJZnJhbWUuaWQgKSEucGFyZW50RWxlbWVudCEsXHJcbiAgICAgIGlkOiBgaW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiR7IHl0SWZyYW1lLmlkIH1gLFxyXG4gICAgICBwb3NpdGlvbjogeyB0b3A6IDAsIGxlZnQ6IDAgfSxcclxuICAgICAgZGltZW5zaW9uczogeyB3aWR0aDogeXRJZnJhbWUuZGltZW5zaW9ucy53aWR0aCwgaGVpZ2h0OiB5dElmcmFtZS5kaW1lbnNpb25zLmhlaWdodCB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgZWxlbWVudEludmlzaWJsZURpdi5jbGFzc0xpc3QuYWRkKCAneXQtZGl2LWJsb2NrLWludGVyYWN0aW9uJyApO1xyXG5cclxuICAgIHJldHVybiBlbGVtZW50SW52aXNpYmxlRGl2O1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCB7IFlvdXR1YmVJZnJhbWVTd2l0Y2hlciwgWW91dHViZUlmcmFtZVN5bmMgfTsiLCJcclxuaW50ZXJmYWNlIFN0cmluZyB7XHJcbiAgdHJ1bmNhdGUoIG1heDogbnVtYmVyLCBkZWNvcmF0b3I6IHN0cmluZyApOiBzdHJpbmc7XHJcbiAgcmVtb3ZlQWNjZW50cygpOiBzdHJpbmc7XHJcbiAgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKCk6IHN0cmluZztcclxuICB6ZXJvQmVmb3JlKCk6IHN0cmluZztcclxuICBpc051bGxPckVtcHR5KCk6IGJvb2xlYW47XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUuaXNOdWxsT3JFbXB0eSA9IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcclxuICByZXR1cm4gdHlwZW9mIHRoaXMgIT09ICdzdHJpbmcnICYmICF0aGlzICYmIHRoaXMgIT09ICcnO1xyXG59O1xyXG5cclxuU3RyaW5nLnByb3RvdHlwZS50cnVuY2F0ZSA9IGZ1bmN0aW9uICggbWF4OiBudW1iZXIsIGRlY29yYXRvcjogc3RyaW5nID0gJy4uLicgKTogc3RyaW5nIHtcclxuICByZXR1cm4gKCB0aGlzLmxlbmd0aCA+IG1heCA/IHRoaXMuc3Vic3RyaW5nKCAwLCBtYXggKSArIGRlY29yYXRvciA6IHRoaXMgKS50b1N0cmluZygpO1xyXG59O1xyXG5cclxuU3RyaW5nLnByb3RvdHlwZS5yZW1vdmVBY2NlbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLm5vcm1hbGl6ZSggJ05GRCcgKS5yZXBsYWNlKCAvW1xcdTAzMDAtXFx1MDM2Zl0vZywgXCJcIiApO1xyXG59XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLmNhcGl0YWxpemVGaXJzdExldHRlciA9IGZ1bmN0aW9uICgpOiBzdHJpbmcge1xyXG4gIGlmICggdHlwZW9mIHRoaXMgIT09ICdzdHJpbmcnICkge1xyXG4gICAgcmV0dXJuICcnO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHRoaXMuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIHRoaXMuc3Vic3RyaW5nKCAxICk7XHJcbn1cclxuXHJcblN0cmluZy5wcm90b3R5cGUuemVyb0JlZm9yZSA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5wYWRTdGFydCggMiwgJzAnICk7XHJcbn0iLCJcclxuZXhwb3J0IGNsYXNzIE9iamVjdEV2ZW50TGlzdGVuZXIge1xyXG4gIHB1YmxpYyBldmVudHNCeU5hbWU6IE1hcDxzdHJpbmcsIEZ1bmN0aW9uW10+ID0gbmV3IE1hcCgpO1xyXG5cclxuICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50OiBGdW5jdGlvbiApIHtcclxuICAgIGlmICggIXRoaXMuZXZlbnRzQnlOYW1lLmhhcyggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSApIHtcclxuICAgICAgdGhpcy5ldmVudHNCeU5hbWUuc2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSwgW2V2ZW50XSApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ldmVudHNCeU5hbWUuZ2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSApIS5wdXNoKCBldmVudCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEV2ZW50c0J5TmFtZSggZXZlbnROYW1lOiBzdHJpbmcgKTogRnVuY3Rpb25bXSB7XHJcbiAgICBpZiAoICF0aGlzLmV2ZW50c0J5TmFtZS5oYXMoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkgKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzQnlOYW1lLnNldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCksIFtdICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzQnlOYW1lLmdldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSE7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGNhbGxFdmVudHNCeU5hbWUoIGV2ZW50TmFtZTogc3RyaW5nLCAuLi5ldmVudEFyZ3M6IGFueVtdICk6IHZvaWQge1xyXG4gICAgdGhpcy5nZXRFdmVudHNCeU5hbWUoIGV2ZW50TmFtZSApLmZvckVhY2goIGUgPT4gZSggLi4uZXZlbnRBcmdzICkgKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgJy4uL0V4dGVuc2lvbnMvU3RyaW5nRXh0ZW5zaW9ucyc7XHJcbmltcG9ydCB7IGdldEVsZW1lbnRGcm9tSFRNTCwgaGlkZUVsZW1lbnQgfSBmcm9tICcuL0RPTVRvb2xzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUV4dGVuc2lvbiB9IGZyb20gJy4vRmlsZVRvb2xzJztcclxuaW1wb3J0IHsgQXVkaW9Db21wb25lbnQsIENyZWF0ZUF1ZGlvQ29tcG9uZW50T3B0aW9ucyB9IGZyb20gJy4uL0NvbXBvbmVudHMvQXVkaW9Db21wb25lbnQnO1xyXG5cclxuZXhwb3J0IHR5cGUgQXVkaW9QbGF5ZXJDb25maWcgPSB7XHJcbiAgaWQ/OiBzdHJpbmc7XHJcbiAgYXV0b1BsYXk/OiBib29sZWFuO1xyXG4gIGF1dG9wbGF5PzogYm9vbGVhbjtcclxuICBtdXRlZD86IGJvb2xlYW47XHJcbiAgbG9vcD86IGJvb2xlYW47XHJcbiAgcHJlbG9hZD86ICdhdXRvJyB8ICdtZXRhZGF0YScgfCAnbm9uZSc7XHJcbiAgb25wbGF5PzogKCBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgKSA9PiB2b2lkO1xyXG4gIG9ucGF1c2U/OiAoIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCApID0+IHZvaWQ7XHJcbiAgb25QbGF5PzogKCBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgKSA9PiB2b2lkO1xyXG4gIG9uUGF1c2U/OiAoIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCApID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBdWRpb0NvbXBvbmVudE9uQm9keSggb3B0aW9uczogQ3JlYXRlQXVkaW9Db21wb25lbnRPcHRpb25zICkge1xyXG4gIHJldHVybiBhd2FpdCBBdWRpb0NvbXBvbmVudC5jcmVhdGVBdWRpb0NvbXBvbmVudE9uQm9keSggb3B0aW9ucyApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW52aXNpYmxlUGxheWVyKCBhcnJTb3VyY2VzOiBzdHJpbmdbXSwgcGxheWVyQ29uZmlnPzogQXVkaW9QbGF5ZXJDb25maWcgKSB7XHJcbiAgY29uc3QgYXVkaW9FbGVtZW50ID0gZ2V0RWxlbWVudEZyb21IVE1MKCBhdWRpb0VsZW1lbnRIVE1MKCBhcnJTb3VyY2VzLCBwbGF5ZXJDb25maWcgKSApIGFzIEhUTUxFbGVtZW50O1xyXG4gIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYWZ0ZXJiZWdpbicsIGF1ZGlvRWxlbWVudCApO1xyXG4gIGhpZGVFbGVtZW50KCBhdWRpb0VsZW1lbnQgKTtcclxuICByZXR1cm4gYXVkaW9FbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXVkaW9FbGVtZW50SFRNTCggYXJyU291cmNlczogc3RyaW5nW10sIHBsYXllckNvbmZpZz86IEF1ZGlvUGxheWVyQ29uZmlnICkge1xyXG4gIHJldHVybiBgPGF1ZGlvIGNvbnRyb2xzICR7IHBsYXllckNvbmZpZyA/IGF1ZGlvRWxlbWVudFBhcmFtc0J5UGxheWVyQ29uZmlnKCBwbGF5ZXJDb25maWcgKSA6IFwiXCIgfT5cclxuICAgICR7IGFyclNvdXJjZXMubWFwKCBzcmMgPT4gc291cmNlRWxlbWVudEhUTUwoIHNyYyApICkucmVkdWNlKCAoIGFjYywgbmV4dCApID0+IGFjYyArIG5leHQsICcnICkgfVxyXG4gIDwvYXVkaW8+YDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNvdXJjZUVsZW1lbnRIVE1MKCBzcmM6IHN0cmluZyApIHtcclxuICByZXR1cm4gYDxzb3VyY2Ugc3JjPVwiJHsgc3JjIH1cIiB0eXBlPVwiYXVkaW8vJHsgZ2V0RmlsZUV4dGVuc2lvbiggc3JjICkgfVwiPmA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF1ZGlvRWxlbWVudFBhcmFtc0J5UGxheWVyQ29uZmlnKCBwbGF5ZXJDb25maWc6IEF1ZGlvUGxheWVyQ29uZmlnICkge1xyXG4gIGNvbnN0IHBhcmFtSWQgPSBwbGF5ZXJDb25maWcuaWQgPyAnaWQ9XCInICsgcGxheWVyQ29uZmlnLmlkICsgJ1wiJyA6ICcnO1xyXG4gIGNvbnN0IHBhcmFtQXV0b1BsYXkgPSBwbGF5ZXJDb25maWcuYXV0b1BsYXkgfHwgcGxheWVyQ29uZmlnLmF1dG9wbGF5ID8gJ2F1dG9wbGF5JyA6ICcnO1xyXG4gIGNvbnN0IHBhcmFtTXV0ZWQgPSBwbGF5ZXJDb25maWcubXV0ZWQgPyAnbXV0ZWQnIDogJyc7XHJcbiAgY29uc3QgcGFyYW1Mb29wID0gcGxheWVyQ29uZmlnLmxvb3AgPyAnbG9vcCcgOiAnJztcclxuICBjb25zdCBwYXJhbVByZWxvYWQgPSBwbGF5ZXJDb25maWcucHJlbG9hZCA/ICdwcmVsb2FkPVwiJyArIHBsYXllckNvbmZpZy5wcmVsb2FkICsgJ1wiJyA6ICcnO1xyXG5cclxuICByZXR1cm4gYCAkeyBwYXJhbUlkIH0gJHsgcGFyYW1BdXRvUGxheSB9ICR7IHBhcmFtTXV0ZWQgfSAkeyBwYXJhbUxvb3AgfSAkeyBwYXJhbVByZWxvYWQgfWAudHJpbUVuZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQbGF5QnV0dG9uRWxlbWVudCggYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50LCBwbGF5ZXJDb25maWc/OiBBdWRpb1BsYXllckNvbmZpZyApIHtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2J1dHRvbicgKTtcclxuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoICdwbGF5LWJ1dHRvbicgKTtcclxuXHJcbiAgc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgaWYgKCBhdWRpb0VsZW1lbnQucGF1c2VkICkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoICdwYXVzZWQnICk7XHJcbiAgICB9XHJcbiAgfSwgMzAwICk7XHJcblxyXG4gIGJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgaWYgKCBhdWRpb0VsZW1lbnQucGF1c2VkICkge1xyXG4gICAgICBhdWRpb0VsZW1lbnQucGxheSgpO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoICdwYXVzZWQnICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncGF1c2VkJyApO1xyXG4gICAgfVxyXG4gIH0gKTtcclxuXHJcbiAgc2V0QXVkaW9FbGVtZW50UGxheVBhdXNlRXZlbnRzKCBidXR0b25FbGVtZW50LCBhdWRpb0VsZW1lbnQsIHBsYXllckNvbmZpZyApO1xyXG5cclxuICByZXR1cm4gYnV0dG9uRWxlbWVudDtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNldEF1ZGlvRWxlbWVudFBsYXlQYXVzZUV2ZW50cyggYnV0dG9uRWxlbWVudDogSFRNTEJ1dHRvbkVsZW1lbnQsIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCwgcGxheWVyQ29uZmlnPzogQXVkaW9QbGF5ZXJDb25maWcgKSB7XHJcbiAgYXVkaW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdwbGF5JywgKCkgPT4ge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAncGF1c2VkJyApO1xyXG4gICAgaWYgKCBwbGF5ZXJDb25maWcgJiYgcGxheWVyQ29uZmlnLm9uUGxheSApIHtcclxuICAgICAgcGxheWVyQ29uZmlnLm9uUGxheSggYXVkaW9FbGVtZW50ICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBwbGF5ZXJDb25maWcgJiYgcGxheWVyQ29uZmlnLm9ucGxheSApIHtcclxuICAgICAgcGxheWVyQ29uZmlnLm9ucGxheSggYXVkaW9FbGVtZW50ICk7XHJcbiAgICB9XHJcbiAgfSApO1xyXG5cclxuICBhdWRpb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3BhdXNlJywgKCkgPT4ge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncGF1c2VkJyApO1xyXG4gICAgaWYgKCBwbGF5ZXJDb25maWcgJiYgcGxheWVyQ29uZmlnLm9uUGF1c2UgKSB7XHJcbiAgICAgIHBsYXllckNvbmZpZy5vblBhdXNlKCBhdWRpb0VsZW1lbnQgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHBsYXllckNvbmZpZyAmJiBwbGF5ZXJDb25maWcub25wYXVzZSApIHtcclxuICAgICAgcGxheWVyQ29uZmlnLm9ucGF1c2UoIGF1ZGlvRWxlbWVudCApO1xyXG4gICAgfVxyXG4gIH0gKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwbGF5QnV0dG9uQ1NTKCkge1xyXG4gIHJldHVybiBgXHJcbiAgICAucGxheS1idXR0b24ge1xyXG4gICAgICBtYXJnaW46IDA7XHJcbiAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGJvcmRlcjogMDtcclxuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICAgIHdpZHRoOiAwO1xyXG4gICAgICBoZWlnaHQ6IDM0cHg7XHJcbiAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgIzIwMjAyMDtcclxuICAgICAgdHJhbnNpdGlvbjogMTAwbXMgYWxsIGVhc2U7XHJcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgYm9yZGVyLXN0eWxlOiBkb3VibGU7XHJcbiAgICAgIGJvcmRlci13aWR0aDogMHB4IDAgMHB4IDMwcHg7XHJcbiAgICB9XHJcblxyXG4gICAgLnBsYXktYnV0dG9uLnBhdXNlZCB7XHJcbiAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XHJcbiAgICAgIGJvcmRlci13aWR0aDogMjNweCAwcHggMjNweCAzNHB4O1xyXG4gICAgfVxyXG5cclxuICAgIC5wbGF5LWJ1dHRvbjpob3ZlciB7XHJcbiAgICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgIzQwNDA0MDtcclxuICAgIH1cclxuICBgO1xyXG59XHJcblxyXG5leHBvcnQgeyBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgfTsiLCJpbXBvcnQgeyBEaW1lbnNpb25zLCBQb2ludDJELCBsZXJwLCByZWdleE51bWJlclBhdHRlcm4sIHJvdGF0ZUNvb3JkaW5hdGVzLCByb3RhdGVDb29yZGluYXRlc0Zyb21Qb2ludDJEIH0gZnJvbSAnLi9NYXRoVG9vbHMnO1xyXG5pbXBvcnQgeyB0b1Bob25lTnVtYmVyIH0gZnJvbSAnLi9TdHJpbmdUb29scyc7XHJcbmltcG9ydCB7IENvbGxpc2lvbkRpcmVjdGlvbkNoZWNrLCBCb3JkZXJEaXN0YW5jZSB9IGZyb20gJy4uL0V4dHJhcy9Db2xsaXNpb25FdmVudHMvVHlwZXMnO1xyXG5cclxuZXhwb3J0IHR5cGUgS2V5Ym9hcmRFdmVudENhbGxiYWNrID0gKCBldnQ6IEtleWJvYXJkRXZlbnQgKSA9PiB2b2lkO1xyXG5leHBvcnQgY29uc3QgcmVnZXhSZW1vdmVUcmFuc2xhdGVGcm9tVHJhbnNmb3JtID0gL3RyYW5zbGF0ZVxcKFteKV0qXFwpL2c7XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlVmFsdWUgPSAvcm90YXRlXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlWFZhbHVlID0gL3JvdGF0ZVhcXCgoLT9cXGQrXFwuP1xcZCopZGVnXFwpLztcclxuZXhwb3J0IGNvbnN0IHJlZ2V4R3JvdXBSb3RhdGVZVmFsdWUgPSAvcm90YXRlWVxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVpWYWx1ZSA9IC9yb3RhdGVaXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcblxyXG5leHBvcnQgY29uc3QgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgY29uc3QgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQgPSBuZXcgTWFwPHN0cmluZywgS2V5Ym9hcmRFdmVudENhbGxiYWNrW10+KCk7XHJcbmV4cG9ydCBjb25zdCBkaWN0S2V5c0J5QWN0aW9uS2V5dXAgPSBuZXcgTWFwPHN0cmluZywgS2V5Ym9hcmRFdmVudENhbGxiYWNrW10+KCk7XHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRBY3Rpb25LZXkoIHsga2V5LCBrZXlkb3duOiBldmVudEtleWRvd24sIGtleXVwOiBldmVudEtleXVwLCBleGVjdXRlT25seU9uY2UgPSB0cnVlIH06IHsga2V5OiBzdHJpbmc7IGtleWRvd246IEtleWJvYXJkRXZlbnRDYWxsYmFjazsga2V5dXA/OiBLZXlib2FyZEV2ZW50Q2FsbGJhY2s7IGV4ZWN1dGVPbmx5T25jZT86IGJvb2xlYW47IH0gKSB7XHJcbiAgaWYgKCBleGVjdXRlT25seU9uY2UgKSB7XHJcbiAgICBhZGRBY3Rpb25LZXlSdW5PbmNlKCBrZXksIGV2ZW50S2V5ZG93biwgZXZlbnRLZXl1cCApO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgYWRkQWN0aW9uS2V5UnVuT25SZXBlYXQoIGtleSwgZXZlbnRLZXlkb3duLCBldmVudEtleXVwICk7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNhZmVQcm9taXNlPFQ+ID0ge1xyXG4gIGRhdGE6ICgpID0+IFQ7XHJcbiAgZXJyb3I6IEVycm9yIHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVByb21pc2U8VD4oIHByb21pc2U6IFByb21pc2U8VD4gKTogUHJvbWlzZTxTYWZlUHJvbWlzZTxUPj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcHJvbWlzZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhOiAoKSA9PiBkYXRhLFxyXG4gICAgICBlcnJvcjogbnVsbFxyXG4gICAgfTtcclxuICB9IGNhdGNoICggZXJyb3IgKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCBlcnJvciApO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRhdGE6ICgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCBcIkNvdWxkbid0IGZldGNoLCBjaGVjayBTYWZlUHJvbWlzZS5lcnJvciBmb3IgZGV0YWlscy5cIiApOyB9LFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKCBTdHJpbmcoIGVycm9yICkgKVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkWW91dHViZVVybE9ySWQoIGlucHV0OiBzdHJpbmcgKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgdXJsUGF0dGVybiA9IC9eKGh0dHAocyk/OlxcL1xcLyk/KCh3KXszfS4pP3lvdXR1KGJlfC5iZSk/KFxcLmNvbSk/XFwvLisvO1xyXG4gIGNvbnN0IGlkUGF0dGVybiA9IC9eW2EtekEtWjAtOV8tXXsxMX0kLztcclxuXHJcbiAgcmV0dXJuIHVybFBhdHRlcm4udGVzdCggaW5wdXQgKSB8fCBpZFBhdHRlcm4udGVzdCggaW5wdXQgKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkWW91VHViZVVybCggdXJsOiBzdHJpbmcgKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgcGF0dGVybiA9IC9eKGh0dHAocyk/OlxcL1xcLyk/KCh3KXszfS4pP3lvdXR1KGJlfC5iZSk/KFxcLmNvbSk/XFwvLisvO1xyXG4gIHJldHVybiBwYXR0ZXJuLnRlc3QoIHVybCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFlvdVR1YmVJZCggaW5wdXQ6IHN0cmluZyApOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCByZWdleCA9IC9bPyZddj0oW14/Jl0rKS87XHJcbiAgY29uc3QgbWF0Y2ggPSBpbnB1dC5tYXRjaCggcmVnZXggKTtcclxuICBpZiAoIG1hdGNoICYmIG1hdGNoWzFdICkge1xyXG4gICAgcmV0dXJuIG1hdGNoWzFdO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBJZiBkaXJlY3QgdmlkZW8gSUQgaXMgcHJvdmlkZWRcclxuICAgIHJldHVybiBpbnB1dC5sZW5ndGggPT09IDExID8gaW5wdXQgOiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIGF0dHJMaXN0OiBbc3RyaW5nLCBzdHJpbmddW10gKSB7XHJcbiAgYXR0ckxpc3QuZm9yRWFjaCggKCBba2V5LCB2YWxdICkgPT4ge1xyXG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoIGtleSwgdmFsICk7XHJcbiAgfSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudEZyb21IVE1MKCBodG1sOiBzdHJpbmcsIHRyaW06IGJvb2xlYW4gPSB0cnVlICkge1xyXG4gIGh0bWwgPSB0cmltID8gaHRtbC50cmltKCkgOiBodG1sO1xyXG5cclxuICBpZiAoICFodG1sICkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0ZW1wbGF0ZScgKTtcclxuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sO1xyXG4gIGNvbnN0IHJlc3VsdCA9IHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRyZW47XHJcblxyXG4gIGlmICggcmVzdWx0Lmxlbmd0aCA9PT0gMSApIHtcclxuICAgIHJldHVybiByZXN1bHRbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gQXJyYXkuZnJvbSggcmVzdWx0ICkgYXMgSFRNTEVsZW1lbnRbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnREaW1lbnNpb25zQnlJZCggZWxlbWVudElkOiBzdHJpbmcgKTogRGltZW5zaW9ucyB7XHJcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBlbGVtZW50SWQgKTtcclxuXHJcbiAgaWYgKCAhZWxlbWVudCApIHtcclxuICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIGVsZW1lbnQgYXQgZ2V0RWxlbWVudERpbWVuc2lvbnNCeUlkIHdpdGggaWQ6IFwiICsgZWxlbWVudElkICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZ2V0RWxlbWVudERpbWVuc2lvbnMoIGVsZW1lbnQgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnREaW1lbnNpb25zKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiBEaW1lbnNpb25zIHtcclxuICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB3aWR0aDogcmVjdC53aWR0aCxcclxuICAgIGhlaWdodDogcmVjdC5oZWlnaHRcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiBET01SZWN0IHtcclxuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICBjb25zdCBjZW50ZXJYID0gcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDI7XHJcbiAgY29uc3QgY2VudGVyWSA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xyXG5cclxuICAvLyBSb3RhdGlvbiBhbmdsZSBpbiBkZWdyZWVzIChleHRyYWN0ZWQgZnJvbSBzdHlsZS50cmFuc2Zvcm0gb3IgYW55IG90aGVyIHNvdXJjZSlcclxuICBjb25zdCByb3RhdGlvbkFuZ2xlID0gZ2V0Qm9keVJvdGF0aW9uSW5EZWdyZWVzKCk7XHJcblxyXG4gIGNvbnN0IHJhZGlhbnMgPSAoIE1hdGguUEkgLyAxODAgKSAqIHJvdGF0aW9uQW5nbGU7XHJcbiAgY29uc3QgY29zVGhldGEgPSBNYXRoLmNvcyggcmFkaWFucyApO1xyXG4gIGNvbnN0IHNpblRoZXRhID0gTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRoZSByb3RhdGVkIGNvb3JkaW5hdGVzXHJcbiAgY29uc3Qgcm90YXRlZFgxID0gY2VudGVyWCArICggcmVjdC5sZWZ0IC0gY2VudGVyWCApICogY29zVGhldGEgLSAoIHJlY3QudG9wIC0gY2VudGVyWSApICogc2luVGhldGE7XHJcbiAgY29uc3Qgcm90YXRlZFkxID0gY2VudGVyWSArICggcmVjdC5sZWZ0IC0gY2VudGVyWCApICogc2luVGhldGEgKyAoIHJlY3QudG9wIC0gY2VudGVyWSApICogY29zVGhldGE7XHJcblxyXG4gIGNvbnN0IHJvdGF0ZWRYMiA9IGNlbnRlclggKyAoIHJlY3QucmlnaHQgLSBjZW50ZXJYICkgKiBjb3NUaGV0YSAtICggcmVjdC5ib3R0b20gLSBjZW50ZXJZICkgKiBzaW5UaGV0YTtcclxuICBjb25zdCByb3RhdGVkWTIgPSBjZW50ZXJZICsgKCByZWN0LnJpZ2h0IC0gY2VudGVyWCApICogc2luVGhldGEgKyAoIHJlY3QuYm90dG9tIC0gY2VudGVyWSApICogY29zVGhldGE7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSBsZWZ0LCB0b3AsIGJvdHRvbSwgYW5kIHJpZ2h0IGNvb3JkaW5hdGVzXHJcbiAgY29uc3Qgcm90YXRlZExlZnQgPSBNYXRoLm1pbiggcm90YXRlZFgxLCByb3RhdGVkWDIgKTtcclxuICBjb25zdCByb3RhdGVkVG9wID0gTWF0aC5taW4oIHJvdGF0ZWRZMSwgcm90YXRlZFkyICk7XHJcbiAgY29uc3Qgcm90YXRlZEJvdHRvbSA9IE1hdGgubWF4KCByb3RhdGVkWTEsIHJvdGF0ZWRZMiApO1xyXG4gIGNvbnN0IHJvdGF0ZWRSaWdodCA9IE1hdGgubWF4KCByb3RhdGVkWDEsIHJvdGF0ZWRYMiApO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgeDogcm90YXRlZExlZnQsXHJcbiAgICB5OiByb3RhdGVkVG9wLFxyXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXHJcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxyXG4gICAgdG9KU09OOiByZWN0LnRvSlNPTixcclxuICAgIGxlZnQ6IHJvdGF0ZWRMZWZ0LFxyXG4gICAgdG9wOiByb3RhdGVkVG9wLFxyXG4gICAgYm90dG9tOiByb3RhdGVkQm90dG9tLFxyXG4gICAgcmlnaHQ6IHJvdGF0ZWRSaWdodCxcclxuICB9IGFzIERPTVJlY3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEFjdGlvbktleVJ1bk9uY2UoIGtleTogc3RyaW5nLCBldmVudEtleWRvd246IEtleWJvYXJkRXZlbnRDYWxsYmFjaywgZXZlbnRLZXl1cD86IEtleWJvYXJkRXZlbnRDYWxsYmFjayApIHtcclxuICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5oYXMoIGtleSApICkge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLnNldCgga2V5LCBbZXZlbnRLZXlkb3duLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UuZ2V0KCBrZXkgKSFdIClcclxuICB9IGVsc2Uge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLnNldCgga2V5LCBbZXZlbnRLZXlkb3duXSApXHJcbiAgfVxyXG5cclxuICBpZiAoIGV2ZW50S2V5dXAgKSB7XHJcbiAgICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5oYXMoIGtleSApICkge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5dXAuZ2V0KCBrZXkgKSFdIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXBdIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEFjdGlvbktleVJ1bk9uUmVwZWF0KCBrZXk6IHN0cmluZywgZXZlbnRLZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2ssIGV2ZW50S2V5dXA/OiBLZXlib2FyZEV2ZW50Q2FsbGJhY2sgKSB7XHJcbiAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5oYXMoIGtleSApICkge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQuc2V0KCBrZXksIFtldmVudEtleWRvd24sIC4uLmRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LmdldCgga2V5ICkhXSApXHJcbiAgfSBlbHNlIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LnNldCgga2V5LCBbZXZlbnRLZXlkb3duXSApXHJcbiAgfVxyXG5cclxuICBpZiAoIGV2ZW50S2V5dXAgKSB7XHJcbiAgICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5oYXMoIGtleSApICkge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5dXAuZ2V0KCBrZXkgKSFdIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXBdIClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0VsZW1lbnRDb2xsaXNpb24oIGVsZW1lbnQxOiBIVE1MRWxlbWVudCwgZWxlbWVudDI6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZWxlbWVudDEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50MSApO1xyXG4gIGNvbnN0IHJlY3QyID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZWxlbWVudDIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCBlbGVtZW50MiApO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSAhKFxyXG4gICAgcmVjdDEudG9wID4gcmVjdDIuYm90dG9tIHx8XHJcbiAgICByZWN0MS5yaWdodCA8IHJlY3QyLmxlZnQgfHxcclxuICAgIHJlY3QxLmJvdHRvbSA8IHJlY3QyLnRvcCB8fFxyXG4gICAgcmVjdDEubGVmdCA+IHJlY3QyLnJpZ2h0XHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvbGxGb3JWYXJpYWJsZTxUPiggdmFyaWFibGVOYW1lOiBzdHJpbmcsIHJlYWR5Q29uZGl0aW9uOiAoIHZhbHVlOiBUICkgPT4gYm9vbGVhbiwgY2FsbGJhY2s6ICggdmFsdWU6IFQgKSA9PiB2b2lkICkge1xyXG4gIGNvbnN0IHBvbGxJbnRlcnZhbCA9IDEwMDtcclxuICBjb25zdCBwb2xsID0gc2V0SW50ZXJ2YWwoICgpID0+IHtcclxuICAgIGlmICggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSAhPT0gdW5kZWZpbmVkICYmIHJlYWR5Q29uZGl0aW9uKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICkgKSB7XHJcbiAgICAgIC8vIElmIGJvdGggY29uZGl0aW9ucyBhcmUgbWV0LCBleGVjdXRlIHRoZSBjYWxsYmFjayBhbmQgc3RvcCBwb2xsaW5nXHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoIHBvbGwgKTtcclxuICAgICAgY2FsbGJhY2soICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gKTtcclxuICAgIH1cclxuICB9LCBwb2xsSW50ZXJ2YWwgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBvbGxGb3JWYXJpYWJsZUFzeW5jPFQ+KCB2YXJpYWJsZU5hbWU6IHN0cmluZywgcmVhZHlDb25kaXRpb246ICggdmFsdWU6IFQgKSA9PiBib29sZWFuLCBjYWxsYmFjazogKCB2YWx1ZTogVCApID0+IHZvaWQgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgcG9sbEludGVydmFsID0gMTAwO1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPiggKCByZXNvbHZlICkgPT4ge1xyXG4gICAgY29uc3QgcG9sbCA9IHNldEludGVydmFsKCAoKSA9PiB7XHJcbiAgICAgIGlmICggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSAhPT0gdW5kZWZpbmVkICYmIHJlYWR5Q29uZGl0aW9uKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICkgKSB7XHJcbiAgICAgICAgLy8gSWYgYm90aCBjb25kaXRpb25zIGFyZSBtZXQsIGV4ZWN1dGUgdGhlIGNhbGxiYWNrLCBzdG9wIHBvbGxpbmcsIGFuZCByZXNvbHZlIHRoZSBwcm9taXNlXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCggcG9sbCApO1xyXG4gICAgICAgIGNhbGxiYWNrKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICk7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9LCBwb2xsSW50ZXJ2YWwgKTtcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3YWl0VW50aWxFbGVtZW50RXhpc3RzKCBzZWxlY3Rvcjogc3RyaW5nICkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiB7XHJcbiAgICBpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKSB7XHJcbiAgICAgIHJldHVybiByZXNvbHZlKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlciggbXV0YXRpb25zID0+IHtcclxuICAgICAgaWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICkge1xyXG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICByZXNvbHZlKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICk7XHJcbiAgICAgIH1cclxuICAgIH0gKTtcclxuXHJcbiAgICBvYnNlcnZlci5vYnNlcnZlKCBkb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgc3VidHJlZTogdHJ1ZVxyXG4gICAgfSApO1xyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGF5KCBtczogbnVtYmVyICk6IFByb21pc2U8dm9pZD4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSggcmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCByZXNvbHZlLCBtcyApICk7XHJcbn1cclxuXHJcbi8vLyBHZXQgdGhlIGRlZmF1bHQgYXR0cmlidXRlcyBmcm9tIHRoZSB0YXJnZXQgZWxlbWVudFxyXG4vLy8gSWYgaGF2ZSBub3QgZGVmYXVsdCBhdHRyaWJ1dGUgd2l0aCB0aGlzIEBhdHRyaWJ1dGVOYW1lIG9uIG1hcCB3aWxsIHNldCB0aGUgY3VycmVudCBhdHRyaWJ1dGUgYXMgZGVmYXVsdFxyXG4vLy8gSWYgaGF2ZSBub3QgZGVmYXVsdCBhdHRyaWJ1dGUgd2l0aCB0aGlzIEBhdHRyaWJ1dGVOYW1lIHdpbGwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZ1xyXG5leHBvcnQgY29uc3QgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQgPSBuZXcgTWFwPEhUTUxFbGVtZW50LCBNYXA8c3RyaW5nLCBzdHJpbmc+PigpO1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCggdGFyZ2V0OiBIVE1MRWxlbWVudCwgYXR0cmlidXRlTmFtZTogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgaWYgKCAhbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuaGFzKCB0YXJnZXQgKSApIHtcclxuICAgIG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LnNldCggdGFyZ2V0LCBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpICk7XHJcbiAgfVxyXG5cclxuICBsZXQgcmVzdWx0OiBzdHJpbmcgPSAnJztcclxuICBjb25zdCBkZWZhdWx0QXR0cmlidXRlVmFsdWVzQnlOYW1lID0gbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuZ2V0KCB0YXJnZXQgKSE7XHJcbiAgY29uc3QgdGFyZ2V0RGVmYXVsdEF0dHJpYnV0ZSA9ICFkZWZhdWx0QXR0cmlidXRlVmFsdWVzQnlOYW1lLmhhcyggYXR0cmlidXRlTmFtZSApID8gdGFyZ2V0LmdldEF0dHJpYnV0ZSggYXR0cmlidXRlTmFtZSApIDogZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZS5nZXQoIGF0dHJpYnV0ZU5hbWUgKSE7XHJcblxyXG4gIHJlc3VsdCA9IHRhcmdldERlZmF1bHRBdHRyaWJ1dGUgPyB0YXJnZXREZWZhdWx0QXR0cmlidXRlIDogJyc7XHJcbiAgc2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCggdGFyZ2V0LCBhdHRyaWJ1dGVOYW1lLCByZXN1bHQgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQoIHRhcmdldDogSFRNTEVsZW1lbnQsIGF0dHJpYnV0ZU5hbWU6IHN0cmluZywgbmV3RGVmYXVsdEF0dHJpYnV0ZTogc3RyaW5nICk6IHZvaWQge1xyXG4gIGlmICggIW1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmhhcyggdGFyZ2V0ICkgKSB7XHJcbiAgICBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5zZXQoIHRhcmdldCwgbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKSApO1xyXG4gIH1cclxuXHJcbiAgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuZ2V0KCB0YXJnZXQgKSEuc2V0KCBhdHRyaWJ1dGVOYW1lLCBuZXdEZWZhdWx0QXR0cmlidXRlICk7XHJcbn1cclxuXHJcbi8vLyBEaXZpZGUgbyBlbGVtZW50byBAdGFyZ2V0IGVtIDkgXCJxdWFkcmFkb3NcIiBpZ3VhaXMgZSByZXRvcm5hIGVtIHF1YWlzIHF1YWRyYWRvcyBvIGRyYWdnYWJsZSBlc3TDoSBjb2xpZGluZG8gY29tIG8gdGFyZ2V0XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xsaXNpb25EaXJlY3Rpb24oIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogQ29sbGlzaW9uRGlyZWN0aW9uQ2hlY2sge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZHJhZ2dhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZHJhZ2dhYmxlICk7XHJcbiAgY29uc3QgcmVjdDIgPSAhY2hlY2tCb2R5Um90YXRpb24gPyB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCB0YXJnZXQgKTtcclxuXHJcbiAgY29uc3QgaXNUb3AgPSByZWN0MS5ib3R0b20gPiByZWN0Mi50b3AgJiYgcmVjdDEudG9wIDwgcmVjdDIudG9wICsgcmVjdDIuaGVpZ2h0IC8gMztcclxuICBjb25zdCBpc1JpZ2h0ID0gcmVjdDEubGVmdCA8IHJlY3QyLnJpZ2h0ICYmIHJlY3QxLnJpZ2h0ID4gcmVjdDIucmlnaHQgLSByZWN0Mi53aWR0aCAvIDM7XHJcbiAgY29uc3QgaXNDZW50ZXIgPSByZWN0MS50b3AgPCByZWN0Mi5ib3R0b20gJiYgcmVjdDEuYm90dG9tID4gcmVjdDIudG9wICYmIHJlY3QxLmxlZnQgPCByZWN0Mi5yaWdodCAmJiByZWN0MS5yaWdodCA+IHJlY3QyLmxlZnQ7XHJcbiAgY29uc3QgaXNCb3R0b20gPSByZWN0MS50b3AgPCByZWN0Mi5ib3R0b20gLSByZWN0Mi5oZWlnaHQgLyAzICYmIHJlY3QxLmJvdHRvbSA+IHJlY3QyLmJvdHRvbSAtIHJlY3QyLmhlaWdodCAvIDM7XHJcbiAgY29uc3QgaXNMZWZ0ID0gcmVjdDEucmlnaHQgPiByZWN0Mi5sZWZ0ICYmIHJlY3QxLmxlZnQgPCByZWN0Mi5sZWZ0ICsgcmVjdDIud2lkdGggLyAzO1xyXG5cclxuICByZXR1cm4geyB0b3A6IGlzVG9wLCByaWdodDogaXNSaWdodCwgY2VudGVyOiBpc0NlbnRlciwgYm90dG9tOiBpc0JvdHRvbSwgbGVmdDogaXNMZWZ0IH07XHJcbn1cclxuXHJcbi8vLyByZXR1cm4gdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgZHJhZ2dhYmxlIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHRhcmdldCBlbGVtZW50IGZyb20gZWFjaCBib3JkZXIgXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXN0YW5jZUZyb21Cb3JkZXIoIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogQm9yZGVyRGlzdGFuY2Uge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZHJhZ2dhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZHJhZ2dhYmxlICk7XHJcbiAgY29uc3QgcmVjdDIgPSAhY2hlY2tCb2R5Um90YXRpb24gPyB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCB0YXJnZXQgKTtcclxuXHJcbiAgY29uc3QgY2VudGVyID0ge1xyXG4gICAgeDogcmVjdDEubGVmdCArIHJlY3QxLndpZHRoIC8gMixcclxuICAgIHk6IHJlY3QxLnRvcCArIHJlY3QxLmhlaWdodCAvIDIsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSA9IHtcclxuICAgIHRvcDogY2VudGVyLnkgLSByZWN0Mi50b3AsXHJcbiAgICByaWdodDogcmVjdDIucmlnaHQgLSBjZW50ZXIueCxcclxuICAgIGJvdHRvbTogcmVjdDIuYm90dG9tIC0gY2VudGVyLnksXHJcbiAgICBsZWZ0OiBjZW50ZXIueCAtIHJlY3QyLmxlZnQsXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGRpc3RhbmNlRnJvbUJvcmRlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gcnVuT25seU9uY2VLZXlkb3duQWN0aW9ucyggZXZ0OiBLZXlib2FyZEV2ZW50ICkge1xyXG4gIGZvciAoIGNvbnN0IHBhaXIgb2YgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlICkge1xyXG4gICAgaWYgKCBldnQuY29kZSA9PT0gcGFpclswXSApIHtcclxuICAgICAgcGFpclsxXS5mb3JFYWNoKCBrYkV2ZW50ID0+IGtiRXZlbnQoIGV2dCApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBydW5LZXlkb3duQWN0aW9uc1JlcGVhdCggZXZ0OiBLZXlib2FyZEV2ZW50ICkge1xyXG4gIGZvciAoIGNvbnN0IHBhaXIgb2YgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQgKSB7XHJcbiAgICBpZiAoIGV2dC5jb2RlID09PSBwYWlyWzBdICkge1xyXG4gICAgICBwYWlyWzFdLmZvckVhY2goIGtiRXZlbnQgPT4ga2JFdmVudCggZXZ0ICkgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAna2V5ZG93bicsIGV2dCA9PiB7XHJcbiAgaWYgKCAhZXZ0LnJlcGVhdCApIHtcclxuICAgIHJ1bk9ubHlPbmNlS2V5ZG93bkFjdGlvbnMoIGV2dCApO1xyXG4gIH1cclxuXHJcbiAgcnVuS2V5ZG93bkFjdGlvbnNSZXBlYXQoIGV2dCApO1xyXG59ICk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgZXZ0ID0+IHtcclxuICBmb3IgKCBjb25zdCBwYWlyIG9mIGRpY3RLZXlzQnlBY3Rpb25LZXl1cCApIHtcclxuICAgIGlmICggZXZ0LmNvZGUgPT09IHBhaXJbMF0gKSB7XHJcbiAgICAgIHBhaXJbMV0uZm9yRWFjaCgga2JFdmVudCA9PiBrYkV2ZW50KCBldnQgKSApO1xyXG4gICAgfVxyXG4gIH1cclxufSApO1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50Um90YXRpb25JbkRlZ3JlZXMoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBheGlzOiAneCcgfCAneScgfCAneicgPSAneCcgKTogbnVtYmVyIHtcclxuICBsZXQgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlOiBSZWdFeHA7XHJcbiAgc3dpdGNoICggYXhpcyApIHtcclxuICAgIGNhc2UgJ3gnOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWFZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3knOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWVZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3onOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWlZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZSA9IHJlZ2V4R3JvdXBSb3RhdGVWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtYXRjaCA9IHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZS5leGVjKCBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSApO1xyXG4gIGlmICggbWF0Y2ggKSB7XHJcbiAgICBjb25zdCByb3RhdGlvblZhbHVlID0gcGFyc2VGbG9hdCggbWF0Y2hbMV0gKTtcclxuICAgIHJldHVybiByb3RhdGlvblZhbHVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb2R5Um90YXRpb25JbkRlZ3JlZXMoKTogbnVtYmVyIHtcclxuICBjb25zdCBtYXRjaCA9IGdldFJlZ2V4UmVtb3ZlUm90YXRpb25Gcm9tQm9keSgpLmV4ZWMoIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNmb3JtICk7XHJcbiAgaWYgKCBtYXRjaCApIHtcclxuICAgIGNvbnN0IHJvdGF0aW9uVmFsdWUgPSBwYXJzZUZsb2F0KCBtYXRjaFsxXSApO1xyXG4gICAgcmV0dXJuIHJvdGF0aW9uVmFsdWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZ2V4UmVtb3ZlUm90YXRpb25Gcm9tQm9keSgpIHtcclxuICByZXR1cm4gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkJhc2VkT25BeGlzKCBnZXRCb2R5Um90YXRpb25BeGlzKCkgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkJhc2VkT25BeGlzKCBheGlzOiAneCcgfCAneScgfCAneicgKSB7XHJcbiAgc3dpdGNoICggYXhpcyApIHtcclxuICAgIGNhc2UgJ3gnOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZTtcclxuICAgIGNhc2UgJ3knOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVlWYWx1ZTtcclxuICAgIGNhc2UgJ3onOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVpWYWx1ZTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiByZWdleEdyb3VwUm90YXRlVmFsdWU7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm9keVJvdGF0aW9uQXhpcygpOiAneCcgfCAneScgfCAneicge1xyXG4gIHJldHVybiBnZXRFbGVtZW50Um90YXRpb25BeGlzKCBkb2N1bWVudC5ib2R5ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50Um90YXRpb25BeGlzKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiAneCcgfCAneScgfCAneicge1xyXG4gIGNvbnN0IGVsZW1lbnRUcmFuc2Zvcm0gPSBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybS50b0xvd2VyQ2FzZSgpO1xyXG4gIGlmICggZWxlbWVudFRyYW5zZm9ybS5pbmNsdWRlcyggJ3gnICkgKSB7XHJcbiAgICByZXR1cm4gJ3gnO1xyXG4gIH0gZWxzZSBpZiAoIGVsZW1lbnRUcmFuc2Zvcm0uaW5jbHVkZXMoICd5JyApICkge1xyXG4gICAgcmV0dXJuICd5JztcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuICd6JztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm1Db29yZHNGcm9tRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGUgPSAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50ICkudHJhbnNmb3JtLm1hdGNoKCByZWdleE51bWJlclBhdHRlcm4gKSA/PyBbMCwgMF0gKS5tYXAoIG4gPT4gK24gKTtcclxuXHJcbiAgbGV0IHJlc3VsdCA9IHtcclxuICAgIHg6IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzRdICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKCBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs0XSApIDogMCxcclxuICAgIHk6IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzVdICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKCBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs1XSApIDogMFxyXG4gIH1cclxuXHJcbiAgaWYgKCBjaGVja0JvZHlSb3RhdGlvbiApIHtcclxuICAgIGNvbnN0IGJvZHlBbmdsZSA9IGdldEVsZW1lbnRSb3RhdGlvbkluRGVncmVlcyggZG9jdW1lbnQuYm9keSwgZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyggZWxlbWVudCApICkgfHwgMDtcclxuICAgIHJldHVybiByb3RhdGVDb29yZGluYXRlcyggcmVzdWx0LngsIHJlc3VsdC55LCBib2R5QW5nbGUgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGlja0V2ZW50VG9Db29yZGluYXRlcyggZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50ICkge1xyXG4gIGlmICggZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogZXZlbnQuY2xpZW50WCxcclxuICAgICAgeTogZXZlbnQuY2xpZW50WVxyXG4gICAgfTtcclxuICB9IGVsc2UgaWYgKCBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQgKSB7XHJcbiAgICBjb25zdCB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogdG91Y2guY2xpZW50WCxcclxuICAgICAgeTogdG91Y2guY2xpZW50WVxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgXCJFdmVudCBub3QgRm91bmRcIjtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQoIHsgcGFyZW50RWxlbWVudCwgaWQsIHBvc2l0aW9uLCBkaW1lbnNpb25zIH06IHsgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQ7IGlkOiBzdHJpbmc7IHBvc2l0aW9uPzogeyB0b3A6IG51bWJlcjsgbGVmdDogbnVtYmVyOyB9OyBkaW1lbnNpb25zPzogRGltZW5zaW9uczsgfSApIHtcclxuICB2YXIgaW52aXNpYmxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuXHJcbiAgaWYgKCAhcGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiApIHtcclxuICAgIHBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gIH1cclxuXHJcbiAgaW52aXNpYmxlRGl2LmlkID0gaWQ7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICBpbnZpc2libGVEaXYuc3R5bGUud2lkdGggPSBkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMud2lkdGggPyBkaW1lbnNpb25zLndpZHRoLnRvU3RyaW5nKCkgKyAncHgnIDogJzEwMCUnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMuaGVpZ2h0ID8gZGltZW5zaW9ucy5oZWlnaHQudG9TdHJpbmcoKSArICdweCcgOiAnMTAwJSc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnRvcCA9ICggcG9zaXRpb24/LnRvcC50b1N0cmluZygpID8/ICcwJyApICsgJ3B4JztcclxuICBpbnZpc2libGVEaXYuc3R5bGUubGVmdCA9ICggcG9zaXRpb24/LmxlZnQudG9TdHJpbmcoKSA/PyAnMCcgKSArICdweCc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLm9wYWNpdHkgPSAnMCc7IC8vIE1ha2UgdGhlIGRpdiBpbnZpc2libGVcclxuICBpbnZpc2libGVEaXYuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJzsgLy8gQWxsb3cgdGhlIGRpdiB0byBpbnRlcmNlcHQgbW91c2UgZXZlbnRzXHJcblxyXG4gIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGludmlzaWJsZURpdiApO1xyXG5cclxuICByZXR1cm4gaW52aXNpYmxlRGl2O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGlkZUVsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICkge1xyXG4gIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgZWxlbWVudC5zdHlsZS56SW5kZXggPSAnLTEnO1xyXG4gIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICBlbGVtZW50LnN0eWxlLndpZHRoID0gJzBweCAhaW1wb3J0YW50JztcclxuICBlbGVtZW50LnN0eWxlLmhlaWdodCA9ICcwcHggIWltcG9ydGFudCc7XHJcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdoaWRkZW4nLCAnJyApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2xlZXBBc3luYyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oICggcmVzb2x2ZSApID0+IHNldFRpbWVvdXQoICgpID0+IHJlc29sdmUoKSwgbXMgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmluZEVsZW1lbnRzQnlDaGVjayggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBvbkNoZWNrOiBGdW5jdGlvbiwgb25VbmNoZWNrOiBGdW5jdGlvbiApIHtcclxuICBpZiAoIHRyaWdnZXJFbGVtZW50LmNoZWNrZWQgKSB7XHJcbiAgICBvbkNoZWNrKCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0cmlnZ2VyR3JvdXAgPSB0cmlnZ2VyRWxlbWVudC5uYW1lXHJcbiAgICA/IEFycmF5LmZyb20oIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGBbbmFtZT1cIiR7IHRyaWdnZXJFbGVtZW50Lm5hbWUgfVwiXWAgKSApXHJcbiAgICA6IFt0cmlnZ2VyRWxlbWVudF07XHJcblxyXG4gIHRyaWdnZXJHcm91cC5mb3JFYWNoKCB0ID0+IHQuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIGV2dCA9PiB7XHJcbiAgICBpZiAoIHRyaWdnZXJFbGVtZW50LmNoZWNrZWQgKSB7XHJcbiAgICAgIG9uQ2hlY2soIHRhcmdldEVsZW1lbnQsIGV2dCApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25VbmNoZWNrKCB0YXJnZXRFbGVtZW50LCBldnQgKTtcclxuICAgIH1cclxuICB9ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldElucHV0Rm9yY2VQaG9uZU51bWJlckZvcm1hdCggaW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50ICkge1xyXG4gIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgcGhvbmVJbnB1dCA9IHRoaXMudmFsdWU7XHJcblxyXG4gICAgY29uc3QgY2xlYW5QaG9uZUlucHV0ID0gcGhvbmVJbnB1dC5yZXBsYWNlKCAvXFxEL2csICcnICk7XHJcbiAgICBpZiAoIGNsZWFuUGhvbmVJbnB1dC5sZW5ndGggPiAxMSApIHtcclxuICAgICAgcGhvbmVJbnB1dCA9IGNsZWFuUGhvbmVJbnB1dC5zbGljZSggMCwgMTEgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGhvbmVOdW1iZXJGb3JtYXR0ZWQgPSB0b1Bob25lTnVtYmVyKCBwaG9uZUlucHV0ICk7XHJcblxyXG4gICAgaWYgKCBwaG9uZU51bWJlckZvcm1hdHRlZC5sZW5ndGggPT09IDEwICkge1xyXG4gICAgICBwaG9uZU51bWJlckZvcm1hdHRlZCA9IHBob25lTnVtYmVyRm9ybWF0dGVkLnJlcGxhY2VBbGwoICctJywgJycgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZhbHVlID0gcGhvbmVOdW1iZXJGb3JtYXR0ZWQ7XHJcbiAgfSApO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9iaWxlQnJvd3NlcigpIHtcclxuICByZXR1cm4gL0FuZHJvaWR8aVBob25lL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckRldmljZVR5cGUoKTogJ2FuZHJvaWQnIHwgJ2FwcGxlJyB8ICdkZXNrdG9wJyB7XHJcbiAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCAoIHdpbmRvdyBhcyBhbnkgKS5vcGVyYTtcclxuXHJcbiAgaWYgKCAvYW5kcm9pZC9pLnRlc3QoIHVzZXJBZ2VudCApICkge1xyXG4gICAgcmV0dXJuICdhbmRyb2lkJztcclxuICB9IGVsc2UgaWYgKCAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdCggdXNlckFnZW50ICkgJiYgISggd2luZG93IGFzIGFueSApLk1TU3RyZWFtICkge1xyXG4gICAgcmV0dXJuICdhcHBsZSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAnZGVza3RvcCc7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNPblNjcmVlbiggZWxlbWVudDogSFRNTEVsZW1lbnQgKSB7XHJcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIChcclxuICAgIHJlY3QudG9wID49IDAgJiZcclxuICAgIHJlY3QubGVmdCA+PSAwICYmXHJcbiAgICByZWN0LmJvdHRvbSA8PSAoIHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ICkgJiZcclxuICAgIHJlY3QucmlnaHQgPD0gKCB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggKVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kRWxlbWVudFZpZXdJZkNoZWNrZWQoIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCBvcHRpb25zID0ge1xyXG4gIG9uQ2hlY2s6ICggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ICkgPT4geyB9LFxyXG4gIG9uVW5jaGVjazogKCB0cmlnZ2VyRWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQgKSA9PiB7IH1cclxufSApIHtcclxuICBiaW5kRWxlbWVudHNCeUNoZWNrKFxyXG4gICAgdHJpZ2dlckVsZW1lbnQsXHJcbiAgICB0YXJnZXRFbGVtZW50LFxyXG4gICAgKCBlbDogSFRNTEVsZW1lbnQgKSA9PiB7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoICdzaG93JyApO1xyXG4gICAgICBvcHRpb25zLm9uQ2hlY2soIHRyaWdnZXJFbGVtZW50LCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgICB9LFxyXG4gICAgKCBlbDogSFRNTEVsZW1lbnQgKSA9PiB7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoICdzaG93JyApO1xyXG4gICAgICBvcHRpb25zLm9uVW5jaGVjayggdHJpZ2dlckVsZW1lbnQsIHRhcmdldEVsZW1lbnQgKTtcclxuICAgIH0sXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlRnJvbVJhZGlvR3JvdXAoIGdyb3VwTmFtZTogc3RyaW5nICk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBgW25hbWU9JHsgZ3JvdXBOYW1lIH1dOmNoZWNrZWRgICkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICBpZiAoIGVsICkge1xyXG4gICAgcmV0dXJuIGVsLnZhbHVlO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGwoIHRhcmdldFk6IG51bWJlciwgZHVyYXRpb246IG51bWJlciApOiB2b2lkIHtcclxuICBjb25zdCBzdGFydFkgPSB3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgbGV0IHN0YXJ0VGltZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGZ1bmN0aW9uIHN0ZXAoIGN1cnJlbnRUaW1lOiBudW1iZXIgKSB7XHJcbiAgICBpZiAoICFzdGFydFRpbWUgKSBzdGFydFRpbWUgPSBjdXJyZW50VGltZTtcclxuICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XHJcbiAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKCBlbGFwc2VkVGltZSAvIGR1cmF0aW9uLCAxICk7XHJcbiAgICBjb25zdCBlYXNlZFByb2dyZXNzID0gbGVycCggMCwgMSwgcHJvZ3Jlc3MgKTtcclxuICAgIHdpbmRvdy5zY3JvbGxUbyggMCwgbGVycCggc3RhcnRZLCB0YXJnZXRZLCBlYXNlZFByb2dyZXNzICkgKTtcclxuICAgIGlmICggZWxhcHNlZFRpbWUgPCBkdXJhdGlvbiApIHtcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBzdGVwICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHN0ZXAgKTtcclxufVxyXG5cclxuLy8gUmV0b3JuYSB1bWEgZnVuw6fDo28gcXVlIG7Do28gdmFpIHNlciBjb21wbGV0YWRhIGNhc28gc2VqYSBjaGFtYWRhIG5vdmFtZW50ZSBlbSB7IGRlbGF5IH0gbWlsaXNzZWd1bmRvc1xyXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2VGYWN0b3J5KCBmdW5jOiBGdW5jdGlvbiwgZGVsYXk6IG51bWJlciApOiBGdW5jdGlvbiB7XHJcbiAgbGV0IGluRGVib3VuY2U6IG51bWJlcjtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IHdpbmRvdztcclxuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICBjbGVhclRpbWVvdXQoIGluRGVib3VuY2UgKTtcclxuICAgIGluRGVib3VuY2UgPSB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4gZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApLCBkZWxheSApO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIFJldG9ybmEgdW1hIGZ1bsOnw6NvIHF1ZSBzw7MgcG9kZSBzZXIgY29tcGxldGFkYSB1bWEgdmV6IGEgY2FkYSB7IGxpbWl0IH0gbWlsaXNzZWd1bmRvcyBcclxuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlRmFjdG9yeSggZnVuYzogRnVuY3Rpb24sIGxpbWl0OiBudW1iZXIgKTogRnVuY3Rpb24ge1xyXG4gIGxldCBsYXN0RnVuYzogbnVtYmVyO1xyXG4gIGxldCBsYXN0UmFuOiBudW1iZXI7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSB3aW5kb3c7XHJcbiAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgaWYgKCAhbGFzdFJhbiApIHtcclxuICAgICAgZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApO1xyXG4gICAgICBsYXN0UmFuID0gRGF0ZS5ub3coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCggbGFzdEZ1bmMgKTtcclxuICAgICAgbGFzdEZ1bmMgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICggRGF0ZS5ub3coKSAtIGxhc3RSYW4gPj0gbGltaXQgKSB7XHJcbiAgICAgICAgICBmdW5jLmFwcGx5KCBjb250ZXh0LCBhcmdzICk7XHJcbiAgICAgICAgICBsYXN0UmFuID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGxpbWl0IC0gKCBEYXRlLm5vdygpIC0gbGFzdFJhbiApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoU2Nyb2xsVG8oIHBvczogbnVtYmVyICk6IHZvaWQge1xyXG4gIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG8oIHtcclxuICAgIHRvcDogcG9zLFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNtb290aFNjcm9sbFRvRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIHVzZUJyb3dzZXJEZWZhdWx0czogYm9vbGVhbiA9IHRydWUgKTogdm9pZCB7XHJcbiAgaWYgKCAhdXNlQnJvd3NlckRlZmF1bHRzICkge1xyXG4gICAgY29uc3QgdGFyZ2V0WSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnNjcm9sbFk7XHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IDEwMDA7IC8vIER1cmHDp8OjbyBmaXhhIGVtIG1pbGlzc2VndW5kb3MgKDEgc2VndW5kbylcclxuICAgIHNtb290aFNjcm9sbCggdGFyZ2V0WSwgZHVyYXRpb24gKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG8oIHtcclxuICAgIHRvcDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55LFxyXG4gICAgbGVmdDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54LFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE9wdGlvbkJ5VGV4dCggaWRTZWxlY3RFbGVtZW50OiBzdHJpbmcsIHNlYXJjaFRleHQ6IHN0cmluZywgY29udGFpbnM6IGJvb2xlYW4gPSBmYWxzZSApOiB2b2lkIHtcclxuICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGlkU2VsZWN0RWxlbWVudCApIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5cclxuICBpZiAoICFzZWxlY3RFbGVtZW50ICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3B0aW9uc0VsZW1lbnRvU2VsZWN0ID0gWy4uLnNlbGVjdEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCggJ29wdGlvbicgKV07XHJcblxyXG4gIGxldCBzZWxlY3RlZE9wdGlvbjtcclxuICBpZiAoIGNvbnRhaW5zICkge1xyXG4gICAgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zRWxlbWVudG9TZWxlY3RcclxuICAgICAgLmZpbHRlciggZWwgPT4gZWwudGV4dENvbnRlbnQgJiYgZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyggc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpICkgKVswXS52YWx1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zRWxlbWVudG9TZWxlY3RcclxuICAgICAgLmZpbHRlciggZWwgPT4gZWwudGV4dENvbnRlbnQgJiYgZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKSA9PT0gc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpIClbMF0udmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RFbGVtZW50LnZhbHVlID0gc2VsZWN0ZWRPcHRpb247XHJcbn1cclxuXHJcbiIsIlxyXG4vLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYyNDU3NjcvY3JlYXRpbmctYS1ibG9iLWZyb20tYS1iYXNlNjQtc3RyaW5nLWluLWphdmFzY3JpcHRcclxuLy8vIERpdmlkZSB1bSBhcnF1aXZvIGJpbsOhcmlvIGVtIHbDoXJpYXMgcGFydGVzLCBwYXJhIHF1ZSBhIGNvbnZlcnPDo28gc2VqYSBvdGltaXphZGEsIGUgcmV0b3JuYSB1bWEgYmxvYiBjb20gbyBhcnF1aXZvXHJcblxyXG5pbXBvcnQgeyBpc051bGxPckVtcHR5IH0gZnJvbSAnLi9TdHJpbmdUb29scyc7XHJcblxyXG4vLy8gQHBhcmFtIG9uUHJvZ3Jlc3NvIFVtIGNhbGxiYWNrIHF1ZSByZWNlYmUgYSBwb3JjZW50YWdlbSBkZSBwcm9ncmVzc28gYXR1YWwgZGEgY29udmVyc8Ojb1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYmFzZTY0VG9CbG9iKCB0ZXh0b0Jhc2U2NDogc3RyaW5nLCBjb250ZW50VHlwZTogc3RyaW5nLCB0YW1hbmhvUGFydGVzID0gMTAyNCwgb25Qcm9ncmVzcyA9ICggcHJvZ3Jlc3NvQXR1YWw6IG51bWJlciApID0+IHsgY29uc29sZS5sb2coIHByb2dyZXNzb0F0dWFsICkgfSApIHtcclxuICBjb25zdCBieXRlQXJyYXlzID0gbmV3IEFycmF5PFVpbnQ4QXJyYXk+KCk7XHJcbiAgY29uc3QgZmlsZVNpemUgPSB0ZXh0b0Jhc2U2NC5sZW5ndGg7XHJcblxyXG4gIC8vLyBwcmVlbmNoZSBgYnl0ZUFycmF5c2AgY29tIG9zIGJ5dGVzIGRvIGFycXVpdm8gcGVnYW5kbyB1bWEgcGFydGUgZGUgXCJ0YW1hbmhvUGFydGVzXCIgcG9yIHZlelxyXG4gIGZvciAoIGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBmaWxlU2l6ZTsgb2Zmc2V0ICs9IHRhbWFuaG9QYXJ0ZXMgKSB7XHJcbiAgICAvLy8gcGVnYW5kbyB1bSBwYXJ0ZSBkZSB0YW1hbmhvIHt0YW1hbmhvUGFydGVzfSBkbyBhcnF1aXZvXHJcbiAgICBjb25zdCBjaHVuayA9IHRleHRvQmFzZTY0LnNsaWNlKCBvZmZzZXQsIG9mZnNldCArIHRhbWFuaG9QYXJ0ZXMgKTtcclxuXHJcbiAgICAvLy8gY29udmVydGVuZG8gYSBwYXJ0ZSBlbSB1bSBhcnJheSBjb20gY2FkYSBieXRlIGRlc3NlIHBlZGHDp28gZG8gYXJxdWl2b1xyXG4gICAgY29uc3QgYXJyQnl0ZXNDaHVuayA9IG5ldyBBcnJheTxudW1iZXI+KCBjaHVuay5sZW5ndGggKTtcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGNodW5rLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBhcnJCeXRlc0NodW5rW2ldID0gY2h1bmsuY2hhckNvZGVBdCggaSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLyB0cmFuc2Zvcm1hbmRvIGVzc2UgYXJyYXkgZW0gdW0gYXJyYXkgY29tIGNhbXBvcyBkbyB0YW1hbmhvIGRlIHVtIGJ5dGVcclxuICAgIC8vLyBlIHVuaW5kbyBhcyBwYXJ0ZXMgasOhIGNvbmNsdcOtZGFzIGRvIGFycXVpdm9cclxuICAgIGJ5dGVBcnJheXMucHVzaCggbmV3IFVpbnQ4QXJyYXkoIGFyckJ5dGVzQ2h1bmsgKSApO1xyXG5cclxuICAgIC8vLyBDaGFtYW5kbyBjYWxsYmFjayBxdWUgZXhpYmUgbyBwcm9ncmVzc28gcXVhbmRvIG8gcGFzc28gYXR1YWwgZm9yIGNvbmNsdcOtZG9cclxuICAgIGF3YWl0IG9uUHJvZ3Jlc3MoICggb2Zmc2V0IC8gZmlsZVNpemUgKSAqIDEwMCApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5ldyBCbG9iKCBieXRlQXJyYXlzLCB7IHR5cGU6IGNvbnRlbnRUeXBlIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkRmlsZUZyb21CbG9iKCBibG9iOiBCbG9iLCB0aXRsZTogc3RyaW5nICkge1xyXG4gIGxldCBmaWxlID0gVVJMLmNyZWF0ZU9iamVjdFVSTCggYmxvYiApO1xyXG5cclxuICBpZiAoIGZpbGUgKSB7XHJcbiAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdhJyApO1xyXG4gICAgYS5ocmVmID0gZmlsZTtcclxuICAgIGEuZG93bmxvYWQgPSB0aXRsZTtcclxuICAgIGEuY2xpY2soKTtcclxuICAgIGEucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmlsZVBhdGgoIGZpbGVQYXRoOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICBjb25zdCByZWdleCA9IC8oPzouKltcXFxcL10pKFteXFxcXC9dKykkLztcclxuXHJcbiAgY29uc3QgbWF0Y2ggPSByZWdleC5leGVjKCBmaWxlUGF0aCApO1xyXG4gIGlmICggbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSApIHtcclxuICAgIHJldHVybiBtYXRjaFsxXTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZpbGVQYXRoO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24oIGZpbGVOYW1lOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICBpZiAoIGlzTnVsbE9yRW1wdHkoIGZpbGVOYW1lICkgKSByZXR1cm4gJyc7XHJcblxyXG4gIGNvbnN0IGRlZmF1bHRGaWxlU3JjID0gZmlsZU5hbWUuc3BsaXQoICcuJyApLnBvcCgpO1xyXG4gIGlmICggZGVmYXVsdEZpbGVTcmMgJiYgZGVmYXVsdEZpbGVTcmMgIT09IGZpbGVOYW1lICkge1xyXG4gICAgcmV0dXJuIGRlZmF1bHRGaWxlU3JjO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZmlsZVR5cGVTdHIgPSBmaWxlTmFtZS5zcGxpdCggJy8nICkucG9wKCk7XHJcbiAgaWYgKCBmaWxlVHlwZVN0ciAmJiBmaWxlVHlwZVN0ciAhPT0gZmlsZU5hbWUgKSB7XHJcbiAgICByZXR1cm4gZmlsZVR5cGVTdHI7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gJyc7XHJcbn0iLCJleHBvcnQgY29uc3QgcmVnZXhOdW1iZXJQYXR0ZXJuID0gLy0/XFxkK1xcLj9cXGQqL2c7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50MkQge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGltZW5zaW9ucyB7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4VG9Sb3coIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiBNYXRoLmZsb29yKCBpbmRleCAvIGdyaWRXaWR0aCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb0NvbCggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGluZGV4ICUgZ3JpZFdpZHRoO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm93Q29sVG9JbmRleCggcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCB3aWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiAoIHJvdyAqIHdpZHRoICkgKyBjb2w7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlc0Zyb21Qb2ludDJEKCBjb29yZHM6IFBvaW50MkQsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IGNvb3Jkcy54ICogTWF0aC5jb3MoIHJhZGlhbnMgKSAtIGNvb3Jkcy55ICogTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuICBjb25zdCBuZXdZID0gY29vcmRzLnggKiBNYXRoLnNpbiggcmFkaWFucyApICsgY29vcmRzLnkgKiBNYXRoLmNvcyggcmFkaWFucyApO1xyXG4gIHJldHVybiB7IHg6IG5ld1gsIHk6IG5ld1kgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlcyggeDogbnVtYmVyLCB5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IHggKiBNYXRoLmNvcyggcmFkaWFucyApIC0geSAqIE1hdGguc2luKCByYWRpYW5zICk7XHJcbiAgY29uc3QgbmV3WSA9IHggKiBNYXRoLnNpbiggcmFkaWFucyApICsgeSAqIE1hdGguY29zKCByYWRpYW5zICk7XHJcbiAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJlRGlhZ29uYWxzKCBpbmRleDE6IG51bWJlciwgaW5kZXgyOiBudW1iZXIsIGdyaWRTaXplOiBudW1iZXIgKTogYm9vbGVhbiB7XHJcbiAgaWYgKCBpbmRleDEgPCAwIHx8IGluZGV4MiA8IDAgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoICdJbnZhbGlkIGNlbGwgaW5kaWNlcycgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJvdzEgPSBpbmRleFRvUm93KCBpbmRleDEsIGdyaWRTaXplICk7XHJcbiAgY29uc3QgY29sMSA9IGluZGV4VG9Db2woIGluZGV4MSwgZ3JpZFNpemUgKTtcclxuXHJcbiAgY29uc3Qgcm93MiA9IGluZGV4VG9Sb3coIGluZGV4MiwgZ3JpZFNpemUgKTtcclxuICBjb25zdCBjb2wyID0gaW5kZXhUb0NvbCggaW5kZXgyLCBncmlkU2l6ZSApO1xyXG5cclxuICByZXR1cm4gTWF0aC5hYnMoIHJvdzEgLSByb3cyICkgPT09IE1hdGguYWJzKCBjb2wxIC0gY29sMiApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb1BvaW50MkQoIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICk6IFBvaW50MkQge1xyXG4gIHJldHVybiB7XHJcbiAgICB4OiBpbmRleFRvQ29sKCBpbmRleCwgZ3JpZFdpZHRoICksXHJcbiAgICB5OiBpbmRleFRvUm93KCBpbmRleCwgZ3JpZFdpZHRoIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsZXJwKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuICggMSAtIGFtb3VudCApICogbWluICsgYW1vdW50ICogbWF4O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZUxlcnAoIGE6IG51bWJlciwgYjogbnVtYmVyLCB2YWw6IG51bWJlciApOiBudW1iZXIge1xyXG4gIHJldHVybiAoIHZhbCAtIGEgKSAvICggYiAtIGEgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbWFwKCBpbk1pbjogbnVtYmVyLCBpbk1heDogbnVtYmVyLCBvdXRNaW46IG51bWJlciwgb3V0TWF4OiBudW1iZXIsIHZhbDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuIGxlcnAoIG91dE1pbiwgb3V0TWF4LCBpbnZlcnNlTGVycCggaW5NaW4sIGluTWF4LCB2YWwgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiApICsgbWluICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsU2V0czxUPiggc2V0MTogU2V0PFQ+LCBzZXQyOiBTZXQ8VD4gKSB7XHJcbiAgcmV0dXJuIHNldDEuc2l6ZSA9PT0gc2V0Mi5zaXplICYmXHJcbiAgICBbLi4uc2V0MV0uZXZlcnkoICggeCApID0+IHNldDIuaGFzKCB4ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUludEluY2x1c2l2ZSggbWluOiBudW1iZXIsIG1heDogbnVtYmVyICkge1xyXG4gIG1pbiA9IE1hdGguY2VpbCggbWluICk7XHJcbiAgbWF4ID0gTWF0aC5mbG9vciggbWF4ICk7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiArIDEgKSApICsgbWluO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRnJvbUFycmF5PFQ+KCBhcnI6IEFycmF5PFQ+ICkge1xyXG4gIHJldHVybiBhcnJbZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCAwLCBhcnIubGVuZ3RoICldO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAoIG51bTogbnVtYmVyID0gMCwgbWluOiBudW1iZXIgPSAwLCBtYXg6IG51bWJlciA9IDEwMCApOiBudW1iZXIge1xyXG4gIHJldHVybiBNYXRoLm1heCggbWluLCBNYXRoLm1pbiggbnVtLCBtYXggKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWludXRlc1RvTWlsbGlzZWNvbmRzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAqIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9NaW51dGVzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAvIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9Ib3VycyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgLyAzLjZlKzY7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb0RheXMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zIC8gOC42NGUrNztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1lZ2FieXRlVG9CeXRlKCBtYjogbnVtYmVyICkge1xyXG4gIHJldHVybiBtYiAqIDEwMjQgKiAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnl0ZVRvTWVnYWJ5dGUoIGI6IG51bWJlciApIHtcclxuICByZXR1cm4gYiAvIDEwMjQgLyAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJyYXlGcm9tUmFuZ2UoIHNpemU6IG51bWJlciwgc3RhcnRpbmdGcm9tOiBudW1iZXIgPSAwICk6IG51bWJlcltdIHtcclxuICBsZXQgcmVzdWx0ID0gWy4uLkFycmF5KCBzaXplICkua2V5cygpXVxyXG5cclxuICBpZiAoIHN0YXJ0aW5nRnJvbSAhPSAwICkge1xyXG4gICAgcmVzdWx0ID0gcmVzdWx0Lm1hcCggaSA9PiBpICsgc3RhcnRpbmdGcm9tICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFjY2VudHMoIHN0cjogc3RyaW5nICkge1xyXG4gIHJldHVybiBzdHIubm9ybWFsaXplKCAnTkZEJyApLnJlcGxhY2UoIC9bXFx1MDMwMC1cXHUwMzZmXS9nLCBcIlwiICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoIHN0cjogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgaWYgKCB0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyApIHtcclxuICAgIHJldHVybiAnJztcclxuICB9XHJcbiAgcmV0dXJuIHN0ci5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cmluZyggMSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoVGVybSggc3RyaW5nQXJyYXk6IHN0cmluZ1tdLCBzZWFyY2hUZXJtOiBzdHJpbmcgKTogc3RyaW5nW10ge1xyXG4gIHJldHVybiBzdHJpbmdBcnJheVxyXG4gICAgLmZpbHRlciggKCB2OiBzdHJpbmcgKSA9PiB2LnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpICkgPiAtMSApXHJcbiAgICAuc2xpY2UoIDAsIDEwIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHplcm9CZWZvcmUoIG46IG51bWJlciApIHtcclxuICByZXR1cm4gbi50b1N0cmluZygpLnBhZFN0YXJ0KCAyLCAnMCcgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbE9yRW1wdHkoIHN0cjogc3RyaW5nICkge1xyXG4gIHJldHVybiB0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyB8fCAhc3RyIHx8IHN0ciA9PT0gJydcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvUGhvbmVOdW1iZXIoIGlucHV0VGV4dDogc3RyaW5nICkge1xyXG4gIGNvbnN0IGNsZWFuTnVtYmVyID0gaW5wdXRUZXh0LnJlcGxhY2UoIC9cXEQvZywgJycgKTtcclxuXHJcbiAgbGV0IHJlc3VsdDtcclxuICBpZiAoIGNsZWFuTnVtYmVyLmxlbmd0aCA8PSAxMCApIHtcclxuICAgIGNvbnN0IHJlZ2V4ID0gL14oXFxkezJ9KShcXGR7NH0pKFxcZHswLDR9KSQvO1xyXG4gICAgcmVzdWx0ID0gY2xlYW5OdW1iZXIucmVwbGFjZSggcmVnZXgsICcoJDEpICQyLSQzJyApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCByZWdleCA9IC9eKFxcZHsyfSkoXFxkezV9KShcXGR7MCw0fSkkLztcclxuICAgIHJlc3VsdCA9IGNsZWFuTnVtYmVyLnJlcGxhY2UoIHJlZ2V4LCAnKCQxKSAkMi0kMycgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVTcGVjaWFsQ2hhcmFjdGVycyggaW5wdXQ6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIHJldHVybiBpbnB1dC5yZXBsYWNlKCAvW15hLXpBLVowLTldL2csICcnICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlU3BlY2lhbFdpdGhXaGl0ZXNwYWNlKCBpbnB1dDogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGlucHV0LnJlcGxhY2UoIC9bXmEtekEtWjAtOV0vZywgJyAnICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlUGVyY2VudEVuY29kaW5nKCBodG1sOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICAvLyBSZXBsYWNlICUyMCB3aXRoIGFjdHVhbCBzcGFjZXNcclxuICByZXR1cm4gaHRtbC5yZXBsYWNlKCAvJTIwL2csICcgJyApO1xyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IE9iamVjdEV2ZW50TGlzdGVuZXIgfSBmcm9tICcuLi8uLi9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lcic7XHJcbmltcG9ydCB7IGdldEVsZW1lbnRGcm9tSFRNTCwgaXNWYWxpZFlvdXR1YmVVcmxPcklkIH0gZnJvbSAnLi4vLi4vVG9vbHMvRE9NVG9vbHMnO1xyXG5pbXBvcnQgeyByZW1vdmVGaWxlUGF0aCB9IGZyb20gJy4uLy4uL1Rvb2xzL0ZpbGVUb29scyc7XHJcbmltcG9ydCB7IHJlbW92ZVNwZWNpYWxDaGFyYWN0ZXJzLCByZXBsYWNlUGVyY2VudEVuY29kaW5nIH0gZnJvbSAnLi4vLi4vVG9vbHMvU3RyaW5nVG9vbHMnO1xyXG5pbXBvcnQgeyBBdWRpb0NvbXBvbmVudCB9IGZyb20gJy4uL0F1ZGlvQ29tcG9uZW50JztcclxuaW1wb3J0IHsgWW91dHViZUlmcmFtZSB9IGZyb20gJy4uL1lvdXR1YmVJZnJhbWUvWW91dHViZUlmcmFtZVN3aXRjaGVyJztcclxuaW1wb3J0IHsgdGVtcGxhdGVTb3VuZGJvYXJkSW5wdXQsIHRlbXBsYXRlU291bmRib2FyZEl0ZW1Db250YWluZXIgfSBmcm9tICcuL1RlbXBsYXRlc1NvdW5kYm9hcmQnO1xyXG5cclxuXHJcbmV4cG9ydCB0eXBlIFNvdW5kYm9hcmRJdGVtT3B0aW9ucyA9IHtcclxuICBzcmM6IHN0cmluZztcclxuICBhdXRvUmVwZWF0T25QbGF5OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTb3VuZGJvYXJkSXRlbVBvc3NpYmxlSW5wdXQgPSBzdHJpbmcgfCBTb3VuZGJvYXJkSXRlbU9wdGlvbnM7XHJcblxyXG5leHBvcnQgdHlwZSBTb3VuZGJvYXJkT3B0aW9ucyA9IHtcclxuICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIGFyck1lZGlhU3JjOiBTb3VuZGJvYXJkSXRlbVBvc3NpYmxlSW5wdXRbXTtcclxuICBjb250YWluZXJzQ2xhc3NMaXN0OiBzdHJpbmdbXTtcclxuICBpdGVtQ2xhc3NMaXN0OiBzdHJpbmdbXTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgU291bmRib2FyZE1lZGlhID0gWW91dHViZUlmcmFtZSB8IEF1ZGlvQ29tcG9uZW50O1xyXG5cclxuZXhwb3J0IHR5cGUgU291bmRib2FyZENvbXBvbmVudCA9IHtcclxuICBtZWRpYTogU291bmRib2FyZE1lZGlhO1xyXG4gIGlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGlucHV0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBidXR0b25SZW1vdmVJdGVtOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICBtZWRpYUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgaXRlbU9wdGlvbnM6IFNvdW5kYm9hcmRJdGVtT3B0aW9ucztcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTb3VuZGJvYXJkIGV4dGVuZHMgT2JqZWN0RXZlbnRMaXN0ZW5lciB7XHJcbiAgcHVibGljIHJlYWRvbmx5IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcHVibGljIGNvbnRhaW5lcnNDbGFzc0xpc3Q6IHN0cmluZ1tdO1xyXG4gIHB1YmxpYyBpdGVtQ2xhc3NMaXN0OiBzdHJpbmdbXTtcclxuXHJcbiAgcHJpdmF0ZSBfc2V0TWVkaWFDb250cm9sbGVycyA9IG5ldyBTZXQ8U291bmRib2FyZENvbXBvbmVudD4oKTtcclxuICBwcml2YXRlIF9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZCA9IG5ldyBNYXA8c3RyaW5nLCBTb3VuZGJvYXJkQ29tcG9uZW50PigpO1xyXG4gIHByaXZhdGUgX21hcElucHV0QnlDb21wb25lbnRJZDogTWFwPHN0cmluZywgSFRNTElucHV0RWxlbWVudD4gPSBuZXcgTWFwPHN0cmluZywgSFRNTElucHV0RWxlbWVudD4oKTtcclxuXHJcbiAgY29uc3RydWN0b3IoIG9wdGlvbnM6IFNvdW5kYm9hcmRPcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xyXG4gICAgdGhpcy5jb250YWluZXJzQ2xhc3NMaXN0ID0gb3B0aW9ucy5jb250YWluZXJzQ2xhc3NMaXN0ID8/IFtdO1xyXG4gICAgdGhpcy5pdGVtQ2xhc3NMaXN0ID0gb3B0aW9ucy5pdGVtQ2xhc3NMaXN0ID8/IFtdO1xyXG5cclxuICAgIHRoaXMuYWRkTWVkaWFMaXN0KCBvcHRpb25zLmFyck1lZGlhU3JjICk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0SW5zdGFudE1QM0Rvd25sb2FkTGluayggdXJsOiBzdHJpbmcgKSB7XHJcbiAgICBpZiAoICFTb3VuZGJvYXJkLmlzTXlJbnN0YW50c0xpbmsoIHVybCApICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoICdOb3QgYSBNeUluc3RhbnRzIGxpbmsnICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWF0Y2hlcyA9IHVybC5tYXRjaCggL1xcL2luc3RhbnRcXC8oW14vXSspXFwvPy8gKTtcclxuICAgIGlmICggIW1hdGNoZXMgfHwgbWF0Y2hlcy5sZW5ndGggPCAyICkge1xyXG4gICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc291bmROYW1lID0gbWF0Y2hlc1sxXTtcclxuXHJcbiAgICBjb25zdCBzYW5pdGl6ZWRTb3VuZE5hbWUgPSBzb3VuZE5hbWUucmVwbGFjZSggLy1cXGQrJC8sICcnICk7XHJcblxyXG4gICAgY29uc3QgZG93bmxvYWRMaW5rID0gYGh0dHBzOi8vd3d3Lm15aW5zdGFudHMuY29tL21lZGlhL3NvdW5kcy8keyBzYW5pdGl6ZWRTb3VuZE5hbWUgfS5tcDNgO1xyXG4gICAgcmV0dXJuIGRvd25sb2FkTGluaztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc015SW5zdGFudHNMaW5rKCB1cmw6IHN0cmluZyApIHtcclxuICAgIHJldHVybiB1cmwuaW5jbHVkZXMoICdteWluc3RhbnRzLmNvbScgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBhZGRNZWRpYUxpc3QoIGFyck1lZGlhU3JjOiBTb3VuZGJvYXJkSXRlbVBvc3NpYmxlSW5wdXRbXSApOiBQcm9taXNlPFNvdW5kYm9hcmRDb21wb25lbnRbXT4ge1xyXG4gICAgbGV0IG1lZGlhQ29tcG9uZW50czogU291bmRib2FyZENvbXBvbmVudFtdID0gW107XHJcblxyXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJyTWVkaWFTcmMubGVuZ3RoOyArK2kgKSB7XHJcbiAgICAgIGNvbnN0IHNyY09wdGlvbnMgPSB0aGlzLmdldFNvdXJjZUlucHV0RGVmYXVsdE9wdGlvbnMoIGFyck1lZGlhU3JjW2ldICk7XHJcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGF3YWl0IHRoaXMuYWRkTWVkaWEoIHNyY09wdGlvbnMgKTtcclxuICAgICAgbWVkaWFDb21wb25lbnRzLnB1c2goIGNvbXBvbmVudCApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtZWRpYUNvbXBvbmVudHM7XHJcbiAgfVxyXG5cclxuICBnZXRDdXN0b21BdWRpb0NvbXBvbmVudE1lZGlhT3B0aW9ucyggbWVkaWFPcHRpb25zOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMgKTogU291bmRib2FyZEl0ZW1PcHRpb25zIHtcclxuICAgIGNvbnN0IHJlc3VsdDogU291bmRib2FyZEl0ZW1PcHRpb25zID0gc3RydWN0dXJlZENsb25lKCBtZWRpYU9wdGlvbnMgKTtcclxuXHJcbiAgICBpZiAoIFNvdW5kYm9hcmQuaXNNeUluc3RhbnRzTGluayggbWVkaWFPcHRpb25zLnNyYyApICkge1xyXG4gICAgICByZXN1bHQuc3JjID0gU291bmRib2FyZC5nZXRJbnN0YW50TVAzRG93bmxvYWRMaW5rKCBtZWRpYU9wdGlvbnMuc3JjICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBhZGRNZWRpYSggbWVkaWFPcHRpb25zOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMgKTogUHJvbWlzZTxTb3VuZGJvYXJkQ29tcG9uZW50PiB7XHJcbiAgICBsZXQgY29tcG9uZW50UmVzdWx0OiBTb3VuZGJvYXJkQ29tcG9uZW50O1xyXG5cclxuICAgIGlmICggaXNWYWxpZFlvdXR1YmVVcmxPcklkKCBtZWRpYU9wdGlvbnMuc3JjICkgKSB7XHJcbiAgICAgIGNvbXBvbmVudFJlc3VsdCA9IGF3YWl0IHRoaXMuYWRkSWZyYW1lKCB0aGlzLmNvbnRhaW5lci5pZCwgbWVkaWFPcHRpb25zICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb21wb25lbnRSZXN1bHQgPSBhd2FpdCB0aGlzLmFkZEF1ZGlvQ29tcG9uZW50KCB0aGlzLmNvbnRhaW5lci5pZCwgdGhpcy5nZXRDdXN0b21BdWRpb0NvbXBvbmVudE1lZGlhT3B0aW9ucyggbWVkaWFPcHRpb25zICkgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldENvbXBvbmVudE5hbWVCeUlkKCBjb21wb25lbnRSZXN1bHQubWVkaWEuaWQsIGNvbXBvbmVudFJlc3VsdC5tZWRpYS5uYW1lICk7XHJcblxyXG4gICAgcmV0dXJuIGNvbXBvbmVudFJlc3VsdDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0U291cmNlSW5wdXREZWZhdWx0T3B0aW9ucyggaW5wdXQ6IFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dCApOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMge1xyXG4gICAgaWYgKCB0eXBlb2YgKCBpbnB1dCApID09PSAnc3RyaW5nJyApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzcmM6IGlucHV0LFxyXG4gICAgICAgIGF1dG9SZXBlYXRPblBsYXk6IHRydWUsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGlucHV0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZFlvdXR1YmVMaXN0KCBhcnJWaWRlb09wdGlvbnM6IFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dFtdID0gW10gKSB7XHJcbiAgICBjb25zdCBhcnJNZWRpYUlucHV0cyA9IGFyclZpZGVvT3B0aW9ucy5tYXAoIHNyYyA9PiB0aGlzLmdldFNvdXJjZUlucHV0RGVmYXVsdE9wdGlvbnMoIHNyYyApICk7XHJcbiAgICBhcnJNZWRpYUlucHV0cy5mb3JFYWNoKCB2aWRlb0lkID0+IHtcclxuICAgICAgdGhpcy5hZGRJZnJhbWUoIGAkeyB0aGlzLmNvbnRhaW5lci5pZCB9SWZyYW1lVGFibGVJdGVtJHsgdmlkZW9JZC5zcmMgfWAsIHZpZGVvSWQgKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRBdWRpb0xpc3QoIGFyck1lZGlhT3B0aW9uczogU291bmRib2FyZEl0ZW1Qb3NzaWJsZUlucHV0W10gPSBbXSApIHtcclxuICAgIGNvbnN0IGFyck1lZGlhSW5wdXRzID0gYXJyTWVkaWFPcHRpb25zLm1hcCggc3JjID0+IHRoaXMuZ2V0U291cmNlSW5wdXREZWZhdWx0T3B0aW9ucyggc3JjICkgKTtcclxuICAgIGFyck1lZGlhSW5wdXRzLmZvckVhY2goIG1lZGlhSW5wdXQgPT4gdGhpcy5hZGRBdWRpb0NvbXBvbmVudCggdGhpcy5jb250YWluZXIuaWQsIHRoaXMuZ2V0Q3VzdG9tQXVkaW9Db21wb25lbnRNZWRpYU9wdGlvbnMoIG1lZGlhSW5wdXQgKSApICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZENvbXBvbmVudEludGVyYWN0aW9uQmxvY2tFdmVudCggY29tcG9uZW50OiBTb3VuZGJvYXJkQ29tcG9uZW50LCBtZWRpYU9wdGlvbnM6IFNvdW5kYm9hcmRJdGVtT3B0aW9ucyApIHtcclxuICAgIGNvbXBvbmVudC5tZWRpYS5hZGRFdmVudExpc3RlbmVyKCAnb25pbnRlcmFjdGlvbmJsb2NrZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbXBvbmVudC5tZWRpYS5zZWVrKCAwLCB0cnVlICk7XHJcbiAgICAgIGlmICggbWVkaWFPcHRpb25zLmF1dG9SZXBlYXRPblBsYXkgKSB7XHJcbiAgICAgICAgY29tcG9uZW50Lm1lZGlhLnBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbXBvbmVudC5tZWRpYS50b2dnbGUoKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldElucHV0QnlTb3VyY2UoIHNyYzogc3RyaW5nICkge1xyXG4gICAgaWYgKCAhdGhpcy5fbWFwSW5wdXRCeUNvbXBvbmVudElkLmhhcyggc3JjICkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJFbGVtZW50IHNyYyBub3Qgb24gc291bmQgdGFibGUuXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5fbWFwSW5wdXRCeUNvbXBvbmVudElkLmdldCggc3JjICkhO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbXBvbmVudHNDb250cm9sbGVycygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKCB0aGlzLl9zZXRNZWRpYUNvbnRyb2xsZXJzICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEVsZW1lbnRNZWRpYUNvbnRhaW5lciggY29udGFpbmVySWQ6IHN0cmluZywgbWVkaWFOYW1lOiBzdHJpbmcgPSBcIlwiICkge1xyXG4gICAgY29uc3QgZWxlbWVudE1lZGlhQ29udGFpbmVyID0gZ2V0RWxlbWVudEZyb21IVE1MKCB0ZW1wbGF0ZVNvdW5kYm9hcmRJdGVtQ29udGFpbmVyKCBjb250YWluZXJJZCwgbWVkaWFOYW1lICkgKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGVsZW1lbnRNZWRpYUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCAuLi50aGlzLmNvbnRhaW5lcnNDbGFzc0xpc3QgKTtcclxuICAgIHJldHVybiBlbGVtZW50TWVkaWFDb250YWluZXI7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIHNldENvbXBvbmVudE5hbWVCeUlkKCBjb21wb25lbnRJZDogc3RyaW5nLCBjb21wb25lbnROYW1lOiBzdHJpbmcgKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnROYW1lRWxlbWVudCA9IHRoaXMuZ2V0RWxlbWVudEl0ZW1OYW1lQ29udGFpbmVyQnlJZCggY29tcG9uZW50SWQgKTtcclxuICAgIGNvbXBvbmVudE5hbWVFbGVtZW50LmlubmVySFRNTCA9IHJlcGxhY2VQZXJjZW50RW5jb2RpbmcoIGNvbXBvbmVudE5hbWUgKTtcclxuICAgIGNvbXBvbmVudE5hbWVFbGVtZW50LnNldEF0dHJpYnV0ZSggJ3RpdGxlJywgcmVwbGFjZVBlcmNlbnRFbmNvZGluZyggY29tcG9uZW50TmFtZSApICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEVsZW1lbnRJdGVtTmFtZUNvbnRhaW5lckJ5SWQoIGl0ZW1JZDogc3RyaW5nICk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmdldCggaXRlbUlkICk7XHJcbiAgICBpZiAoICFjb21wb25lbnQgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJDb21wb25lbnQgZG9lcyBub3QgZXhpc3QuXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbGVtZW50TWVkaWFOYW1lID0gY29tcG9uZW50Lm1lZGlhQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoICcuc291bmQtdGFibGUtbWVkaWEtbmFtZScgKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmICggIWVsZW1lbnRNZWRpYU5hbWUgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJNZWRpYSBuYW1lIGZvciB0aGlzIGVsZW1lbnQgd2FzIHJlbW92ZWQuXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZWxlbWVudE1lZGlhTmFtZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXROZXdBdWRpb0NvbXBvbmVudElkKCBjb250YWluZXJJZDogc3RyaW5nLCBtZWRpYU9wdGlvbnM6IFNvdW5kYm9hcmRJdGVtT3B0aW9ucyApIHtcclxuICAgIHJldHVybiByZW1vdmVTcGVjaWFsQ2hhcmFjdGVycyggY29udGFpbmVySWQgKyAnQXVkaW9FbGVtZW50JyArIHJlbW92ZUZpbGVQYXRoKCBtZWRpYU9wdGlvbnMuc3JjICkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXROZXdZb3V0dWJlSWZyYW1lSWQoIGNvbnRhaW5lcklkOiBzdHJpbmcsIG1lZGlhT3B0aW9uczogU291bmRib2FyZEl0ZW1PcHRpb25zICkge1xyXG4gICAgcmV0dXJuIHJlbW92ZVNwZWNpYWxDaGFyYWN0ZXJzKCBjb250YWluZXJJZCArICdZb3V0dWJlSWZyYW1lJyArIHJlbW92ZUZpbGVQYXRoKCBtZWRpYU9wdGlvbnMuc3JjICkgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgYWRkQXVkaW9Db21wb25lbnQoIGNvbnRhaW5lcklkOiBzdHJpbmcsIG1lZGlhT3B0aW9uczogU291bmRib2FyZEl0ZW1PcHRpb25zICk6IFByb21pc2U8U291bmRib2FyZENvbXBvbmVudD4ge1xyXG4gICAgY29uc3QgYXVkaW9FbGVtZW50SWQgPSB0aGlzLmdldE5ld0F1ZGlvQ29tcG9uZW50SWQoIGNvbnRhaW5lcklkLCBtZWRpYU9wdGlvbnMgKTtcclxuICAgIGlmICggdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuaGFzKCBhdWRpb0VsZW1lbnRJZCApICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiQSBjb21wb25lbnQgd2l0aCB0aGlzIGlkIGFscmVhZHkgZXhpc3RzOiBcIiArIGF1ZGlvRWxlbWVudElkICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYXVkaW9Db250YWluZXIgPSB0aGlzLmdldEVsZW1lbnRNZWRpYUNvbnRhaW5lciggY29udGFpbmVySWQgKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGF1ZGlvQ29udGFpbmVyICk7XHJcblxyXG4gICAgY29uc3QgYXVkaW9Db21wb25lbnQgPSBhd2FpdCBBdWRpb0NvbXBvbmVudC5jcmVhdGVBdWRpb0NvbXBvbmVudCgge1xyXG4gICAgICBzcmM6IG1lZGlhT3B0aW9ucy5zcmMsXHJcbiAgICAgIGF1ZGlvRWxlbWVudElkOiBhdWRpb0VsZW1lbnRJZCxcclxuICAgICAgYmxvY2tJbnRlcmFjdGlvbjogdHJ1ZSxcclxuICAgICAgY29udGFpbmVyOiBhdWRpb0NvbnRhaW5lclxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGlucHV0SW5mbyA9IHRoaXMuYWRkSW5wdXRFbGVtZW50VG9Db250YWluZXIoIGF1ZGlvQ29udGFpbmVyLCBhdWRpb0NvbXBvbmVudCwgYXVkaW9Db21wb25lbnQuaWQsIG1lZGlhT3B0aW9ucy5zcmMgKTtcclxuICAgIGNvbnN0IHNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudDogU291bmRib2FyZENvbXBvbmVudCA9IHtcclxuICAgICAgbWVkaWE6IGF1ZGlvQ29tcG9uZW50LFxyXG4gICAgICBpbnB1dDogaW5wdXRJbmZvLmlucHV0LFxyXG4gICAgICBpbnB1dENvbnRhaW5lcjogaW5wdXRJbmZvLmNvbnRhaW5lcixcclxuICAgICAgYnV0dG9uUmVtb3ZlSXRlbTogaW5wdXRJbmZvLmJ1dHRvbkVsZW1lbnQsXHJcbiAgICAgIG1lZGlhQ29udGFpbmVyOiBhdWRpb0NvbnRhaW5lcixcclxuICAgICAgaXRlbU9wdGlvbnM6IG1lZGlhT3B0aW9uc1xyXG4gICAgfTtcclxuXHJcbiAgICBhdWRpb0NvbXBvbmVudC5jb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ3NvdW5kLXRhYmxlLWl0ZW0nLCAuLi4gdGhpcy5pdGVtQ2xhc3NMaXN0ICk7XHJcblxyXG4gICAgdGhpcy5fc2V0TWVkaWFDb250cm9sbGVycy5hZGQoIHNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudCApO1xyXG4gICAgdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuc2V0KCBhdWRpb0NvbXBvbmVudC5pZCwgc291bmRib2FyZEF1ZGlvQ29tcG9uZW50ICk7XHJcbiAgICB0aGlzLmFkZENvbXBvbmVudEludGVyYWN0aW9uQmxvY2tFdmVudCggc291bmRib2FyZEF1ZGlvQ29tcG9uZW50LCBtZWRpYU9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLnNldENvbXBvbmVudE5hbWVCeUlkKCBhdWRpb0NvbXBvbmVudC5pZCwgYXVkaW9Db21wb25lbnQubmFtZSApO1xyXG5cclxuICAgIHJldHVybiBzb3VuZGJvYXJkQXVkaW9Db21wb25lbnQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGFkZElmcmFtZSggY29udGFpbmVySWQ6IHN0cmluZywgbWVkaWFPcHRpb25zOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMgKTogUHJvbWlzZTxTb3VuZGJvYXJkQ29tcG9uZW50PiB7XHJcbiAgICBjb25zdCBpZnJhbWVJZCA9IHRoaXMuZ2V0TmV3WW91dHViZUlmcmFtZUlkKCBjb250YWluZXJJZCwgbWVkaWFPcHRpb25zICk7XHJcbiAgICBpZiAoIHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmhhcyggaWZyYW1lSWQgKSApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIkEgY29tcG9uZW50IHdpdGggdGhpcyBpZCBhbHJlYWR5IGV4aXN0czogXCIgKyBpZnJhbWVJZCApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVsZW1lbnRJZnJhbWVDb250YWluZXIgPSB0aGlzLmdldEVsZW1lbnRNZWRpYUNvbnRhaW5lciggY29udGFpbmVySWQgKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGVsZW1lbnRJZnJhbWVDb250YWluZXIgKTtcclxuXHJcbiAgICBjb25zdCBuZXdJZnJhbWUgPSBuZXcgWW91dHViZUlmcmFtZSgge1xyXG4gICAgICBpZnJhbWVJZDogaWZyYW1lSWQsXHJcbiAgICAgIHZpZGVvSWQ6IG1lZGlhT3B0aW9ucy5zcmMsXHJcbiAgICAgIHBhcmVudEVsZW1lbnQ6IGVsZW1lbnRJZnJhbWVDb250YWluZXIsXHJcbiAgICAgIHN0YXJ0c0F0OiAwLFxyXG4gICAgICBjbGFzc0xpc3Q6IFsnc291bmQtdGFibGUtaXRlbScsICdvdmVyZmxvdy1oaWRkZW4nLCAuLi4gdGhpcy5pdGVtQ2xhc3NMaXN0XSxcclxuICAgICAgYmxvY2tJbnRlcmFjdGlvbjogdHJ1ZVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGlucHV0SW5mbyA9IHRoaXMuYWRkSW5wdXRFbGVtZW50VG9Db250YWluZXIoIGVsZW1lbnRJZnJhbWVDb250YWluZXIsIG5ld0lmcmFtZSwgbmV3SWZyYW1lLmlkLCBtZWRpYU9wdGlvbnMuc3JjICk7XHJcbiAgICBjb25zdCBzb3VuZGJvYXJkWW91dHViZUNvbXBvbmVudDogU291bmRib2FyZENvbXBvbmVudCA9IHtcclxuICAgICAgbWVkaWE6IG5ld0lmcmFtZSxcclxuICAgICAgaW5wdXQ6IGlucHV0SW5mby5pbnB1dCxcclxuICAgICAgaW5wdXRDb250YWluZXI6IGlucHV0SW5mby5jb250YWluZXIsXHJcbiAgICAgIGJ1dHRvblJlbW92ZUl0ZW06IGlucHV0SW5mby5idXR0b25FbGVtZW50LFxyXG4gICAgICBtZWRpYUNvbnRhaW5lcjogZWxlbWVudElmcmFtZUNvbnRhaW5lcixcclxuICAgICAgaXRlbU9wdGlvbnM6IG1lZGlhT3B0aW9ucyxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5fc2V0TWVkaWFDb250cm9sbGVycy5hZGQoIHNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50ICk7XHJcbiAgICB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5zZXQoIG5ld0lmcmFtZS5pZCwgc291bmRib2FyZFlvdXR1YmVDb21wb25lbnQgKTtcclxuXHJcbiAgICBhd2FpdCBZb3V0dWJlSWZyYW1lLmJ1aWxkU2luZ2xlSWZyYW1lKCBuZXdJZnJhbWUgKTtcclxuXHJcbiAgICB0aGlzLmFkZENvbXBvbmVudEludGVyYWN0aW9uQmxvY2tFdmVudCggc291bmRib2FyZFlvdXR1YmVDb21wb25lbnQsIG1lZGlhT3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMuc2V0Q29tcG9uZW50TmFtZUJ5SWQoIGlmcmFtZUlkLCBuZXdJZnJhbWUudmlkZW9OYW1lICk7XHJcblxyXG4gICAgcmV0dXJuIHNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGNoYW5nZUNvbXBvbmVudFNvdXJjZVRvSW5wdXRWYWx1ZSggY29tcG9uZW50SWQ6IHN0cmluZyApOiBQcm9taXNlPFNvdW5kYm9hcmRDb21wb25lbnQ+IHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmdldCggY29tcG9uZW50SWQgKSE7XHJcbiAgICBpZiAoICFjb21wb25lbnQgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJDb21wb25lbnQgaWQgZG9lcyBub3QgZXhpc3RcIiApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggY29tcG9uZW50Lm1lZGlhIGluc3RhbmNlb2YgWW91dHViZUlmcmFtZSApIHtcclxuICAgICAgdGhpcy5jaGFuZ2VZb3V0dWJlSWZyYW1lU291cmNlKCBjb21wb25lbnRJZCwgY29tcG9uZW50LmlucHV0LnZhbHVlICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNoYW5nZUF1ZGlvQ29tcG9uZW50U291cmNlKCBjb21wb25lbnRJZCwgY29tcG9uZW50LmlucHV0LnZhbHVlICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuZGVsZXRlKCBjb21wb25lbnRJZCApO1xyXG4gICAgdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuc2V0KCBjb21wb25lbnQubWVkaWEuaWQsIGNvbXBvbmVudCApO1xyXG5cclxuICAgIHRoaXMuc2V0Q29tcG9uZW50TmFtZUJ5SWQoIGNvbXBvbmVudC5tZWRpYS5pZCwgY29tcG9uZW50Lm1lZGlhLm5hbWUgKTtcclxuXHJcbiAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGNoYW5nZUNvbXBvbmVudFNvdXJjZSggY29tcG9uZW50SWQ6IHN0cmluZywgbmV3U291cmNlOiBzdHJpbmcgKTogUHJvbWlzZTxTb3VuZGJvYXJkQ29tcG9uZW50PiB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5nZXQoIGNvbXBvbmVudElkICkhO1xyXG4gICAgaWYgKCAhY29tcG9uZW50ICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiQ29tcG9uZW50IGlkIGRvZXMgbm90IGV4aXN0XCIgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIGNvbXBvbmVudC5tZWRpYSBpbnN0YW5jZW9mIFlvdXR1YmVJZnJhbWUgKSB7XHJcbiAgICAgIHRoaXMuY2hhbmdlWW91dHViZUlmcmFtZVNvdXJjZSggY29tcG9uZW50SWQsIG5ld1NvdXJjZSApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jaGFuZ2VBdWRpb0NvbXBvbmVudFNvdXJjZSggY29tcG9uZW50SWQsIG5ld1NvdXJjZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmRlbGV0ZSggY29tcG9uZW50SWQgKTtcclxuICAgIHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLnNldCggY29tcG9uZW50Lm1lZGlhLmlkLCBjb21wb25lbnQgKTtcclxuXHJcbiAgICB0aGlzLnNldENvbXBvbmVudE5hbWVCeUlkKCBjb21wb25lbnQubWVkaWEuaWQsIGNvbXBvbmVudC5tZWRpYS5uYW1lICk7XHJcblxyXG4gICAgcmV0dXJuIGNvbXBvbmVudDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2hhbmdlQXVkaW9Db21wb25lbnRTb3VyY2UoIGNvbXBvbmVudElkOiBzdHJpbmcsIG5ld1ZhbHVlOiBzdHJpbmcgKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5nZXQoIGNvbXBvbmVudElkICkhO1xyXG4gICAgaWYgKCAhY29tcG9uZW50ICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiQ29tcG9uZW50IGlkIGRvZXMgbm90IGV4aXN0XCIgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoICEoIGNvbXBvbmVudC5tZWRpYSBpbnN0YW5jZW9mIEF1ZGlvQ29tcG9uZW50ICkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJJbnZhbGlkIG9wZXJhdGlvblwiICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50Lml0ZW1PcHRpb25zLnNyYyA9IG5ld1ZhbHVlO1xyXG4gICAgY29uc3QgbmV3QXVkaW9PcHRpb25zOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMgPSB0aGlzLmdldEN1c3RvbUF1ZGlvQ29tcG9uZW50TWVkaWFPcHRpb25zKCBjb21wb25lbnQuaXRlbU9wdGlvbnMgKTtcclxuICAgIGNvbnN0IG5ld0lkID0gdGhpcy5nZXROZXdBdWRpb0NvbXBvbmVudElkKCBjb21wb25lbnQubWVkaWFDb250YWluZXIuaWQsIG5ld0F1ZGlvT3B0aW9ucyApO1xyXG5cclxuICAgIGlmICggdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuaGFzKCBuZXdJZCApICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiQSBjb21wb25lbnQgd2l0aCB0aGlzIGlkIGFscmVhZHkgZXhpc3RzOiBcIiArIG5ld0lkICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50Lm1lZGlhLmNoYW5nZVNvdXJjZSggbmV3QXVkaW9PcHRpb25zLnNyYywgbmV3SWQgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY2hhbmdlWW91dHViZUlmcmFtZVNvdXJjZSggY29tcG9uZW50SWQ6IHN0cmluZywgbmV3VmFsdWU6IHN0cmluZyApIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmdldCggY29tcG9uZW50SWQgKSE7XHJcbiAgICBpZiAoICFjb21wb25lbnQgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJDb21wb25lbnQgaWQgZG9lcyBub3QgZXhpc3RcIiApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggISggY29tcG9uZW50Lm1lZGlhIGluc3RhbmNlb2YgWW91dHViZUlmcmFtZSApICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCBvcGVyYXRpb25cIiApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggIWlzVmFsaWRZb3V0dWJlVXJsT3JJZCggbmV3VmFsdWUgKSApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIkludmFsaWQgeW91dHViZSBVUkxcIiApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudC5pdGVtT3B0aW9ucy5zcmMgPSBuZXdWYWx1ZTtcclxuICAgIGNvbnN0IG5ld0lkID0gdGhpcy5nZXROZXdZb3V0dWJlSWZyYW1lSWQoIGNvbXBvbmVudC5tZWRpYUNvbnRhaW5lci5pZCwgY29tcG9uZW50Lml0ZW1PcHRpb25zICk7XHJcblxyXG4gICAgaWYgKCB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5oYXMoIG5ld0lkICkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJBIGNvbXBvbmVudCB3aXRoIHRoaXMgaWQgYWxyZWFkeSBleGlzdHM6IFwiICsgbmV3SWQgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBjb21wb25lbnQubWVkaWEuY2hhbmdlVmlkZW8oIHtcclxuICAgICAgaWZyYW1lSWQ6IG5ld0lkLFxyXG4gICAgICB2aWRlb0lkOiBuZXdWYWx1ZSxcclxuICAgICAgc3RhcnRzQXQ6IDBcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkSW5wdXRFbGVtZW50VG9Db250YWluZXIoIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNvbXBvbmVudE1lZGlhOiBTb3VuZGJvYXJkTWVkaWEsIGNvbXBvbmVudElkOiBzdHJpbmcsIGlucHV0U291cmNlOiBzdHJpbmcgKSB7XHJcbiAgICBjb25zdCBpbnB1dEVsZW1lbnRDb250YWluZXIgPSBnZXRFbGVtZW50RnJvbUhUTUwoIHRlbXBsYXRlU291bmRib2FyZElucHV0KCBjb21wb25lbnRJZCwgJ1NvdXJjZScsIGlucHV0U291cmNlICkgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGlucHV0RWxlbWVudENvbnRhaW5lciApO1xyXG5cclxuICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGlucHV0RWxlbWVudENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCAnLnNvdW5kLXRhYmxlLWlucHV0JyApISBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGlucHV0RWxlbWVudENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCAnLnNvdW5kLXRhYmxlLXJlbW92ZS1pdGVtLWJ1dHRvbicgKSEgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdpbnB1dCcsICgpID0+IHtcclxuICAgICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnaW5wdXQnLCBpbnB1dEVsZW1lbnQudmFsdWUsIGNvbXBvbmVudE1lZGlhICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaW5wdXQnLCBpbnB1dEVsZW1lbnQudmFsdWUsIGNvbXBvbmVudE1lZGlhICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ2lucHV0Y2hhbmdlJywgaW5wdXRFbGVtZW50LnZhbHVlLCBjb21wb25lbnRNZWRpYSApO1xyXG4gICAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbmlucHV0Y2hhbmdlJywgaW5wdXRFbGVtZW50LnZhbHVlLCBjb21wb25lbnRNZWRpYSApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIGJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlbW92ZUl0ZW0oIGNvbXBvbmVudE1lZGlhICk7XHJcblxyXG4gICAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdyZW1vdmVlbGVtZW50JywgaW5wdXRFbGVtZW50LnZhbHVlLCBjb21wb25lbnRNZWRpYSApO1xyXG4gICAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbnJlbW92ZWVsZW1lbnQnLCBpbnB1dEVsZW1lbnQudmFsdWUsIGNvbXBvbmVudE1lZGlhICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ3JlbW92ZWl0ZW0nLCBpbnB1dEVsZW1lbnQudmFsdWUsIGNvbXBvbmVudE1lZGlhICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucmVtb3ZlaXRlbScsIGlucHV0RWxlbWVudC52YWx1ZSwgY29tcG9uZW50TWVkaWEgKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbnB1dDogaW5wdXRFbGVtZW50LFxyXG4gICAgICBjb250YWluZXI6IGlucHV0RWxlbWVudENvbnRhaW5lcixcclxuICAgICAgYnV0dG9uRWxlbWVudDogYnV0dG9uRWxlbWVudFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNvbXBvbmVudCggY29tcG9uZW50OiBTb3VuZGJvYXJkQ29tcG9uZW50ICkge1xyXG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlSXRlbUJ5SWQoIGNvbXBvbmVudC5tZWRpYS5pZCApO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlSXRlbSggY29tcG9uZW50OiBTb3VuZGJvYXJkTWVkaWEgKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVJdGVtQnlJZCggY29tcG9uZW50LmlkICk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVJdGVtQnlJZCggaXRlbUlkOiBzdHJpbmcgKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5nZXQoIGl0ZW1JZCApO1xyXG4gICAgaWYgKCAhY29tcG9uZW50ICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50Lm1lZGlhLmRlc3Ryb3koKTtcclxuICAgIGNvbXBvbmVudC5tZWRpYUNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHJcbiAgICB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5kZWxldGUoIGl0ZW1JZCApO1xyXG4gICAgdGhpcy5fbWFwSW5wdXRCeUNvbXBvbmVudElkLmRlbGV0ZSggaXRlbUlkICk7XHJcbiAgICB0aGlzLl9zZXRNZWRpYUNvbnRyb2xsZXJzLmRlbGV0ZSggY29tcG9uZW50ICk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJBdWRpb0NvbXBvbmVudCIsIk9iamVjdEV2ZW50TGlzdGVuZXIiLCJzcmMiLCJhdWRpb0VsZW1lbnQiLCJfY29udGFpbmVyIiwiX2Jsb2NrSW50ZXJhY3Rpb24iLCJfZGl2QmxvY2tJbnRlcmFjdGlvbiIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInN1cGVyIiwidGhpcyIsImNvbnRhaW5lciIsImJsb2NrSW50ZXJhY3Rpb24iLCJhdWRpb0VsZW1lbnRJZCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0b3AiLCJnZXRJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uIiwic2V0dXBJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uIiwic2V0RWxlbWVudHNBdHRyaWJ1dGVzIiwiZGVzdHJveSIsInJlbW92ZSIsImlzUGxheWluZyIsInBhdXNlZCIsInZhbCIsIl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0IiwicmVtb3ZlRmlsZVBhdGgiLCJuYW1lIiwic2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQiLCJkaXZCbG9ja0ludGVyYWN0aW9uIiwiZmlsZU5hbWUiLCJxdWVyeVNlbGVjdG9yIiwiY3VycmVudFRpbWUiLCJ0Iiwic291cmNlRWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hhbmdlU291cmNlIiwibmV3SWQiLCJpbm5lckhUTUwiLCJzb3VyY2VFbGVtZW50SFRNTCIsImxvYWQiLCJwbGF5V2l0aG91dFRyaWdnZXJFdmVudHMiLCJwbGF5UHJvbWlzZSIsInBsYXkiLCJ1bmRlZmluZWQiLCJ0aGVuIiwiXyIsImNhdGNoIiwic2V0Q2xhc3Nlc1BsYXlpbmciLCJwYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzIiwicGF1c2UiLCJzZXRDbGFzc2VzUGF1c2VkIiwiY2FsbEV2ZW50c0J5TmFtZSIsInRvZ2dsZSIsIm11dGUiLCJ2b2x1bWUiLCJ1bm11dGUiLCJzZWVrIiwic2Vla1RpbWUiLCJfcmVsb2FkQnVmZmVyIiwiZGltZW5zaW9ucyIsImdldEVsZW1lbnREaW1lbnNpb25zIiwiYXVkaW9Db21wb25lbnQiLCJlbGVtZW50SW52aXNpYmxlRGl2IiwiY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQiLCJwYXJlbnRFbGVtZW50IiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsImRpc3BsYXkiLCJ6SW5kZXgiLCJjcmVhdGVBdWRpb0NvbXBvbmVudE9uQm9keSIsImF1ZGlvQ29tcG9uZW50Q29udGFpbmVyIiwiQXVkaW9Db21wb25lbnRGYWN0b3J5IiwiYnVpbGRPbkJvZHkiLCJjcmVhdGVBdWRpb0NvbXBvbmVudCIsImRvY3VtZW50IiwiYm9keSIsImJ1aWxkIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicGxheWVyQ29uZmlnIiwiY3JlYXRlSW52aXNpYmxlUGxheWVyIiwiYnVpbGRTdWJDb21wb25lbnRzIiwicGFyZW50IiwiX2VsZW1lbnQiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJjb21wb25lbnROYW1lIiwic3ViQ29tcG9uZW50Q291bnRCeU5hbWUiLCJNYXAiLCJzdWJDb21wb25lbnRzIiwidGVtcGxhdGUiLCJnZXRFbGVtZW50QnlJZCIsIkVycm9yIiwiY3JlYXRlRWxlbWVudCIsImNvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImdldFRlbXBsYXRlQ2xvbmVOb2RlcyIsImNsb25lTm9kZSIsImNoaWxkcmVuIiwiYnVpbGRTaW5nbGVTdWJDb21wb25lbnQiLCJjb21wb25lbnQiLCJoYXMiLCJzZXQiLCJjb21wb25lbnRDb3VudCIsImdldCIsImNhcGl0YWxpemVGaXJzdExldHRlciIsImVsZW1lbnRJZCIsIml0ZW0iLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJ0ZW1wbGF0ZVNvdW5kYm9hcmRJdGVtQ29udGFpbmVyIiwiaXRlbUlkIiwibWVkaWFOYW1lIiwicmVwbGFjZVBlcmNlbnRFbmNvZGluZyIsInRyaW0iLCJ0ZW1wbGF0ZVNvdW5kYm9hcmRJbnB1dCIsImxhYmVsVGV4dCIsInZhbHVlIiwicGxhY2Vob2xkZXIiLCJ0ZW1wbGF0ZUJhY2tncm91bmRZb3V0dWJlSWZyYW1lRWxlbWVudCIsImlmcmFtZUlkIiwiWW91dHViZUlmcmFtZSIsInN0YXRpYyIsInBsYXllciIsIl9pc1BsYXllclJlYWR5IiwiX3ZpZGVvSWQiLCJ2aWRlb05hbWUiLCJ2aWRlb1RodW1iIiwiY2hhbm5lbFVSTCIsImNoYW5uZWxOYW1lIiwiX2lmcmFtZUVsZW1lbnQiLCJfaWZyYW1lQ29udGFpbmVyIiwiX2lmcmFtZVBhcmVudEVsZW1lbnQiLCJfaXNQbGF5aW5nIiwiX2RpbWVuc2lvbnMiLCJ0b3BEaXYiLCJfc3RhcnRzQXQiLCJfc3RhcnRNdXRlZCIsIl9wbGF5aW5nT2JzZXJ2ZXJJbnRlcnZhbCIsIl9ldmVudExpc3RlbmVyIiwiX2RpY3RZb3V0dWJlSWZyYW1lQnlJZCIsInN0YXJ0c0F0IiwidmlkZW9JZCIsInN0YXJ0TXV0ZWQiLCJnZXRZb3V0dWJlSWZyYW1lRWxlbWVudCIsInNldHVwUGFyZW50RnJvbVlvdXR1YmVJZnJhbWUiLCJpZnJhbWVDb250YWluZXIiLCJzZXRDbGFzc2VzSWZyYW1lUGF1c2VkIiwic2V0VmlkZW9JbmZvIiwic2V0RXh0ZXJuYWxIVE1MRWxlbWVudHNBdHRyaWJ1dGVzIiwiZXh0cmFjdFlvdVR1YmVJZCIsImRlbGV0ZSIsImluZm8iLCJnZXRWaWRlb0luZm8iLCJ0aXRsZSIsImF1dGhvcl9uYW1lIiwidGh1bWJuYWlsX3VybCIsImF1dGhvcl91cmwiLCJjaGFuZ2VWaWRlbyIsImlzVmFsaWRZb3V0dWJlVXJsT3JJZCIsImxvYWRWaWRlb0J5SWQiLCJkZWxheSIsInByZXBhcmVPcHRpb25zIiwibG9hZFZpZGVvIiwic2Vla1RvIiwicmVzcG9uc2UiLCJoYW5kbGVQcm9taXNlIiwiZmV0Y2giLCJ2aWRlb1VSTCIsImVycm9yIiwiZGF0YSIsImpzb24iLCJjb25zb2xlIiwib25QbGF5ZXJSZWFkeSIsImV2ZW50IiwiX2FycllvdXR1YmVJZnJhbWVJZFJlYWR5IiwicHVzaCIsInNldFBsYXliYWNrUXVhbGl0eSIsInBhdXNlVmlkZW8iLCJjaGVja0lmRXZlcnlJZnJhbWVJc1JlYWR5Iiwib25QbGF5ZXJTdGF0ZUNoYW5nZSIsIl95b3V0dWJlQVBJUmVmZXJlbmNlIiwiUGxheWVyU3RhdGUiLCJQTEFZSU5HIiwic2V0SW50ZXJ2YWwiLCJzZXRDbGFzc2VzSWZyYW1lUGxheWluZyIsImNsZWFySW50ZXJ2YWwiLCJvbkV2ZXJ5WW91dHViZUlmcmFtZVJlYWR5IiwiaWZyYW1lRWxlbWVudCIsImlzUGxheWVyUmVhZHkiLCJkdXJhdGlvbiIsImdldER1cmF0aW9uIiwicGxheWVyRHVyYXRpb24iLCJnZXRDdXJyZW50VGltZSIsInBsYXllckN1cnJlbnRUaW1lIiwicHJvZ3Jlc3NQZXJjZW50IiwicGxheWVyUHJvZ3Jlc3NQZXJjZW50IiwiY2xhbXAiLCJwbGF5VmlkZW8iLCJyZWxvYWRCdWZmZXIiLCJjb25zaWRlclN0YXJ0c0F0Iiwia2V5cyIsInNvbWUiLCJyIiwiaW5jbHVkZXMiLCJhcnJPYmplY3RUb1NldE9uRXZlcnlJZnJhbWVSZWFkeSIsImZvckVhY2giLCJvIiwic2V0dXAiLCJrZXkiLCJjb250YWluZXJEaXYiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJpZnJhbWVQYXJlbnRFbGVtZW50Iiwic2V0RXh0ZXJuYWxIVE1MRWxlbWVudHMiLCJjcmVhdGVJbnZpc2libGVEaXZUb3AiLCJjcmVhdGVJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uIiwic2V0SWZyYW1lQ29udGFpbmVyQXR0cmlidXRlcyIsInNldFRvcERpdkF0dHJpYnV0ZXMiLCJzZXREaXZCbG9ja0ludGVyYWN0aW9uQXR0cmlidXRlcyIsImdldEludmlzaWJsZVRvcERpdiIsImV2dCIsImluaXRQbGF5ZXIiLCJQbGF5ZXIiLCJwbGF5ZXJWYXJzIiwiZXZlbnRzIiwiYmluZCIsImJ1aWxkU2luZ2xlSWZyYW1lIiwieW91dHViZUlmcmFtZSIsInRhZyIsImZpcnN0U2NyaXB0VGFnIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwid2FpdFVudGlsRWxlbWVudEV4aXN0cyIsInBvbGxGb3JWYXJpYWJsZUFzeW5jIiwicHJvdG90eXBlIiwibG9hZGVkIiwiYnVpbGRJZnJhbWVzIiwicG9sbEZvclZhcmlhYmxlIiwic2V0WW91dHViZUlmcmFtZUVsZW1lbnRzIiwieXRJZnJhbWUiLCJTdHJpbmciLCJpc051bGxPckVtcHR5IiwidHJ1bmNhdGUiLCJtYXgiLCJkZWNvcmF0b3IiLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJ0b1N0cmluZyIsInJlbW92ZUFjY2VudHMiLCJub3JtYWxpemUiLCJyZXBsYWNlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJ6ZXJvQmVmb3JlIiwicGFkU3RhcnQiLCJldmVudHNCeU5hbWUiLCJldmVudE5hbWUiLCJ0b0xvd2VyQ2FzZSIsImdldEV2ZW50c0J5TmFtZSIsImV2ZW50QXJncyIsImUiLCJhcnJTb3VyY2VzIiwiZ2V0RWxlbWVudEZyb21IVE1MIiwiYXV0b1BsYXkiLCJhdXRvcGxheSIsIm11dGVkIiwibG9vcCIsInByZWxvYWQiLCJ0cmltRW5kIiwiYXVkaW9FbGVtZW50UGFyYW1zQnlQbGF5ZXJDb25maWciLCJtYXAiLCJyZWR1Y2UiLCJhY2MiLCJuZXh0IiwiYXVkaW9FbGVtZW50SFRNTCIsImhpZGVFbGVtZW50IiwiZ2V0RmlsZUV4dGVuc2lvbiIsImRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSIsImRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0IiwiZGljdEtleXNCeUFjdGlvbktleXVwIiwiYXN5bmMiLCJwcm9taXNlIiwiaW5wdXQiLCJ0ZXN0IiwibWF0Y2giLCJlbGVtZW50IiwiYXR0ckxpc3QiLCJzZXRBdHRyaWJ1dGUiLCJodG1sIiwicmVzdWx0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInZhcmlhYmxlTmFtZSIsInJlYWR5Q29uZGl0aW9uIiwiY2FsbGJhY2siLCJwb2xsIiwid2luZG93IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZWxlY3RvciIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsImRpc2Nvbm5lY3QiLCJvYnNlcnZlIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsIm1zIiwic2V0VGltZW91dCIsImludmlzaWJsZURpdiIsIm9wYWNpdHkiLCJwb2ludGVyRXZlbnRzIiwicmVwZWF0IiwicGFpciIsImNvZGUiLCJrYkV2ZW50IiwicnVuT25seU9uY2VLZXlkb3duQWN0aW9ucyIsInJ1bktleWRvd25BY3Rpb25zUmVwZWF0IiwiZmlsZVBhdGgiLCJleGVjIiwiZGVmYXVsdEZpbGVTcmMiLCJzcGxpdCIsInBvcCIsImZpbGVUeXBlU3RyIiwibnVtIiwibWluIiwiTWF0aCIsInN0ciIsInJlbW92ZVNwZWNpYWxDaGFyYWN0ZXJzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIlNvdW5kYm9hcmQiLCJjb250YWluZXJzQ2xhc3NMaXN0IiwiaXRlbUNsYXNzTGlzdCIsIl9zZXRNZWRpYUNvbnRyb2xsZXJzIiwiU2V0IiwiX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkIiwiX21hcElucHV0QnlDb21wb25lbnRJZCIsImFkZE1lZGlhTGlzdCIsImFyck1lZGlhU3JjIiwiZ2V0SW5zdGFudE1QM0Rvd25sb2FkTGluayIsInVybCIsImlzTXlJbnN0YW50c0xpbmsiLCJtYXRjaGVzIiwibWVkaWFDb21wb25lbnRzIiwiaSIsInNyY09wdGlvbnMiLCJnZXRTb3VyY2VJbnB1dERlZmF1bHRPcHRpb25zIiwiYWRkTWVkaWEiLCJnZXRDdXN0b21BdWRpb0NvbXBvbmVudE1lZGlhT3B0aW9ucyIsIm1lZGlhT3B0aW9ucyIsInN0cnVjdHVyZWRDbG9uZSIsImNvbXBvbmVudFJlc3VsdCIsImFkZElmcmFtZSIsImFkZEF1ZGlvQ29tcG9uZW50Iiwic2V0Q29tcG9uZW50TmFtZUJ5SWQiLCJtZWRpYSIsImF1dG9SZXBlYXRPblBsYXkiLCJhZGRZb3V0dWJlTGlzdCIsImFyclZpZGVvT3B0aW9ucyIsImFkZEF1ZGlvTGlzdCIsImFyck1lZGlhT3B0aW9ucyIsIm1lZGlhSW5wdXQiLCJhZGRDb21wb25lbnRJbnRlcmFjdGlvbkJsb2NrRXZlbnQiLCJnZXRJbnB1dEJ5U291cmNlIiwiY29tcG9uZW50c0NvbnRyb2xsZXJzIiwiZ2V0RWxlbWVudE1lZGlhQ29udGFpbmVyIiwiY29udGFpbmVySWQiLCJlbGVtZW50TWVkaWFDb250YWluZXIiLCJjb21wb25lbnRJZCIsImNvbXBvbmVudE5hbWVFbGVtZW50IiwiZ2V0RWxlbWVudEl0ZW1OYW1lQ29udGFpbmVyQnlJZCIsImVsZW1lbnRNZWRpYU5hbWUiLCJtZWRpYUNvbnRhaW5lciIsImdldE5ld0F1ZGlvQ29tcG9uZW50SWQiLCJnZXROZXdZb3V0dWJlSWZyYW1lSWQiLCJhdWRpb0NvbnRhaW5lciIsImlucHV0SW5mbyIsImFkZElucHV0RWxlbWVudFRvQ29udGFpbmVyIiwic291bmRib2FyZEF1ZGlvQ29tcG9uZW50IiwiaW5wdXRDb250YWluZXIiLCJidXR0b25SZW1vdmVJdGVtIiwiYnV0dG9uRWxlbWVudCIsIml0ZW1PcHRpb25zIiwiZWxlbWVudElmcmFtZUNvbnRhaW5lciIsIm5ld0lmcmFtZSIsInNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50IiwiY2hhbmdlQ29tcG9uZW50U291cmNlVG9JbnB1dFZhbHVlIiwiY2hhbmdlWW91dHViZUlmcmFtZVNvdXJjZSIsImNoYW5nZUF1ZGlvQ29tcG9uZW50U291cmNlIiwiY2hhbmdlQ29tcG9uZW50U291cmNlIiwibmV3U291cmNlIiwibmV3VmFsdWUiLCJuZXdBdWRpb09wdGlvbnMiLCJjb21wb25lbnRNZWRpYSIsImlucHV0U291cmNlIiwiaW5wdXRFbGVtZW50Q29udGFpbmVyIiwiaW5wdXRFbGVtZW50IiwicmVtb3ZlSXRlbSIsInJlbW92ZUNvbXBvbmVudCIsInJlbW92ZUl0ZW1CeUlkIl0sInNvdXJjZVJvb3QiOiIifQ==
var Soundboard;(()=>{"use strict";var t={173:(t,e,i)=>{i.d(e,{AudioComponent:()=>l});var n=i(7930),s=i(7353),r=i(1319),a=i(3164),o=i(6555);class l extends n.ObjectEventListener{src;audioElement;_container;_blockInteraction=!1;_divBlockInteraction;constructor(t){super(),this.src=t.src,this._container=t.container,this.audioElement=t.audioElement,this._blockInteraction=!!t.blockInteraction,t.audioElementId&&(this.audioElement.id=t.audioElementId),this.audioElement.classList.add("audio-component"),this.audioElement.addEventListener("ended",(()=>{this.stop()})),this._container.id||(this._container.id=t.audioElementId+"AudioComponentContainer"),this._container.classList.add("audio-component-container"),this._divBlockInteraction=this.getInvisibleDivBlockInteraction(this),this.setupInvisibleDivBlockInteraction(),this.setElementsAttributes()}get isPlaying(){return!this.audioElement.paused}get id(){return this.audioElement.id}get _videoInfoAttributeList(){return[["audio-component-src",this.src],["audio-component-name",(0,a.removeFilePath)(this.src)]]}setElementsAttributes(){(0,r.setAttributeListForElement)(this.audioElement,this._videoInfoAttributeList),(0,r.setAttributeListForElement)(this.container,this._videoInfoAttributeList),(0,r.setAttributeListForElement)(this.divBlockInteraction,this._videoInfoAttributeList)}get divBlockInteraction(){return this._divBlockInteraction}get container(){return this._container}get paused(){return this.audioElement.paused}get fileName(){return this.audioElement.src||this.audioElement.querySelector("source")?.src||""}get currentTime(){return this.audioElement.currentTime}set currentTime(t){this.audioElement.currentTime=t}get sourceElements(){return Array.from(this.audioElement.querySelectorAll("source"))}changeSource(t){this.src=t,this.audioElement.innerHTML=(0,s.sourceElementHTML)(this.src),this.audioElement.load(),this.setElementsAttributes(),this.stop()}playWithoutTriggerEvents(){var t=this.audioElement.play();return void 0!==t&&t.then((t=>{})).catch((()=>{this.stop()})),this.setClassesPlaying(),this}pauseWithoutTriggerEvents(){return this.audioElement.pause(),this.setClassesPaused(),this}setClassesPlaying(){this._container.classList.add("audio-component-playing"),this._divBlockInteraction.classList.add("audio-component-playing"),this._container.classList.remove("audio-component-paused"),this._divBlockInteraction.classList.remove("audio-component-paused")}setClassesPaused(){this._container.classList.add("audio-component-paused"),this._divBlockInteraction.classList.add("audio-component-paused"),this._container.classList.remove("audio-component-playing"),this._divBlockInteraction.classList.remove("audio-component-playing")}play(){return this.playWithoutTriggerEvents(),this.callEventsByName("onplay",this),this}pause(){return this.pauseWithoutTriggerEvents(),this.callEventsByName("onpause",this),this}stop(){return this.pause(),this.audioElement.currentTime=0,this.callEventsByName("onstop",this),this}toggle(){return this.paused?this.playWithoutTriggerEvents():this.pause(),this.callEventsByName("ontoggle",this),this}mute(){return this.audioElement.volume=0,this.callEventsByName("onmute",this),this}unmute(){return this.audioElement.volume=1,this.callEventsByName("onunmute",this),this}seek(t,e){return this.currentTime=t,this.callEventsByName("onseek",this),this}get dimensions(){return(0,r.getElementDimensions)(this._container)}getInvisibleDivBlockInteraction(t){const e=(0,r.createInvisibleDivAboveParent)({parentElement:t._container,id:`invisibleDivBlockInteraction${t._container.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:t.dimensions.height}});return e.classList.add("audio-component-div-block-interaction"),e}setupInvisibleDivBlockInteraction(){this._divBlockInteraction.style.display=this._blockInteraction?"block":"none",this._divBlockInteraction.style.zIndex="995",this._divBlockInteraction.addEventListener("click",(()=>{this.callEventsByName("onclickinteractionblocked",this,this._divBlockInteraction),this.callEventsByName("oninteractionblocked",this,this._divBlockInteraction)}))}static async createAudioComponentOnBody(t){const e=await new o.AudioComponentFactory(t.src).buildOnBody();return new l({src:t.src,container:e,audioElement:e.querySelector("audio"),audioElementId:t.audioElementId,blockInteraction:t.blockInteraction})}static async createAudioComponent(t){if(t.container===document.body||!t.container)return this.createAudioComponentOnBody(t);const e=await new o.AudioComponentFactory(t.src).build(t.container);return new l({src:t.src,container:e,audioElement:e.querySelector("audio"),audioElementId:t.audioElementId,blockInteraction:t.blockInteraction})}}},6555:(t,e,i)=>{i.d(e,{AudioComponentFactory:()=>r});var n=i(7353),s=i(6401);class r extends s.ComponentContainer{constructor(t,e){super("audioComponent",(0,n.createInvisiblePlayer)([t],e))}async buildSubComponents(t){}}},6401:(t,e,i)=>{i.d(e,{ComponentContainer:()=>n});class n{_element=null;templateElement;componentName;subComponentCountByName=new Map;subComponents=[];constructor(t,e){if("string"==typeof e){const t=document.getElementById(e);if(!t)throw new Error("Invalid template for scene component. Template id: "+e);this.templateElement=t}else this.templateElement=document.createElement("template"),this.templateElement.content.appendChild(e),document.body.appendChild(this.templateElement);this.componentName=t}getTemplateCloneNodes(){return this.templateElement.content.cloneNode(!0).children}async buildSingleSubComponent(t,e){this.subComponentCountByName.has(this.componentName)&&this.subComponentCountByName.set(this.componentName,0);let i=this.subComponentCountByName.get(this.componentName);return this.subComponentCountByName.set(this.componentName,i+1),await t.build(e,`${this.componentName}${t.componentName.capitalizeFirstLetter()}${i}`)}async buildOnBody(t){this._element=document.createElement("div"),t&&(this._element.id=t);for(let t of this.getTemplateCloneNodes())this._element.insertAdjacentElement("afterbegin",t);if(!this._element)throw new Error(`Fail building SceneComponent. ElementId: ${t}`);return await this.buildSubComponents(document.body),document.body.insertAdjacentElement("beforeend",this._element),this._element}async build(t,e){for(let e of this.getTemplateCloneNodes())t.insertAdjacentElement("afterbegin",e);return await this.buildSubComponents(t),t}}},6167:(t,e,i)=>{function n(t){return`\n  <div id="${t}SoundTableItem" class="sound-table-item-container">\n  </div>\n  `.trim()}function s(t,e,i="",n=""){return`\n    <div class="form-floating sound-table-input-container">\n      <input type="text" value="${i}" class="form-control sound-table-input" id="urlInput${t}" placeholder="${n}">\n      <label for="urlInput${t}">${e}</label>\n    </div>\n  `}i.d(e,{templateSoundboardInput:()=>s,templateSoundboardItemContainer:()=>n})},2152:(t,e,i)=>{function n(t){return`\n  <div id="${t}">\n  </div>\n  `.trim()}i.d(e,{templateBackgroundYoutubeIframeElement:()=>n})},5102:(t,e,i)=>{i.d(e,{YoutubeIframe:()=>o});var n=i(1319),s=(i(4763),i(739)),r=i(2152),a=(i(4785),i(3362),i(7930));class o extends a.ObjectEventListener{static arrObjectToSetOnEveryIframeReady=[];static _dictYoutubeIframeById=new Map;static _arrYoutubeIframeIdReady=[];player;_isPlayerReady=!1;id;_videoId;videoName="";videoThumb="";channelURL="";channelName="";_iframeElement=null;_iframeContainer;_iframeParentElement;_isPlaying=!1;_dimensions;topDiv;_startsAt;_blockInteraction=!1;_divBlockInteraction=null;_startMuted;_playingObserverInterval=null;_eventListener=new a.ObjectEventListener;constructor(t){if(o._dictYoutubeIframeById.has(t.iframeId))throw new Error("Invalid iframe there's already an iframe with this id.");super(),this.id=t.iframeId,this._startsAt=t.startsAt??0,this._videoId=t.videoId,this._startMuted=!!t.startMuted,this._blockInteraction=!!t.blockInteraction,this._iframeContainer=o.getYoutubeIframeElement({iframeId:t.iframeId,classList:t.classList}),this._iframeParentElement=o.setupParentFromYoutubeIframe({parentElement:t.parentElement??document.body,iframeContainer:this._iframeContainer}),this.setClassesIframePaused(),this._dimensions=t.dimensions??(0,n.getElementDimensions)(this._iframeParentElement),o._dictYoutubeIframeById.set(t.iframeId,this),this.setVideoInfo().then((()=>{this.setExternalHTMLElementsAttributes()}))}get videoId(){return(0,n.extractYouTubeId)(this._videoId)}async setVideoInfo(){const t=await this.getVideoInfo();this.videoName=t&&t.title?t.title:"",this.channelName=t&&t.author_name?t.author_name:"",this.videoThumb=t&&t.thumbnail_url?t.thumbnail_url:"",this.channelURL=t&&t.author_url?t.author_url:""}changeVideo(t){(0,n.isValidYoutubeUrlOrId)(t.videoId)&&(this.player&&this.player.loadVideoById?(this.prepareOptions(t),this.player.seekTo(this.startsAt,!0),this.isPlaying?this.playWithoutTriggerEvents():this.pauseWithoutTriggerEvents()):setTimeout((()=>this.changeVideo(t)),100))}prepareOptions(t){this.id=t.iframeId,this._videoId=t.videoId,this.startsAt=t.startsAt??this.startsAt,this.loadVideo()}loadVideo(){this.player.loadVideoById({videoId:this.videoId,startSeconds:this.startsAt,suggestedQuality:"highres"}),this.setVideoInfo().then((()=>{this.setExternalHTMLElementsAttributes()}))}async getVideoInfo(){const t=await(0,n.handlePromise)(fetch(`https://www.youtube.com/oembed?url=${this.videoURL}&format=json`));if(!t.error)return await t.data().json();console.error(t.error)}onPlayerReady(t){this._startMuted&&this.player.mute(),o._arrYoutubeIframeIdReady.push(this.id),this._iframeElement=document.getElementById(this.id),this.setClassesIframePaused(),this.player.setPlaybackQuality("highres"),this.player.seekTo(this._startsAt??0,!0),this.player.pauseVideo(),this._isPlayerReady=!0,this.callEventsByName("oniframeready",this),o.checkIfEveryIframeIsReady()}onPlayerStateChange(t){t.data===o._youtubeAPIReference.PlayerState.PLAYING?(this._isPlaying=!0,this._playingObserverInterval=setInterval((()=>this.callEventsByName("onplaying",this,this.isPlaying)),100),this.setClassesIframePlaying()):this._playingObserverInterval&&(clearInterval(this._playingObserverInterval),this.setClassesIframePaused(),this._isPlaying=!1,this._playingObserverInterval=null),this.callEventsByName("playerstatechange",this,this.isPlaying),this.callEventsByName("onplayerstatechange",this,this.isPlaying)}setClassesIframePlaying(){this._iframeElement&&(this._iframeElement.classList.remove("yt-paused"),this._iframeElement.classList.add("yt-playing")),this._iframeContainer.classList.remove("yt-paused"),this._iframeContainer.classList.add("yt-playing"),this._iframeParentElement.classList.remove("yt-paused"),this._iframeParentElement.classList.add("yt-playing")}setClassesIframePaused(){this._iframeElement&&(this._iframeElement.classList.add("yt-paused"),this._iframeElement.classList.remove("yt-playing")),this._iframeContainer.classList.add("yt-paused"),this._iframeContainer.classList.remove("yt-playing"),this._iframeParentElement.classList.add("yt-paused"),this._iframeParentElement.classList.remove("yt-playing")}onEveryYoutubeIframeReady(){this.callEventsByName("oneveryyoutubeiframeready")}get divBlockInteraction(){return this._divBlockInteraction}get videoURL(){return`https://www.youtube.com/watch?v=${this.videoId}`}get parentElement(){return this._iframeParentElement}get iframeElement(){if(!this._iframeElement)throw new Error("Iframe was called but it's not ready.");return this._iframeElement}get isPlayerReady(){return this._isPlayerReady}get duration(){return this.player.getDuration()-this._startsAt}get playerDuration(){return this.player.getDuration()}set currentTime(t){this.seek(t)}get currentTime(){return this.player.getCurrentTime()-this._startsAt}get playerCurrentTime(){return this.player.getCurrentTime()}get progressPercent(){return this.currentTime/this.duration}get playerProgressPercent(){return this.playerCurrentTime/this.playerDuration}get startMuted(){return this._startMuted}get isPlaying(){return this._isPlaying}get dimensions(){return this._dimensions}get startsAt(){return(0,s.clamp)(this._startsAt,0,this._startsAt)}set startsAt(t){this._startsAt=(0,s.clamp)(t,0,t)}toggle(){return this.isPlaying?this.pause():this.play(),this}play(){return this.playWithoutTriggerEvents(),this.callEventsByName("onplay",this),this}playWithoutTriggerEvents(){return this.player.playVideo(),this._isPlaying=!0,this.setClassesIframePlaying(),this}pause(){return this.pauseWithoutTriggerEvents(),this.callEventsByName("onpause",this),this}pauseWithoutTriggerEvents(){return this.player.pauseVideo(),this._isPlaying=!1,this.setClassesIframePaused(),this}seek(t,e=!1,i=!1){return this.callEventsByName("onseek",t,e,i,this),t+=i?this._startsAt:0,this.player.seekTo(t,e),this}mute(){return this.player.mute(),this}unmute(){return this.player.unmute(),this}static checkIfEveryIframeIsReady(){[...o._dictYoutubeIframeById.keys()].some((t=>!this._arrYoutubeIframeIdReady.includes(t)))||(this.arrObjectToSetOnEveryIframeReady.forEach((t=>t.setup(o._dictYoutubeIframeById))),o._dictYoutubeIframeById.forEach(((t,e)=>{t.onEveryYoutubeIframeReady()})))}static getYoutubeIframeElement({iframeId:t,classList:e}){const i=document.createElement("div");return i.classList.add("yt-iframe-container"),e&&i.classList.add(...e),i.id=`containerYoutubeIframe${t}`,i.insertAdjacentHTML("afterbegin",(0,r.templateBackgroundYoutubeIframeElement)(t)),i}static setupParentFromYoutubeIframe({parentElement:t,iframeContainer:e}){const i=t??document.body;return i.classList.add("yt-iframe-parent"),i.insertAdjacentElement("afterbegin",e),i}setExternalHTMLElements(){this.createInvisibleDivTop(),this.createInvisibleDivBlockInteraction(),this.setExternalHTMLElementsAttributes()}setExternalHTMLElementsAttributes(){this.setIframeContainerAttributes(),this.setTopDivAttributes(),this.setDivBlockInteractionAttributes()}createInvisibleDivTop(){this.topDiv=o.getInvisibleTopDiv(this),this.topDiv.style.zIndex="990"}createInvisibleDivBlockInteraction(){this._divBlockInteraction=o.getInvisibleDivBlockInteraction(this),this._divBlockInteraction.style.display=this._blockInteraction?"block":"none",this._divBlockInteraction.style.zIndex="995",this._divBlockInteraction.addEventListener("click",(t=>{this.callEventsByName("onclickinteractionblocked",this,this._divBlockInteraction),this.callEventsByName("oninteractionblocked",this,this._divBlockInteraction)}))}setDivBlockInteractionAttributes(){this.divBlockInteraction&&(0,n.setAttributeListForElement)(this.divBlockInteraction,this._videoInfoAttributeList)}setIframeContainerAttributes(){this._iframeContainer&&(0,n.setAttributeListForElement)(this._iframeContainer,this._videoInfoAttributeList)}setTopDivAttributes(){this.topDiv&&(0,n.setAttributeListForElement)(this.topDiv,this._videoInfoAttributeList)}set blockInteraction(t){this._blockInteraction=t,this._divBlockInteraction&&(this._divBlockInteraction.style.display=this._blockInteraction?"block":"none")}initPlayer(){this.player=new o._youtubeAPIReference.Player(this.id,{videoId:this.videoId,width:this.dimensions.width,height:this.dimensions.height,playerVars:{rel:0,iv_load_policy:3,showinfo:0,controls:0,autoplay:0},events:{onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)}})}static _youtubeAPIReference;get _videoInfoAttributeList(){return[["yt-iframe-id",this.id],["yt-iframe-video-name",this.videoName],["yt-iframe-video-channel-name",this.channelName],["yt-iframe-video-thumb-url",this.videoThumb],["yt-iframe-video-channel-url",this.channelURL]]}static async buildSingleIframe(t){if(!document.getElementById("ytIframeAPIScriptTag")){var e=document.createElement("script");e.id="ytIframeAPIScriptTag",e.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i&&i.parentNode&&i.parentNode.insertBefore(e,i)}return await(0,n.waitUntilElementExists)("#ytIframeAPIScriptTag"),await(0,n.pollForVariableAsync)("YT",(t=>"function"==typeof t.Player&&t.Player.prototype&&t.Player.prototype.constructor===t.Player&&t.loaded),(e=>{o._youtubeAPIReference=e,t.build()})),t}static buildIframes(){if(!document.getElementById("ytIframeAPIScriptTag")){var t=document.createElement("script");t.id="ytIframeAPIScriptTag",t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e&&e.parentNode&&e.parentNode.insertBefore(t,e)}(0,n.waitUntilElementExists)("#ytIframeAPIScriptTag").then((()=>{(0,n.pollForVariable)("YT",(t=>"function"==typeof t.Player&&t.Player.prototype&&t.Player.prototype.constructor===t.Player&&t.loaded),(t=>{o._youtubeAPIReference=t,o.setYoutubeIframeElements()}))}))}build(){this.setExternalHTMLElements(),this.initPlayer()}static setYoutubeIframeElements(){this._dictYoutubeIframeById.forEach(((t,e)=>{t.isPlayerReady||t.build()}))}static getInvisibleTopDiv(t){return(0,n.createInvisibleDivAboveParent)({parentElement:document.getElementById(t.id).parentElement,id:`invisibleTopDivHoldToDrag${t.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:.2*t.dimensions.height}})}static getInvisibleDivBlockInteraction(t){const e=(0,n.createInvisibleDivAboveParent)({parentElement:document.getElementById(t.id).parentElement,id:`invisibleDivBlockInteraction${t.id}`,position:{top:0,left:0},dimensions:{width:t.dimensions.width,height:t.dimensions.height}});return e.classList.add("yt-div-block-interaction"),e}}},4785:(t,e,i)=>{i.d(e,{YoutubeIframe:()=>n.YoutubeIframe});var n=i(5102)},3362:(t,e,i)=>{i(5102)},2976:()=>{String.prototype.isNullOrEmpty=function(){return"string"!=typeof this&&!this&&""!==this},String.prototype.truncate=function(t,e="..."){return(this.length>t?this.substring(0,t)+e:this).toString()},String.prototype.removeAccents=function(){return this.normalize("NFD").replace(/[\u0300-\u036f]/g,"")},String.prototype.capitalizeFirstLetter=function(){return"string"!=typeof this?"":this.charAt(0).toUpperCase()+this.substring(1)},String.prototype.zeroBefore=function(){return this.padStart(2,"0")}},4763:(t,e,i)=>{i(1319),i(8586)},8586:(t,e,i)=>{i(1319)},7930:(t,e,i)=>{i.d(e,{ObjectEventListener:()=>n});class n{eventsByName=new Map;addEventListener(t,e){this.eventsByName.has(t.toLowerCase())?this.eventsByName.get(t.toLowerCase()).push(e):this.eventsByName.set(t.toLowerCase(),[e])}getEventsByName(t){return this.eventsByName.has(t.toLowerCase())||this.eventsByName.set(t.toLowerCase(),[]),this.eventsByName.get(t.toLowerCase())}callEventsByName(t,...e){this.getEventsByName(t).forEach((t=>t(...e)))}}},7353:(t,e,i)=>{i.d(e,{createInvisiblePlayer:()=>r,sourceElementHTML:()=>a}),i(2976);var n=i(1319),s=i(3164);function r(t,e){const i=(0,n.getElementFromHTML)(function(t,e){return`<audio controls ${e?function(t){return` ${t.id?'id="'+t.id+'"':""} ${t.autoPlay||t.autoplay?"autoplay":""} ${t.muted?"muted":""} ${t.loop?"loop":""} ${t.preload?'preload="'+t.preload+'"':""}`.trimEnd()}(e):""}>\n    ${t.map((t=>a(t))).reduce(((t,e)=>t+e),"")}\n  </audio>`}(t,e));return document.body.insertAdjacentElement("afterbegin",i),(0,n.hideElement)(i),i}function a(t){return`<source src="${t}" type="audio/${(0,s.getFileExtension)(t)}">`}i(173)},1319:(t,e,i)=>{i.d(e,{createInvisibleDivAboveParent:()=>y,extractYouTubeId:()=>l,getElementDimensions:()=>u,getElementFromHTML:()=>c,handlePromise:()=>a,hideElement:()=>v,isValidYoutubeUrlOrId:()=>o,pollForVariable:()=>m,pollForVariableAsync:()=>h,setAttributeListForElement:()=>d,waitUntilElementExists:()=>p});const n=new Map,s=new Map,r=new Map;async function a(t){try{const e=await t;return{data:()=>e,error:null}}catch(t){return console.error(t),{data:()=>{throw new Error("Couldn't fetch, check SafePromise.error for details.")},error:t instanceof Error?t:new Error(String(t))}}}function o(t){return/^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+/.test(t)||/^[a-zA-Z0-9_-]{11}$/.test(t)}function l(t){const e=t.match(/[?&]v=([^?&]+)/);return e&&e[1]?e[1]:11===t.length?t:null}function d(t,e){e.forEach((([e,i])=>{t.setAttribute(e,i)}))}function c(t,e=!0){if(!(t=e?t.trim():t))return null;const i=document.createElement("template");i.innerHTML=t;const n=i.content.children;return 1===n.length?n[0]:Array.from(n)}function u(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}function m(t,e,i){const n=setInterval((()=>{void 0!==window[t]&&e(window[t])&&(clearInterval(n),i(window[t]))}),100)}async function h(t,e,i){return new Promise((n=>{const s=setInterval((()=>{void 0!==window[t]&&e(window[t])&&(clearInterval(s),i(window[t]),n())}),100)}))}function p(t){return new Promise((e=>{if(document.querySelector(t))return e(document.querySelector(t));const i=new MutationObserver((n=>{document.querySelector(t)&&(i.disconnect(),e(document.querySelector(t)))}));i.observe(document.body,{childList:!0,subtree:!0})}))}function y({parentElement:t,id:e,position:i,dimensions:n}){var s=document.createElement("div");return t.style.position||(t.style.position="relative"),s.id=e,s.style.position="absolute",s.style.width=n&&n.width?n.width.toString()+"px":"100%",s.style.height=n&&n.height?n.height.toString()+"px":"100%",s.style.top=(i?.top.toString()??"0")+"px",s.style.left=(i?.left.toString()??"0")+"px",s.style.opacity="0",s.style.pointerEvents="auto",t.appendChild(s),s}function v(t){t.style.display="block",t.style.position="absolute",t.style.zIndex="-1",t.style.opacity="0",t.style.width="0px !important",t.style.height="0px !important",t.setAttribute("hidden","")}new Map,window.addEventListener("keydown",(t=>{t.repeat||function(t){for(const e of n)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t),function(t){for(const e of s)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t)})),window.addEventListener("keyup",(t=>{for(const e of r)t.code===e[0]&&e[1].forEach((e=>e(t)))}))},3164:(t,e,i)=>{i.d(e,{getFileExtension:()=>r,removeFilePath:()=>s});var n=i(2843);function s(t){const e=/(?:.*[\\/])([^\\/]+)$/.exec(t);return e&&e.length>1?e[1]:t}function r(t){if((0,n.isNullOrEmpty)(t))return"";const e=t.split(".").pop();if(e&&e!==t)return e;const i=t.split("/").pop();return i&&i!==t?i:""}},739:(t,e,i)=>{function n(t=0,e=0,i=100){return Math.max(e,Math.min(t,i))}i.d(e,{clamp:()=>n})},2843:(t,e,i)=>{function n(t){return"string"!=typeof t||!t||""===t}i.d(e,{isNullOrEmpty:()=>n})}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{i.r(n),i.d(n,{Soundboard:()=>o});var t=i(7930),e=i(1319),s=i(173),r=i(4785),a=i(6167);class o extends t.ObjectEventListener{container;iframesClassList;containersClassList;_setMediaControllers=new Set;_mapMediaControllersById=new Map;_mapInputByComponentId=new Map;constructor(t){super(),this.container=t.container,this.iframesClassList=t.iframesClassList??[],this.containersClassList=t.containersClassList??[],this.addMediaList(t.arrMediaSrc)}addMediaList(t){t.forEach((t=>{const e=this.getSourceInputDefaultOptions(t);this.addMedia(e)}))}addMedia(t){(0,e.isValidYoutubeUrlOrId)(t.src)?this.addIframe(`${this.container.id}IframeTableItem${t.src}`,t):this.addAudioComponent(this.container.id,t)}getSourceInputDefaultOptions(t){return"string"==typeof t?{src:t,autoRepeatOnPlay:!0}:t}addYoutubeList(t=[]){t.map((t=>this.getSourceInputDefaultOptions(t))).forEach((t=>{this.addIframe(`${this.container.id}IframeTableItem${t.src}`,t)}))}addAudioList(t=[]){t.map((t=>this.getSourceInputDefaultOptions(t))).forEach((t=>this.addAudioComponent(this.container.id,t)))}addComponentInteractionBlockEvent(t,e){t.media.addEventListener("oninteractionblocked",(()=>{t.media.seek(0,!0),e.autoRepeatOnPlay?t.media.playWithoutTriggerEvents():t.media.toggle()}))}getInputBySource(t){if(!this._mapInputByComponentId.has(t))throw new Error("Element src not on sound table.");return this._mapInputByComponentId.get(t)}get componentsControllers(){return Array.from(this._setMediaControllers)}getElementMediaContainer(t){const i=(0,e.getElementFromHTML)((0,a.templateSoundboardItemContainer)(t));return i.classList.add(...this.containersClassList),i}addAudioComponent(t,e){const i=this.getElementMediaContainer(t);this.container.insertAdjacentElement("beforeend",i),s.AudioComponent.createAudioComponent({src:e.src,audioElementId:t,blockInteraction:!0,container:i}).then((t=>{const n=this.addInputElementToContainer(i,t,t.id,e.src),s={media:t,input:n.input,inputContainer:n.container};this._setMediaControllers.add(s),this._mapMediaControllersById.set(t.id,s),this.addComponentInteractionBlockEvent(s,e)}))}addIframe(t,e){if(this._mapMediaControllersById.has(t))throw new Error("A Iframe with this id already exists: "+t);const i=this.getElementMediaContainer(t);this.container.insertAdjacentElement("beforeend",i);const n=new r.YoutubeIframe({iframeId:t,videoId:e.src,parentElement:i,startsAt:0,classList:["sound-table-item",...this.iframesClassList],blockInteraction:!0}),s=this.addInputElementToContainer(i,n,n.id,e.src),a={media:n,input:s.input,inputContainer:s.container};this._setMediaControllers.add(a),this._mapMediaControllersById.set(n.id,a),r.YoutubeIframe.buildSingleIframe(n).then((()=>this.addComponentInteractionBlockEvent(a,e)))}changeComponentSourceToInputValue(t){const e=this._mapMediaControllersById.get(t);e&&(e.media instanceof r.YoutubeIframe?e.media.changeVideo({iframeId:e.input.value,videoId:e.input.value,startsAt:0}):e.media.changeSource(e.input.value),this._mapMediaControllersById.delete(t),this._mapMediaControllersById.set(e.media.id,e))}changeComponentSource(t,e){const i=this._mapMediaControllersById.get(t);i&&(i.media instanceof r.YoutubeIframe?i.media.changeVideo({iframeId:e,videoId:e,startsAt:0}):i.media.changeSource(e))}addInputElementToContainer(t,i,n,s){const r=(0,e.getElementFromHTML)((0,a.templateSoundboardInput)(n,"Source",s));t.insertAdjacentElement("beforeend",r);const o=r.querySelector("input");return o.addEventListener("input",(()=>{this.callEventsByName("input",o.value,i),this.callEventsByName("oninput",o.value,i),this.callEventsByName("inputchange",o.value,i),this.callEventsByName("oninputchange",o.value,i)})),{input:o,container:r}}}})(),Soundboard=n})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQzNCckMsU0FBVWpCLEVBQVVvTCxNQUFNdEssTUFDMUJ5QixRQUFTdkMsRUFBVW9MLE1BQU10SyxNQUN6QndCLFNBQVUsSUFHWnRDLEVBQVU0USxNQUFNL1UsYUFBY21FLEVBQVVvTCxNQUFNdEssT0FHaEQzRyxLQUFLd1YseUJBQXlCaUMsT0FBUUQsR0FDdEN4WCxLQUFLd1YseUJBQXlCelAsSUFBS0YsRUFBVTRRLE1BQU1yVyxHQUFJeUYsR0FDekQsQ0FFTyxxQkFBQTZSLENBQXVCRixFQUFxQkcsR0FDakQsTUFBTTlSLEVBQVk3RixLQUFLd1YseUJBQXlCdlAsSUFBS3VSLEdBQy9DM1IsSUFJREEsRUFBVTRRLGlCQUFpQixFQUFBMVAsY0FDOUJsQixFQUFVNFEsTUFBTXROLFlBQWEsQ0FDM0JyQyxTQUFVNlEsRUFDVnZQLFFBQVN1UCxFQUNUeFAsU0FBVSxJQUdadEMsRUFBVTRRLE1BQU0vVSxhQUFjaVcsR0FFbEMsQ0FFUSwwQkFBQVYsQ0FBNEJoWCxFQUF3QjRGLEVBQTRCMlIsRUFBcUJJLEdBQzNHLE1BQU1DLEdBQXdCLElBQUFoSSxxQkFBb0IsSUFBQXBKLHlCQUF5QitRLEVBQWEsU0FBVUksSUFDbEczWCxFQUFVb0csc0JBQXVCLFlBQWF3UixHQUU5QyxNQUFNQyxFQUFlRCxFQUFzQjFXLGNBQWUsU0FTMUQsT0FQQTJXLEVBQWF2WCxpQkFBa0IsU0FBUyxLQUN0Q1AsS0FBSzBDLGlCQUFrQixRQUFTb1YsRUFBYW5SLE1BQU9kLEdBQ3BEN0YsS0FBSzBDLGlCQUFrQixVQUFXb1YsRUFBYW5SLE1BQU9kLEdBQ3REN0YsS0FBSzBDLGlCQUFrQixjQUFlb1YsRUFBYW5SLE1BQU9kLEdBQzFEN0YsS0FBSzBDLGlCQUFrQixnQkFBaUJvVixFQUFhblIsTUFBT2QsRUFBVyxJQUdsRSxDQUNMb0wsTUFBTzZHLEVBQ1A3WCxVQUFXNFgsRUFFZixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvQXVkaW9Db21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvQXVkaW9Db21wb25lbnRGYWN0b3J5LnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL0NvbXBvbmVudENvbnRhaW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Tb3VuZGJvYXJkL1RlbXBsYXRlc1NvdW5kYm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvWW91dHViZUlmcmFtZS9UZW1wbGF0ZXNZb3V0dWJlSWZyYW1lLnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1lvdXR1YmVJZnJhbWUvWW91dHViZUlmcmFtZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0ZW5zaW9ucy9TdHJpbmdFeHRlbnNpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvQXVkaW9Ub29scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvRE9NVG9vbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Rvb2xzL0ZpbGVUb29scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVG9vbHMvTWF0aFRvb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9Ub29scy9TdHJpbmdUb29scy50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvU291bmRib2FyZC9Tb3VuZGJvYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdEV2ZW50TGlzdGVuZXIgfSBmcm9tICcuLi9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lcic7XHJcbmltcG9ydCB7IHNvdXJjZUVsZW1lbnRIVE1MIH0gZnJvbSAnLi4vVG9vbHMvQXVkaW9Ub29scyc7XHJcbmltcG9ydCB7IGNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50LCBnZXRFbGVtZW50RGltZW5zaW9ucywgc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQgfSBmcm9tICcuLi9Ub29scy9ET01Ub29scyc7XHJcbmltcG9ydCB7IHJlbW92ZUZpbGVQYXRoIH0gZnJvbSAnLi4vVG9vbHMvRmlsZVRvb2xzJztcclxuaW1wb3J0IHsgRGltZW5zaW9ucyB9IGZyb20gJy4uL1Rvb2xzL01hdGhUb29scyc7XHJcbmltcG9ydCB7IEF1ZGlvQ29tcG9uZW50RmFjdG9yeSB9IGZyb20gJy4vQXVkaW9Db21wb25lbnRGYWN0b3J5JztcclxuaW1wb3J0IHsgSU1lZGlhUGxheWVyRnVuY3Rpb25zIH0gZnJvbSAnLi9UeXBlcyc7XHJcblxyXG5leHBvcnQgdHlwZSBBdWRpb0NvbXBvbmVudE9wdGlvbnMgPSB7XHJcbiAgc3JjOiBzdHJpbmc7XHJcbiAgYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50O1xyXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgYXVkaW9FbGVtZW50SWQ/OiBzdHJpbmc7XHJcbiAgYmxvY2tJbnRlcmFjdGlvbj86IGJvb2xlYW47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgPSB7XHJcbiAgc3JjOiBzdHJpbmc7XHJcbiAgYXVkaW9FbGVtZW50SWQ/OiBzdHJpbmc7XHJcbiAgYmxvY2tJbnRlcmFjdGlvbj86IGJvb2xlYW47XHJcbiAgY29udGFpbmVyPzogSFRNTEVsZW1lbnQ7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgQXVkaW9Db21wb25lbnQgZXh0ZW5kcyBPYmplY3RFdmVudExpc3RlbmVyIGltcGxlbWVudHMgSU1lZGlhUGxheWVyRnVuY3Rpb25zIHtcclxuICBwdWJsaWMgc3JjOiBzdHJpbmc7XHJcbiAgcHVibGljIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudDtcclxuICBwcml2YXRlIF9jb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuICBwcm90ZWN0ZWQgX2Jsb2NrSW50ZXJhY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcm90ZWN0ZWQgX2RpdkJsb2NrSW50ZXJhY3Rpb246IEhUTUxFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3Rvciggb3B0aW9uczogQXVkaW9Db21wb25lbnRPcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLnNyYyA9IG9wdGlvbnMuc3JjO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXI7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudCA9IG9wdGlvbnMuYXVkaW9FbGVtZW50O1xyXG4gICAgdGhpcy5fYmxvY2tJbnRlcmFjdGlvbiA9IG9wdGlvbnMuYmxvY2tJbnRlcmFjdGlvbiA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICBpZiAoIG9wdGlvbnMuYXVkaW9FbGVtZW50SWQgKSB7XHJcbiAgICAgIHRoaXMuYXVkaW9FbGVtZW50LmlkID0gb3B0aW9ucy5hdWRpb0VsZW1lbnRJZDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50JyApO1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2VuZGVkJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLnN0b3AoKTtcclxuICAgIH0gKTtcclxuXHJcbiAgICBpZiAoICF0aGlzLl9jb250YWluZXIuaWQgKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5pZCA9IG9wdGlvbnMuYXVkaW9FbGVtZW50SWQgKyAnQXVkaW9Db21wb25lbnRDb250YWluZXInO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQtY29udGFpbmVyJyApO1xyXG5cclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24gPSB0aGlzLmdldEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oIHRoaXMgKTtcclxuICAgIHRoaXMuc2V0dXBJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCk7XHJcbiAgICB0aGlzLnNldEVsZW1lbnRzQXR0cmlidXRlcygpO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBnZXQgaXNQbGF5aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICF0aGlzLmF1ZGlvRWxlbWVudC5wYXVzZWQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGlkKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5hdWRpb0VsZW1lbnQuaWQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBfdmlkZW9JbmZvQXR0cmlidXRlTGlzdCgpOiBbc3RyaW5nLCBzdHJpbmddW10ge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgWydhdWRpby1jb21wb25lbnQtc3JjJywgdGhpcy5zcmNdLFxyXG4gICAgICBbJ2F1ZGlvLWNvbXBvbmVudC1uYW1lJywgcmVtb3ZlRmlsZVBhdGgoIHRoaXMuc3JjICldXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRFbGVtZW50c0F0dHJpYnV0ZXMoKSB7XHJcbiAgICBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCggdGhpcy5hdWRpb0VsZW1lbnQsIHRoaXMuX3ZpZGVvSW5mb0F0dHJpYnV0ZUxpc3QgKTtcclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLmNvbnRhaW5lciwgdGhpcy5fdmlkZW9JbmZvQXR0cmlidXRlTGlzdCApO1xyXG4gICAgc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQoIHRoaXMuZGl2QmxvY2tJbnRlcmFjdGlvbiwgdGhpcy5fdmlkZW9JbmZvQXR0cmlidXRlTGlzdCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBkaXZCbG9ja0ludGVyYWN0aW9uKCk6IEhUTUxFbGVtZW50IHtcclxuICAgIHJldHVybiB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBjb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcGF1c2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgZmlsZU5hbWUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmF1ZGlvRWxlbWVudC5zcmMgfHwgdGhpcy5hdWRpb0VsZW1lbnQucXVlcnlTZWxlY3RvciggJ3NvdXJjZScgKT8uc3JjIHx8ICcnO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBjdXJyZW50VGltZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50LmN1cnJlbnRUaW1lO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBjdXJyZW50VGltZSggdDogbnVtYmVyICkge1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSB0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBzb3VyY2VFbGVtZW50cygpOiBIVE1MU291cmNlRWxlbWVudFtdIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKCB0aGlzLmF1ZGlvRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnc291cmNlJyApICkgYXMgSFRNTFNvdXJjZUVsZW1lbnRbXTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjaGFuZ2VTb3VyY2UoIHNyYzogc3RyaW5nICkge1xyXG4gICAgdGhpcy5zcmMgPSBzcmM7XHJcbiAgICB0aGlzLmF1ZGlvRWxlbWVudC5pbm5lckhUTUwgPSBzb3VyY2VFbGVtZW50SFRNTCggdGhpcy5zcmMgKTtcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LmxvYWQoKTtcclxuICAgIHRoaXMuc2V0RWxlbWVudHNBdHRyaWJ1dGVzKCk7XHJcbiAgICB0aGlzLnN0b3AoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwbGF5V2l0aG91dFRyaWdnZXJFdmVudHMoKSB7XHJcbiAgICB2YXIgcGxheVByb21pc2UgPSB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5KCk7XHJcblxyXG4gICAgaWYgKCBwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkICkge1xyXG4gICAgICBwbGF5UHJvbWlzZS50aGVuKCBfID0+IHsgfSApXHJcbiAgICAgICAgLmNhdGNoKCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRDbGFzc2VzUGxheWluZygpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGF1c2VXaXRob3V0VHJpZ2dlckV2ZW50cygpIHtcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICB0aGlzLnNldENsYXNzZXNQYXVzZWQoKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2xhc3Nlc1BsYXlpbmcoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ2F1ZGlvLWNvbXBvbmVudC1wbGF5aW5nJyApO1xyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50LXBsYXlpbmcnICk7XHJcblxyXG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICdhdWRpby1jb21wb25lbnQtcGF1c2VkJyApO1xyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCAnYXVkaW8tY29tcG9uZW50LXBhdXNlZCcgKTtcclxuICB9XHJcblxyXG4gIHNldENsYXNzZXNQYXVzZWQoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZCggJ2F1ZGlvLWNvbXBvbmVudC1wYXVzZWQnICk7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmNsYXNzTGlzdC5hZGQoICdhdWRpby1jb21wb25lbnQtcGF1c2VkJyApO1xyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCAnYXVkaW8tY29tcG9uZW50LXBsYXlpbmcnICk7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoICdhdWRpby1jb21wb25lbnQtcGxheWluZycgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwbGF5KCkge1xyXG4gICAgdGhpcy5wbGF5V2l0aG91dFRyaWdnZXJFdmVudHMoKTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucGxheScsIHRoaXMgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBhdXNlKCkge1xyXG4gICAgdGhpcy5wYXVzZVdpdGhvdXRUcmlnZ2VyRXZlbnRzKCk7XHJcbiAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbnBhdXNlJywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RvcCgpIHtcclxuICAgIHRoaXMucGF1c2UoKTtcclxuICAgIHRoaXMuYXVkaW9FbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcclxuXHJcbiAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbnN0b3AnLCB0aGlzICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyB0b2dnbGUoKSB7XHJcbiAgICBpZiAoIHRoaXMucGF1c2VkICkge1xyXG4gICAgICB0aGlzLnBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wYXVzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29udG9nZ2xlJywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBtdXRlKCkge1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQudm9sdW1lID0gMDtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ubXV0ZScsIHRoaXMgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgdW5tdXRlKCkge1xyXG4gICAgdGhpcy5hdWRpb0VsZW1lbnQudm9sdW1lID0gMTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29udW5tdXRlJywgdGhpcyApO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBzZWVrKCBzZWVrVGltZTogbnVtYmVyLCBfcmVsb2FkQnVmZmVyPzogYm9vbGVhbiApIHtcclxuICAgIHRoaXMuY3VycmVudFRpbWUgPSBzZWVrVGltZTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uc2VlaycsIHRoaXMgKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBkaW1lbnNpb25zKCk6IERpbWVuc2lvbnMge1xyXG4gICAgcmV0dXJuIGdldEVsZW1lbnREaW1lbnNpb25zKCB0aGlzLl9jb250YWluZXIgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0SW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiggYXVkaW9Db21wb25lbnQ6IEF1ZGlvQ29tcG9uZW50ICk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGVsZW1lbnRJbnZpc2libGVEaXYgPSBjcmVhdGVJbnZpc2libGVEaXZBYm92ZVBhcmVudCgge1xyXG4gICAgICBwYXJlbnRFbGVtZW50OiBhdWRpb0NvbXBvbmVudC5fY29udGFpbmVyLFxyXG4gICAgICBpZDogYGludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24keyBhdWRpb0NvbXBvbmVudC5fY29udGFpbmVyLmlkIH1gLFxyXG4gICAgICBwb3NpdGlvbjogeyB0b3A6IDAsIGxlZnQ6IDAgfSxcclxuICAgICAgZGltZW5zaW9uczogeyB3aWR0aDogYXVkaW9Db21wb25lbnQuZGltZW5zaW9ucy53aWR0aCwgaGVpZ2h0OiBhdWRpb0NvbXBvbmVudC5kaW1lbnNpb25zLmhlaWdodCB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgZWxlbWVudEludmlzaWJsZURpdi5jbGFzc0xpc3QuYWRkKCAnYXVkaW8tY29tcG9uZW50LWRpdi1ibG9jay1pbnRlcmFjdGlvbicgKTtcclxuXHJcbiAgICByZXR1cm4gZWxlbWVudEludmlzaWJsZURpdjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXR1cEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24oKSB7XHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLnN0eWxlLmRpc3BsYXkgPSB0aGlzLl9ibG9ja0ludGVyYWN0aW9uID8gJ2Jsb2NrJyA6ICdub25lJztcclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uc3R5bGUuekluZGV4ID0gJzk5NSc7XHJcblxyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uY2xpY2tpbnRlcmFjdGlvbmJsb2NrZWQnLCB0aGlzLCB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaW50ZXJhY3Rpb25ibG9ja2VkJywgdGhpcywgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbiApO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgLy8gYXdhaXRzIGF1ZGlvIGxvYWRzIGZyb20gc291cmNlIHRoZW4gY3JlYXRlcyB0aGUgY29tcG9uZW50XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjcmVhdGVBdWRpb0NvbXBvbmVudE9uQm9keSggb3B0aW9uczogQ3JlYXRlQXVkaW9Db21wb25lbnRPcHRpb25zICk6IFByb21pc2U8QXVkaW9Db21wb25lbnQ+IHtcclxuICAgIGNvbnN0IGF1ZGlvQ29tcG9uZW50Q29udGFpbmVyID0gYXdhaXQgbmV3IEF1ZGlvQ29tcG9uZW50RmFjdG9yeSggb3B0aW9ucy5zcmMgKS5idWlsZE9uQm9keSgpO1xyXG5cclxuICAgIHJldHVybiBuZXcgQXVkaW9Db21wb25lbnQoIHtcclxuICAgICAgc3JjOiBvcHRpb25zLnNyYyxcclxuICAgICAgY29udGFpbmVyOiBhdWRpb0NvbXBvbmVudENvbnRhaW5lcixcclxuICAgICAgYXVkaW9FbGVtZW50OiBhdWRpb0NvbXBvbmVudENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCAnYXVkaW8nICkhLFxyXG4gICAgICBhdWRpb0VsZW1lbnRJZDogb3B0aW9ucy5hdWRpb0VsZW1lbnRJZCxcclxuICAgICAgYmxvY2tJbnRlcmFjdGlvbjogb3B0aW9ucy5ibG9ja0ludGVyYWN0aW9uXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICAvLyBhd2FpdHMgYXVkaW8gbG9hZHMgZnJvbSBzb3VyY2UgdGhlbiBjcmVhdGVzIHRoZSBjb21wb25lbnRcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZUF1ZGlvQ29tcG9uZW50KCBvcHRpb25zOiBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgKTogUHJvbWlzZTxBdWRpb0NvbXBvbmVudD4ge1xyXG4gICAgaWYgKCBvcHRpb25zLmNvbnRhaW5lciA9PT0gZG9jdW1lbnQuYm9keSB8fCAhb3B0aW9ucy5jb250YWluZXIgKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUF1ZGlvQ29tcG9uZW50T25Cb2R5KCBvcHRpb25zICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYXVkaW9Db21wb25lbnRDb250YWluZXIgPSBhd2FpdCBuZXcgQXVkaW9Db21wb25lbnRGYWN0b3J5KCBvcHRpb25zLnNyYyApLmJ1aWxkKCBvcHRpb25zLmNvbnRhaW5lciApO1xyXG5cclxuICAgIHJldHVybiBuZXcgQXVkaW9Db21wb25lbnQoIHtcclxuICAgICAgc3JjOiBvcHRpb25zLnNyYyxcclxuICAgICAgY29udGFpbmVyOiBhdWRpb0NvbXBvbmVudENvbnRhaW5lcixcclxuICAgICAgYXVkaW9FbGVtZW50OiBhdWRpb0NvbXBvbmVudENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCAnYXVkaW8nICkhLFxyXG4gICAgICBhdWRpb0VsZW1lbnRJZDogb3B0aW9ucy5hdWRpb0VsZW1lbnRJZCxcclxuICAgICAgYmxvY2tJbnRlcmFjdGlvbjogb3B0aW9ucy5ibG9ja0ludGVyYWN0aW9uXHJcbiAgICB9ICk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgQXVkaW9QbGF5ZXJDb25maWcsIGNyZWF0ZUludmlzaWJsZVBsYXllciB9IGZyb20gJy4uL1Rvb2xzL0F1ZGlvVG9vbHMnO1xyXG5pbXBvcnQgeyBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICcuL0NvbXBvbmVudENvbnRhaW5lcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQXVkaW9Db21wb25lbnRGYWN0b3J5IGV4dGVuZHMgQ29tcG9uZW50Q29udGFpbmVyIHtcclxuICBjb25zdHJ1Y3Rvciggc3JjOiBzdHJpbmcsIHBsYXllckNvbmZpZz86IEF1ZGlvUGxheWVyQ29uZmlnICkge1xyXG4gICAgc3VwZXIoIFwiYXVkaW9Db21wb25lbnRcIiwgY3JlYXRlSW52aXNpYmxlUGxheWVyKCBbc3JjXSwgcGxheWVyQ29uZmlnICkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBidWlsZFN1YkNvbXBvbmVudHMoIHBhcmVudDogSFRNTEVsZW1lbnQgKTogUHJvbWlzZTxIVE1MRWxlbWVudFtdIHwgdm9pZD4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxufSIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gIHByb3RlY3RlZCBfZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICBwdWJsaWMgdGVtcGxhdGVFbGVtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gIHB1YmxpYyByZWFkb25seSBjb21wb25lbnROYW1lOiBzdHJpbmc7XHJcbiAgcHJvdGVjdGVkIHN1YkNvbXBvbmVudENvdW50QnlOYW1lOiBNYXA8c3RyaW5nLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xyXG4gIHByb3RlY3RlZCBzdWJDb21wb25lbnRzOiBIVE1MRWxlbWVudFtdID0gW107XHJcblxyXG4gIC8vLyBUZW1wbGF0ZSBpcyBlaXRoZXIgYSBpZCBmb3IgYSBodG1sIHRlbXBsYXRlIGVsZW1lbnQgb3IgYW4gZWxlbWVudCB0aGF0IHdpbGwgYmUgaW5zZXJ0ZWQgYXMgYSB0ZW1wbGF0ZSBpbnNpZGUgZG9jdW1lbnQuYm9keVxyXG4gIGNvbnN0cnVjdG9yKCBjb21wb25lbnROYW1lOiBzdHJpbmcsIHRlbXBsYXRlOiBzdHJpbmcgfCBIVE1MRWxlbWVudCApIHtcclxuICAgIGlmICggdHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJyApIHtcclxuICAgICAgY29uc3QgdGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHRlbXBsYXRlICkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuXHJcbiAgICAgIGlmICggIXRlbXBsYXRlRWxlbWVudCApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCB0ZW1wbGF0ZSBmb3Igc2NlbmUgY29tcG9uZW50LiBUZW1wbGF0ZSBpZDogXCIgKyB0ZW1wbGF0ZSApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IHRlbXBsYXRlRWxlbWVudDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJ0ZW1wbGF0ZVwiICk7XHJcbiAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQuYXBwZW5kQ2hpbGQoIHRlbXBsYXRlICk7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHRoaXMudGVtcGxhdGVFbGVtZW50ICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jb21wb25lbnROYW1lID0gY29tcG9uZW50TmFtZTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRUZW1wbGF0ZUNsb25lTm9kZXMoKTogSFRNTENvbGxlY3Rpb24ge1xyXG4gICAgcmV0dXJuICggdGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudC5jbG9uZU5vZGUoIHRydWUgKSBhcyBEb2N1bWVudEZyYWdtZW50ICkuY2hpbGRyZW47XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWJzdHJhY3QgYnVpbGRTdWJDb21wb25lbnRzKCBwYXJlbnQ6IEhUTUxFbGVtZW50ICk6IFByb21pc2U8SFRNTEVsZW1lbnRbXSB8IHZvaWQ+O1xyXG5cclxuICBwcm90ZWN0ZWQgYXN5bmMgYnVpbGRTaW5nbGVTdWJDb21wb25lbnQoIGNvbXBvbmVudDogQ29tcG9uZW50Q29udGFpbmVyLCBwYXJlbnQ6IEhUTUxFbGVtZW50ICk6IFByb21pc2U8SFRNTEVsZW1lbnQ+IHtcclxuICAgIGlmICggdGhpcy5zdWJDb21wb25lbnRDb3VudEJ5TmFtZS5oYXMoIHRoaXMuY29tcG9uZW50TmFtZSApICkge1xyXG4gICAgICB0aGlzLnN1YkNvbXBvbmVudENvdW50QnlOYW1lLnNldCggdGhpcy5jb21wb25lbnROYW1lLCAwICk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNvbXBvbmVudENvdW50ID0gdGhpcy5zdWJDb21wb25lbnRDb3VudEJ5TmFtZS5nZXQoIHRoaXMuY29tcG9uZW50TmFtZSApITtcclxuXHJcbiAgICB0aGlzLnN1YkNvbXBvbmVudENvdW50QnlOYW1lLnNldCggdGhpcy5jb21wb25lbnROYW1lLCBjb21wb25lbnRDb3VudCArIDEgKTtcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgY29tcG9uZW50LmJ1aWxkKCBwYXJlbnQsIGAkeyB0aGlzLmNvbXBvbmVudE5hbWUgfSR7IGNvbXBvbmVudC5jb21wb25lbnROYW1lLmNhcGl0YWxpemVGaXJzdExldHRlcigpIH0keyBjb21wb25lbnRDb3VudCB9YCApO1xyXG4gIH1cclxuXHJcbiAgLy8vIEdldHMgdGhlIHRlbXBsYXRlIG5vZGVzIGFuZCBpbnNlcnQgdGhlbSBpbnRvIGEgY29udGFpbmVyIHRoZW4gcmV0dXJucyB0aGUgY29udGFpbmVyXHJcbiAgcHVibGljIGFzeW5jIGJ1aWxkT25Cb2R5KCBlbGVtZW50SWQ/OiBzdHJpbmcgKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcblxyXG4gICAgaWYgKCBlbGVtZW50SWQgKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQuaWQgPSBlbGVtZW50SWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICggbGV0IGl0ZW0gb2YgdGhpcy5nZXRUZW1wbGF0ZUNsb25lTm9kZXMoKSApIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdhZnRlcmJlZ2luJywgaXRlbSApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggIXRoaXMuX2VsZW1lbnQgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggYEZhaWwgYnVpbGRpbmcgU2NlbmVDb21wb25lbnQuIEVsZW1lbnRJZDogJHsgZWxlbWVudElkIH1gICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy5idWlsZFN1YkNvbXBvbmVudHMoIGRvY3VtZW50LmJvZHkgKTtcclxuXHJcbiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIHRoaXMuX2VsZW1lbnQgKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vLyBHZXRzIHRoZSB0ZW1wbGF0ZSBub2RlcyBhbmQgaW5zZXJ0IHRoZW0gaW50byBhIGNvbnRhaW5lciB0aGVuIHJldHVybnMgdGhlIGNvbnRhaW5lclxyXG4gIHB1YmxpYyBhc3luYyBidWlsZCggY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZWxlbWVudElkPzogc3RyaW5nICk6IFByb21pc2U8SFRNTEVsZW1lbnQ+IHtcclxuICAgIGZvciAoIGxldCBpdGVtIG9mIHRoaXMuZ2V0VGVtcGxhdGVDbG9uZU5vZGVzKCkgKSB7XHJcbiAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdhZnRlcmJlZ2luJywgaXRlbSApO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHRoaXMuYnVpbGRTdWJDb21wb25lbnRzKCBjb250YWluZXIgKTtcclxuXHJcbiAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gIH1cclxufSIsIlxyXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVTb3VuZGJvYXJkSXRlbUNvbnRhaW5lciggaXRlbUlkOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICByZXR1cm4gYFxyXG4gIDxkaXYgaWQ9XCIkeyBpdGVtSWQgfVNvdW5kVGFibGVJdGVtXCIgY2xhc3M9XCJzb3VuZC10YWJsZS1pdGVtLWNvbnRhaW5lclwiPlxyXG4gIDwvZGl2PlxyXG4gIGAudHJpbSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVTb3VuZGJvYXJkSW5wdXQoIGl0ZW1JZDogc3RyaW5nLCBsYWJlbFRleHQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyA9IFwiXCIsIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSBcIlwiICkge1xyXG4gIHJldHVybiBgXHJcbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1mbG9hdGluZyBzb3VuZC10YWJsZS1pbnB1dC1jb250YWluZXJcIj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIkeyB2YWx1ZSB9XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgc291bmQtdGFibGUtaW5wdXRcIiBpZD1cInVybElucHV0JHsgaXRlbUlkIH1cIiBwbGFjZWhvbGRlcj1cIiR7IHBsYWNlaG9sZGVyIH1cIj5cclxuICAgICAgPGxhYmVsIGZvcj1cInVybElucHV0JHsgaXRlbUlkIH1cIj4keyBsYWJlbFRleHQgfTwvbGFiZWw+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59IiwiXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUJhY2tncm91bmRZb3V0dWJlSWZyYW1lRWxlbWVudCggaWZyYW1lSWQ6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXHJcbiAgPGRpdiBpZD1cIiR7IGlmcmFtZUlkIH1cIj5cclxuICA8L2Rpdj5cclxuICBgLnRyaW0oKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlWW91dHViZUlmcmFtZVRhYmxlSXRlbSggaWZyYW1lSWQ6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXHJcbiAgPGRpdiBpZD1cIiR7IGlmcmFtZUlkIH1JZnJhbWVUYWJsZUl0ZW1cIiBjbGFzcz1cInl0LWlmcmFtZS10YWJsZS1pdGVtLWNvbnRhaW5lclwiPlxyXG4gIDwvZGl2PlxyXG4gIGAudHJpbSgpO1xyXG59IiwiaW1wb3J0IHsgY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQsIGV4dHJhY3RZb3VUdWJlSWQsIGdldEVsZW1lbnREaW1lbnNpb25zLCBoYW5kbGVQcm9taXNlLCBpc1ZhbGlkWW91VHViZVVybCwgaXNWYWxpZFlvdXR1YmVVcmxPcklkLCBwb2xsRm9yVmFyaWFibGUsIHBvbGxGb3JWYXJpYWJsZUFzeW5jLCBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCwgd2FpdFVudGlsRWxlbWVudEV4aXN0cyB9IGZyb20gJy4uLy4uL1Rvb2xzL0RPTVRvb2xzJztcclxuaW1wb3J0IHsgRHJhZ2dhYmxlRWxlbWVudCB9IGZyb20gJy4uLy4uL0V4dHJhcy9EcmFnZ2FibGVFbGVtZW50JztcclxuaW1wb3J0IHsgRGltZW5zaW9ucywgY2xhbXAgfSBmcm9tICcuLi8uLi9Ub29scy9NYXRoVG9vbHMnO1xyXG5pbXBvcnQgeyB0ZW1wbGF0ZUJhY2tncm91bmRZb3V0dWJlSWZyYW1lRWxlbWVudCB9IGZyb20gJy4vVGVtcGxhdGVzWW91dHViZUlmcmFtZSc7XHJcbmltcG9ydCB7IElPYmplY3RUb1NldE9uWW91dHViZUlmcmFtZXNSZWFkeSB9IGZyb20gJy4vVHlwZXMnO1xyXG5pbXBvcnQgeyBZb3V0dWJlSWZyYW1lU3dpdGNoZXIgfSBmcm9tICcuL1lvdXR1YmVJZnJhbWVTd2l0Y2hlcic7XHJcbmltcG9ydCB7IFlvdXR1YmVJZnJhbWVTeW5jIH0gZnJvbSAnLi9Zb3V0dWJlSWZyYW1lU3luYyc7XHJcbmltcG9ydCB7IE9iamVjdEV2ZW50TGlzdGVuZXIgfSBmcm9tICcuLi8uLi9FeHRyYXMvT2JqZWN0RXZlbnRMaXN0ZW5lcic7XHJcbmltcG9ydCB7IElNZWRpYVBsYXllckZ1bmN0aW9ucyB9IGZyb20gJy4uL1R5cGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIFlvdXR1YmVJZnJhbWVPcHRpb25zID0ge1xyXG4gIGlmcmFtZUlkOiBzdHJpbmc7XHJcbiAgdmlkZW9JZDogc3RyaW5nO1xyXG4gIGRpbWVuc2lvbnM/OiBEaW1lbnNpb25zO1xyXG4gIHBhcmVudEVsZW1lbnQ/OiBIVE1MRWxlbWVudDtcclxuICBjbGFzc0xpc3Q/OiBzdHJpbmdbXTtcclxuICBzdGFydE11dGVkPzogYm9vbGVhbjtcclxuICBzdGFydHNBdD86IG51bWJlcjtcclxuICBibG9ja0ludGVyYWN0aW9uPzogYm9vbGVhbjtcclxuICByZXBsYXlPbkVuZD86IGJvb2xlYW47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBZb3V0dWJlSWZyYW1lQ2hhbmdlVmlkZW9PcHRpb25zID0ge1xyXG4gIGlmcmFtZUlkOiBzdHJpbmc7XHJcbiAgdmlkZW9JZDogc3RyaW5nO1xyXG4gIHN0YXJ0c0F0PzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRHJhZ2dhYmxlWW91dHViZUlmcmFtZSggeyBpZnJhbWVJZCwgdmlkZW9JZCwgc3RhcnRzQXQsIHBhcmVudEVsZW1lbnQsIGNsYXNzTGlzdCA9IFtdIH06IFlvdXR1YmVJZnJhbWVPcHRpb25zICkge1xyXG4gIGNvbnN0IGlmcmFtZUNvbnRyb2xsZXJSZXN1bHQgPSBuZXcgWW91dHViZUlmcmFtZSggeyBzdGFydHNBdCwgaWZyYW1lSWQsIHZpZGVvSWQsIHBhcmVudEVsZW1lbnQsIGNsYXNzTGlzdCB9ICk7XHJcblxyXG4gIGNvbnN0IGRyYWdnYWJsZVJlc3VsdCA9IG5ldyBEcmFnZ2FibGVFbGVtZW50KCB7XHJcbiAgICBlbGVtZW50OiBwYXJlbnRFbGVtZW50ID8/IGRvY3VtZW50LmJvZHksXHJcbiAgICBhbGxvd0RyYWdnaW5nQnlJbm5lckNvbnRlbnQ6IHRydWUsXHJcbiAgICBvbkRyb3A6ICgpID0+IHtcclxuXHJcbiAgICB9XHJcbiAgfSApO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaWZyYW1lQ29udHJvbGxlcjogaWZyYW1lQ29udHJvbGxlclJlc3VsdCxcclxuICAgIGRyYWdnYWJsZTogZHJhZ2dhYmxlUmVzdWx0XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBZb3V0dWJlSWZyYW1lIGV4dGVuZHMgT2JqZWN0RXZlbnRMaXN0ZW5lciBpbXBsZW1lbnRzIElNZWRpYVBsYXllckZ1bmN0aW9ucyB7XHJcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBhcnJPYmplY3RUb1NldE9uRXZlcnlJZnJhbWVSZWFkeTogSU9iamVjdFRvU2V0T25Zb3V0dWJlSWZyYW1lc1JlYWR5W10gPSBbXTtcclxuXHJcbiAgcHJvdGVjdGVkIHN0YXRpYyBfZGljdFlvdXR1YmVJZnJhbWVCeUlkOiBNYXA8c3RyaW5nLCBZb3V0dWJlSWZyYW1lPiA9IG5ldyBNYXAoKTtcclxuICBwcm90ZWN0ZWQgc3RhdGljIF9hcnJZb3V0dWJlSWZyYW1lSWRSZWFkeTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgcHVibGljIHBsYXllcjogYW55IHwgbnVsbDtcclxuICBwcm90ZWN0ZWQgX2lzUGxheWVyUmVhZHk6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgcHVibGljIGlkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfdmlkZW9JZDogc3RyaW5nO1xyXG4gIHB1YmxpYyB2aWRlb05hbWU6IHN0cmluZyA9ICcnO1xyXG4gIHB1YmxpYyB2aWRlb1RodW1iOiBzdHJpbmcgPSAnJztcclxuICBwdWJsaWMgY2hhbm5lbFVSTDogc3RyaW5nID0gJyc7XHJcbiAgcHVibGljIGNoYW5uZWxOYW1lOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgcHJvdGVjdGVkIF9pZnJhbWVFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cclxuICAvLyBBIGRpdiB3aGljaCBpcyBjcmVhdGVkIGFmdGVyIGlmcmFtZSByZW5kZXIgYW5kIGhvbGRzIGlmcmFtZSBlbGVtZW50XHJcbiAgcHJvdGVjdGVkIF9pZnJhbWVDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuICAvLyBUaGUgZWxlbWVudCB0aGF0IGhvbGRzIHsgX2lmcmFtZUNvbnRhaW5lciB9XHJcbiAgcHJvdGVjdGVkIF9pZnJhbWVQYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgcHJvdGVjdGVkIF9pc1BsYXlpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcm90ZWN0ZWQgX2RpbWVuc2lvbnM6IERpbWVuc2lvbnM7XHJcblxyXG4gIC8vLyBDYW4gYmUgdXNlZCB0byBkcmFnLCBpcyBhbiBpbnZpc2libGUgZGl2IHBsYWNlZCBhdCB0aGUgdG9wIG9mIHRoZSBjb250YWluZXJcclxuICBwcm90ZWN0ZWQgdG9wRGl2PzogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIHByaXZhdGUgX3N0YXJ0c0F0OiBudW1iZXI7XHJcblxyXG4gIHByb3RlY3RlZCBfYmxvY2tJbnRlcmFjdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByb3RlY3RlZCBfZGl2QmxvY2tJbnRlcmFjdGlvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgcHJvdGVjdGVkIF9zdGFydE11dGVkOiBib29sZWFuO1xyXG4gIHB1YmxpYyBfcGxheWluZ09ic2VydmVySW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIHByb3RlY3RlZCBfZXZlbnRMaXN0ZW5lcjogT2JqZWN0RXZlbnRMaXN0ZW5lciA9IG5ldyBPYmplY3RFdmVudExpc3RlbmVyKCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCBvcHRpb25zOiBZb3V0dWJlSWZyYW1lT3B0aW9ucyApIHtcclxuICAgIGlmICggWW91dHViZUlmcmFtZS5fZGljdFlvdXR1YmVJZnJhbWVCeUlkLmhhcyggb3B0aW9ucy5pZnJhbWVJZCApICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCBpZnJhbWUgdGhlcmUncyBhbHJlYWR5IGFuIGlmcmFtZSB3aXRoIHRoaXMgaWQuXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMuaWQgPSBvcHRpb25zLmlmcmFtZUlkO1xyXG4gICAgdGhpcy5fc3RhcnRzQXQgPSBvcHRpb25zLnN0YXJ0c0F0ID8/IDA7XHJcbiAgICB0aGlzLl92aWRlb0lkID0gb3B0aW9ucy52aWRlb0lkO1xyXG5cclxuICAgIHRoaXMuX3N0YXJ0TXV0ZWQgPSBvcHRpb25zLnN0YXJ0TXV0ZWQgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB0aGlzLl9ibG9ja0ludGVyYWN0aW9uID0gb3B0aW9ucy5ibG9ja0ludGVyYWN0aW9uID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX2lmcmFtZUNvbnRhaW5lciA9IFlvdXR1YmVJZnJhbWUuZ2V0WW91dHViZUlmcmFtZUVsZW1lbnQoIHtcclxuICAgICAgaWZyYW1lSWQ6IG9wdGlvbnMuaWZyYW1lSWQsXHJcbiAgICAgIGNsYXNzTGlzdDogb3B0aW9ucy5jbGFzc0xpc3RcclxuICAgIH0gKTtcclxuXHJcbiAgICB0aGlzLl9pZnJhbWVQYXJlbnRFbGVtZW50ID0gWW91dHViZUlmcmFtZS5zZXR1cFBhcmVudEZyb21Zb3V0dWJlSWZyYW1lKCB7XHJcbiAgICAgIHBhcmVudEVsZW1lbnQ6IG9wdGlvbnMucGFyZW50RWxlbWVudCA/PyBkb2N1bWVudC5ib2R5LFxyXG4gICAgICBpZnJhbWVDb250YWluZXI6IHRoaXMuX2lmcmFtZUNvbnRhaW5lclxyXG4gICAgfSApO1xyXG5cclxuICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBhdXNlZCgpO1xyXG5cclxuICAgIHRoaXMuX2RpbWVuc2lvbnMgPSBvcHRpb25zLmRpbWVuc2lvbnMgPz8gZ2V0RWxlbWVudERpbWVuc2lvbnMoIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQgKTtcclxuXHJcbiAgICBZb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQuc2V0KCBvcHRpb25zLmlmcmFtZUlkLCB0aGlzICk7XHJcbiAgICB0aGlzLnNldFZpZGVvSW5mbygpLnRoZW4oICgpID0+IHtcclxuICAgICAgdGhpcy5zZXRFeHRlcm5hbEhUTUxFbGVtZW50c0F0dHJpYnV0ZXMoKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgdmlkZW9JZCgpIHtcclxuICAgIHJldHVybiBleHRyYWN0WW91VHViZUlkKCB0aGlzLl92aWRlb0lkICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHNldFZpZGVvSW5mbygpIHtcclxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLmdldFZpZGVvSW5mbygpO1xyXG4gICAgdGhpcy52aWRlb05hbWUgPSBpbmZvICYmIGluZm8udGl0bGUgPyBpbmZvLnRpdGxlIGFzIHN0cmluZyA6ICcnO1xyXG4gICAgdGhpcy5jaGFubmVsTmFtZSA9IGluZm8gJiYgaW5mby5hdXRob3JfbmFtZSA/IGluZm8uYXV0aG9yX25hbWUgYXMgc3RyaW5nIDogJyc7XHJcbiAgICB0aGlzLnZpZGVvVGh1bWIgPSBpbmZvICYmIGluZm8udGh1bWJuYWlsX3VybCA/IGluZm8udGh1bWJuYWlsX3VybCBhcyBzdHJpbmcgOiAnJztcclxuICAgIHRoaXMuY2hhbm5lbFVSTCA9IGluZm8gJiYgaW5mby5hdXRob3JfdXJsID8gaW5mby5hdXRob3JfdXJsIGFzIHN0cmluZyA6ICcnO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNoYW5nZVZpZGVvKCBvcHRpb25zOiBZb3V0dWJlSWZyYW1lQ2hhbmdlVmlkZW9PcHRpb25zICk6IHZvaWQge1xyXG4gICAgaWYgKCAhaXNWYWxpZFlvdXR1YmVVcmxPcklkKCBvcHRpb25zLnZpZGVvSWQgKSApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggIXRoaXMucGxheWVyIHx8ICF0aGlzLnBsYXllci5sb2FkVmlkZW9CeUlkICkge1xyXG4gICAgICBzZXRUaW1lb3V0KCAoKSA9PiB0aGlzLmNoYW5nZVZpZGVvKCBvcHRpb25zICksIDEwMCApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5wcmVwYXJlT3B0aW9ucyggb3B0aW9ucyApO1xyXG5cclxuICAgIHRoaXMucGxheWVyLnNlZWtUbyggdGhpcy5zdGFydHNBdCwgdHJ1ZSApO1xyXG4gICAgaWYgKCB0aGlzLmlzUGxheWluZyApIHtcclxuICAgICAgdGhpcy5wbGF5V2l0aG91dFRyaWdnZXJFdmVudHMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGF1c2VXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwcmVwYXJlT3B0aW9ucyggb3B0aW9uczogWW91dHViZUlmcmFtZUNoYW5nZVZpZGVvT3B0aW9ucyApIHtcclxuICAgIHRoaXMuaWQgPSBvcHRpb25zLmlmcmFtZUlkO1xyXG4gICAgdGhpcy5fdmlkZW9JZCA9IG9wdGlvbnMudmlkZW9JZDtcclxuICAgIHRoaXMuc3RhcnRzQXQgPSBvcHRpb25zLnN0YXJ0c0F0ID8/IHRoaXMuc3RhcnRzQXQ7XHJcblxyXG4gICAgdGhpcy5sb2FkVmlkZW8oKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9hZFZpZGVvKCkge1xyXG4gICAgdGhpcy5wbGF5ZXIubG9hZFZpZGVvQnlJZCgge1xyXG4gICAgICAndmlkZW9JZCc6IHRoaXMudmlkZW9JZCxcclxuICAgICAgJ3N0YXJ0U2Vjb25kcyc6IHRoaXMuc3RhcnRzQXQsXHJcbiAgICAgICdzdWdnZXN0ZWRRdWFsaXR5JzogJ2hpZ2hyZXMnXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdGhpcy5zZXRWaWRlb0luZm8oKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2V0RXh0ZXJuYWxIVE1MRWxlbWVudHNBdHRyaWJ1dGVzKCk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGFzeW5jIGdldFZpZGVvSW5mbygpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlUHJvbWlzZTxSZXNwb25zZT4oIGZldGNoKCBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vb2VtYmVkP3VybD0keyB0aGlzLnZpZGVvVVJMIH0mZm9ybWF0PWpzb25gICkgKTtcclxuXHJcbiAgICBpZiAoIHJlc3BvbnNlLmVycm9yICkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCByZXNwb25zZS5lcnJvciApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmRhdGEoKS5qc29uKCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgb25QbGF5ZXJSZWFkeSggZXZlbnQ6IGFueSApIHtcclxuICAgIGlmICggdGhpcy5fc3RhcnRNdXRlZCApIHtcclxuICAgICAgdGhpcy5wbGF5ZXIubXV0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIFlvdXR1YmVJZnJhbWUuX2FycllvdXR1YmVJZnJhbWVJZFJlYWR5LnB1c2goIHRoaXMuaWQgKTtcclxuICAgIHRoaXMuX2lmcmFtZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggdGhpcy5pZCApITtcclxuXHJcbiAgICB0aGlzLnNldENsYXNzZXNJZnJhbWVQYXVzZWQoKTtcclxuXHJcbiAgICB0aGlzLnBsYXllci5zZXRQbGF5YmFja1F1YWxpdHkoICdoaWdocmVzJyApO1xyXG4gICAgdGhpcy5wbGF5ZXIuc2Vla1RvKCB0aGlzLl9zdGFydHNBdCA/PyAwLCB0cnVlICk7XHJcbiAgICB0aGlzLnBsYXllci5wYXVzZVZpZGVvKCk7XHJcbiAgICB0aGlzLl9pc1BsYXllclJlYWR5ID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbmlmcmFtZXJlYWR5JywgdGhpcyApO1xyXG5cclxuICAgIFlvdXR1YmVJZnJhbWUuY2hlY2tJZkV2ZXJ5SWZyYW1lSXNSZWFkeSgpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIG9uUGxheWVyU3RhdGVDaGFuZ2UoIGV2ZW50OiBhbnkgKSB7XHJcbiAgICBpZiAoIGV2ZW50LmRhdGEgPT09IFlvdXR1YmVJZnJhbWUuX3lvdXR1YmVBUElSZWZlcmVuY2UuUGxheWVyU3RhdGUuUExBWUlORyApIHtcclxuICAgICAgdGhpcy5faXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fcGxheWluZ09ic2VydmVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCggKCkgPT4gdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25wbGF5aW5nJywgdGhpcywgdGhpcy5pc1BsYXlpbmcgKSwgMTAwICk7XHJcbiAgICAgIHRoaXMuc2V0Q2xhc3Nlc0lmcmFtZVBsYXlpbmcoKTtcclxuICAgIH0gZWxzZSBpZiAoIHRoaXMuX3BsYXlpbmdPYnNlcnZlckludGVydmFsICkge1xyXG4gICAgICBjbGVhckludGVydmFsKCB0aGlzLl9wbGF5aW5nT2JzZXJ2ZXJJbnRlcnZhbCApO1xyXG4gICAgICB0aGlzLnNldENsYXNzZXNJZnJhbWVQYXVzZWQoKTtcclxuICAgICAgdGhpcy5faXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX3BsYXlpbmdPYnNlcnZlckludGVydmFsID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdwbGF5ZXJzdGF0ZWNoYW5nZScsIHRoaXMsIHRoaXMuaXNQbGF5aW5nICk7XHJcbiAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbnBsYXllcnN0YXRlY2hhbmdlJywgdGhpcywgdGhpcy5pc1BsYXlpbmcgKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBzZXRDbGFzc2VzSWZyYW1lUGxheWluZygpIHtcclxuICAgIGlmICggdGhpcy5faWZyYW1lRWxlbWVudCApIHtcclxuICAgICAgdGhpcy5faWZyYW1lRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAneXQtcGF1c2VkJyApO1xyXG4gICAgICB0aGlzLl9pZnJhbWVFbGVtZW50LmNsYXNzTGlzdC5hZGQoICd5dC1wbGF5aW5nJyApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2lmcmFtZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCAneXQtcGF1c2VkJyApO1xyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoICd5dC1wbGF5aW5nJyApO1xyXG5cclxuICAgIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ3l0LXBhdXNlZCcgKTtcclxuICAgIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3l0LXBsYXlpbmcnICk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgc2V0Q2xhc3Nlc0lmcmFtZVBhdXNlZCgpIHtcclxuICAgIGlmICggdGhpcy5faWZyYW1lRWxlbWVudCApIHtcclxuICAgICAgdGhpcy5faWZyYW1lRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAneXQtcGF1c2VkJyApO1xyXG4gICAgICB0aGlzLl9pZnJhbWVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoICd5dC1wbGF5aW5nJyApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2lmcmFtZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCAneXQtcGF1c2VkJyApO1xyXG4gICAgdGhpcy5faWZyYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoICd5dC1wbGF5aW5nJyApO1xyXG5cclxuICAgIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3l0LXBhdXNlZCcgKTtcclxuICAgIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ3l0LXBsYXlpbmcnICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJvdGVjdGVkIG9uRXZlcnlZb3V0dWJlSWZyYW1lUmVhZHkoKSB7XHJcbiAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbmV2ZXJ5eW91dHViZWlmcmFtZXJlYWR5JyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBkaXZCbG9ja0ludGVyYWN0aW9uKCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgdmlkZW9VUkwoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0keyB0aGlzLnZpZGVvSWQgfWA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHBhcmVudEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lmcmFtZVBhcmVudEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGlmcmFtZUVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgaWYgKCAhdGhpcy5faWZyYW1lRWxlbWVudCApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIklmcmFtZSB3YXMgY2FsbGVkIGJ1dCBpdCdzIG5vdCByZWFkeS5cIiApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLl9pZnJhbWVFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBpc1BsYXllclJlYWR5KCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzUGxheWVyUmVhZHk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGR1cmF0aW9uKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXIuZ2V0RHVyYXRpb24oKSAtIHRoaXMuX3N0YXJ0c0F0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBwbGF5ZXJEdXJhdGlvbigpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucGxheWVyLmdldER1cmF0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IGN1cnJlbnRUaW1lKCB0OiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLnNlZWsoIHQgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgY3VycmVudFRpbWUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnBsYXllci5nZXRDdXJyZW50VGltZSgpIC0gdGhpcy5fc3RhcnRzQXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHBsYXllckN1cnJlbnRUaW1lKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5wbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgcHJvZ3Jlc3NQZXJjZW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50VGltZSAvIHRoaXMuZHVyYXRpb247XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHBsYXllclByb2dyZXNzUGVyY2VudCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMucGxheWVyQ3VycmVudFRpbWUgLyB0aGlzLnBsYXllckR1cmF0aW9uO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBzdGFydE11dGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N0YXJ0TXV0ZWQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGlzUGxheWluZygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1BsYXlpbmc7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGRpbWVuc2lvbnMoKTogRGltZW5zaW9ucyB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGltZW5zaW9ucztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgc3RhcnRzQXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBjbGFtcCggdGhpcy5fc3RhcnRzQXQsIDAsIHRoaXMuX3N0YXJ0c0F0ICk7XHJcbiAgfVxyXG4gIHB1YmxpYyBzZXQgc3RhcnRzQXQoIHZhbDogbnVtYmVyICkge1xyXG4gICAgdGhpcy5fc3RhcnRzQXQgPSBjbGFtcCggdmFsLCAwLCB2YWwgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyB0b2dnbGUoKTogSU1lZGlhUGxheWVyRnVuY3Rpb25zIHtcclxuICAgIGlmICggdGhpcy5pc1BsYXlpbmcgKSB7XHJcbiAgICAgIHRoaXMucGF1c2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGxheSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHBsYXkoKSB7XHJcbiAgICB0aGlzLnBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucGxheScsIHRoaXMgKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwbGF5V2l0aG91dFRyaWdnZXJFdmVudHMoKSB7XHJcbiAgICB0aGlzLnBsYXllci5wbGF5VmlkZW8oKTtcclxuICAgIHRoaXMuX2lzUGxheWluZyA9IHRydWU7XHJcbiAgICB0aGlzLnNldENsYXNzZXNJZnJhbWVQbGF5aW5nKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGF1c2UoKSB7XHJcbiAgICB0aGlzLnBhdXNlV2l0aG91dFRyaWdnZXJFdmVudHMoKTtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29ucGF1c2UnLCB0aGlzICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcGF1c2VXaXRob3V0VHJpZ2dlckV2ZW50cygpIHtcclxuICAgIHRoaXMucGxheWVyLnBhdXNlVmlkZW8oKTtcclxuICAgIHRoaXMuX2lzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5zZXRDbGFzc2VzSWZyYW1lUGF1c2VkKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2Vlayggc2Vla1RpbWU6IG51bWJlciwgcmVsb2FkQnVmZmVyOiBib29sZWFuID0gZmFsc2UsIGNvbnNpZGVyU3RhcnRzQXQ6IGJvb2xlYW4gPSBmYWxzZSApIHtcclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uc2VlaycsIHNlZWtUaW1lLCByZWxvYWRCdWZmZXIsIGNvbnNpZGVyU3RhcnRzQXQsIHRoaXMgKTtcclxuXHJcbiAgICBzZWVrVGltZSArPSBjb25zaWRlclN0YXJ0c0F0ID8gdGhpcy5fc3RhcnRzQXQgOiAwO1xyXG4gICAgdGhpcy5wbGF5ZXIuc2Vla1RvKCBzZWVrVGltZSwgcmVsb2FkQnVmZmVyICk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBtdXRlKCkge1xyXG4gICAgdGhpcy5wbGF5ZXIubXV0ZSgpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgdW5tdXRlKCkge1xyXG4gICAgdGhpcy5wbGF5ZXIudW5tdXRlKCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjaGVja0lmRXZlcnlJZnJhbWVJc1JlYWR5KCkge1xyXG4gICAgY29uc3QgYXJyRXZlcnlJZnJhbWVJZCA9IFsuLi5Zb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQua2V5cygpXTtcclxuICAgIGNvbnN0IGhhc0lmcmFtZU5vdFJlYWR5WWV0ID0gYXJyRXZlcnlJZnJhbWVJZC5zb21lKCByID0+ICF0aGlzLl9hcnJZb3V0dWJlSWZyYW1lSWRSZWFkeS5pbmNsdWRlcyggciApICk7XHJcblxyXG4gICAgaWYgKCAhaGFzSWZyYW1lTm90UmVhZHlZZXQgKSB7XHJcbiAgICAgIHRoaXMuYXJyT2JqZWN0VG9TZXRPbkV2ZXJ5SWZyYW1lUmVhZHkuZm9yRWFjaCggbyA9PiBvLnNldHVwKCBZb3V0dWJlSWZyYW1lLl9kaWN0WW91dHViZUlmcmFtZUJ5SWQgKSApO1xyXG5cclxuICAgICAgWW91dHViZUlmcmFtZS5fZGljdFlvdXR1YmVJZnJhbWVCeUlkLmZvckVhY2goICggdmFsLCBrZXkgKSA9PiB7XHJcbiAgICAgICAgdmFsLm9uRXZlcnlZb3V0dWJlSWZyYW1lUmVhZHkoKTtcclxuICAgICAgfSApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFlvdXR1YmVJZnJhbWVFbGVtZW50KCB7IGlmcmFtZUlkLCBjbGFzc0xpc3QgfTogeyBpZnJhbWVJZDogc3RyaW5nOyBjbGFzc0xpc3Q/OiBzdHJpbmdbXTsgfSApIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcbiAgICBjb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZCggJ3l0LWlmcmFtZS1jb250YWluZXInICk7XHJcbiAgICBpZiAoIGNsYXNzTGlzdCApIHtcclxuICAgICAgY29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoIC4uLmNsYXNzTGlzdCApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnRhaW5lckRpdi5pZCA9IGBjb250YWluZXJZb3V0dWJlSWZyYW1lJHsgaWZyYW1lSWQgfWA7XHJcbiAgICBjb250YWluZXJEaXYuaW5zZXJ0QWRqYWNlbnRIVE1MKCAnYWZ0ZXJiZWdpbicsIHRlbXBsYXRlQmFja2dyb3VuZFlvdXR1YmVJZnJhbWVFbGVtZW50KCBpZnJhbWVJZCApICk7XHJcbiAgICByZXR1cm4gY29udGFpbmVyRGl2O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldHVwUGFyZW50RnJvbVlvdXR1YmVJZnJhbWUoIHsgcGFyZW50RWxlbWVudCwgaWZyYW1lQ29udGFpbmVyIH06IHsgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQ7IGlmcmFtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7IH0gKSB7XHJcbiAgICBjb25zdCBpZnJhbWVQYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudCA/PyBkb2N1bWVudC5ib2R5O1xyXG4gICAgaWZyYW1lUGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCAneXQtaWZyYW1lLXBhcmVudCcgKTtcclxuICAgIGlmcmFtZVBhcmVudEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYWZ0ZXJiZWdpbicsIGlmcmFtZUNvbnRhaW5lciApO1xyXG4gICAgcmV0dXJuIGlmcmFtZVBhcmVudEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyBTZXRzIGRpdiB0byBibG9jayBpbnRlcmFjdGlvbiwgdG9wIGRpdiwgY29udGFpbmVyIGFuZCBhbnkgb3RoZXIgZWxlbWVudCB0aGF0IGlzIG5vdCB0aGUgbWFpbiBpZnJhbWVcclxuICBwcml2YXRlIHNldEV4dGVybmFsSFRNTEVsZW1lbnRzKCkge1xyXG4gICAgdGhpcy5jcmVhdGVJbnZpc2libGVEaXZUb3AoKTtcclxuICAgIHRoaXMuY3JlYXRlSW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbigpO1xyXG5cclxuICAgIHRoaXMuc2V0RXh0ZXJuYWxIVE1MRWxlbWVudHNBdHRyaWJ1dGVzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEV4dGVybmFsSFRNTEVsZW1lbnRzQXR0cmlidXRlcygpIHtcclxuICAgIHRoaXMuc2V0SWZyYW1lQ29udGFpbmVyQXR0cmlidXRlcygpO1xyXG4gICAgdGhpcy5zZXRUb3BEaXZBdHRyaWJ1dGVzKCk7XHJcbiAgICB0aGlzLnNldERpdkJsb2NrSW50ZXJhY3Rpb25BdHRyaWJ1dGVzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUludmlzaWJsZURpdlRvcCgpIHtcclxuICAgIHRoaXMudG9wRGl2ID0gWW91dHViZUlmcmFtZS5nZXRJbnZpc2libGVUb3BEaXYoIHRoaXMgKTtcclxuICAgIHRoaXMudG9wRGl2LnN0eWxlLnpJbmRleCA9ICc5OTAnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCkge1xyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbiA9IFlvdXR1YmVJZnJhbWUuZ2V0SW52aXNpYmxlRGl2QmxvY2tJbnRlcmFjdGlvbiggdGhpcyApO1xyXG5cclxuICAgIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24uc3R5bGUuZGlzcGxheSA9IHRoaXMuX2Jsb2NrSW50ZXJhY3Rpb24gPyAnYmxvY2snIDogJ25vbmUnO1xyXG4gICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5zdHlsZS56SW5kZXggPSAnOTk1JztcclxuXHJcbiAgICB0aGlzLl9kaXZCbG9ja0ludGVyYWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICggZXZ0ICkgPT4ge1xyXG4gICAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbmNsaWNraW50ZXJhY3Rpb25ibG9ja2VkJywgdGhpcywgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbiApO1xyXG4gICAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbmludGVyYWN0aW9uYmxvY2tlZCcsIHRoaXMsIHRoaXMuX2RpdkJsb2NrSW50ZXJhY3Rpb24gKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RGl2QmxvY2tJbnRlcmFjdGlvbkF0dHJpYnV0ZXMoKSB7XHJcbiAgICBpZiAoICF0aGlzLmRpdkJsb2NrSW50ZXJhY3Rpb24gKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCggdGhpcy5kaXZCbG9ja0ludGVyYWN0aW9uLCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldElmcmFtZUNvbnRhaW5lckF0dHJpYnV0ZXMoKSB7XHJcbiAgICBpZiAoICF0aGlzLl9pZnJhbWVDb250YWluZXIgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdHRyaWJ1dGVMaXN0Rm9yRWxlbWVudCggdGhpcy5faWZyYW1lQ29udGFpbmVyLCB0aGlzLl92aWRlb0luZm9BdHRyaWJ1dGVMaXN0ICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldFRvcERpdkF0dHJpYnV0ZXMoKSB7XHJcbiAgICBpZiAoICF0aGlzLnRvcERpdiApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCB0aGlzLnRvcERpdiwgdGhpcy5fdmlkZW9JbmZvQXR0cmlidXRlTGlzdCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCBibG9ja0ludGVyYWN0aW9uKCB2YWw6IGJvb2xlYW4gKSB7XHJcbiAgICB0aGlzLl9ibG9ja0ludGVyYWN0aW9uID0gdmFsO1xyXG5cclxuICAgIGlmICggdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbiApIHtcclxuICAgICAgdGhpcy5fZGl2QmxvY2tJbnRlcmFjdGlvbi5zdHlsZS5kaXNwbGF5ID0gdGhpcy5fYmxvY2tJbnRlcmFjdGlvbiA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaW5pdFBsYXllcigpIHtcclxuICAgIHRoaXMucGxheWVyID0gbmV3IFlvdXR1YmVJZnJhbWUuX3lvdXR1YmVBUElSZWZlcmVuY2UuUGxheWVyKCB0aGlzLmlkLCB7XHJcbiAgICAgIHZpZGVvSWQ6IHRoaXMudmlkZW9JZCxcclxuICAgICAgd2lkdGg6IHRoaXMuZGltZW5zaW9ucy53aWR0aCxcclxuICAgICAgaGVpZ2h0OiB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LFxyXG4gICAgICBwbGF5ZXJWYXJzOiB7XHJcbiAgICAgICAgJ3JlbCc6IDAsICAgICAgICAgICAgLy8gRGVzYXRpdmEgdsOtZGVvcyByZWxhY2lvbmFkb3NcclxuICAgICAgICAnaXZfbG9hZF9wb2xpY3knOiAzLCAvLyBEZXNhdGl2YSBzdWdlc3TDtWVzIGRlIHbDrWRlb3MgZHVyYW50ZSBhIHBhdXNhXHJcbiAgICAgICAgJ3Nob3dpbmZvJzogMCwgICAgICAgLy8gUmVtb3ZlIGluZm9ybWHDp8O1ZXMgZG8gdsOtZGVvICh0w610dWxvLCBldGMuKVxyXG4gICAgICAgICdjb250cm9scyc6IDAsICAgICAgIC8vIFJlbW92ZSBvcyBjb250cm9sZXMgZG8gcGxheWVyXHJcbiAgICAgICAgJ2F1dG9wbGF5JzogMCAgICAgICAgLy8gRGVzYXRpdmEgYSByZXByb2R1w6fDo28gYXV0b23DoXRpY2FcclxuICAgICAgfSxcclxuICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgJ29uUmVhZHknOiB0aGlzLm9uUGxheWVyUmVhZHkuYmluZCggdGhpcyApLFxyXG4gICAgICAgICdvblN0YXRlQ2hhbmdlJzogdGhpcy5vblBsYXllclN0YXRlQ2hhbmdlLmJpbmQoIHRoaXMgKVxyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgc3RhdGljIF95b3V0dWJlQVBJUmVmZXJlbmNlOiBhbnk7XHJcblxyXG4gIHByaXZhdGUgZ2V0IF92aWRlb0luZm9BdHRyaWJ1dGVMaXN0KCk6IFtzdHJpbmcsIHN0cmluZ11bXSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBbJ3l0LWlmcmFtZS1pZCcsIHRoaXMuaWRdLFxyXG4gICAgICBbJ3l0LWlmcmFtZS12aWRlby1uYW1lJywgdGhpcy52aWRlb05hbWVdLFxyXG4gICAgICBbJ3l0LWlmcmFtZS12aWRlby1jaGFubmVsLW5hbWUnLCB0aGlzLmNoYW5uZWxOYW1lXSxcclxuICAgICAgWyd5dC1pZnJhbWUtdmlkZW8tdGh1bWItdXJsJywgdGhpcy52aWRlb1RodW1iXSxcclxuICAgICAgWyd5dC1pZnJhbWUtdmlkZW8tY2hhbm5lbC11cmwnLCB0aGlzLmNoYW5uZWxVUkxdXHJcbiAgICBdXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgYnVpbGRTaW5nbGVJZnJhbWUoIHlvdXR1YmVJZnJhbWU6IFlvdXR1YmVJZnJhbWUgKSB7XHJcbiAgICBpZiAoICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3l0SWZyYW1lQVBJU2NyaXB0VGFnJyApICkge1xyXG4gICAgICB2YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3NjcmlwdCcgKTtcclxuICAgICAgdGFnLmlkID0gJ3l0SWZyYW1lQVBJU2NyaXB0VGFnJztcclxuXHJcbiAgICAgIHRhZy5zcmMgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2lmcmFtZV9hcGlcIjtcclxuICAgICAgdmFyIGZpcnN0U2NyaXB0VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdzY3JpcHQnIClbMF07XHJcbiAgICAgIGlmICggZmlyc3RTY3JpcHRUYWcgJiYgZmlyc3RTY3JpcHRUYWcucGFyZW50Tm9kZSApIHtcclxuICAgICAgICBmaXJzdFNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggdGFnLCBmaXJzdFNjcmlwdFRhZyApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBhd2FpdCB3YWl0VW50aWxFbGVtZW50RXhpc3RzKCAnI3l0SWZyYW1lQVBJU2NyaXB0VGFnJyApO1xyXG5cclxuICAgIGF3YWl0IHBvbGxGb3JWYXJpYWJsZUFzeW5jPGFueT4oICdZVCcsXHJcbiAgICAgICggdmFsdWU6IGFueSApID0+IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlLlBsYXllciA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgJiYgdmFsdWUuUGxheWVyLnByb3RvdHlwZVxyXG4gICAgICAgICAgJiYgdmFsdWUuUGxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9PT0gdmFsdWUuUGxheWVyXHJcbiAgICAgICAgICAmJiB2YWx1ZS5sb2FkZWQ7XHJcbiAgICAgIH0sXHJcbiAgICAgICggdmFsdWUgKSA9PiB7XHJcbiAgICAgICAgWW91dHViZUlmcmFtZS5feW91dHViZUFQSVJlZmVyZW5jZSA9IHZhbHVlO1xyXG4gICAgICAgIHlvdXR1YmVJZnJhbWUuYnVpbGQoKTtcclxuICAgICAgfSApO1xyXG5cclxuICAgIHJldHVybiB5b3V0dWJlSWZyYW1lO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGJ1aWxkSWZyYW1lcygpIHtcclxuICAgIGlmICggIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAneXRJZnJhbWVBUElTY3JpcHRUYWcnICkgKSB7XHJcbiAgICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc2NyaXB0JyApO1xyXG4gICAgICB0YWcuaWQgPSAneXRJZnJhbWVBUElTY3JpcHRUYWcnO1xyXG5cclxuICAgICAgdGFnLnNyYyA9IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vaWZyYW1lX2FwaVwiO1xyXG4gICAgICB2YXIgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ3NjcmlwdCcgKVswXTtcclxuICAgICAgaWYgKCBmaXJzdFNjcmlwdFRhZyAmJiBmaXJzdFNjcmlwdFRhZy5wYXJlbnROb2RlICkge1xyXG4gICAgICAgIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCB0YWcsIGZpcnN0U2NyaXB0VGFnICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB3YWl0VW50aWxFbGVtZW50RXhpc3RzKCAnI3l0SWZyYW1lQVBJU2NyaXB0VGFnJyApLnRoZW4oICgpID0+IHtcclxuICAgICAgcG9sbEZvclZhcmlhYmxlPGFueT4oICdZVCcsXHJcbiAgICAgICAgKCB2YWx1ZTogYW55ICkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZS5QbGF5ZXIgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgJiYgdmFsdWUuUGxheWVyLnByb3RvdHlwZVxyXG4gICAgICAgICAgICAmJiB2YWx1ZS5QbGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID09PSB2YWx1ZS5QbGF5ZXJcclxuICAgICAgICAgICAgJiYgdmFsdWUubG9hZGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKCB2YWx1ZSApID0+IHtcclxuICAgICAgICAgIFlvdXR1YmVJZnJhbWUuX3lvdXR1YmVBUElSZWZlcmVuY2UgPSB2YWx1ZTtcclxuICAgICAgICAgIFlvdXR1YmVJZnJhbWUuc2V0WW91dHViZUlmcmFtZUVsZW1lbnRzKCk7XHJcbiAgICAgICAgfSApO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGJ1aWxkKCkge1xyXG4gICAgdGhpcy5zZXRFeHRlcm5hbEhUTUxFbGVtZW50cygpO1xyXG4gICAgdGhpcy5pbml0UGxheWVyKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0WW91dHViZUlmcmFtZUVsZW1lbnRzKCkge1xyXG4gICAgdGhpcy5fZGljdFlvdXR1YmVJZnJhbWVCeUlkLmZvckVhY2goICggdmFsLCBrZXkgKSA9PiB7XHJcbiAgICAgIGlmICggIXZhbC5pc1BsYXllclJlYWR5ICkge1xyXG4gICAgICAgIHZhbC5idWlsZCgpO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0SW52aXNpYmxlVG9wRGl2KCB5dElmcmFtZTogWW91dHViZUlmcmFtZSApOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQoIHtcclxuICAgICAgcGFyZW50RWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHl0SWZyYW1lLmlkICkhLnBhcmVudEVsZW1lbnQhLFxyXG4gICAgICBpZDogYGludmlzaWJsZVRvcERpdkhvbGRUb0RyYWckeyB5dElmcmFtZS5pZCB9YCxcclxuICAgICAgcG9zaXRpb246IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXHJcbiAgICAgIGRpbWVuc2lvbnM6IHsgd2lkdGg6IHl0SWZyYW1lLmRpbWVuc2lvbnMud2lkdGgsIGhlaWdodDogeXRJZnJhbWUuZGltZW5zaW9ucy5oZWlnaHQgKiAwLjIgfVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcblxyXG4gIHN0YXRpYyBnZXRJbnZpc2libGVEaXZCbG9ja0ludGVyYWN0aW9uKCB5dElmcmFtZTogWW91dHViZUlmcmFtZSApOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBlbGVtZW50SW52aXNpYmxlRGl2ID0gY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQoIHtcclxuICAgICAgcGFyZW50RWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIHl0SWZyYW1lLmlkICkhLnBhcmVudEVsZW1lbnQhLFxyXG4gICAgICBpZDogYGludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24keyB5dElmcmFtZS5pZCB9YCxcclxuICAgICAgcG9zaXRpb246IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXHJcbiAgICAgIGRpbWVuc2lvbnM6IHsgd2lkdGg6IHl0SWZyYW1lLmRpbWVuc2lvbnMud2lkdGgsIGhlaWdodDogeXRJZnJhbWUuZGltZW5zaW9ucy5oZWlnaHQgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIGVsZW1lbnRJbnZpc2libGVEaXYuY2xhc3NMaXN0LmFkZCggJ3l0LWRpdi1ibG9jay1pbnRlcmFjdGlvbicgKTtcclxuXHJcbiAgICByZXR1cm4gZWxlbWVudEludmlzaWJsZURpdjtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgeyBZb3V0dWJlSWZyYW1lU3dpdGNoZXIsIFlvdXR1YmVJZnJhbWVTeW5jIH07IiwiXHJcbmludGVyZmFjZSBTdHJpbmcge1xyXG4gIHRydW5jYXRlKCBtYXg6IG51bWJlciwgZGVjb3JhdG9yOiBzdHJpbmcgKTogc3RyaW5nO1xyXG4gIHJlbW92ZUFjY2VudHMoKTogc3RyaW5nO1xyXG4gIGNhcGl0YWxpemVGaXJzdExldHRlcigpOiBzdHJpbmc7XHJcbiAgemVyb0JlZm9yZSgpOiBzdHJpbmc7XHJcbiAgaXNOdWxsT3JFbXB0eSgpOiBib29sZWFuO1xyXG59XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLmlzTnVsbE9yRW1wdHkgPSBmdW5jdGlvbiAoKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIHR5cGVvZiB0aGlzICE9PSAnc3RyaW5nJyAmJiAhdGhpcyAmJiB0aGlzICE9PSAnJztcclxufTtcclxuXHJcblN0cmluZy5wcm90b3R5cGUudHJ1bmNhdGUgPSBmdW5jdGlvbiAoIG1heDogbnVtYmVyLCBkZWNvcmF0b3I6IHN0cmluZyA9ICcuLi4nICk6IHN0cmluZyB7XHJcbiAgcmV0dXJuICggdGhpcy5sZW5ndGggPiBtYXggPyB0aGlzLnN1YnN0cmluZyggMCwgbWF4ICkgKyBkZWNvcmF0b3IgOiB0aGlzICkudG9TdHJpbmcoKTtcclxufTtcclxuXHJcblN0cmluZy5wcm90b3R5cGUucmVtb3ZlQWNjZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5ub3JtYWxpemUoICdORkQnICkucmVwbGFjZSggL1tcXHUwMzAwLVxcdTAzNmZdL2csIFwiXCIgKTtcclxufVxyXG5cclxuU3RyaW5nLnByb3RvdHlwZS5jYXBpdGFsaXplRmlyc3RMZXR0ZXIgPSBmdW5jdGlvbiAoKTogc3RyaW5nIHtcclxuICBpZiAoIHR5cGVvZiB0aGlzICE9PSAnc3RyaW5nJyApIHtcclxuICAgIHJldHVybiAnJztcclxuICB9XHJcblxyXG4gIHJldHVybiB0aGlzLmNoYXJBdCggMCApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLnN1YnN0cmluZyggMSApO1xyXG59XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLnplcm9CZWZvcmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucGFkU3RhcnQoIDIsICcwJyApO1xyXG59IiwiXHJcbmV4cG9ydCBjbGFzcyBPYmplY3RFdmVudExpc3RlbmVyIHtcclxuICBwdWJsaWMgZXZlbnRzQnlOYW1lOiBNYXA8c3RyaW5nLCBGdW5jdGlvbltdPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgcHVibGljIGFkZEV2ZW50TGlzdGVuZXIoIGV2ZW50TmFtZTogc3RyaW5nLCBldmVudDogRnVuY3Rpb24gKSB7XHJcbiAgICBpZiAoICF0aGlzLmV2ZW50c0J5TmFtZS5oYXMoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkgKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzQnlOYW1lLnNldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCksIFtldmVudF0gKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZXZlbnRzQnlOYW1lLmdldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSEucHVzaCggZXZlbnQgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRFdmVudHNCeU5hbWUoIGV2ZW50TmFtZTogc3RyaW5nICk6IEZ1bmN0aW9uW10ge1xyXG4gICAgaWYgKCAhdGhpcy5ldmVudHNCeU5hbWUuaGFzKCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSApICkge1xyXG4gICAgICB0aGlzLmV2ZW50c0J5TmFtZS5zZXQoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpLCBbXSApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmV2ZW50c0J5TmFtZS5nZXQoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkhO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBjYWxsRXZlbnRzQnlOYW1lKCBldmVudE5hbWU6IHN0cmluZywgLi4uZXZlbnRBcmdzOiBhbnlbXSApOiB2b2lkIHtcclxuICAgIHRoaXMuZ2V0RXZlbnRzQnlOYW1lKCBldmVudE5hbWUgKS5mb3JFYWNoKCBlID0+IGUoIC4uLmV2ZW50QXJncyApICk7XHJcbiAgfVxyXG59IiwiaW1wb3J0ICcuLi9FeHRlbnNpb25zL1N0cmluZ0V4dGVuc2lvbnMnO1xyXG5pbXBvcnQgeyBnZXRFbGVtZW50RnJvbUhUTUwsIGhpZGVFbGVtZW50IH0gZnJvbSAnLi9ET01Ub29scyc7XHJcbmltcG9ydCB7IGdldEZpbGVFeHRlbnNpb24gfSBmcm9tICcuL0ZpbGVUb29scyc7XHJcbmltcG9ydCB7IEF1ZGlvQ29tcG9uZW50LCBDcmVhdGVBdWRpb0NvbXBvbmVudE9wdGlvbnMgfSBmcm9tICcuLi9Db21wb25lbnRzL0F1ZGlvQ29tcG9uZW50JztcclxuXHJcbmV4cG9ydCB0eXBlIEF1ZGlvUGxheWVyQ29uZmlnID0ge1xyXG4gIGlkPzogc3RyaW5nO1xyXG4gIGF1dG9QbGF5PzogYm9vbGVhbjtcclxuICBhdXRvcGxheT86IGJvb2xlYW47XHJcbiAgbXV0ZWQ/OiBib29sZWFuO1xyXG4gIGxvb3A/OiBib29sZWFuO1xyXG4gIHByZWxvYWQ/OiAnYXV0bycgfCAnbWV0YWRhdGEnIHwgJ25vbmUnO1xyXG4gIG9ucGxheT86ICggYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50ICkgPT4gdm9pZDtcclxuICBvbnBhdXNlPzogKCBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgKSA9PiB2b2lkO1xyXG4gIG9uUGxheT86ICggYXVkaW9FbGVtZW50OiBIVE1MQXVkaW9FbGVtZW50ICkgPT4gdm9pZDtcclxuICBvblBhdXNlPzogKCBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQgKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXVkaW9Db21wb25lbnRPbkJvZHkoIG9wdGlvbnM6IENyZWF0ZUF1ZGlvQ29tcG9uZW50T3B0aW9ucyApIHtcclxuICByZXR1cm4gYXdhaXQgQXVkaW9Db21wb25lbnQuY3JlYXRlQXVkaW9Db21wb25lbnRPbkJvZHkoIG9wdGlvbnMgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludmlzaWJsZVBsYXllciggYXJyU291cmNlczogc3RyaW5nW10sIHBsYXllckNvbmZpZz86IEF1ZGlvUGxheWVyQ29uZmlnICkge1xyXG4gIGNvbnN0IGF1ZGlvRWxlbWVudCA9IGdldEVsZW1lbnRGcm9tSFRNTCggYXVkaW9FbGVtZW50SFRNTCggYXJyU291cmNlcywgcGxheWVyQ29uZmlnICkgKSBhcyBIVE1MRWxlbWVudDtcclxuICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCggJ2FmdGVyYmVnaW4nLCBhdWRpb0VsZW1lbnQgKTtcclxuICBoaWRlRWxlbWVudCggYXVkaW9FbGVtZW50ICk7XHJcbiAgcmV0dXJuIGF1ZGlvRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGF1ZGlvRWxlbWVudEhUTUwoIGFyclNvdXJjZXM6IHN0cmluZ1tdLCBwbGF5ZXJDb25maWc/OiBBdWRpb1BsYXllckNvbmZpZyApIHtcclxuICByZXR1cm4gYDxhdWRpbyBjb250cm9scyAkeyBwbGF5ZXJDb25maWcgPyBhdWRpb0VsZW1lbnRQYXJhbXNCeVBsYXllckNvbmZpZyggcGxheWVyQ29uZmlnICkgOiBcIlwiIH0+XHJcbiAgICAkeyBhcnJTb3VyY2VzLm1hcCggc3JjID0+IHNvdXJjZUVsZW1lbnRIVE1MKCBzcmMgKSApLnJlZHVjZSggKCBhY2MsIG5leHQgKSA9PiBhY2MgKyBuZXh0LCAnJyApIH1cclxuICA8L2F1ZGlvPmA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzb3VyY2VFbGVtZW50SFRNTCggc3JjOiBzdHJpbmcgKSB7XHJcbiAgcmV0dXJuIGA8c291cmNlIHNyYz1cIiR7IHNyYyB9XCIgdHlwZT1cImF1ZGlvLyR7IGdldEZpbGVFeHRlbnNpb24oIHNyYyApIH1cIj5gO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdWRpb0VsZW1lbnRQYXJhbXNCeVBsYXllckNvbmZpZyggcGxheWVyQ29uZmlnOiBBdWRpb1BsYXllckNvbmZpZyApIHtcclxuICBjb25zdCBwYXJhbUlkID0gcGxheWVyQ29uZmlnLmlkID8gJ2lkPVwiJyArIHBsYXllckNvbmZpZy5pZCArICdcIicgOiAnJztcclxuICBjb25zdCBwYXJhbUF1dG9QbGF5ID0gcGxheWVyQ29uZmlnLmF1dG9QbGF5IHx8IHBsYXllckNvbmZpZy5hdXRvcGxheSA/ICdhdXRvcGxheScgOiAnJztcclxuICBjb25zdCBwYXJhbU11dGVkID0gcGxheWVyQ29uZmlnLm11dGVkID8gJ211dGVkJyA6ICcnO1xyXG4gIGNvbnN0IHBhcmFtTG9vcCA9IHBsYXllckNvbmZpZy5sb29wID8gJ2xvb3AnIDogJyc7XHJcbiAgY29uc3QgcGFyYW1QcmVsb2FkID0gcGxheWVyQ29uZmlnLnByZWxvYWQgPyAncHJlbG9hZD1cIicgKyBwbGF5ZXJDb25maWcucHJlbG9hZCArICdcIicgOiAnJztcclxuXHJcbiAgcmV0dXJuIGAgJHsgcGFyYW1JZCB9ICR7IHBhcmFtQXV0b1BsYXkgfSAkeyBwYXJhbU11dGVkIH0gJHsgcGFyYW1Mb29wIH0gJHsgcGFyYW1QcmVsb2FkIH1gLnRyaW1FbmQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UGxheUJ1dHRvbkVsZW1lbnQoIGF1ZGlvRWxlbWVudDogSFRNTEF1ZGlvRWxlbWVudCwgcGxheWVyQ29uZmlnPzogQXVkaW9QbGF5ZXJDb25maWcgKSB7XHJcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdidXR0b24nICk7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncGxheS1idXR0b24nICk7XHJcblxyXG4gIHNldFRpbWVvdXQoICgpID0+IHtcclxuICAgIGlmICggYXVkaW9FbGVtZW50LnBhdXNlZCApIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCAncGF1c2VkJyApO1xyXG4gICAgfVxyXG4gIH0sIDMwMCApO1xyXG5cclxuICBidXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IHtcclxuICAgIGlmICggYXVkaW9FbGVtZW50LnBhdXNlZCApIHtcclxuICAgICAgYXVkaW9FbGVtZW50LnBsYXkoKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCAncGF1c2VkJyApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXVkaW9FbGVtZW50LnBhdXNlKCk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3BhdXNlZCcgKTtcclxuICAgIH1cclxuICB9ICk7XHJcblxyXG4gIHNldEF1ZGlvRWxlbWVudFBsYXlQYXVzZUV2ZW50cyggYnV0dG9uRWxlbWVudCwgYXVkaW9FbGVtZW50LCBwbGF5ZXJDb25maWcgKTtcclxuXHJcbiAgcmV0dXJuIGJ1dHRvbkVsZW1lbnQ7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZXRBdWRpb0VsZW1lbnRQbGF5UGF1c2VFdmVudHMoIGJ1dHRvbkVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50LCBhdWRpb0VsZW1lbnQ6IEhUTUxBdWRpb0VsZW1lbnQsIHBsYXllckNvbmZpZz86IEF1ZGlvUGxheWVyQ29uZmlnICkge1xyXG4gIGF1ZGlvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAncGxheScsICgpID0+IHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggJ3BhdXNlZCcgKTtcclxuICAgIGlmICggcGxheWVyQ29uZmlnICYmIHBsYXllckNvbmZpZy5vblBsYXkgKSB7XHJcbiAgICAgIHBsYXllckNvbmZpZy5vblBsYXkoIGF1ZGlvRWxlbWVudCApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggcGxheWVyQ29uZmlnICYmIHBsYXllckNvbmZpZy5vbnBsYXkgKSB7XHJcbiAgICAgIHBsYXllckNvbmZpZy5vbnBsYXkoIGF1ZGlvRWxlbWVudCApO1xyXG4gICAgfVxyXG4gIH0gKTtcclxuXHJcbiAgYXVkaW9FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdwYXVzZScsICgpID0+IHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ3BhdXNlZCcgKTtcclxuICAgIGlmICggcGxheWVyQ29uZmlnICYmIHBsYXllckNvbmZpZy5vblBhdXNlICkge1xyXG4gICAgICBwbGF5ZXJDb25maWcub25QYXVzZSggYXVkaW9FbGVtZW50ICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBwbGF5ZXJDb25maWcgJiYgcGxheWVyQ29uZmlnLm9ucGF1c2UgKSB7XHJcbiAgICAgIHBsYXllckNvbmZpZy5vbnBhdXNlKCBhdWRpb0VsZW1lbnQgKTtcclxuICAgIH1cclxuICB9ICk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGxheUJ1dHRvbkNTUygpIHtcclxuICByZXR1cm4gYFxyXG4gICAgLnBsYXktYnV0dG9uIHtcclxuICAgICAgbWFyZ2luOiAwO1xyXG4gICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBib3JkZXI6IDA7XHJcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICB3aWR0aDogMDtcclxuICAgICAgaGVpZ2h0OiAzNHB4O1xyXG4gICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50ICMyMDIwMjA7XHJcbiAgICAgIHRyYW5zaXRpb246IDEwMG1zIGFsbCBlYXNlO1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgIGJvcmRlci1zdHlsZTogZG91YmxlO1xyXG4gICAgICBib3JkZXItd2lkdGg6IDBweCAwIDBweCAzMHB4O1xyXG4gICAgfVxyXG5cclxuICAgIC5wbGF5LWJ1dHRvbi5wYXVzZWQge1xyXG4gICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4gICAgICBib3JkZXItd2lkdGg6IDIzcHggMHB4IDIzcHggMzRweDtcclxuICAgIH1cclxuXHJcbiAgICAucGxheS1idXR0b246aG92ZXIge1xyXG4gICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHRyYW5zcGFyZW50ICM0MDQwNDA7XHJcbiAgICB9XHJcbiAgYDtcclxufVxyXG5cclxuZXhwb3J0IHsgQ3JlYXRlQXVkaW9Db21wb25lbnRPcHRpb25zIH07IiwiaW1wb3J0IHsgRGltZW5zaW9ucywgUG9pbnQyRCwgbGVycCwgcmVnZXhOdW1iZXJQYXR0ZXJuLCByb3RhdGVDb29yZGluYXRlcywgcm90YXRlQ29vcmRpbmF0ZXNGcm9tUG9pbnQyRCB9IGZyb20gJy4vTWF0aFRvb2xzJztcclxuaW1wb3J0IHsgdG9QaG9uZU51bWJlciB9IGZyb20gJy4vU3RyaW5nVG9vbHMnO1xyXG5pbXBvcnQgeyBDb2xsaXNpb25EaXJlY3Rpb25DaGVjaywgQm9yZGVyRGlzdGFuY2UgfSBmcm9tICcuLi9FeHRyYXMvQ29sbGlzaW9uRXZlbnRzL1R5cGVzJztcclxuXHJcbmV4cG9ydCB0eXBlIEtleWJvYXJkRXZlbnRDYWxsYmFjayA9ICggZXZ0OiBLZXlib2FyZEV2ZW50ICkgPT4gdm9pZDtcclxuZXhwb3J0IGNvbnN0IHJlZ2V4UmVtb3ZlVHJhbnNsYXRlRnJvbVRyYW5zZm9ybSA9IC90cmFuc2xhdGVcXChbXildKlxcKS9nO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVZhbHVlID0gL3JvdGF0ZVxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZSA9IC9yb3RhdGVYXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlWVZhbHVlID0gL3JvdGF0ZVlcXCgoLT9cXGQrXFwuP1xcZCopZGVnXFwpLztcclxuZXhwb3J0IGNvbnN0IHJlZ2V4R3JvdXBSb3RhdGVaVmFsdWUgPSAvcm90YXRlWlxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSA9IG5ldyBNYXA8c3RyaW5nLCBLZXlib2FyZEV2ZW50Q2FsbGJhY2tbXT4oKTtcclxuZXhwb3J0IGNvbnN0IGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0ID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgY29uc3QgZGljdEtleXNCeUFjdGlvbktleXVwID0gbmV3IE1hcDxzdHJpbmcsIEtleWJvYXJkRXZlbnRDYWxsYmFja1tdPigpO1xyXG5leHBvcnQgZnVuY3Rpb24gYWRkQWN0aW9uS2V5KCB7IGtleSwga2V5ZG93bjogZXZlbnRLZXlkb3duLCBrZXl1cDogZXZlbnRLZXl1cCwgZXhlY3V0ZU9ubHlPbmNlID0gdHJ1ZSB9OiB7IGtleTogc3RyaW5nOyBrZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2s7IGtleXVwPzogS2V5Ym9hcmRFdmVudENhbGxiYWNrOyBleGVjdXRlT25seU9uY2U/OiBib29sZWFuOyB9ICkge1xyXG4gIGlmICggZXhlY3V0ZU9ubHlPbmNlICkge1xyXG4gICAgYWRkQWN0aW9uS2V5UnVuT25jZSgga2V5LCBldmVudEtleWRvd24sIGV2ZW50S2V5dXAgKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGFkZEFjdGlvbktleVJ1bk9uUmVwZWF0KCBrZXksIGV2ZW50S2V5ZG93biwgZXZlbnRLZXl1cCApO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTYWZlUHJvbWlzZTxUPiA9IHtcclxuICBkYXRhOiAoKSA9PiBUO1xyXG4gIGVycm9yOiBFcnJvciB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVQcm9taXNlPFQ+KCBwcm9taXNlOiBQcm9taXNlPFQ+ICk6IFByb21pc2U8U2FmZVByb21pc2U8VD4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHByb21pc2U7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZGF0YTogKCkgPT4gZGF0YSxcclxuICAgICAgZXJyb3I6IG51bGxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoIGVycm9yICkge1xyXG4gICAgY29uc29sZS5lcnJvciggZXJyb3IgKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXRhOiAoKSA9PiB7IHRocm93IG5ldyBFcnJvciggXCJDb3VsZG4ndCBmZXRjaCwgY2hlY2sgU2FmZVByb21pc2UuZXJyb3IgZm9yIGRldGFpbHMuXCIgKTsgfSxcclxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvciggU3RyaW5nKCBlcnJvciApIClcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFlvdXR1YmVVcmxPcklkKCBpbnB1dDogc3RyaW5nICk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHVybFBhdHRlcm4gPSAvXihodHRwKHMpPzpcXC9cXC8pPygodyl7M30uKT95b3V0dShiZXwuYmUpPyhcXC5jb20pP1xcLy4rLztcclxuICBjb25zdCBpZFBhdHRlcm4gPSAvXlthLXpBLVowLTlfLV17MTF9JC87XHJcblxyXG4gIHJldHVybiB1cmxQYXR0ZXJuLnRlc3QoIGlucHV0ICkgfHwgaWRQYXR0ZXJuLnRlc3QoIGlucHV0ICk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFlvdVR1YmVVcmwoIHVybDogc3RyaW5nICk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHBhdHRlcm4gPSAvXihodHRwKHMpPzpcXC9cXC8pPygodyl7M30uKT95b3V0dShiZXwuYmUpPyhcXC5jb20pP1xcLy4rLztcclxuICByZXR1cm4gcGF0dGVybi50ZXN0KCB1cmwgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RZb3VUdWJlSWQoIGlucHV0OiBzdHJpbmcgKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgY29uc3QgcmVnZXggPSAvWz8mXXY9KFtePyZdKykvO1xyXG4gIGNvbnN0IG1hdGNoID0gaW5wdXQubWF0Y2goIHJlZ2V4ICk7XHJcbiAgaWYgKCBtYXRjaCAmJiBtYXRjaFsxXSApIHtcclxuICAgIHJldHVybiBtYXRjaFsxXTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gSWYgZGlyZWN0IHZpZGVvIElEIGlzIHByb3ZpZGVkXHJcbiAgICByZXR1cm4gaW5wdXQubGVuZ3RoID09PSAxMSA/IGlucHV0IDogbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhdHRyTGlzdDogW3N0cmluZywgc3RyaW5nXVtdICkge1xyXG4gIGF0dHJMaXN0LmZvckVhY2goICggW2tleSwgdmFsXSApID0+IHtcclxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCBrZXksIHZhbCApO1xyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRGcm9tSFRNTCggaHRtbDogc3RyaW5nLCB0cmltOiBib29sZWFuID0gdHJ1ZSApIHtcclxuICBodG1sID0gdHJpbSA/IGh0bWwudHJpbSgpIDogaHRtbDtcclxuXHJcbiAgaWYgKCAhaHRtbCApIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGVtcGxhdGUnICk7XHJcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbDtcclxuICBjb25zdCByZXN1bHQgPSB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkcmVuO1xyXG5cclxuICBpZiAoIHJlc3VsdC5sZW5ndGggPT09IDEgKSB7XHJcbiAgICByZXR1cm4gcmVzdWx0WzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIEFycmF5LmZyb20oIHJlc3VsdCApIGFzIEhUTUxFbGVtZW50W107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50RGltZW5zaW9uc0J5SWQoIGVsZW1lbnRJZDogc3RyaW5nICk6IERpbWVuc2lvbnMge1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggZWxlbWVudElkICk7XHJcblxyXG4gIGlmICggIWVsZW1lbnQgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoIFwiSW52YWxpZCBlbGVtZW50IGF0IGdldEVsZW1lbnREaW1lbnNpb25zQnlJZCB3aXRoIGlkOiBcIiArIGVsZW1lbnRJZCApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGdldEVsZW1lbnREaW1lbnNpb25zKCBlbGVtZW50ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50RGltZW5zaW9ucyggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogRGltZW5zaW9ucyB7XHJcbiAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXHJcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogRE9NUmVjdCB7XHJcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgY29uc3QgY2VudGVyWCA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyO1xyXG4gIGNvbnN0IGNlbnRlclkgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMjtcclxuXHJcbiAgLy8gUm90YXRpb24gYW5nbGUgaW4gZGVncmVlcyAoZXh0cmFjdGVkIGZyb20gc3R5bGUudHJhbnNmb3JtIG9yIGFueSBvdGhlciBzb3VyY2UpXHJcbiAgY29uc3Qgcm90YXRpb25BbmdsZSA9IGdldEJvZHlSb3RhdGlvbkluRGVncmVlcygpO1xyXG5cclxuICBjb25zdCByYWRpYW5zID0gKCBNYXRoLlBJIC8gMTgwICkgKiByb3RhdGlvbkFuZ2xlO1xyXG4gIGNvbnN0IGNvc1RoZXRhID0gTWF0aC5jb3MoIHJhZGlhbnMgKTtcclxuICBjb25zdCBzaW5UaGV0YSA9IE1hdGguc2luKCByYWRpYW5zICk7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSB0aGUgcm90YXRlZCBjb29yZGluYXRlc1xyXG4gIGNvbnN0IHJvdGF0ZWRYMSA9IGNlbnRlclggKyAoIHJlY3QubGVmdCAtIGNlbnRlclggKSAqIGNvc1RoZXRhIC0gKCByZWN0LnRvcCAtIGNlbnRlclkgKSAqIHNpblRoZXRhO1xyXG4gIGNvbnN0IHJvdGF0ZWRZMSA9IGNlbnRlclkgKyAoIHJlY3QubGVmdCAtIGNlbnRlclggKSAqIHNpblRoZXRhICsgKCByZWN0LnRvcCAtIGNlbnRlclkgKSAqIGNvc1RoZXRhO1xyXG5cclxuICBjb25zdCByb3RhdGVkWDIgPSBjZW50ZXJYICsgKCByZWN0LnJpZ2h0IC0gY2VudGVyWCApICogY29zVGhldGEgLSAoIHJlY3QuYm90dG9tIC0gY2VudGVyWSApICogc2luVGhldGE7XHJcbiAgY29uc3Qgcm90YXRlZFkyID0gY2VudGVyWSArICggcmVjdC5yaWdodCAtIGNlbnRlclggKSAqIHNpblRoZXRhICsgKCByZWN0LmJvdHRvbSAtIGNlbnRlclkgKSAqIGNvc1RoZXRhO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgbGVmdCwgdG9wLCBib3R0b20sIGFuZCByaWdodCBjb29yZGluYXRlc1xyXG4gIGNvbnN0IHJvdGF0ZWRMZWZ0ID0gTWF0aC5taW4oIHJvdGF0ZWRYMSwgcm90YXRlZFgyICk7XHJcbiAgY29uc3Qgcm90YXRlZFRvcCA9IE1hdGgubWluKCByb3RhdGVkWTEsIHJvdGF0ZWRZMiApO1xyXG4gIGNvbnN0IHJvdGF0ZWRCb3R0b20gPSBNYXRoLm1heCggcm90YXRlZFkxLCByb3RhdGVkWTIgKTtcclxuICBjb25zdCByb3RhdGVkUmlnaHQgPSBNYXRoLm1heCggcm90YXRlZFgxLCByb3RhdGVkWDIgKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IHJvdGF0ZWRMZWZ0LFxyXG4gICAgeTogcm90YXRlZFRvcCxcclxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxyXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcclxuICAgIHRvSlNPTjogcmVjdC50b0pTT04sXHJcbiAgICBsZWZ0OiByb3RhdGVkTGVmdCxcclxuICAgIHRvcDogcm90YXRlZFRvcCxcclxuICAgIGJvdHRvbTogcm90YXRlZEJvdHRvbSxcclxuICAgIHJpZ2h0OiByb3RhdGVkUmlnaHQsXHJcbiAgfSBhcyBET01SZWN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRBY3Rpb25LZXlSdW5PbmNlKCBrZXk6IHN0cmluZywgZXZlbnRLZXlkb3duOiBLZXlib2FyZEV2ZW50Q2FsbGJhY2ssIGV2ZW50S2V5dXA/OiBLZXlib2FyZEV2ZW50Q2FsbGJhY2sgKSB7XHJcbiAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UuaGFzKCBrZXkgKSApIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5zZXQoIGtleSwgW2V2ZW50S2V5ZG93biwgLi4uZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLmdldCgga2V5ICkhXSApXHJcbiAgfSBlbHNlIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5zZXQoIGtleSwgW2V2ZW50S2V5ZG93bl0gKVxyXG4gIH1cclxuXHJcbiAgaWYgKCBldmVudEtleXVwICkge1xyXG4gICAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuaGFzKCBrZXkgKSApIHtcclxuICAgICAgZGljdEtleXNCeUFjdGlvbktleXVwLnNldCgga2V5LCBbZXZlbnRLZXl1cCwgLi4uZGljdEtleXNCeUFjdGlvbktleXVwLmdldCgga2V5ICkhXSApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwXSApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRBY3Rpb25LZXlSdW5PblJlcGVhdCgga2V5OiBzdHJpbmcsIGV2ZW50S2V5ZG93bjogS2V5Ym9hcmRFdmVudENhbGxiYWNrLCBldmVudEtleXVwPzogS2V5Ym9hcmRFdmVudENhbGxiYWNrICkge1xyXG4gIGlmICggZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQuaGFzKCBrZXkgKSApIHtcclxuICAgIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0LnNldCgga2V5LCBbZXZlbnRLZXlkb3duLCAuLi5kaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5nZXQoIGtleSApIV0gKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5zZXQoIGtleSwgW2V2ZW50S2V5ZG93bl0gKVxyXG4gIH1cclxuXHJcbiAgaWYgKCBldmVudEtleXVwICkge1xyXG4gICAgaWYgKCBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuaGFzKCBrZXkgKSApIHtcclxuICAgICAgZGljdEtleXNCeUFjdGlvbktleXVwLnNldCgga2V5LCBbZXZlbnRLZXl1cCwgLi4uZGljdEtleXNCeUFjdGlvbktleXVwLmdldCgga2V5ICkhXSApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkaWN0S2V5c0J5QWN0aW9uS2V5dXAuc2V0KCBrZXksIFtldmVudEtleXVwXSApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFbGVtZW50Q29sbGlzaW9uKCBlbGVtZW50MTogSFRNTEVsZW1lbnQsIGVsZW1lbnQyOiBIVE1MRWxlbWVudCwgY2hlY2tCb2R5Um90YXRpb246IGJvb2xlYW4gPSBmYWxzZSApOiBib29sZWFuIHtcclxuICBjb25zdCByZWN0MSA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGVsZW1lbnQxLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZWxlbWVudDEgKTtcclxuICBjb25zdCByZWN0MiA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGVsZW1lbnQyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZWxlbWVudDIgKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gIShcclxuICAgIHJlY3QxLnRvcCA+IHJlY3QyLmJvdHRvbSB8fFxyXG4gICAgcmVjdDEucmlnaHQgPCByZWN0Mi5sZWZ0IHx8XHJcbiAgICByZWN0MS5ib3R0b20gPCByZWN0Mi50b3AgfHxcclxuICAgIHJlY3QxLmxlZnQgPiByZWN0Mi5yaWdodFxyXG4gICk7XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwb2xsRm9yVmFyaWFibGU8VD4oIHZhcmlhYmxlTmFtZTogc3RyaW5nLCByZWFkeUNvbmRpdGlvbjogKCB2YWx1ZTogVCApID0+IGJvb2xlYW4sIGNhbGxiYWNrOiAoIHZhbHVlOiBUICkgPT4gdm9pZCApIHtcclxuICBjb25zdCBwb2xsSW50ZXJ2YWwgPSAxMDA7XHJcbiAgY29uc3QgcG9sbCA9IHNldEludGVydmFsKCAoKSA9PiB7XHJcbiAgICBpZiAoICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gIT09IHVuZGVmaW5lZCAmJiByZWFkeUNvbmRpdGlvbiggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSApICkge1xyXG4gICAgICAvLyBJZiBib3RoIGNvbmRpdGlvbnMgYXJlIG1ldCwgZXhlY3V0ZSB0aGUgY2FsbGJhY2sgYW5kIHN0b3AgcG9sbGluZ1xyXG4gICAgICBjbGVhckludGVydmFsKCBwb2xsICk7XHJcbiAgICAgIGNhbGxiYWNrKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICk7XHJcbiAgICB9XHJcbiAgfSwgcG9sbEludGVydmFsICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwb2xsRm9yVmFyaWFibGVBc3luYzxUPiggdmFyaWFibGVOYW1lOiBzdHJpbmcsIHJlYWR5Q29uZGl0aW9uOiAoIHZhbHVlOiBUICkgPT4gYm9vbGVhbiwgY2FsbGJhY2s6ICggdmFsdWU6IFQgKSA9PiB2b2lkICk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHBvbGxJbnRlcnZhbCA9IDEwMDtcclxuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oICggcmVzb2x2ZSApID0+IHtcclxuICAgIGNvbnN0IHBvbGwgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xyXG4gICAgICBpZiAoICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gIT09IHVuZGVmaW5lZCAmJiByZWFkeUNvbmRpdGlvbiggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSApICkge1xyXG4gICAgICAgIC8vIElmIGJvdGggY29uZGl0aW9ucyBhcmUgbWV0LCBleGVjdXRlIHRoZSBjYWxsYmFjaywgc3RvcCBwb2xsaW5nLCBhbmQgcmVzb2x2ZSB0aGUgcHJvbWlzZVxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoIHBvbGwgKTtcclxuICAgICAgICBjYWxsYmFjayggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSApO1xyXG4gICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgfVxyXG4gICAgfSwgcG9sbEludGVydmFsICk7XHJcbiAgfSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2FpdFVudGlsRWxlbWVudEV4aXN0cyggc2VsZWN0b3I6IHN0cmluZyApIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoIHJlc29sdmUgPT4ge1xyXG4gICAgaWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBzZWxlY3RvciApICkge1xyXG4gICAgICByZXR1cm4gcmVzb2x2ZSggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoIG11dGF0aW9ucyA9PiB7XHJcbiAgICAgIGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApIHtcclxuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgcmVzb2x2ZSggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApO1xyXG4gICAgICB9XHJcbiAgICB9ICk7XHJcblxyXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSggZG9jdW1lbnQuYm9keSwge1xyXG4gICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgIHN1YnRyZWU6IHRydWVcclxuICAgIH0gKTtcclxuICB9ICk7XHJcbn1cclxuXHJcbi8vLyBHZXQgdGhlIGRlZmF1bHQgYXR0cmlidXRlcyBmcm9tIHRoZSB0YXJnZXQgZWxlbWVudFxyXG4vLy8gSWYgaGF2ZSBub3QgZGVmYXVsdCBhdHRyaWJ1dGUgd2l0aCB0aGlzIEBhdHRyaWJ1dGVOYW1lIG9uIG1hcCB3aWxsIHNldCB0aGUgY3VycmVudCBhdHRyaWJ1dGUgYXMgZGVmYXVsdFxyXG4vLy8gSWYgaGF2ZSBub3QgZGVmYXVsdCBhdHRyaWJ1dGUgd2l0aCB0aGlzIEBhdHRyaWJ1dGVOYW1lIHdpbGwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZ1xyXG5leHBvcnQgY29uc3QgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQgPSBuZXcgTWFwPEhUTUxFbGVtZW50LCBNYXA8c3RyaW5nLCBzdHJpbmc+PigpO1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCggdGFyZ2V0OiBIVE1MRWxlbWVudCwgYXR0cmlidXRlTmFtZTogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgaWYgKCAhbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuaGFzKCB0YXJnZXQgKSApIHtcclxuICAgIG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LnNldCggdGFyZ2V0LCBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpICk7XHJcbiAgfVxyXG5cclxuICBsZXQgcmVzdWx0OiBzdHJpbmcgPSAnJztcclxuICBjb25zdCBkZWZhdWx0QXR0cmlidXRlVmFsdWVzQnlOYW1lID0gbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuZ2V0KCB0YXJnZXQgKSE7XHJcbiAgY29uc3QgdGFyZ2V0RGVmYXVsdEF0dHJpYnV0ZSA9ICFkZWZhdWx0QXR0cmlidXRlVmFsdWVzQnlOYW1lLmhhcyggYXR0cmlidXRlTmFtZSApID8gdGFyZ2V0LmdldEF0dHJpYnV0ZSggYXR0cmlidXRlTmFtZSApIDogZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZS5nZXQoIGF0dHJpYnV0ZU5hbWUgKSE7XHJcblxyXG4gIHJlc3VsdCA9IHRhcmdldERlZmF1bHRBdHRyaWJ1dGUgPyB0YXJnZXREZWZhdWx0QXR0cmlidXRlIDogJyc7XHJcbiAgc2V0RGVmYXVsdEF0dHJpYnV0ZUZvclRhcmdldCggdGFyZ2V0LCBhdHRyaWJ1dGVOYW1lLCByZXN1bHQgKTtcclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQoIHRhcmdldDogSFRNTEVsZW1lbnQsIGF0dHJpYnV0ZU5hbWU6IHN0cmluZywgbmV3RGVmYXVsdEF0dHJpYnV0ZTogc3RyaW5nICk6IHZvaWQge1xyXG4gIGlmICggIW1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmhhcyggdGFyZ2V0ICkgKSB7XHJcbiAgICBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5zZXQoIHRhcmdldCwgbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKSApO1xyXG4gIH1cclxuXHJcbiAgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuZ2V0KCB0YXJnZXQgKSEuc2V0KCBhdHRyaWJ1dGVOYW1lLCBuZXdEZWZhdWx0QXR0cmlidXRlICk7XHJcbn1cclxuXHJcbi8vLyBEaXZpZGUgbyBlbGVtZW50byBAdGFyZ2V0IGVtIDkgXCJxdWFkcmFkb3NcIiBpZ3VhaXMgZSByZXRvcm5hIGVtIHF1YWlzIHF1YWRyYWRvcyBvIGRyYWdnYWJsZSBlc3TDoSBjb2xpZGluZG8gY29tIG8gdGFyZ2V0XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xsaXNpb25EaXJlY3Rpb24oIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogQ29sbGlzaW9uRGlyZWN0aW9uQ2hlY2sge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZHJhZ2dhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZHJhZ2dhYmxlICk7XHJcbiAgY29uc3QgcmVjdDIgPSAhY2hlY2tCb2R5Um90YXRpb24gPyB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCB0YXJnZXQgKTtcclxuXHJcbiAgY29uc3QgaXNUb3AgPSByZWN0MS5ib3R0b20gPiByZWN0Mi50b3AgJiYgcmVjdDEudG9wIDwgcmVjdDIudG9wICsgcmVjdDIuaGVpZ2h0IC8gMztcclxuICBjb25zdCBpc1JpZ2h0ID0gcmVjdDEubGVmdCA8IHJlY3QyLnJpZ2h0ICYmIHJlY3QxLnJpZ2h0ID4gcmVjdDIucmlnaHQgLSByZWN0Mi53aWR0aCAvIDM7XHJcbiAgY29uc3QgaXNDZW50ZXIgPSByZWN0MS50b3AgPCByZWN0Mi5ib3R0b20gJiYgcmVjdDEuYm90dG9tID4gcmVjdDIudG9wICYmIHJlY3QxLmxlZnQgPCByZWN0Mi5yaWdodCAmJiByZWN0MS5yaWdodCA+IHJlY3QyLmxlZnQ7XHJcbiAgY29uc3QgaXNCb3R0b20gPSByZWN0MS50b3AgPCByZWN0Mi5ib3R0b20gLSByZWN0Mi5oZWlnaHQgLyAzICYmIHJlY3QxLmJvdHRvbSA+IHJlY3QyLmJvdHRvbSAtIHJlY3QyLmhlaWdodCAvIDM7XHJcbiAgY29uc3QgaXNMZWZ0ID0gcmVjdDEucmlnaHQgPiByZWN0Mi5sZWZ0ICYmIHJlY3QxLmxlZnQgPCByZWN0Mi5sZWZ0ICsgcmVjdDIud2lkdGggLyAzO1xyXG5cclxuICByZXR1cm4geyB0b3A6IGlzVG9wLCByaWdodDogaXNSaWdodCwgY2VudGVyOiBpc0NlbnRlciwgYm90dG9tOiBpc0JvdHRvbSwgbGVmdDogaXNMZWZ0IH07XHJcbn1cclxuXHJcbi8vLyByZXR1cm4gdGhlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgZHJhZ2dhYmxlIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHRhcmdldCBlbGVtZW50IGZyb20gZWFjaCBib3JkZXIgXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXN0YW5jZUZyb21Cb3JkZXIoIGRyYWdnYWJsZTogSFRNTEVsZW1lbnQsIHRhcmdldDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogQm9yZGVyRGlzdGFuY2Uge1xyXG4gIGNvbnN0IHJlY3QxID0gIWNoZWNrQm9keVJvdGF0aW9uID8gZHJhZ2dhYmxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggZHJhZ2dhYmxlICk7XHJcbiAgY29uc3QgcmVjdDIgPSAhY2hlY2tCb2R5Um90YXRpb24gPyB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiBnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uKCB0YXJnZXQgKTtcclxuXHJcbiAgY29uc3QgY2VudGVyID0ge1xyXG4gICAgeDogcmVjdDEubGVmdCArIHJlY3QxLndpZHRoIC8gMixcclxuICAgIHk6IHJlY3QxLnRvcCArIHJlY3QxLmhlaWdodCAvIDIsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGlzdGFuY2VGcm9tQm9yZGVyOiBCb3JkZXJEaXN0YW5jZSA9IHtcclxuICAgIHRvcDogY2VudGVyLnkgLSByZWN0Mi50b3AsXHJcbiAgICByaWdodDogcmVjdDIucmlnaHQgLSBjZW50ZXIueCxcclxuICAgIGJvdHRvbTogcmVjdDIuYm90dG9tIC0gY2VudGVyLnksXHJcbiAgICBsZWZ0OiBjZW50ZXIueCAtIHJlY3QyLmxlZnQsXHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIGRpc3RhbmNlRnJvbUJvcmRlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gcnVuT25seU9uY2VLZXlkb3duQWN0aW9ucyggZXZ0OiBLZXlib2FyZEV2ZW50ICkge1xyXG4gIGZvciAoIGNvbnN0IHBhaXIgb2YgZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlICkge1xyXG4gICAgaWYgKCBldnQuY29kZSA9PT0gcGFpclswXSApIHtcclxuICAgICAgcGFpclsxXS5mb3JFYWNoKCBrYkV2ZW50ID0+IGtiRXZlbnQoIGV2dCApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBydW5LZXlkb3duQWN0aW9uc1JlcGVhdCggZXZ0OiBLZXlib2FyZEV2ZW50ICkge1xyXG4gIGZvciAoIGNvbnN0IHBhaXIgb2YgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQgKSB7XHJcbiAgICBpZiAoIGV2dC5jb2RlID09PSBwYWlyWzBdICkge1xyXG4gICAgICBwYWlyWzFdLmZvckVhY2goIGtiRXZlbnQgPT4ga2JFdmVudCggZXZ0ICkgKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAna2V5ZG93bicsIGV2dCA9PiB7XHJcbiAgaWYgKCAhZXZ0LnJlcGVhdCApIHtcclxuICAgIHJ1bk9ubHlPbmNlS2V5ZG93bkFjdGlvbnMoIGV2dCApO1xyXG4gIH1cclxuXHJcbiAgcnVuS2V5ZG93bkFjdGlvbnNSZXBlYXQoIGV2dCApO1xyXG59ICk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXVwJywgZXZ0ID0+IHtcclxuICBmb3IgKCBjb25zdCBwYWlyIG9mIGRpY3RLZXlzQnlBY3Rpb25LZXl1cCApIHtcclxuICAgIGlmICggZXZ0LmNvZGUgPT09IHBhaXJbMF0gKSB7XHJcbiAgICAgIHBhaXJbMV0uZm9yRWFjaCgga2JFdmVudCA9PiBrYkV2ZW50KCBldnQgKSApO1xyXG4gICAgfVxyXG4gIH1cclxufSApO1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50Um90YXRpb25JbkRlZ3JlZXMoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBheGlzOiAneCcgfCAneScgfCAneicgPSAneCcgKTogbnVtYmVyIHtcclxuICBsZXQgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlOiBSZWdFeHA7XHJcbiAgc3dpdGNoICggYXhpcyApIHtcclxuICAgIGNhc2UgJ3gnOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWFZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3knOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWVZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3onOlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlWlZhbHVlO1xyXG4gICAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZSA9IHJlZ2V4R3JvdXBSb3RhdGVWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtYXRjaCA9IHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZS5leGVjKCBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSApO1xyXG4gIGlmICggbWF0Y2ggKSB7XHJcbiAgICBjb25zdCByb3RhdGlvblZhbHVlID0gcGFyc2VGbG9hdCggbWF0Y2hbMV0gKTtcclxuICAgIHJldHVybiByb3RhdGlvblZhbHVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCb2R5Um90YXRpb25JbkRlZ3JlZXMoKTogbnVtYmVyIHtcclxuICBjb25zdCBtYXRjaCA9IGdldFJlZ2V4UmVtb3ZlUm90YXRpb25Gcm9tQm9keSgpLmV4ZWMoIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNmb3JtICk7XHJcbiAgaWYgKCBtYXRjaCApIHtcclxuICAgIGNvbnN0IHJvdGF0aW9uVmFsdWUgPSBwYXJzZUZsb2F0KCBtYXRjaFsxXSApO1xyXG4gICAgcmV0dXJuIHJvdGF0aW9uVmFsdWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZ2V4UmVtb3ZlUm90YXRpb25Gcm9tQm9keSgpIHtcclxuICByZXR1cm4gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkJhc2VkT25BeGlzKCBnZXRCb2R5Um90YXRpb25BeGlzKCkgKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVnZXhSZW1vdmVSb3RhdGlvbkJhc2VkT25BeGlzKCBheGlzOiAneCcgfCAneScgfCAneicgKSB7XHJcbiAgc3dpdGNoICggYXhpcyApIHtcclxuICAgIGNhc2UgJ3gnOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZTtcclxuICAgIGNhc2UgJ3knOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVlWYWx1ZTtcclxuICAgIGNhc2UgJ3onOlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVpWYWx1ZTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiByZWdleEdyb3VwUm90YXRlVmFsdWU7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm9keVJvdGF0aW9uQXhpcygpOiAneCcgfCAneScgfCAneicge1xyXG4gIHJldHVybiBnZXRFbGVtZW50Um90YXRpb25BeGlzKCBkb2N1bWVudC5ib2R5ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50Um90YXRpb25BeGlzKCBlbGVtZW50OiBIVE1MRWxlbWVudCApOiAneCcgfCAneScgfCAneicge1xyXG4gIGNvbnN0IGVsZW1lbnRUcmFuc2Zvcm0gPSBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybS50b0xvd2VyQ2FzZSgpO1xyXG4gIGlmICggZWxlbWVudFRyYW5zZm9ybS5pbmNsdWRlcyggJ3gnICkgKSB7XHJcbiAgICByZXR1cm4gJ3gnO1xyXG4gIH0gZWxzZSBpZiAoIGVsZW1lbnRUcmFuc2Zvcm0uaW5jbHVkZXMoICd5JyApICkge1xyXG4gICAgcmV0dXJuICd5JztcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuICd6JztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm1Db29yZHNGcm9tRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGUgPSAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50ICkudHJhbnNmb3JtLm1hdGNoKCByZWdleE51bWJlclBhdHRlcm4gKSA/PyBbMCwgMF0gKS5tYXAoIG4gPT4gK24gKTtcclxuXHJcbiAgbGV0IHJlc3VsdCA9IHtcclxuICAgIHg6IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzRdICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKCBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs0XSApIDogMCxcclxuICAgIHk6IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlWzVdICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKCBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs1XSApIDogMFxyXG4gIH1cclxuXHJcbiAgaWYgKCBjaGVja0JvZHlSb3RhdGlvbiApIHtcclxuICAgIGNvbnN0IGJvZHlBbmdsZSA9IGdldEVsZW1lbnRSb3RhdGlvbkluRGVncmVlcyggZG9jdW1lbnQuYm9keSwgZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyggZWxlbWVudCApICkgfHwgMDtcclxuICAgIHJldHVybiByb3RhdGVDb29yZGluYXRlcyggcmVzdWx0LngsIHJlc3VsdC55LCBib2R5QW5nbGUgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGlja0V2ZW50VG9Db29yZGluYXRlcyggZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50ICkge1xyXG4gIGlmICggZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50ICkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogZXZlbnQuY2xpZW50WCxcclxuICAgICAgeTogZXZlbnQuY2xpZW50WVxyXG4gICAgfTtcclxuICB9IGVsc2UgaWYgKCBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQgKSB7XHJcbiAgICBjb25zdCB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogdG91Y2guY2xpZW50WCxcclxuICAgICAgeTogdG91Y2guY2xpZW50WVxyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgXCJFdmVudCBub3QgRm91bmRcIjtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW52aXNpYmxlRGl2QWJvdmVQYXJlbnQoIHsgcGFyZW50RWxlbWVudCwgaWQsIHBvc2l0aW9uLCBkaW1lbnNpb25zIH06IHsgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQ7IGlkOiBzdHJpbmc7IHBvc2l0aW9uPzogeyB0b3A6IG51bWJlcjsgbGVmdDogbnVtYmVyOyB9OyBkaW1lbnNpb25zPzogRGltZW5zaW9uczsgfSApIHtcclxuICB2YXIgaW52aXNpYmxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKTtcclxuXHJcbiAgaWYgKCAhcGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbiApIHtcclxuICAgIHBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG4gIH1cclxuXHJcbiAgaW52aXNpYmxlRGl2LmlkID0gaWQ7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICBpbnZpc2libGVEaXYuc3R5bGUud2lkdGggPSBkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMud2lkdGggPyBkaW1lbnNpb25zLndpZHRoLnRvU3RyaW5nKCkgKyAncHgnIDogJzEwMCUnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMuaGVpZ2h0ID8gZGltZW5zaW9ucy5oZWlnaHQudG9TdHJpbmcoKSArICdweCcgOiAnMTAwJSc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnRvcCA9ICggcG9zaXRpb24/LnRvcC50b1N0cmluZygpID8/ICcwJyApICsgJ3B4JztcclxuICBpbnZpc2libGVEaXYuc3R5bGUubGVmdCA9ICggcG9zaXRpb24/LmxlZnQudG9TdHJpbmcoKSA/PyAnMCcgKSArICdweCc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLm9wYWNpdHkgPSAnMCc7IC8vIE1ha2UgdGhlIGRpdiBpbnZpc2libGVcclxuICBpbnZpc2libGVEaXYuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJzsgLy8gQWxsb3cgdGhlIGRpdiB0byBpbnRlcmNlcHQgbW91c2UgZXZlbnRzXHJcblxyXG4gIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGludmlzaWJsZURpdiApO1xyXG5cclxuICByZXR1cm4gaW52aXNpYmxlRGl2O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGlkZUVsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICkge1xyXG4gIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgZWxlbWVudC5zdHlsZS56SW5kZXggPSAnLTEnO1xyXG4gIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICBlbGVtZW50LnN0eWxlLndpZHRoID0gJzBweCAhaW1wb3J0YW50JztcclxuICBlbGVtZW50LnN0eWxlLmhlaWdodCA9ICcwcHggIWltcG9ydGFudCc7XHJcbiAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoICdoaWRkZW4nLCAnJyApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2xlZXBBc3luYyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oICggcmVzb2x2ZSApID0+IHNldFRpbWVvdXQoICgpID0+IHJlc29sdmUoKSwgbXMgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmluZEVsZW1lbnRzQnlDaGVjayggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBvbkNoZWNrOiBGdW5jdGlvbiwgb25VbmNoZWNrOiBGdW5jdGlvbiApIHtcclxuICBpZiAoIHRyaWdnZXJFbGVtZW50LmNoZWNrZWQgKSB7XHJcbiAgICBvbkNoZWNrKCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0cmlnZ2VyR3JvdXAgPSB0cmlnZ2VyRWxlbWVudC5uYW1lXHJcbiAgICA/IEFycmF5LmZyb20oIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGBbbmFtZT1cIiR7IHRyaWdnZXJFbGVtZW50Lm5hbWUgfVwiXWAgKSApXHJcbiAgICA6IFt0cmlnZ2VyRWxlbWVudF07XHJcblxyXG4gIHRyaWdnZXJHcm91cC5mb3JFYWNoKCB0ID0+IHQuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIGV2dCA9PiB7XHJcbiAgICBpZiAoIHRyaWdnZXJFbGVtZW50LmNoZWNrZWQgKSB7XHJcbiAgICAgIG9uQ2hlY2soIHRhcmdldEVsZW1lbnQsIGV2dCApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb25VbmNoZWNrKCB0YXJnZXRFbGVtZW50LCBldnQgKTtcclxuICAgIH1cclxuICB9ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldElucHV0Rm9yY2VQaG9uZU51bWJlckZvcm1hdCggaW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50ICkge1xyXG4gIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnaW5wdXQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgcGhvbmVJbnB1dCA9IHRoaXMudmFsdWU7XHJcblxyXG4gICAgY29uc3QgY2xlYW5QaG9uZUlucHV0ID0gcGhvbmVJbnB1dC5yZXBsYWNlKCAvXFxEL2csICcnICk7XHJcbiAgICBpZiAoIGNsZWFuUGhvbmVJbnB1dC5sZW5ndGggPiAxMSApIHtcclxuICAgICAgcGhvbmVJbnB1dCA9IGNsZWFuUGhvbmVJbnB1dC5zbGljZSggMCwgMTEgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGhvbmVOdW1iZXJGb3JtYXR0ZWQgPSB0b1Bob25lTnVtYmVyKCBwaG9uZUlucHV0ICk7XHJcblxyXG4gICAgaWYgKCBwaG9uZU51bWJlckZvcm1hdHRlZC5sZW5ndGggPT09IDEwICkge1xyXG4gICAgICBwaG9uZU51bWJlckZvcm1hdHRlZCA9IHBob25lTnVtYmVyRm9ybWF0dGVkLnJlcGxhY2VBbGwoICctJywgJycgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZhbHVlID0gcGhvbmVOdW1iZXJGb3JtYXR0ZWQ7XHJcbiAgfSApO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTW9iaWxlQnJvd3NlcigpIHtcclxuICByZXR1cm4gL0FuZHJvaWR8aVBob25lL2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckRldmljZVR5cGUoKTogJ2FuZHJvaWQnIHwgJ2FwcGxlJyB8ICdkZXNrdG9wJyB7XHJcbiAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCAoIHdpbmRvdyBhcyBhbnkgKS5vcGVyYTtcclxuXHJcbiAgaWYgKCAvYW5kcm9pZC9pLnRlc3QoIHVzZXJBZ2VudCApICkge1xyXG4gICAgcmV0dXJuICdhbmRyb2lkJztcclxuICB9IGVsc2UgaWYgKCAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdCggdXNlckFnZW50ICkgJiYgISggd2luZG93IGFzIGFueSApLk1TU3RyZWFtICkge1xyXG4gICAgcmV0dXJuICdhcHBsZSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAnZGVza3RvcCc7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNPblNjcmVlbiggZWxlbWVudDogSFRNTEVsZW1lbnQgKSB7XHJcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIChcclxuICAgIHJlY3QudG9wID49IDAgJiZcclxuICAgIHJlY3QubGVmdCA+PSAwICYmXHJcbiAgICByZWN0LmJvdHRvbSA8PSAoIHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ICkgJiZcclxuICAgIHJlY3QucmlnaHQgPD0gKCB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggKVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBiaW5kRWxlbWVudFZpZXdJZkNoZWNrZWQoIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCBvcHRpb25zID0ge1xyXG4gIG9uQ2hlY2s6ICggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ICkgPT4geyB9LFxyXG4gIG9uVW5jaGVjazogKCB0cmlnZ2VyRWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQgKSA9PiB7IH1cclxufSApIHtcclxuICBiaW5kRWxlbWVudHNCeUNoZWNrKFxyXG4gICAgdHJpZ2dlckVsZW1lbnQsXHJcbiAgICB0YXJnZXRFbGVtZW50LFxyXG4gICAgKCBlbDogSFRNTEVsZW1lbnQgKSA9PiB7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoICdzaG93JyApO1xyXG4gICAgICBvcHRpb25zLm9uQ2hlY2soIHRyaWdnZXJFbGVtZW50LCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgICB9LFxyXG4gICAgKCBlbDogSFRNTEVsZW1lbnQgKSA9PiB7XHJcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoICdzaG93JyApO1xyXG4gICAgICBvcHRpb25zLm9uVW5jaGVjayggdHJpZ2dlckVsZW1lbnQsIHRhcmdldEVsZW1lbnQgKTtcclxuICAgIH0sXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlRnJvbVJhZGlvR3JvdXAoIGdyb3VwTmFtZTogc3RyaW5nICk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBgW25hbWU9JHsgZ3JvdXBOYW1lIH1dOmNoZWNrZWRgICkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICBpZiAoIGVsICkge1xyXG4gICAgcmV0dXJuIGVsLnZhbHVlO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGwoIHRhcmdldFk6IG51bWJlciwgZHVyYXRpb246IG51bWJlciApOiB2b2lkIHtcclxuICBjb25zdCBzdGFydFkgPSB3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgbGV0IHN0YXJ0VGltZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gIGZ1bmN0aW9uIHN0ZXAoIGN1cnJlbnRUaW1lOiBudW1iZXIgKSB7XHJcbiAgICBpZiAoICFzdGFydFRpbWUgKSBzdGFydFRpbWUgPSBjdXJyZW50VGltZTtcclxuICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XHJcbiAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKCBlbGFwc2VkVGltZSAvIGR1cmF0aW9uLCAxICk7XHJcbiAgICBjb25zdCBlYXNlZFByb2dyZXNzID0gbGVycCggMCwgMSwgcHJvZ3Jlc3MgKTtcclxuICAgIHdpbmRvdy5zY3JvbGxUbyggMCwgbGVycCggc3RhcnRZLCB0YXJnZXRZLCBlYXNlZFByb2dyZXNzICkgKTtcclxuICAgIGlmICggZWxhcHNlZFRpbWUgPCBkdXJhdGlvbiApIHtcclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBzdGVwICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoIHN0ZXAgKTtcclxufVxyXG5cclxuLy8gUmV0b3JuYSB1bWEgZnVuw6fDo28gcXVlIG7Do28gdmFpIHNlciBjb21wbGV0YWRhIGNhc28gc2VqYSBjaGFtYWRhIG5vdmFtZW50ZSBlbSB7IGRlbGF5IH0gbWlsaXNzZWd1bmRvc1xyXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2VGYWN0b3J5KCBmdW5jOiBGdW5jdGlvbiwgZGVsYXk6IG51bWJlciApOiBGdW5jdGlvbiB7XHJcbiAgbGV0IGluRGVib3VuY2U6IG51bWJlcjtcclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IHdpbmRvdztcclxuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICBjbGVhclRpbWVvdXQoIGluRGVib3VuY2UgKTtcclxuICAgIGluRGVib3VuY2UgPSB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4gZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApLCBkZWxheSApO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIFJldG9ybmEgdW1hIGZ1bsOnw6NvIHF1ZSBzw7MgcG9kZSBzZXIgY29tcGxldGFkYSB1bWEgdmV6IGEgY2FkYSB7IGxpbWl0IH0gbWlsaXNzZWd1bmRvcyBcclxuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlRmFjdG9yeSggZnVuYzogRnVuY3Rpb24sIGxpbWl0OiBudW1iZXIgKTogRnVuY3Rpb24ge1xyXG4gIGxldCBsYXN0RnVuYzogbnVtYmVyO1xyXG4gIGxldCBsYXN0UmFuOiBudW1iZXI7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSB3aW5kb3c7XHJcbiAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgaWYgKCAhbGFzdFJhbiApIHtcclxuICAgICAgZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApO1xyXG4gICAgICBsYXN0UmFuID0gRGF0ZS5ub3coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCggbGFzdEZ1bmMgKTtcclxuICAgICAgbGFzdEZ1bmMgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICggRGF0ZS5ub3coKSAtIGxhc3RSYW4gPj0gbGltaXQgKSB7XHJcbiAgICAgICAgICBmdW5jLmFwcGx5KCBjb250ZXh0LCBhcmdzICk7XHJcbiAgICAgICAgICBsYXN0UmFuID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIGxpbWl0IC0gKCBEYXRlLm5vdygpIC0gbGFzdFJhbiApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoU2Nyb2xsVG8oIHBvczogbnVtYmVyICk6IHZvaWQge1xyXG4gIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG8oIHtcclxuICAgIHRvcDogcG9zLFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNtb290aFNjcm9sbFRvRWxlbWVudCggZWxlbWVudDogSFRNTEVsZW1lbnQsIHVzZUJyb3dzZXJEZWZhdWx0czogYm9vbGVhbiA9IHRydWUgKTogdm9pZCB7XHJcbiAgaWYgKCAhdXNlQnJvd3NlckRlZmF1bHRzICkge1xyXG4gICAgY29uc3QgdGFyZ2V0WSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnNjcm9sbFk7XHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IDEwMDA7IC8vIER1cmHDp8OjbyBmaXhhIGVtIG1pbGlzc2VndW5kb3MgKDEgc2VndW5kbylcclxuICAgIHNtb290aFNjcm9sbCggdGFyZ2V0WSwgZHVyYXRpb24gKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG8oIHtcclxuICAgIHRvcDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55LFxyXG4gICAgbGVmdDogZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54LFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE9wdGlvbkJ5VGV4dCggaWRTZWxlY3RFbGVtZW50OiBzdHJpbmcsIHNlYXJjaFRleHQ6IHN0cmluZywgY29udGFpbnM6IGJvb2xlYW4gPSBmYWxzZSApOiB2b2lkIHtcclxuICBjb25zdCBzZWxlY3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGlkU2VsZWN0RWxlbWVudCApIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xyXG5cclxuICBpZiAoICFzZWxlY3RFbGVtZW50ICkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3B0aW9uc0VsZW1lbnRvU2VsZWN0ID0gWy4uLnNlbGVjdEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCggJ29wdGlvbicgKV07XHJcblxyXG4gIGxldCBzZWxlY3RlZE9wdGlvbjtcclxuICBpZiAoIGNvbnRhaW5zICkge1xyXG4gICAgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zRWxlbWVudG9TZWxlY3RcclxuICAgICAgLmZpbHRlciggZWwgPT4gZWwudGV4dENvbnRlbnQgJiYgZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyggc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpICkgKVswXS52YWx1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zRWxlbWVudG9TZWxlY3RcclxuICAgICAgLmZpbHRlciggZWwgPT4gZWwudGV4dENvbnRlbnQgJiYgZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKSA9PT0gc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpIClbMF0udmFsdWU7XHJcbiAgfVxyXG5cclxuICBzZWxlY3RFbGVtZW50LnZhbHVlID0gc2VsZWN0ZWRPcHRpb247XHJcbn1cclxuXHJcbiIsIlxyXG4vLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYyNDU3NjcvY3JlYXRpbmctYS1ibG9iLWZyb20tYS1iYXNlNjQtc3RyaW5nLWluLWphdmFzY3JpcHRcclxuLy8vIERpdmlkZSB1bSBhcnF1aXZvIGJpbsOhcmlvIGVtIHbDoXJpYXMgcGFydGVzLCBwYXJhIHF1ZSBhIGNvbnZlcnPDo28gc2VqYSBvdGltaXphZGEsIGUgcmV0b3JuYSB1bWEgYmxvYiBjb20gbyBhcnF1aXZvXHJcblxyXG5pbXBvcnQgeyBpc051bGxPckVtcHR5IH0gZnJvbSAnLi9TdHJpbmdUb29scyc7XHJcblxyXG4vLy8gQHBhcmFtIG9uUHJvZ3Jlc3NvIFVtIGNhbGxiYWNrIHF1ZSByZWNlYmUgYSBwb3JjZW50YWdlbSBkZSBwcm9ncmVzc28gYXR1YWwgZGEgY29udmVyc8Ojb1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYmFzZTY0VG9CbG9iKCB0ZXh0b0Jhc2U2NDogc3RyaW5nLCBjb250ZW50VHlwZTogc3RyaW5nLCB0YW1hbmhvUGFydGVzID0gMTAyNCwgb25Qcm9ncmVzcyA9ICggcHJvZ3Jlc3NvQXR1YWw6IG51bWJlciApID0+IHsgY29uc29sZS5sb2coIHByb2dyZXNzb0F0dWFsICkgfSApIHtcclxuICBjb25zdCBieXRlQXJyYXlzID0gbmV3IEFycmF5PFVpbnQ4QXJyYXk+KCk7XHJcbiAgY29uc3QgZmlsZVNpemUgPSB0ZXh0b0Jhc2U2NC5sZW5ndGg7XHJcblxyXG4gIC8vLyBwcmVlbmNoZSBgYnl0ZUFycmF5c2AgY29tIG9zIGJ5dGVzIGRvIGFycXVpdm8gcGVnYW5kbyB1bWEgcGFydGUgZGUgXCJ0YW1hbmhvUGFydGVzXCIgcG9yIHZlelxyXG4gIGZvciAoIGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBmaWxlU2l6ZTsgb2Zmc2V0ICs9IHRhbWFuaG9QYXJ0ZXMgKSB7XHJcbiAgICAvLy8gcGVnYW5kbyB1bSBwYXJ0ZSBkZSB0YW1hbmhvIHt0YW1hbmhvUGFydGVzfSBkbyBhcnF1aXZvXHJcbiAgICBjb25zdCBjaHVuayA9IHRleHRvQmFzZTY0LnNsaWNlKCBvZmZzZXQsIG9mZnNldCArIHRhbWFuaG9QYXJ0ZXMgKTtcclxuXHJcbiAgICAvLy8gY29udmVydGVuZG8gYSBwYXJ0ZSBlbSB1bSBhcnJheSBjb20gY2FkYSBieXRlIGRlc3NlIHBlZGHDp28gZG8gYXJxdWl2b1xyXG4gICAgY29uc3QgYXJyQnl0ZXNDaHVuayA9IG5ldyBBcnJheTxudW1iZXI+KCBjaHVuay5sZW5ndGggKTtcclxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGNodW5rLmxlbmd0aDsgaSsrICkge1xyXG4gICAgICBhcnJCeXRlc0NodW5rW2ldID0gY2h1bmsuY2hhckNvZGVBdCggaSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLyB0cmFuc2Zvcm1hbmRvIGVzc2UgYXJyYXkgZW0gdW0gYXJyYXkgY29tIGNhbXBvcyBkbyB0YW1hbmhvIGRlIHVtIGJ5dGVcclxuICAgIC8vLyBlIHVuaW5kbyBhcyBwYXJ0ZXMgasOhIGNvbmNsdcOtZGFzIGRvIGFycXVpdm9cclxuICAgIGJ5dGVBcnJheXMucHVzaCggbmV3IFVpbnQ4QXJyYXkoIGFyckJ5dGVzQ2h1bmsgKSApO1xyXG5cclxuICAgIC8vLyBDaGFtYW5kbyBjYWxsYmFjayBxdWUgZXhpYmUgbyBwcm9ncmVzc28gcXVhbmRvIG8gcGFzc28gYXR1YWwgZm9yIGNvbmNsdcOtZG9cclxuICAgIGF3YWl0IG9uUHJvZ3Jlc3MoICggb2Zmc2V0IC8gZmlsZVNpemUgKSAqIDEwMCApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5ldyBCbG9iKCBieXRlQXJyYXlzLCB7IHR5cGU6IGNvbnRlbnRUeXBlIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkRmlsZUZyb21CbG9iKCBibG9iOiBCbG9iLCB0aXRsZTogc3RyaW5nICkge1xyXG4gIGxldCBmaWxlID0gVVJMLmNyZWF0ZU9iamVjdFVSTCggYmxvYiApO1xyXG5cclxuICBpZiAoIGZpbGUgKSB7XHJcbiAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdhJyApO1xyXG4gICAgYS5ocmVmID0gZmlsZTtcclxuICAgIGEuZG93bmxvYWQgPSB0aXRsZTtcclxuICAgIGEuY2xpY2soKTtcclxuICAgIGEucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmlsZVBhdGgoIGZpbGVQYXRoOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICBjb25zdCByZWdleCA9IC8oPzouKltcXFxcL10pKFteXFxcXC9dKykkLztcclxuXHJcbiAgY29uc3QgbWF0Y2ggPSByZWdleC5leGVjKCBmaWxlUGF0aCApO1xyXG4gIGlmICggbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSApIHtcclxuICAgIHJldHVybiBtYXRjaFsxXTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZpbGVQYXRoO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24oIGZpbGVOYW1lOiBzdHJpbmcgKTogc3RyaW5nIHtcclxuICBpZiAoIGlzTnVsbE9yRW1wdHkoIGZpbGVOYW1lICkgKSByZXR1cm4gJyc7XHJcblxyXG4gIGNvbnN0IGRlZmF1bHRGaWxlU3JjID0gZmlsZU5hbWUuc3BsaXQoICcuJyApLnBvcCgpO1xyXG4gIGlmICggZGVmYXVsdEZpbGVTcmMgJiYgZGVmYXVsdEZpbGVTcmMgIT09IGZpbGVOYW1lICkge1xyXG4gICAgcmV0dXJuIGRlZmF1bHRGaWxlU3JjO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZmlsZVR5cGVTdHIgPSBmaWxlTmFtZS5zcGxpdCggJy8nICkucG9wKCk7XHJcbiAgaWYgKCBmaWxlVHlwZVN0ciAmJiBmaWxlVHlwZVN0ciAhPT0gZmlsZU5hbWUgKSB7XHJcbiAgICByZXR1cm4gZmlsZVR5cGVTdHI7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gJyc7XHJcbn0iLCJleHBvcnQgY29uc3QgcmVnZXhOdW1iZXJQYXR0ZXJuID0gLy0/XFxkK1xcLj9cXGQqL2c7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50MkQge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGltZW5zaW9ucyB7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4VG9Sb3coIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiBNYXRoLmZsb29yKCBpbmRleCAvIGdyaWRXaWR0aCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb0NvbCggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGluZGV4ICUgZ3JpZFdpZHRoO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm93Q29sVG9JbmRleCggcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCB3aWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiAoIHJvdyAqIHdpZHRoICkgKyBjb2w7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlc0Zyb21Qb2ludDJEKCBjb29yZHM6IFBvaW50MkQsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IGNvb3Jkcy54ICogTWF0aC5jb3MoIHJhZGlhbnMgKSAtIGNvb3Jkcy55ICogTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuICBjb25zdCBuZXdZID0gY29vcmRzLnggKiBNYXRoLnNpbiggcmFkaWFucyApICsgY29vcmRzLnkgKiBNYXRoLmNvcyggcmFkaWFucyApO1xyXG4gIHJldHVybiB7IHg6IG5ld1gsIHk6IG5ld1kgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlcyggeDogbnVtYmVyLCB5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IHggKiBNYXRoLmNvcyggcmFkaWFucyApIC0geSAqIE1hdGguc2luKCByYWRpYW5zICk7XHJcbiAgY29uc3QgbmV3WSA9IHggKiBNYXRoLnNpbiggcmFkaWFucyApICsgeSAqIE1hdGguY29zKCByYWRpYW5zICk7XHJcbiAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJlRGlhZ29uYWxzKCBpbmRleDE6IG51bWJlciwgaW5kZXgyOiBudW1iZXIsIGdyaWRTaXplOiBudW1iZXIgKTogYm9vbGVhbiB7XHJcbiAgaWYgKCBpbmRleDEgPCAwIHx8IGluZGV4MiA8IDAgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoICdJbnZhbGlkIGNlbGwgaW5kaWNlcycgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJvdzEgPSBpbmRleFRvUm93KCBpbmRleDEsIGdyaWRTaXplICk7XHJcbiAgY29uc3QgY29sMSA9IGluZGV4VG9Db2woIGluZGV4MSwgZ3JpZFNpemUgKTtcclxuXHJcbiAgY29uc3Qgcm93MiA9IGluZGV4VG9Sb3coIGluZGV4MiwgZ3JpZFNpemUgKTtcclxuICBjb25zdCBjb2wyID0gaW5kZXhUb0NvbCggaW5kZXgyLCBncmlkU2l6ZSApO1xyXG5cclxuICByZXR1cm4gTWF0aC5hYnMoIHJvdzEgLSByb3cyICkgPT09IE1hdGguYWJzKCBjb2wxIC0gY29sMiApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb1BvaW50MkQoIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICk6IFBvaW50MkQge1xyXG4gIHJldHVybiB7XHJcbiAgICB4OiBpbmRleFRvQ29sKCBpbmRleCwgZ3JpZFdpZHRoICksXHJcbiAgICB5OiBpbmRleFRvUm93KCBpbmRleCwgZ3JpZFdpZHRoIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsZXJwKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuICggMSAtIGFtb3VudCApICogbWluICsgYW1vdW50ICogbWF4O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZUxlcnAoIGE6IG51bWJlciwgYjogbnVtYmVyLCB2YWw6IG51bWJlciApOiBudW1iZXIge1xyXG4gIHJldHVybiAoIHZhbCAtIGEgKSAvICggYiAtIGEgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbWFwKCBpbk1pbjogbnVtYmVyLCBpbk1heDogbnVtYmVyLCBvdXRNaW46IG51bWJlciwgb3V0TWF4OiBudW1iZXIsIHZhbDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuIGxlcnAoIG91dE1pbiwgb3V0TWF4LCBpbnZlcnNlTGVycCggaW5NaW4sIGluTWF4LCB2YWwgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiApICsgbWluICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsU2V0czxUPiggc2V0MTogU2V0PFQ+LCBzZXQyOiBTZXQ8VD4gKSB7XHJcbiAgcmV0dXJuIHNldDEuc2l6ZSA9PT0gc2V0Mi5zaXplICYmXHJcbiAgICBbLi4uc2V0MV0uZXZlcnkoICggeCApID0+IHNldDIuaGFzKCB4ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUludEluY2x1c2l2ZSggbWluOiBudW1iZXIsIG1heDogbnVtYmVyICkge1xyXG4gIG1pbiA9IE1hdGguY2VpbCggbWluICk7XHJcbiAgbWF4ID0gTWF0aC5mbG9vciggbWF4ICk7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiArIDEgKSApICsgbWluO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRnJvbUFycmF5PFQ+KCBhcnI6IEFycmF5PFQ+ICkge1xyXG4gIHJldHVybiBhcnJbZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCAwLCBhcnIubGVuZ3RoICldO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAoIG51bTogbnVtYmVyID0gMCwgbWluOiBudW1iZXIgPSAwLCBtYXg6IG51bWJlciA9IDEwMCApOiBudW1iZXIge1xyXG4gIHJldHVybiBNYXRoLm1heCggbWluLCBNYXRoLm1pbiggbnVtLCBtYXggKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWludXRlc1RvTWlsbGlzZWNvbmRzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAqIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9NaW51dGVzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAvIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9Ib3VycyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgLyAzLjZlKzY7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb0RheXMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zIC8gOC42NGUrNztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1lZ2FieXRlVG9CeXRlKCBtYjogbnVtYmVyICkge1xyXG4gIHJldHVybiBtYiAqIDEwMjQgKiAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnl0ZVRvTWVnYWJ5dGUoIGI6IG51bWJlciApIHtcclxuICByZXR1cm4gYiAvIDEwMjQgLyAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJyYXlGcm9tUmFuZ2UoIHNpemU6IG51bWJlciwgc3RhcnRpbmdGcm9tOiBudW1iZXIgPSAwICk6IG51bWJlcltdIHtcclxuICBsZXQgcmVzdWx0ID0gWy4uLkFycmF5KCBzaXplICkua2V5cygpXVxyXG5cclxuICBpZiAoIHN0YXJ0aW5nRnJvbSAhPSAwICkge1xyXG4gICAgcmVzdWx0ID0gcmVzdWx0Lm1hcCggaSA9PiBpICsgc3RhcnRpbmdGcm9tICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFjY2VudHMoIHN0cjogc3RyaW5nICkge1xyXG4gIHJldHVybiBzdHIubm9ybWFsaXplKCAnTkZEJyApLnJlcGxhY2UoIC9bXFx1MDMwMC1cXHUwMzZmXS9nLCBcIlwiICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoIHN0cjogc3RyaW5nICk6IHN0cmluZyB7XHJcbiAgaWYgKCB0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyApIHtcclxuICAgIHJldHVybiAnJztcclxuICB9XHJcbiAgcmV0dXJuIHN0ci5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cmluZyggMSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoVGVybSggc3RyaW5nQXJyYXk6IHN0cmluZ1tdLCBzZWFyY2hUZXJtOiBzdHJpbmcgKTogc3RyaW5nW10ge1xyXG4gIHJldHVybiBzdHJpbmdBcnJheVxyXG4gICAgLmZpbHRlciggKCB2OiBzdHJpbmcgKSA9PiB2LnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpICkgPiAtMSApXHJcbiAgICAuc2xpY2UoIDAsIDEwIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHplcm9CZWZvcmUoIG46IG51bWJlciApIHtcclxuICByZXR1cm4gbi50b1N0cmluZygpLnBhZFN0YXJ0KCAyLCAnMCcgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbE9yRW1wdHkoIHN0cjogc3RyaW5nICkge1xyXG4gIHJldHVybiB0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyB8fCAhc3RyIHx8IHN0ciA9PT0gJydcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvUGhvbmVOdW1iZXIoIGlucHV0VGV4dDogc3RyaW5nICkge1xyXG4gIGNvbnN0IGNsZWFuTnVtYmVyID0gaW5wdXRUZXh0LnJlcGxhY2UoIC9cXEQvZywgJycgKTtcclxuXHJcbiAgbGV0IHJlc3VsdDtcclxuICBpZiAoIGNsZWFuTnVtYmVyLmxlbmd0aCA8PSAxMCApIHtcclxuICAgIGNvbnN0IHJlZ2V4ID0gL14oXFxkezJ9KShcXGR7NH0pKFxcZHswLDR9KSQvO1xyXG4gICAgcmVzdWx0ID0gY2xlYW5OdW1iZXIucmVwbGFjZSggcmVnZXgsICcoJDEpICQyLSQzJyApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCByZWdleCA9IC9eKFxcZHsyfSkoXFxkezV9KShcXGR7MCw0fSkkLztcclxuICAgIHJlc3VsdCA9IGNsZWFuTnVtYmVyLnJlcGxhY2UoIHJlZ2V4LCAnKCQxKSAkMi0kMycgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0IHsgT2JqZWN0RXZlbnRMaXN0ZW5lciB9IGZyb20gJy4uLy4uL0V4dHJhcy9PYmplY3RFdmVudExpc3RlbmVyJztcclxuaW1wb3J0IHsgZ2V0RWxlbWVudEZyb21IVE1MLCBpc1ZhbGlkWW91dHViZVVybE9ySWQgfSBmcm9tICcuLi8uLi9Ub29scy9ET01Ub29scyc7XHJcbmltcG9ydCB7IEF1ZGlvQ29tcG9uZW50IH0gZnJvbSAnLi4vQXVkaW9Db21wb25lbnQnO1xyXG5pbXBvcnQgeyBZb3V0dWJlSWZyYW1lIH0gZnJvbSAnLi4vWW91dHViZUlmcmFtZS9Zb3V0dWJlSWZyYW1lU3dpdGNoZXInO1xyXG5pbXBvcnQgeyB0ZW1wbGF0ZVNvdW5kYm9hcmRJbnB1dCwgdGVtcGxhdGVTb3VuZGJvYXJkSXRlbUNvbnRhaW5lciB9IGZyb20gJy4vVGVtcGxhdGVzU291bmRib2FyZCc7XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgU291bmRib2FyZEl0ZW1PcHRpb25zID0ge1xyXG4gIHNyYzogc3RyaW5nO1xyXG4gIGF1dG9SZXBlYXRPblBsYXk6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dCA9IHN0cmluZyB8IFNvdW5kYm9hcmRJdGVtT3B0aW9ucztcclxuXHJcbmV4cG9ydCB0eXBlIFNvdW5kYm9hcmRPcHRpb25zID0ge1xyXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgYXJyTWVkaWFTcmM6IFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dFtdO1xyXG4gIGlmcmFtZXNDbGFzc0xpc3Q6IHN0cmluZ1tdO1xyXG4gIGNvbnRhaW5lcnNDbGFzc0xpc3Q6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgdHlwZSBTb3VuZGJvYXJkTWVkaWEgPSBZb3V0dWJlSWZyYW1lIHwgQXVkaW9Db21wb25lbnQ7XHJcblxyXG5leHBvcnQgdHlwZSBTb3VuZGJvYXJkQ29tcG9uZW50ID0ge1xyXG4gIG1lZGlhOiBTb3VuZGJvYXJkTWVkaWE7XHJcbiAgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgaW5wdXRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFNvdW5kYm9hcmQgZXh0ZW5kcyBPYmplY3RFdmVudExpc3RlbmVyIHtcclxuICBwdWJsaWMgcmVhZG9ubHkgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBwdWJsaWMgaWZyYW1lc0NsYXNzTGlzdDogc3RyaW5nW107XHJcbiAgcHVibGljIGNvbnRhaW5lcnNDbGFzc0xpc3Q6IHN0cmluZ1tdO1xyXG5cclxuICBwcml2YXRlIF9zZXRNZWRpYUNvbnRyb2xsZXJzID0gbmV3IFNldDxTb3VuZGJvYXJkQ29tcG9uZW50PigpO1xyXG4gIHByaXZhdGUgX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkID0gbmV3IE1hcDxzdHJpbmcsIFNvdW5kYm9hcmRDb21wb25lbnQ+KCk7XHJcbiAgcHJpdmF0ZSBfbWFwSW5wdXRCeUNvbXBvbmVudElkOiBNYXA8c3RyaW5nLCBIVE1MSW5wdXRFbGVtZW50PiA9IG5ldyBNYXA8c3RyaW5nLCBIVE1MSW5wdXRFbGVtZW50PigpOztcclxuXHJcbiAgY29uc3RydWN0b3IoIG9wdGlvbnM6IFNvdW5kYm9hcmRPcHRpb25zICkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xyXG5cclxuICAgIHRoaXMuaWZyYW1lc0NsYXNzTGlzdCA9IG9wdGlvbnMuaWZyYW1lc0NsYXNzTGlzdCA/PyBbXTtcclxuICAgIHRoaXMuY29udGFpbmVyc0NsYXNzTGlzdCA9IG9wdGlvbnMuY29udGFpbmVyc0NsYXNzTGlzdCA/PyBbXTtcclxuXHJcbiAgICB0aGlzLmFkZE1lZGlhTGlzdCggb3B0aW9ucy5hcnJNZWRpYVNyYyApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZE1lZGlhTGlzdCggYXJyTWVkaWFTcmM6IFNvdW5kYm9hcmRJdGVtUG9zc2libGVJbnB1dFtdICkge1xyXG4gICAgYXJyTWVkaWFTcmMuZm9yRWFjaCggc3JjID0+IHtcclxuICAgICAgY29uc3Qgc3JjT3B0aW9ucyA9IHRoaXMuZ2V0U291cmNlSW5wdXREZWZhdWx0T3B0aW9ucyggc3JjICk7XHJcbiAgICAgIHRoaXMuYWRkTWVkaWEoIHNyY09wdGlvbnMgKTtcclxuICAgIH0gKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhZGRNZWRpYSggbWVkaWFPcHRpb25zOiBTb3VuZGJvYXJkSXRlbU9wdGlvbnMgKSB7XHJcbiAgICBpZiAoIGlzVmFsaWRZb3V0dWJlVXJsT3JJZCggbWVkaWFPcHRpb25zLnNyYyApICkge1xyXG4gICAgICB0aGlzLmFkZElmcmFtZSggYCR7IHRoaXMuY29udGFpbmVyLmlkIH1JZnJhbWVUYWJsZUl0ZW0keyBtZWRpYU9wdGlvbnMuc3JjIH1gLCBtZWRpYU9wdGlvbnMgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYWRkQXVkaW9Db21wb25lbnQoIHRoaXMuY29udGFpbmVyLmlkLCBtZWRpYU9wdGlvbnMgKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRTb3VyY2VJbnB1dERlZmF1bHRPcHRpb25zKCBpbnB1dDogU291bmRib2FyZEl0ZW1Qb3NzaWJsZUlucHV0ICk6IFNvdW5kYm9hcmRJdGVtT3B0aW9ucyB7XHJcbiAgICBpZiAoIHR5cGVvZiAoIGlucHV0ICkgPT09ICdzdHJpbmcnICkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHNyYzogaW5wdXQsXHJcbiAgICAgICAgYXV0b1JlcGVhdE9uUGxheTogdHJ1ZSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5wdXQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkWW91dHViZUxpc3QoIGFyclZpZGVvT3B0aW9uczogU291bmRib2FyZEl0ZW1Qb3NzaWJsZUlucHV0W10gPSBbXSApIHtcclxuICAgIGNvbnN0IGFyck1lZGlhSW5wdXRzID0gYXJyVmlkZW9PcHRpb25zLm1hcCggc3JjID0+IHRoaXMuZ2V0U291cmNlSW5wdXREZWZhdWx0T3B0aW9ucyggc3JjICkgKTtcclxuICAgIGFyck1lZGlhSW5wdXRzLmZvckVhY2goIHZpZGVvSWQgPT4ge1xyXG4gICAgICB0aGlzLmFkZElmcmFtZSggYCR7IHRoaXMuY29udGFpbmVyLmlkIH1JZnJhbWVUYWJsZUl0ZW0keyB2aWRlb0lkLnNyYyB9YCwgdmlkZW9JZCApO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZEF1ZGlvTGlzdCggYXJyTWVkaWFPcHRpb25zOiBTb3VuZGJvYXJkSXRlbVBvc3NpYmxlSW5wdXRbXSA9IFtdICkge1xyXG4gICAgY29uc3QgYXJyTWVkaWFJbnB1dHMgPSBhcnJNZWRpYU9wdGlvbnMubWFwKCBzcmMgPT4gdGhpcy5nZXRTb3VyY2VJbnB1dERlZmF1bHRPcHRpb25zKCBzcmMgKSApO1xyXG4gICAgYXJyTWVkaWFJbnB1dHMuZm9yRWFjaCggbWVkaWFJbnB1dCA9PiB0aGlzLmFkZEF1ZGlvQ29tcG9uZW50KCB0aGlzLmNvbnRhaW5lci5pZCwgbWVkaWFJbnB1dCApICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFkZENvbXBvbmVudEludGVyYWN0aW9uQmxvY2tFdmVudCggY29tcG9uZW50OiBTb3VuZGJvYXJkQ29tcG9uZW50LCBtZWRpYU9wdGlvbnM6IFNvdW5kYm9hcmRJdGVtT3B0aW9ucyApIHtcclxuICAgIGNvbXBvbmVudC5tZWRpYS5hZGRFdmVudExpc3RlbmVyKCAnb25pbnRlcmFjdGlvbmJsb2NrZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbXBvbmVudC5tZWRpYS5zZWVrKCAwLCB0cnVlICk7XHJcbiAgICAgIGlmICggbWVkaWFPcHRpb25zLmF1dG9SZXBlYXRPblBsYXkgKSB7XHJcbiAgICAgICAgY29tcG9uZW50Lm1lZGlhLnBsYXlXaXRob3V0VHJpZ2dlckV2ZW50cygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbXBvbmVudC5tZWRpYS50b2dnbGUoKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldElucHV0QnlTb3VyY2UoIHNyYzogc3RyaW5nICkge1xyXG4gICAgaWYgKCAhdGhpcy5fbWFwSW5wdXRCeUNvbXBvbmVudElkLmhhcyggc3JjICkgKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciggXCJFbGVtZW50IHNyYyBub3Qgb24gc291bmQgdGFibGUuXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5fbWFwSW5wdXRCeUNvbXBvbmVudElkLmdldCggc3JjICkhO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbXBvbmVudHNDb250cm9sbGVycygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKCB0aGlzLl9zZXRNZWRpYUNvbnRyb2xsZXJzICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEVsZW1lbnRNZWRpYUNvbnRhaW5lciggY29udGFpbmVySWQ6IHN0cmluZyApIHtcclxuICAgIGNvbnN0IGVsZW1lbnRNZWRpYUNvbnRhaW5lciA9IGdldEVsZW1lbnRGcm9tSFRNTCggdGVtcGxhdGVTb3VuZGJvYXJkSXRlbUNvbnRhaW5lciggY29udGFpbmVySWQgKSApIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgZWxlbWVudE1lZGlhQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoIC4uLnRoaXMuY29udGFpbmVyc0NsYXNzTGlzdCApO1xyXG4gICAgcmV0dXJuIGVsZW1lbnRNZWRpYUNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkQXVkaW9Db21wb25lbnQoIGF1ZGlvRWxlbWVudElkOiBzdHJpbmcsIG1lZGlhT3B0aW9uczogU291bmRib2FyZEl0ZW1PcHRpb25zICkge1xyXG4gICAgY29uc3QgYXVkaW9Db250YWluZXIgPSB0aGlzLmdldEVsZW1lbnRNZWRpYUNvbnRhaW5lciggYXVkaW9FbGVtZW50SWQgKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCggJ2JlZm9yZWVuZCcsIGF1ZGlvQ29udGFpbmVyICk7XHJcblxyXG4gICAgQXVkaW9Db21wb25lbnQuY3JlYXRlQXVkaW9Db21wb25lbnQoIHtcclxuICAgICAgc3JjOiBtZWRpYU9wdGlvbnMuc3JjLFxyXG4gICAgICBhdWRpb0VsZW1lbnRJZDogYXVkaW9FbGVtZW50SWQsXHJcbiAgICAgIGJsb2NrSW50ZXJhY3Rpb246IHRydWUsXHJcbiAgICAgIGNvbnRhaW5lcjogYXVkaW9Db250YWluZXJcclxuICAgIH0gKS50aGVuKCBhdWRpb0NvbXBvbmVudCA9PiB7XHJcblxyXG4gICAgICBjb25zdCBpbnB1dEluZm8gPSB0aGlzLmFkZElucHV0RWxlbWVudFRvQ29udGFpbmVyKCBhdWRpb0NvbnRhaW5lciwgYXVkaW9Db21wb25lbnQsIGF1ZGlvQ29tcG9uZW50LmlkLCBtZWRpYU9wdGlvbnMuc3JjICk7XHJcbiAgICAgIGNvbnN0IHNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudDogU291bmRib2FyZENvbXBvbmVudCA9IHtcclxuICAgICAgICBtZWRpYTogYXVkaW9Db21wb25lbnQsXHJcbiAgICAgICAgaW5wdXQ6IGlucHV0SW5mby5pbnB1dCxcclxuICAgICAgICBpbnB1dENvbnRhaW5lcjogaW5wdXRJbmZvLmNvbnRhaW5lclxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5fc2V0TWVkaWFDb250cm9sbGVycy5hZGQoIHNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudCApO1xyXG4gICAgICB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5zZXQoIGF1ZGlvQ29tcG9uZW50LmlkLCBzb3VuZGJvYXJkQXVkaW9Db21wb25lbnQgKTtcclxuXHJcbiAgICAgIHRoaXMuYWRkQ29tcG9uZW50SW50ZXJhY3Rpb25CbG9ja0V2ZW50KCBzb3VuZGJvYXJkQXVkaW9Db21wb25lbnQsIG1lZGlhT3B0aW9ucyApO1xyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcblxyXG4gIHByaXZhdGUgYWRkSWZyYW1lKCBpZnJhbWVJZDogc3RyaW5nLCBtZWRpYU9wdGlvbnM6IFNvdW5kYm9hcmRJdGVtT3B0aW9ucyApIHtcclxuICAgIGlmICggdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuaGFzKCBpZnJhbWVJZCApICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiQSBJZnJhbWUgd2l0aCB0aGlzIGlkIGFscmVhZHkgZXhpc3RzOiBcIiArIGlmcmFtZUlkICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZWxlbWVudElmcmFtZUNvbnRhaW5lciA9IHRoaXMuZ2V0RWxlbWVudE1lZGlhQ29udGFpbmVyKCBpZnJhbWVJZCApO1xyXG4gICAgdGhpcy5jb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCAnYmVmb3JlZW5kJywgZWxlbWVudElmcmFtZUNvbnRhaW5lciApO1xyXG5cclxuICAgIGNvbnN0IG5ld0lmcmFtZSA9IG5ldyBZb3V0dWJlSWZyYW1lKCB7XHJcbiAgICAgIGlmcmFtZUlkOiBpZnJhbWVJZCxcclxuICAgICAgdmlkZW9JZDogbWVkaWFPcHRpb25zLnNyYyxcclxuICAgICAgcGFyZW50RWxlbWVudDogZWxlbWVudElmcmFtZUNvbnRhaW5lcixcclxuICAgICAgc3RhcnRzQXQ6IDAsXHJcbiAgICAgIGNsYXNzTGlzdDogWydzb3VuZC10YWJsZS1pdGVtJywgLi4udGhpcy5pZnJhbWVzQ2xhc3NMaXN0XSxcclxuICAgICAgYmxvY2tJbnRlcmFjdGlvbjogdHJ1ZVxyXG4gICAgfSApO1xyXG5cclxuICAgIGNvbnN0IGlucHV0SW5mbyA9IHRoaXMuYWRkSW5wdXRFbGVtZW50VG9Db250YWluZXIoIGVsZW1lbnRJZnJhbWVDb250YWluZXIsIG5ld0lmcmFtZSwgbmV3SWZyYW1lLmlkLCBtZWRpYU9wdGlvbnMuc3JjICk7XHJcbiAgICBjb25zdCBzb3VuZGJvYXJkWW91dHViZUNvbXBvbmVudDogU291bmRib2FyZENvbXBvbmVudCA9IHtcclxuICAgICAgbWVkaWE6IG5ld0lmcmFtZSxcclxuICAgICAgaW5wdXQ6IGlucHV0SW5mby5pbnB1dCxcclxuICAgICAgaW5wdXRDb250YWluZXI6IGlucHV0SW5mby5jb250YWluZXIsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuX3NldE1lZGlhQ29udHJvbGxlcnMuYWRkKCBzb3VuZGJvYXJkWW91dHViZUNvbXBvbmVudCApO1xyXG4gICAgdGhpcy5fbWFwTWVkaWFDb250cm9sbGVyc0J5SWQuc2V0KCBuZXdJZnJhbWUuaWQsIHNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50ICk7XHJcblxyXG4gICAgWW91dHViZUlmcmFtZS5idWlsZFNpbmdsZUlmcmFtZSggbmV3SWZyYW1lICkudGhlbiggKCkgPT4gdGhpcy5hZGRDb21wb25lbnRJbnRlcmFjdGlvbkJsb2NrRXZlbnQoIHNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50LCBtZWRpYU9wdGlvbnMgKSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNoYW5nZUNvbXBvbmVudFNvdXJjZVRvSW5wdXRWYWx1ZSggY29tcG9uZW50SWQ6IHN0cmluZyApOiB2b2lkIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmdldCggY29tcG9uZW50SWQgKSE7XHJcbiAgICBpZiAoICFjb21wb25lbnQgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIGNvbXBvbmVudC5tZWRpYSBpbnN0YW5jZW9mIFlvdXR1YmVJZnJhbWUgKSB7XHJcbiAgICAgIGNvbXBvbmVudC5tZWRpYS5jaGFuZ2VWaWRlbygge1xyXG4gICAgICAgIGlmcmFtZUlkOiBjb21wb25lbnQuaW5wdXQudmFsdWUsXHJcbiAgICAgICAgdmlkZW9JZDogY29tcG9uZW50LmlucHV0LnZhbHVlLFxyXG4gICAgICAgIHN0YXJ0c0F0OiAwXHJcbiAgICAgIH0gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbXBvbmVudC5tZWRpYS5jaGFuZ2VTb3VyY2UoIGNvbXBvbmVudC5pbnB1dC52YWx1ZSApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLmRlbGV0ZSggY29tcG9uZW50SWQgKTtcclxuICAgIHRoaXMuX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkLnNldCggY29tcG9uZW50Lm1lZGlhLmlkLCBjb21wb25lbnQgKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGNoYW5nZUNvbXBvbmVudFNvdXJjZSggY29tcG9uZW50SWQ6IHN0cmluZywgbmV3U291cmNlOiBzdHJpbmcgKTogdm9pZCB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLl9tYXBNZWRpYUNvbnRyb2xsZXJzQnlJZC5nZXQoIGNvbXBvbmVudElkICkhO1xyXG4gICAgaWYgKCAhY29tcG9uZW50ICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCBjb21wb25lbnQubWVkaWEgaW5zdGFuY2VvZiBZb3V0dWJlSWZyYW1lICkge1xyXG4gICAgICBjb21wb25lbnQubWVkaWEuY2hhbmdlVmlkZW8oIHtcclxuICAgICAgICBpZnJhbWVJZDogbmV3U291cmNlLFxyXG4gICAgICAgIHZpZGVvSWQ6IG5ld1NvdXJjZSxcclxuICAgICAgICBzdGFydHNBdDogMFxyXG4gICAgICB9ICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb21wb25lbnQubWVkaWEuY2hhbmdlU291cmNlKCBuZXdTb3VyY2UgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkSW5wdXRFbGVtZW50VG9Db250YWluZXIoIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNvbXBvbmVudDogU291bmRib2FyZE1lZGlhLCBjb21wb25lbnRJZDogc3RyaW5nLCBpbnB1dFNvdXJjZTogc3RyaW5nICkge1xyXG4gICAgY29uc3QgaW5wdXRFbGVtZW50Q29udGFpbmVyID0gZ2V0RWxlbWVudEZyb21IVE1MKCB0ZW1wbGF0ZVNvdW5kYm9hcmRJbnB1dCggY29tcG9uZW50SWQsICdTb3VyY2UnLCBpbnB1dFNvdXJjZSApICkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoICdiZWZvcmVlbmQnLCBpbnB1dEVsZW1lbnRDb250YWluZXIgKTtcclxuXHJcbiAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBpbnB1dEVsZW1lbnRDb250YWluZXIucXVlcnlTZWxlY3RvciggJ2lucHV0JyApITtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdpbnB1dCcsIGlucHV0RWxlbWVudC52YWx1ZSwgY29tcG9uZW50ICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaW5wdXQnLCBpbnB1dEVsZW1lbnQudmFsdWUsIGNvbXBvbmVudCApO1xyXG4gICAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdpbnB1dGNoYW5nZScsIGlucHV0RWxlbWVudC52YWx1ZSwgY29tcG9uZW50ICk7XHJcbiAgICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uaW5wdXRjaGFuZ2UnLCBpbnB1dEVsZW1lbnQudmFsdWUsIGNvbXBvbmVudCApO1xyXG4gICAgfSApO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlucHV0OiBpbnB1dEVsZW1lbnQsXHJcbiAgICAgIGNvbnRhaW5lcjogaW5wdXRFbGVtZW50Q29udGFpbmVyLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkF1ZGlvQ29tcG9uZW50IiwiT2JqZWN0RXZlbnRMaXN0ZW5lciIsInNyYyIsImF1ZGlvRWxlbWVudCIsIl9jb250YWluZXIiLCJfYmxvY2tJbnRlcmFjdGlvbiIsIl9kaXZCbG9ja0ludGVyYWN0aW9uIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwic3VwZXIiLCJ0aGlzIiwiY29udGFpbmVyIiwiYmxvY2tJbnRlcmFjdGlvbiIsImF1ZGlvRWxlbWVudElkIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwic3RvcCIsImdldEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24iLCJzZXR1cEludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24iLCJzZXRFbGVtZW50c0F0dHJpYnV0ZXMiLCJpc1BsYXlpbmciLCJwYXVzZWQiLCJfdmlkZW9JbmZvQXR0cmlidXRlTGlzdCIsInJlbW92ZUZpbGVQYXRoIiwic2V0QXR0cmlidXRlTGlzdEZvckVsZW1lbnQiLCJkaXZCbG9ja0ludGVyYWN0aW9uIiwiZmlsZU5hbWUiLCJxdWVyeVNlbGVjdG9yIiwiY3VycmVudFRpbWUiLCJ0Iiwic291cmNlRWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hhbmdlU291cmNlIiwiaW5uZXJIVE1MIiwic291cmNlRWxlbWVudEhUTUwiLCJsb2FkIiwicGxheVdpdGhvdXRUcmlnZ2VyRXZlbnRzIiwicGxheVByb21pc2UiLCJwbGF5IiwidW5kZWZpbmVkIiwidGhlbiIsIl8iLCJjYXRjaCIsInNldENsYXNzZXNQbGF5aW5nIiwicGF1c2VXaXRob3V0VHJpZ2dlckV2ZW50cyIsInBhdXNlIiwic2V0Q2xhc3Nlc1BhdXNlZCIsInJlbW92ZSIsImNhbGxFdmVudHNCeU5hbWUiLCJ0b2dnbGUiLCJtdXRlIiwidm9sdW1lIiwidW5tdXRlIiwic2VlayIsInNlZWtUaW1lIiwiX3JlbG9hZEJ1ZmZlciIsImRpbWVuc2lvbnMiLCJnZXRFbGVtZW50RGltZW5zaW9ucyIsImF1ZGlvQ29tcG9uZW50IiwiZWxlbWVudEludmlzaWJsZURpdiIsImNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50IiwicGFyZW50RWxlbWVudCIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0Iiwic3R5bGUiLCJkaXNwbGF5IiwiekluZGV4IiwiY3JlYXRlQXVkaW9Db21wb25lbnRPbkJvZHkiLCJhdWRpb0NvbXBvbmVudENvbnRhaW5lciIsIkF1ZGlvQ29tcG9uZW50RmFjdG9yeSIsImJ1aWxkT25Cb2R5IiwiY3JlYXRlQXVkaW9Db21wb25lbnQiLCJkb2N1bWVudCIsImJvZHkiLCJidWlsZCIsIkNvbXBvbmVudENvbnRhaW5lciIsInBsYXllckNvbmZpZyIsImNyZWF0ZUludmlzaWJsZVBsYXllciIsImJ1aWxkU3ViQ29tcG9uZW50cyIsInBhcmVudCIsIl9lbGVtZW50IiwidGVtcGxhdGVFbGVtZW50IiwiY29tcG9uZW50TmFtZSIsInN1YkNvbXBvbmVudENvdW50QnlOYW1lIiwiTWFwIiwic3ViQ29tcG9uZW50cyIsInRlbXBsYXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJFcnJvciIsImNyZWF0ZUVsZW1lbnQiLCJjb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJnZXRUZW1wbGF0ZUNsb25lTm9kZXMiLCJjbG9uZU5vZGUiLCJjaGlsZHJlbiIsImJ1aWxkU2luZ2xlU3ViQ29tcG9uZW50IiwiY29tcG9uZW50IiwiaGFzIiwic2V0IiwiY29tcG9uZW50Q291bnQiLCJnZXQiLCJjYXBpdGFsaXplRmlyc3RMZXR0ZXIiLCJlbGVtZW50SWQiLCJpdGVtIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidGVtcGxhdGVTb3VuZGJvYXJkSXRlbUNvbnRhaW5lciIsIml0ZW1JZCIsInRyaW0iLCJ0ZW1wbGF0ZVNvdW5kYm9hcmRJbnB1dCIsImxhYmVsVGV4dCIsInZhbHVlIiwicGxhY2Vob2xkZXIiLCJ0ZW1wbGF0ZUJhY2tncm91bmRZb3V0dWJlSWZyYW1lRWxlbWVudCIsImlmcmFtZUlkIiwiWW91dHViZUlmcmFtZSIsInN0YXRpYyIsInBsYXllciIsIl9pc1BsYXllclJlYWR5IiwiX3ZpZGVvSWQiLCJ2aWRlb05hbWUiLCJ2aWRlb1RodW1iIiwiY2hhbm5lbFVSTCIsImNoYW5uZWxOYW1lIiwiX2lmcmFtZUVsZW1lbnQiLCJfaWZyYW1lQ29udGFpbmVyIiwiX2lmcmFtZVBhcmVudEVsZW1lbnQiLCJfaXNQbGF5aW5nIiwiX2RpbWVuc2lvbnMiLCJ0b3BEaXYiLCJfc3RhcnRzQXQiLCJfc3RhcnRNdXRlZCIsIl9wbGF5aW5nT2JzZXJ2ZXJJbnRlcnZhbCIsIl9ldmVudExpc3RlbmVyIiwiX2RpY3RZb3V0dWJlSWZyYW1lQnlJZCIsInN0YXJ0c0F0IiwidmlkZW9JZCIsInN0YXJ0TXV0ZWQiLCJnZXRZb3V0dWJlSWZyYW1lRWxlbWVudCIsInNldHVwUGFyZW50RnJvbVlvdXR1YmVJZnJhbWUiLCJpZnJhbWVDb250YWluZXIiLCJzZXRDbGFzc2VzSWZyYW1lUGF1c2VkIiwic2V0VmlkZW9JbmZvIiwic2V0RXh0ZXJuYWxIVE1MRWxlbWVudHNBdHRyaWJ1dGVzIiwiZXh0cmFjdFlvdVR1YmVJZCIsImluZm8iLCJnZXRWaWRlb0luZm8iLCJ0aXRsZSIsImF1dGhvcl9uYW1lIiwidGh1bWJuYWlsX3VybCIsImF1dGhvcl91cmwiLCJjaGFuZ2VWaWRlbyIsImlzVmFsaWRZb3V0dWJlVXJsT3JJZCIsImxvYWRWaWRlb0J5SWQiLCJwcmVwYXJlT3B0aW9ucyIsInNlZWtUbyIsInNldFRpbWVvdXQiLCJsb2FkVmlkZW8iLCJyZXNwb25zZSIsImhhbmRsZVByb21pc2UiLCJmZXRjaCIsInZpZGVvVVJMIiwiZXJyb3IiLCJkYXRhIiwianNvbiIsImNvbnNvbGUiLCJvblBsYXllclJlYWR5IiwiZXZlbnQiLCJfYXJyWW91dHViZUlmcmFtZUlkUmVhZHkiLCJwdXNoIiwic2V0UGxheWJhY2tRdWFsaXR5IiwicGF1c2VWaWRlbyIsImNoZWNrSWZFdmVyeUlmcmFtZUlzUmVhZHkiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwiX3lvdXR1YmVBUElSZWZlcmVuY2UiLCJQbGF5ZXJTdGF0ZSIsIlBMQVlJTkciLCJzZXRJbnRlcnZhbCIsInNldENsYXNzZXNJZnJhbWVQbGF5aW5nIiwiY2xlYXJJbnRlcnZhbCIsIm9uRXZlcnlZb3V0dWJlSWZyYW1lUmVhZHkiLCJpZnJhbWVFbGVtZW50IiwiaXNQbGF5ZXJSZWFkeSIsImR1cmF0aW9uIiwiZ2V0RHVyYXRpb24iLCJwbGF5ZXJEdXJhdGlvbiIsImdldEN1cnJlbnRUaW1lIiwicGxheWVyQ3VycmVudFRpbWUiLCJwcm9ncmVzc1BlcmNlbnQiLCJwbGF5ZXJQcm9ncmVzc1BlcmNlbnQiLCJjbGFtcCIsInZhbCIsInBsYXlWaWRlbyIsInJlbG9hZEJ1ZmZlciIsImNvbnNpZGVyU3RhcnRzQXQiLCJrZXlzIiwic29tZSIsInIiLCJpbmNsdWRlcyIsImFyck9iamVjdFRvU2V0T25FdmVyeUlmcmFtZVJlYWR5IiwiZm9yRWFjaCIsIm8iLCJzZXR1cCIsImtleSIsImNvbnRhaW5lckRpdiIsImluc2VydEFkamFjZW50SFRNTCIsImlmcmFtZVBhcmVudEVsZW1lbnQiLCJzZXRFeHRlcm5hbEhUTUxFbGVtZW50cyIsImNyZWF0ZUludmlzaWJsZURpdlRvcCIsImNyZWF0ZUludmlzaWJsZURpdkJsb2NrSW50ZXJhY3Rpb24iLCJzZXRJZnJhbWVDb250YWluZXJBdHRyaWJ1dGVzIiwic2V0VG9wRGl2QXR0cmlidXRlcyIsInNldERpdkJsb2NrSW50ZXJhY3Rpb25BdHRyaWJ1dGVzIiwiZ2V0SW52aXNpYmxlVG9wRGl2IiwiZXZ0IiwiaW5pdFBsYXllciIsIlBsYXllciIsInBsYXllclZhcnMiLCJldmVudHMiLCJiaW5kIiwiYnVpbGRTaW5nbGVJZnJhbWUiLCJ5b3V0dWJlSWZyYW1lIiwidGFnIiwiZmlyc3RTY3JpcHRUYWciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJ3YWl0VW50aWxFbGVtZW50RXhpc3RzIiwicG9sbEZvclZhcmlhYmxlQXN5bmMiLCJwcm90b3R5cGUiLCJsb2FkZWQiLCJidWlsZElmcmFtZXMiLCJwb2xsRm9yVmFyaWFibGUiLCJzZXRZb3V0dWJlSWZyYW1lRWxlbWVudHMiLCJ5dElmcmFtZSIsIlN0cmluZyIsImlzTnVsbE9yRW1wdHkiLCJ0cnVuY2F0ZSIsIm1heCIsImRlY29yYXRvciIsImxlbmd0aCIsInN1YnN0cmluZyIsInRvU3RyaW5nIiwicmVtb3ZlQWNjZW50cyIsIm5vcm1hbGl6ZSIsInJlcGxhY2UiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInplcm9CZWZvcmUiLCJwYWRTdGFydCIsImV2ZW50c0J5TmFtZSIsImV2ZW50TmFtZSIsInRvTG93ZXJDYXNlIiwiZ2V0RXZlbnRzQnlOYW1lIiwiZXZlbnRBcmdzIiwiZSIsImFyclNvdXJjZXMiLCJnZXRFbGVtZW50RnJvbUhUTUwiLCJhdXRvUGxheSIsImF1dG9wbGF5IiwibXV0ZWQiLCJsb29wIiwicHJlbG9hZCIsInRyaW1FbmQiLCJhdWRpb0VsZW1lbnRQYXJhbXNCeVBsYXllckNvbmZpZyIsIm1hcCIsInJlZHVjZSIsImFjYyIsIm5leHQiLCJhdWRpb0VsZW1lbnRIVE1MIiwiaGlkZUVsZW1lbnQiLCJnZXRGaWxlRXh0ZW5zaW9uIiwiZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlIiwiZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQiLCJkaWN0S2V5c0J5QWN0aW9uS2V5dXAiLCJhc3luYyIsInByb21pc2UiLCJpbnB1dCIsInRlc3QiLCJtYXRjaCIsImVsZW1lbnQiLCJhdHRyTGlzdCIsInNldEF0dHJpYnV0ZSIsImh0bWwiLCJyZXN1bHQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidmFyaWFibGVOYW1lIiwicmVhZHlDb25kaXRpb24iLCJjYWxsYmFjayIsInBvbGwiLCJ3aW5kb3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInNlbGVjdG9yIiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwiZGlzY29ubmVjdCIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiaW52aXNpYmxlRGl2Iiwib3BhY2l0eSIsInBvaW50ZXJFdmVudHMiLCJyZXBlYXQiLCJwYWlyIiwiY29kZSIsImtiRXZlbnQiLCJydW5Pbmx5T25jZUtleWRvd25BY3Rpb25zIiwicnVuS2V5ZG93bkFjdGlvbnNSZXBlYXQiLCJmaWxlUGF0aCIsImV4ZWMiLCJkZWZhdWx0RmlsZVNyYyIsInNwbGl0IiwicG9wIiwiZmlsZVR5cGVTdHIiLCJudW0iLCJtaW4iLCJNYXRoIiwic3RyIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIlNvdW5kYm9hcmQiLCJpZnJhbWVzQ2xhc3NMaXN0IiwiY29udGFpbmVyc0NsYXNzTGlzdCIsIl9zZXRNZWRpYUNvbnRyb2xsZXJzIiwiU2V0IiwiX21hcE1lZGlhQ29udHJvbGxlcnNCeUlkIiwiX21hcElucHV0QnlDb21wb25lbnRJZCIsImFkZE1lZGlhTGlzdCIsImFyck1lZGlhU3JjIiwic3JjT3B0aW9ucyIsImdldFNvdXJjZUlucHV0RGVmYXVsdE9wdGlvbnMiLCJhZGRNZWRpYSIsIm1lZGlhT3B0aW9ucyIsImFkZElmcmFtZSIsImFkZEF1ZGlvQ29tcG9uZW50IiwiYXV0b1JlcGVhdE9uUGxheSIsImFkZFlvdXR1YmVMaXN0IiwiYXJyVmlkZW9PcHRpb25zIiwiYWRkQXVkaW9MaXN0IiwiYXJyTWVkaWFPcHRpb25zIiwibWVkaWFJbnB1dCIsImFkZENvbXBvbmVudEludGVyYWN0aW9uQmxvY2tFdmVudCIsIm1lZGlhIiwiZ2V0SW5wdXRCeVNvdXJjZSIsImNvbXBvbmVudHNDb250cm9sbGVycyIsImdldEVsZW1lbnRNZWRpYUNvbnRhaW5lciIsImNvbnRhaW5lcklkIiwiZWxlbWVudE1lZGlhQ29udGFpbmVyIiwiYXVkaW9Db250YWluZXIiLCJpbnB1dEluZm8iLCJhZGRJbnB1dEVsZW1lbnRUb0NvbnRhaW5lciIsInNvdW5kYm9hcmRBdWRpb0NvbXBvbmVudCIsImlucHV0Q29udGFpbmVyIiwiZWxlbWVudElmcmFtZUNvbnRhaW5lciIsIm5ld0lmcmFtZSIsInNvdW5kYm9hcmRZb3V0dWJlQ29tcG9uZW50IiwiY2hhbmdlQ29tcG9uZW50U291cmNlVG9JbnB1dFZhbHVlIiwiY29tcG9uZW50SWQiLCJkZWxldGUiLCJjaGFuZ2VDb21wb25lbnRTb3VyY2UiLCJuZXdTb3VyY2UiLCJpbnB1dFNvdXJjZSIsImlucHV0RWxlbWVudENvbnRhaW5lciIsImlucHV0RWxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=
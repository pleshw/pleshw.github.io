var DraggableElement;(()=>{"use strict";var t={8586:(t,e,n)=>{n.d(e,{MovableElement:()=>s});var o=n(7930),i=n(1319);class s extends o.ObjectEventListener{element;movingState;intervalUpdatePosition;onBeforeMove;onAfterMove;constructor(t){if(super(),!t.element)throw new Error("Null movable element. Please pass a valid element in constructor.");this.element=t.element,this.onBeforeMove=t.onBeforeMove,this.onAfterMove=t.onAfterMove,this.movingState={pos:{x:0,y:0},delta:{dx:0,dy:0}},this.intervalUpdatePosition=setInterval(this.updatePosition.bind(this),200)}get position(){return this.movingState.pos}set position(t){this.moveToPosition(t.x,t.y)}get x(){return this.movingState.pos.x}set x(t){this.moveToPosition(t,this.y)}get y(){return this.movingState.pos.y}set y(t){this.moveToPosition(this.x,t)}setTranslate(t,e){this.callEventsByName("onBeforeMove",this.element,this),this.onBeforeMove&&this.onBeforeMove(this.element,this),this.resetTranslate(),this.element.style.transform+=`translate(${t}px, ${e}px)`,this.callEventsByName("onAfterMove",this.element,this),this.onAfterMove&&this.onAfterMove(this.element,this)}setTranslateByPoint2D(t){this.setTranslate(t.x,t.y)}updatePosition(){this.movingState.pos=(0,i.getTransformCoordsFromElement)(this.element),this.movingState.delta.dx=0,this.movingState.delta.dy=0}resetTranslate(){this.element.style.transform=this.element.style.transform.replace(i.regexRemoveTranslateFromTransform,"")}moveToPosition(t,e){this.movingState.pos={x:t+this.movingState.delta.dx,y:e+this.movingState.delta.dy},this.setTranslateByPoint2D(this.movingState.pos)}moveToPoint2D(t){this.movingState.pos={x:t.x+this.movingState.delta.dx,y:t.y+this.movingState.delta.dy},this.setTranslateByPoint2D(this.movingState.pos)}moveToTargetElement(t){const e=t.getBoundingClientRect(),n=(0,i.getTransformCoordsFromElement)(this.element),o=(0,i.getDistanceFromBorder)(this.element,t),s=n.x+o.right,r=n.y+o.bottom;this.setTranslateByPoint2D({x:Math.round(s-e.width),y:Math.round(r-e.height)})}moveToCenterOfTargetElement(t){const e=t.getBoundingClientRect(),n=(0,i.getTransformCoordsFromElement)(this.element),o=(0,i.getDistanceFromBorder)(this.element,t),s=n.x+o.right,r=n.y+o.bottom;this.setTranslateByPoint2D({x:Math.round(s-e.width/2),y:Math.round(r-e.height/2)})}static makeElementMovable(t){return new s({element:t})}}},7930:(t,e,n)=>{n.d(e,{ObjectEventListener:()=>o});class o{eventsByName=new Map;addEventListener(t,e){const n={id:crypto.randomUUID(),event:e};return this.eventsByName.has(t.toLowerCase())?(this.eventsByName.get(t.toLowerCase()).push(n),n.id):(this.eventsByName.set(t.toLowerCase(),[n]),n.id)}getEventsByName(t){return this.eventsByName.has(t.toLowerCase())||this.eventsByName.set(t.toLowerCase(),[]),this.eventsByName.get(t.toLowerCase())}removeEventById(t){this.eventsByName.forEach(((e,n)=>{this.eventsByName.set(n,e.filter((e=>e.id!==t)))}))}callEventsByName(t,...e){this.getEventsByName(t).forEach((t=>t.event(...e)))}}},1319:(t,e,n)=>{n.d(e,{clickEventToCoordinates:()=>y,getDistanceFromBorder:()=>c,getTransformCoordsFromElement:()=>u,regexRemoveTranslateFromTransform:()=>i});var o=n(739);const i=/translate\([^)]*\)/g,s=/rotate\((-?\d+\.?\d*)deg\)/,r=/rotateX\((-?\d+\.?\d*)deg\)/,a=/rotateY\((-?\d+\.?\d*)deg\)/,l=/rotateZ\((-?\d+\.?\d*)deg\)/,h=new Map,d=new Map,g=new Map;function m(t){const e=t.getBoundingClientRect(),n=e.left+e.width/2,o=e.top+e.height/2,i=function(){const t=function(t){switch(t){case"x":return r;case"y":return a;case"z":return l;default:return s}}(v(document.body)).exec(document.body.style.transform);return t?parseFloat(t[1]):0}(),h=Math.PI/180*i,d=Math.cos(h),g=Math.sin(h),m=n+(e.left-n)*d-(e.top-o)*g,c=o+(e.left-n)*g+(e.top-o)*d,u=n+(e.right-n)*d-(e.bottom-o)*g,y=o+(e.right-n)*g+(e.bottom-o)*d,f=Math.min(m,u),p=Math.min(c,y),b=Math.max(c,y),x=Math.max(m,u);return{x:f,y:p,width:e.width,height:e.height,toJSON:e.toJSON,left:f,top:p,bottom:b,right:x}}function c(t,e,n=!1){const o=n?m(t):t.getBoundingClientRect(),i=n?m(e):e.getBoundingClientRect(),s=o.left+o.width/2,r=o.top+o.height/2;return{top:r-i.top,right:i.right-s,bottom:i.bottom-r,left:s-i.left}}function v(t){const e=t.style.transform.toLowerCase();return e.includes("x")?"x":e.includes("y")?"y":"z"}function u(t,e=!1){const n=(window.getComputedStyle(t).transform.match(o.regexNumberPattern)??[0,0]).map((t=>+t));let i={x:void 0!==n[4]?Math.round(n[4]):0,y:void 0!==n[5]?Math.round(n[5]):0};if(e){const e=function(t,e="x"){let n;switch(e){case"x":n=r;break;case"y":n=a;break;case"z":n=l;break;default:n=s}const o=n.exec(t.style.transform);return o?parseFloat(o[1]):0}(document.body,v(t))||0;return(0,o.rotateCoordinates)(i.x,i.y,e)}return i}function y(t){if(t instanceof MouseEvent)return{x:t.clientX,y:t.clientY};if(t instanceof TouchEvent){const e=t.changedTouches[0];return{x:e.clientX,y:e.clientY}}throw"Event not Found"}new Map,window.addEventListener("keydown",(t=>{t.repeat||function(t){for(const e of h)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t),function(t){for(const e of d)t.code===e[0]&&e[1].forEach((e=>e(t)))}(t)})),window.addEventListener("keyup",(t=>{for(const e of g)t.code===e[0]&&e[1].forEach((e=>e(t)))}))},739:(t,e,n)=>{n.d(e,{regexNumberPattern:()=>o,rotateCoordinates:()=>i});const o=/-?\d+\.?\d*/g;function i(t,e,n){const o=Math.PI/180*n;return{x:t*Math.cos(o)-e*Math.sin(o),y:t*Math.sin(o)+e*Math.cos(o)}}}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{n.r(o),n.d(o,{DraggableElement:()=>i});var t=n(1319),e=n(8586);class i extends e.MovableElement{allowDraggingByInnerContent;draggingState;lastStartPoint;onDrop;onDrag;_enabled=!0;constructor(t){if(!t.element)throw new Error("Null draggable element. Please pass a valid element in constructor.");super(t),this.allowDraggingByInnerContent=!t.allowDraggingByInnerContent||t.allowDraggingByInnerContent,this.draggingState={dragging:!1},this.onDrag=t.onDrag,this.onDrop=t.onDrop,this.element.addEventListener("pointerdown",this.start.bind(this)),this.element.addEventListener("pointerup",this.end.bind(this)),this.element.addEventListener("pointercancel",this.end.bind(this)),this.element.addEventListener("pointermove",this.move.bind(this)),this.element.addEventListener("touchstart",(t=>t.preventDefault())),this.element.addEventListener("dragstart",(t=>t.preventDefault())),this.intervalUpdatePosition=setInterval(this.updatePosition.bind(this),100)}get enabled(){return this._enabled}set enabled(t){this._enabled=t}set dragging(t){this.enabled&&(this.draggingState.dragging=t,this.dragging?this.element.classList.add("dragging"):this.element.classList.remove("dragging"))}get dragging(){return this.draggingState.dragging}start(e){if(!this.enabled)return;const n=e instanceof MouseEvent,o=n&&0===e.button,i=e instanceof PointerEvent;if(n&&!o)return;if(!this.allowDraggingByInnerContent&&e.target!==this.element)return;this.callEventsByName("onDrag",this.element,this),this.onDrag&&this.onDrag(this.element,this),this.dragging=!0,e.stopPropagation();let{x:s,y:r}=(0,t.clickEventToCoordinates)(e);this.lastStartPoint={x:s,y:r},this.movingState.delta={dx:this.movingState.pos.x-s,dy:this.movingState.pos.y-r},i&&(this.draggingState.pointerId=e.pointerId,this.element.setPointerCapture(e.pointerId)),this.element.style.userSelect="none"}end(){this.dragging=!1,this.element.style.userSelect="",this.callEventsByName("onDrop",this.element,this),this.onDrop&&this.onDrop(this.element,this)}updatePosition(){this.dragging||super.updatePosition()}move(e){if(!this.enabled)return;const n=e instanceof PointerEvent;if(!this.dragging)return;if(!this.allowDraggingByInnerContent&&!(e.target===this.element||n&&this.draggingState.pointerId===e.pointerId))return;e.stopPropagation();let{x:o,y:i}=(0,t.clickEventToCoordinates)(e);super.moveToPosition(o,i)}static makeElementDraggable(t){return new i({element:t})}static makeElementDraggableByQuerySelector(t){const e=document.querySelector(t);return e?new i({element:e}):null}}})(),DraggableElement=o})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFDckN4TCxLQUFLVCxRQUFRa00sa0JBQW1CMUksRUFBTXlJLFlBR3hDeEwsS0FBS1QsUUFBUTJCLE1BQU13SyxXQUFhLE1BQ2xDLENBRVEsR0FBQWhCLEdBQ04xSyxLQUFLd0ssVUFBVyxFQUVoQnhLLEtBQUtULFFBQVEyQixNQUFNd0ssV0FBYSxHQUVoQzFMLEtBQUtnQixpQkFBa0IsU0FBVWhCLEtBQUtULFFBQVNTLE1BQzFDQSxLQUFLcUssUUFDUnJLLEtBQUtxSyxPQUFRckssS0FBS1QsUUFBU1MsS0FFL0IsQ0FFVSxjQUFBUSxHQUNIUixLQUFLd0ssVUFJVjFLLE1BQU1VLGdCQUNSLENBRVUsSUFBQW1LLENBQU01SCxHQUNkLElBQU0vQyxLQUFLNkssUUFDVCxPQUdGLE1BQU1RLEVBQWlCdEksYUFBaUJ1SSxhQUV4QyxJQUFNdEwsS0FBS3dLLFNBQ1QsT0FHRixJQUFNeEssS0FBS2tLLCtCQUNlbkgsRUFBTXBCLFNBQVczQixLQUFLVCxTQUFhOEwsR0FBa0JyTCxLQUFLbUssY0FBY3FCLFlBQWN6SSxFQUFNeUksV0FFbEgsT0FJSnpJLEVBQU13SSxrQkFFTixJQUFJLEVBQUVyTCxFQUFDLEVBQUVDLElBQU0sSUFBQTBILHlCQUF5QjlFLEdBRXhDakQsTUFBTWMsZUFBZ0JWLEVBQUdDLEVBQzNCLENBRU8sMkJBQU93TCxDQUFzQnBNLEdBQ2xDLE9BQU8sSUFBSTBLLEVBQWtCLENBQUUxSyxXQUNqQyxDQUVPLDBDQUFPcU0sQ0FBcUNDLEdBQ2pELE1BQU10TSxFQUFVNkYsU0FBU3lHLGNBQWVBLEdBRXhDLE9BQU10TSxFQUlDLElBQUkwSyxFQUFrQixDQUFFMUssUUFBU0EsSUFIL0IsSUFJWCxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0V4dHJhcy9Nb3ZhYmxlRWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvRXh0cmFzL09iamVjdEV2ZW50TGlzdGVuZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Rvb2xzL0RPTVRvb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9Ub29scy9NYXRoVG9vbHMudHMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vc3JjL0V4dHJhcy9EcmFnZ2FibGVFbGVtZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdEV2ZW50TGlzdGVuZXIgfSBmcm9tICcuL09iamVjdEV2ZW50TGlzdGVuZXInO1xyXG5pbXBvcnQgeyBnZXREaXN0YW5jZUZyb21Cb3JkZXIsIGdldFRyYW5zZm9ybUNvb3Jkc0Zyb21FbGVtZW50LCByZWdleFJlbW92ZVRyYW5zbGF0ZUZyb21UcmFuc2Zvcm0gfSBmcm9tICcuLi9Ub29scy9ET01Ub29scyc7XHJcbmltcG9ydCB7IFBvaW50MkQgfSBmcm9tICcuLi9Ub29scy9NYXRoVG9vbHMnO1xyXG5leHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRNb3ZpbmdTdGF0ZSB7XHJcbiAgcG9zOiBQb2ludDJEO1xyXG4gIGRlbHRhOiB7XHJcbiAgICBkeDogbnVtYmVyLFxyXG4gICAgZHk6IG51bWJlclxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1vdmFibGVPcHRpb25zID0ge1xyXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gIG9uQmVmb3JlTW92ZT86IE9uTW92ZUV2ZW50O1xyXG4gIG9uQWZ0ZXJNb3ZlPzogT25Nb3ZlRXZlbnQ7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgdHlwZSBPbk1vdmVFdmVudCA9ICggKCBlbGVtZW50OiBIVE1MRWxlbWVudCwgZHJhZ2dhYmxlOiBNb3ZhYmxlRWxlbWVudCApID0+IHZvaWQgKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBNb3ZhYmxlRWxlbWVudCBleHRlbmRzIE9iamVjdEV2ZW50TGlzdGVuZXIge1xyXG4gIHB1YmxpYyByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICBwcm90ZWN0ZWQgbW92aW5nU3RhdGU6IEVsZW1lbnRNb3ZpbmdTdGF0ZTtcclxuICBwdWJsaWMgaW50ZXJ2YWxVcGRhdGVQb3NpdGlvbjogTm9kZUpTLlRpbWVvdXQ7XHJcbiAgcHVibGljIG9uQmVmb3JlTW92ZT86IE9uTW92ZUV2ZW50O1xyXG4gIHB1YmxpYyBvbkFmdGVyTW92ZT86IE9uTW92ZUV2ZW50O1xyXG5cclxuICBjb25zdHJ1Y3Rvciggb3B0aW9uczogTW92YWJsZU9wdGlvbnMgKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIGlmICggIW9wdGlvbnMuZWxlbWVudCApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIk51bGwgbW92YWJsZSBlbGVtZW50LiBQbGVhc2UgcGFzcyBhIHZhbGlkIGVsZW1lbnQgaW4gY29uc3RydWN0b3IuXCIgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XHJcbiAgICB0aGlzLm9uQmVmb3JlTW92ZSA9IG9wdGlvbnMub25CZWZvcmVNb3ZlO1xyXG4gICAgdGhpcy5vbkFmdGVyTW92ZSA9IG9wdGlvbnMub25BZnRlck1vdmU7XHJcblxyXG4gICAgdGhpcy5tb3ZpbmdTdGF0ZSA9IHtcclxuICAgICAgcG9zOiB7XHJcbiAgICAgICAgeDogMCxcclxuICAgICAgICB5OiAwXHJcbiAgICAgIH0sXHJcbiAgICAgIGRlbHRhOiB7XHJcbiAgICAgICAgZHg6IDAsXHJcbiAgICAgICAgZHk6IDBcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmludGVydmFsVXBkYXRlUG9zaXRpb24gPSBzZXRJbnRlcnZhbCggdGhpcy51cGRhdGVQb3NpdGlvbi5iaW5kKCB0aGlzICksIDIwMCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBwb3NpdGlvbigpOiBQb2ludDJEIHtcclxuICAgIHJldHVybiB0aGlzLm1vdmluZ1N0YXRlLnBvcztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXQgcG9zaXRpb24oIG5ld1BvczogUG9pbnQyRCApIHtcclxuICAgIHRoaXMubW92ZVRvUG9zaXRpb24oIG5ld1Bvcy54LCBuZXdQb3MueSApXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLm1vdmluZ1N0YXRlLnBvcy54O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldCB4KCBuZXdYOiBudW1iZXIgKSB7XHJcbiAgICB0aGlzLm1vdmVUb1Bvc2l0aW9uKCBuZXdYLCB0aGlzLnkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXQgeSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubW92aW5nU3RhdGUucG9zLnk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IHkoIG5ld1k6IG51bWJlciApIHtcclxuICAgIHRoaXMubW92ZVRvUG9zaXRpb24oIHRoaXMueCwgbmV3WSApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRUcmFuc2xhdGUoIG5ld1g6IG51bWJlciwgbmV3WTogbnVtYmVyICkge1xyXG4gICAgdGhpcy5jYWxsRXZlbnRzQnlOYW1lKCAnb25CZWZvcmVNb3ZlJywgdGhpcy5lbGVtZW50LCB0aGlzICk7XHJcbiAgICBpZiAoIHRoaXMub25CZWZvcmVNb3ZlICkge1xyXG4gICAgICB0aGlzLm9uQmVmb3JlTW92ZSggdGhpcy5lbGVtZW50LCB0aGlzICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZXNldFRyYW5zbGF0ZSgpO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybSArPSBgdHJhbnNsYXRlKCR7IG5ld1ggfXB4LCAkeyBuZXdZIH1weClgO1xyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uQWZ0ZXJNb3ZlJywgdGhpcy5lbGVtZW50LCB0aGlzICk7XHJcbiAgICBpZiAoIHRoaXMub25BZnRlck1vdmUgKSB7XHJcbiAgICAgIHRoaXMub25BZnRlck1vdmUoIHRoaXMuZWxlbWVudCwgdGhpcyApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRUcmFuc2xhdGVCeVBvaW50MkQoIHBvaW50OiBQb2ludDJEICkge1xyXG4gICAgdGhpcy5zZXRUcmFuc2xhdGUoIHBvaW50LngsIHBvaW50LnkgKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCB1cGRhdGVQb3NpdGlvbigpOiB2b2lkIHtcclxuICAgIHRoaXMubW92aW5nU3RhdGUucG9zID0gZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQoIHRoaXMuZWxlbWVudCApO1xyXG4gICAgdGhpcy5tb3ZpbmdTdGF0ZS5kZWx0YS5keCA9IDA7XHJcbiAgICB0aGlzLm1vdmluZ1N0YXRlLmRlbHRhLmR5ID0gMDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRUcmFuc2xhdGUoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gdGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybS5yZXBsYWNlKCByZWdleFJlbW92ZVRyYW5zbGF0ZUZyb21UcmFuc2Zvcm0sICcnICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbW92ZVRvUG9zaXRpb24oIHg6IG51bWJlciwgeTogbnVtYmVyICk6IHZvaWQge1xyXG4gICAgdGhpcy5tb3ZpbmdTdGF0ZS5wb3MgPSB7IHg6IHggKyB0aGlzLm1vdmluZ1N0YXRlLmRlbHRhLmR4LCB5OiB5ICsgdGhpcy5tb3ZpbmdTdGF0ZS5kZWx0YS5keSB9O1xyXG4gICAgdGhpcy5zZXRUcmFuc2xhdGVCeVBvaW50MkQoIHRoaXMubW92aW5nU3RhdGUucG9zICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbW92ZVRvUG9pbnQyRCggcG9pbnQ6IFBvaW50MkQgKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vdmluZ1N0YXRlLnBvcyA9IHsgeDogcG9pbnQueCArIHRoaXMubW92aW5nU3RhdGUuZGVsdGEuZHgsIHk6IHBvaW50LnkgKyB0aGlzLm1vdmluZ1N0YXRlLmRlbHRhLmR5IH07XHJcbiAgICB0aGlzLnNldFRyYW5zbGF0ZUJ5UG9pbnQyRCggdGhpcy5tb3ZpbmdTdGF0ZS5wb3MgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBtb3ZlVG9UYXJnZXRFbGVtZW50KCB0YXJnZXQ6IEhUTUxFbGVtZW50ICkge1xyXG4gICAgY29uc3QgdGFyZ2V0UmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IGVsZW1lbnRUcmFuc2Zvcm1Qb3NpdGlvbiA9IGdldFRyYW5zZm9ybUNvb3Jkc0Zyb21FbGVtZW50KCB0aGlzLmVsZW1lbnQgKTtcclxuICAgIGNvbnN0IGRpc3RhbmNlRnJvbUJvcmRlciA9IGdldERpc3RhbmNlRnJvbUJvcmRlciggdGhpcy5lbGVtZW50LCB0YXJnZXQgKTtcclxuICAgIGNvbnN0IHRhcmdldFJpZ2h0UG9zaXRpb24gPSBlbGVtZW50VHJhbnNmb3JtUG9zaXRpb24ueCArIGRpc3RhbmNlRnJvbUJvcmRlci5yaWdodDtcclxuICAgIGNvbnN0IHRhcmdldEJvdHRvbVBvc2l0aW9uID0gZWxlbWVudFRyYW5zZm9ybVBvc2l0aW9uLnkgKyBkaXN0YW5jZUZyb21Cb3JkZXIuYm90dG9tO1xyXG5cclxuICAgIHRoaXMuc2V0VHJhbnNsYXRlQnlQb2ludDJEKCB7XHJcbiAgICAgIHg6IE1hdGgucm91bmQoIHRhcmdldFJpZ2h0UG9zaXRpb24gLSB0YXJnZXRSZWN0LndpZHRoICksXHJcbiAgICAgIHk6IE1hdGgucm91bmQoIHRhcmdldEJvdHRvbVBvc2l0aW9uIC0gdGFyZ2V0UmVjdC5oZWlnaHQgKVxyXG4gICAgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG1vdmVUb0NlbnRlck9mVGFyZ2V0RWxlbWVudCggdGFyZ2V0OiBIVE1MRWxlbWVudCApOiB2b2lkIHtcclxuICAgIGNvbnN0IHRhcmdldFJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCBlbGVtZW50VHJhbnNmb3JtUG9zaXRpb24gPSBnZXRUcmFuc2Zvcm1Db29yZHNGcm9tRWxlbWVudCggdGhpcy5lbGVtZW50ICk7XHJcbiAgICBjb25zdCBkaXN0YW5jZUZyb21Cb3JkZXIgPSBnZXREaXN0YW5jZUZyb21Cb3JkZXIoIHRoaXMuZWxlbWVudCwgdGFyZ2V0ICk7XHJcbiAgICBjb25zdCB0YXJnZXRSaWdodFBvc2l0aW9uID0gZWxlbWVudFRyYW5zZm9ybVBvc2l0aW9uLnggKyBkaXN0YW5jZUZyb21Cb3JkZXIucmlnaHQ7XHJcbiAgICBjb25zdCB0YXJnZXRCb3R0b21Qb3NpdGlvbiA9IGVsZW1lbnRUcmFuc2Zvcm1Qb3NpdGlvbi55ICsgZGlzdGFuY2VGcm9tQm9yZGVyLmJvdHRvbTtcclxuXHJcbiAgICB0aGlzLnNldFRyYW5zbGF0ZUJ5UG9pbnQyRCgge1xyXG4gICAgICB4OiBNYXRoLnJvdW5kKCB0YXJnZXRSaWdodFBvc2l0aW9uIC0gKCB0YXJnZXRSZWN0LndpZHRoIC8gMiApICksXHJcbiAgICAgIHk6IE1hdGgucm91bmQoIHRhcmdldEJvdHRvbVBvc2l0aW9uIC0gKCB0YXJnZXRSZWN0LmhlaWdodCAvIDIgKSApXHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIG1ha2VFbGVtZW50TW92YWJsZSggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogTW92YWJsZUVsZW1lbnQge1xyXG4gICAgcmV0dXJuIG5ldyBNb3ZhYmxlRWxlbWVudCggeyBlbGVtZW50IH0gKTtcclxuICB9XHJcbn0iLCJleHBvcnQgdHlwZSBFdmVudExpc3RlbmVyID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZXZlbnQ6IEZ1bmN0aW9uO1xyXG59O1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBPYmplY3RFdmVudExpc3RlbmVyIHtcclxuICBwdWJsaWMgZXZlbnRzQnlOYW1lOiBNYXA8c3RyaW5nLCBFdmVudExpc3RlbmVyW10+ID0gbmV3IE1hcCgpO1xyXG5cclxuICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50OiBGdW5jdGlvbiApOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbmV3RXZlbnQ6IEV2ZW50TGlzdGVuZXIgPSB7XHJcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxyXG4gICAgICBldmVudDogZXZlbnQsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICggIXRoaXMuZXZlbnRzQnlOYW1lLmhhcyggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSApIHtcclxuICAgICAgdGhpcy5ldmVudHNCeU5hbWUuc2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSwgW25ld0V2ZW50XSApO1xyXG4gICAgICByZXR1cm4gbmV3RXZlbnQuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5ldmVudHNCeU5hbWUuZ2V0KCBldmVudE5hbWUudG9Mb3dlckNhc2UoKSApIS5wdXNoKCBuZXdFdmVudCApO1xyXG5cclxuICAgIHJldHVybiBuZXdFdmVudC5pZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRFdmVudHNCeU5hbWUoIGV2ZW50TmFtZTogc3RyaW5nICk6IEV2ZW50TGlzdGVuZXJbXSB7XHJcbiAgICBpZiAoICF0aGlzLmV2ZW50c0J5TmFtZS5oYXMoIGV2ZW50TmFtZS50b0xvd2VyQ2FzZSgpICkgKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzQnlOYW1lLnNldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCksIFtdICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZXZlbnRzQnlOYW1lLmdldCggZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkgKSE7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVtb3ZlRXZlbnRCeUlkKCBldmVudElkOiBzdHJpbmcgKSB7XHJcbiAgICB0aGlzLmV2ZW50c0J5TmFtZS5mb3JFYWNoKCAoIHZhbHVlLCBrZXkgKSA9PiB7XHJcbiAgICAgIHRoaXMuZXZlbnRzQnlOYW1lLnNldCgga2V5LCB2YWx1ZS5maWx0ZXIoIGUgPT4gZS5pZCAhPT0gZXZlbnRJZCApICk7XHJcbiAgICB9ICk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2FsbEV2ZW50c0J5TmFtZSggZXZlbnROYW1lOiBzdHJpbmcsIC4uLmV2ZW50QXJnczogYW55W10gKTogdm9pZCB7XHJcbiAgICB0aGlzLmdldEV2ZW50c0J5TmFtZSggZXZlbnROYW1lICkuZm9yRWFjaCggZSA9PiBlLmV2ZW50KCAuLi5ldmVudEFyZ3MgKSApO1xyXG4gIH1cclxufSIsImltcG9ydCB7IERpbWVuc2lvbnMsIFBvaW50MkQsIGxlcnAsIHJlZ2V4TnVtYmVyUGF0dGVybiwgcm90YXRlQ29vcmRpbmF0ZXMsIHJvdGF0ZUNvb3JkaW5hdGVzRnJvbVBvaW50MkQgfSBmcm9tICcuL01hdGhUb29scyc7XHJcbmltcG9ydCB7IHRvUGhvbmVOdW1iZXIgfSBmcm9tICcuL1N0cmluZ1Rvb2xzJztcclxuaW1wb3J0IHsgQ29sbGlzaW9uRGlyZWN0aW9uQ2hlY2ssIEJvcmRlckRpc3RhbmNlIH0gZnJvbSAnLi4vRXh0cmFzL0NvbGxpc2lvbkV2ZW50cy9UeXBlcyc7XHJcblxyXG5leHBvcnQgdHlwZSBLZXlib2FyZEV2ZW50Q2FsbGJhY2sgPSAoIGV2dDogS2V5Ym9hcmRFdmVudCApID0+IHZvaWQ7XHJcbmV4cG9ydCBjb25zdCByZWdleFJlbW92ZVRyYW5zbGF0ZUZyb21UcmFuc2Zvcm0gPSAvdHJhbnNsYXRlXFwoW14pXSpcXCkvZztcclxuZXhwb3J0IGNvbnN0IHJlZ2V4R3JvdXBSb3RhdGVWYWx1ZSA9IC9yb3RhdGVcXCgoLT9cXGQrXFwuP1xcZCopZGVnXFwpLztcclxuZXhwb3J0IGNvbnN0IHJlZ2V4R3JvdXBSb3RhdGVYVmFsdWUgPSAvcm90YXRlWFxcKCgtP1xcZCtcXC4/XFxkKilkZWdcXCkvO1xyXG5leHBvcnQgY29uc3QgcmVnZXhHcm91cFJvdGF0ZVlWYWx1ZSA9IC9yb3RhdGVZXFwoKC0/XFxkK1xcLj9cXGQqKWRlZ1xcKS87XHJcbmV4cG9ydCBjb25zdCByZWdleEdyb3VwUm90YXRlWlZhbHVlID0gL3JvdGF0ZVpcXCgoLT9cXGQrXFwuP1xcZCopZGVnXFwpLztcclxuXHJcbmV4cG9ydCBjb25zdCBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2UgPSBuZXcgTWFwPHN0cmluZywgS2V5Ym9hcmRFdmVudENhbGxiYWNrW10+KCk7XHJcbmV4cG9ydCBjb25zdCBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdCA9IG5ldyBNYXA8c3RyaW5nLCBLZXlib2FyZEV2ZW50Q2FsbGJhY2tbXT4oKTtcclxuZXhwb3J0IGNvbnN0IGRpY3RLZXlzQnlBY3Rpb25LZXl1cCA9IG5ldyBNYXA8c3RyaW5nLCBLZXlib2FyZEV2ZW50Q2FsbGJhY2tbXT4oKTtcclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFjdGlvbktleSggeyBrZXksIGtleWRvd246IGV2ZW50S2V5ZG93biwga2V5dXA6IGV2ZW50S2V5dXAsIGV4ZWN1dGVPbmx5T25jZSA9IHRydWUgfTogeyBrZXk6IHN0cmluZzsga2V5ZG93bjogS2V5Ym9hcmRFdmVudENhbGxiYWNrOyBrZXl1cD86IEtleWJvYXJkRXZlbnRDYWxsYmFjazsgZXhlY3V0ZU9ubHlPbmNlPzogYm9vbGVhbjsgfSApIHtcclxuICBpZiAoIGV4ZWN1dGVPbmx5T25jZSApIHtcclxuICAgIGFkZEFjdGlvbktleVJ1bk9uY2UoIGtleSwgZXZlbnRLZXlkb3duLCBldmVudEtleXVwICk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBhZGRBY3Rpb25LZXlSdW5PblJlcGVhdCgga2V5LCBldmVudEtleWRvd24sIGV2ZW50S2V5dXAgKTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgU2FmZVByb21pc2U8VD4gPSB7XHJcbiAgZGF0YTogKCkgPT4gVDtcclxuICBlcnJvcjogRXJyb3IgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlUHJvbWlzZTxUPiggcHJvbWlzZTogUHJvbWlzZTxUPiApOiBQcm9taXNlPFNhZmVQcm9taXNlPFQ+PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwcm9taXNlO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRhdGE6ICgpID0+IGRhdGEsXHJcbiAgICAgIGVycm9yOiBudWxsXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKCBlcnJvciApIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoIGVycm9yICk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZGF0YTogKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoIFwiQ291bGRuJ3QgZmV0Y2gsIGNoZWNrIFNhZmVQcm9taXNlLmVycm9yIGZvciBkZXRhaWxzLlwiICk7IH0sXHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoIFN0cmluZyggZXJyb3IgKSApXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRZb3V0dWJlVXJsT3JJZCggaW5wdXQ6IHN0cmluZyApOiBib29sZWFuIHtcclxuICBjb25zdCB1cmxQYXR0ZXJuID0gL14oaHR0cChzKT86XFwvXFwvKT8oKHcpezN9Lik/eW91dHUoYmV8LmJlKT8oXFwuY29tKT9cXC8uKy87XHJcbiAgY29uc3QgaWRQYXR0ZXJuID0gL15bYS16QS1aMC05Xy1dezExfSQvO1xyXG5cclxuICByZXR1cm4gdXJsUGF0dGVybi50ZXN0KCBpbnB1dCApIHx8IGlkUGF0dGVybi50ZXN0KCBpbnB1dCApO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRZb3VUdWJlVXJsKCB1cmw6IHN0cmluZyApOiBib29sZWFuIHtcclxuICBjb25zdCBwYXR0ZXJuID0gL14oaHR0cChzKT86XFwvXFwvKT8oKHcpezN9Lik/eW91dHUoYmV8LmJlKT8oXFwuY29tKT9cXC8uKy87XHJcbiAgcmV0dXJuIHBhdHRlcm4udGVzdCggdXJsICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0WW91VHViZUlkKCBpbnB1dDogc3RyaW5nICk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IHJlZ2V4ID0gL1s/Jl12PShbXj8mXSspLztcclxuICBjb25zdCBtYXRjaCA9IGlucHV0Lm1hdGNoKCByZWdleCApO1xyXG4gIGlmICggbWF0Y2ggJiYgbWF0Y2hbMV0gKSB7XHJcbiAgICByZXR1cm4gbWF0Y2hbMV07XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIElmIGRpcmVjdCB2aWRlbyBJRCBpcyBwcm92aWRlZFxyXG4gICAgcmV0dXJuIGlucHV0Lmxlbmd0aCA9PT0gMTEgPyBpbnB1dCA6IG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZUxpc3RGb3JFbGVtZW50KCBlbGVtZW50OiBIVE1MRWxlbWVudCwgYXR0ckxpc3Q6IFtzdHJpbmcsIHN0cmluZ11bXSApIHtcclxuICBhdHRyTGlzdC5mb3JFYWNoKCAoIFtrZXksIHZhbF0gKSA9PiB7XHJcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgga2V5LCB2YWwgKTtcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50RnJvbUhUTUwoIGh0bWw6IHN0cmluZywgdHJpbTogYm9vbGVhbiA9IHRydWUgKSB7XHJcbiAgaHRtbCA9IHRyaW0gPyBodG1sLnRyaW0oKSA6IGh0bWw7XHJcblxyXG4gIGlmICggIWh0bWwgKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RlbXBsYXRlJyApO1xyXG4gIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgY29uc3QgcmVzdWx0ID0gdGVtcGxhdGUuY29udGVudC5jaGlsZHJlbjtcclxuXHJcbiAgaWYgKCByZXN1bHQubGVuZ3RoID09PSAxICkge1xyXG4gICAgcmV0dXJuIHJlc3VsdFswXSBhcyBIVE1MRWxlbWVudDtcclxuICB9XHJcblxyXG4gIHJldHVybiBBcnJheS5mcm9tKCByZXN1bHQgKSBhcyBIVE1MRWxlbWVudFtdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudERpbWVuc2lvbnNCeUlkKCBlbGVtZW50SWQ6IHN0cmluZyApOiBEaW1lbnNpb25zIHtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGVsZW1lbnRJZCApO1xyXG5cclxuICBpZiAoICFlbGVtZW50ICkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCBcIkludmFsaWQgZWxlbWVudCBhdCBnZXRFbGVtZW50RGltZW5zaW9uc0J5SWQgd2l0aCBpZDogXCIgKyBlbGVtZW50SWQgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBnZXRFbGVtZW50RGltZW5zaW9ucyggZWxlbWVudCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudERpbWVuc2lvbnMoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICk6IERpbWVuc2lvbnMge1xyXG4gIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxyXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICk6IERPTVJlY3Qge1xyXG4gIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIGNvbnN0IGNlbnRlclggPSByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMjtcclxuICBjb25zdCBjZW50ZXJZID0gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDI7XHJcblxyXG4gIC8vIFJvdGF0aW9uIGFuZ2xlIGluIGRlZ3JlZXMgKGV4dHJhY3RlZCBmcm9tIHN0eWxlLnRyYW5zZm9ybSBvciBhbnkgb3RoZXIgc291cmNlKVxyXG4gIGNvbnN0IHJvdGF0aW9uQW5nbGUgPSBnZXRCb2R5Um90YXRpb25JbkRlZ3JlZXMoKTtcclxuXHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogcm90YXRpb25BbmdsZTtcclxuICBjb25zdCBjb3NUaGV0YSA9IE1hdGguY29zKCByYWRpYW5zICk7XHJcbiAgY29uc3Qgc2luVGhldGEgPSBNYXRoLnNpbiggcmFkaWFucyApO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgdGhlIHJvdGF0ZWQgY29vcmRpbmF0ZXNcclxuICBjb25zdCByb3RhdGVkWDEgPSBjZW50ZXJYICsgKCByZWN0LmxlZnQgLSBjZW50ZXJYICkgKiBjb3NUaGV0YSAtICggcmVjdC50b3AgLSBjZW50ZXJZICkgKiBzaW5UaGV0YTtcclxuICBjb25zdCByb3RhdGVkWTEgPSBjZW50ZXJZICsgKCByZWN0LmxlZnQgLSBjZW50ZXJYICkgKiBzaW5UaGV0YSArICggcmVjdC50b3AgLSBjZW50ZXJZICkgKiBjb3NUaGV0YTtcclxuXHJcbiAgY29uc3Qgcm90YXRlZFgyID0gY2VudGVyWCArICggcmVjdC5yaWdodCAtIGNlbnRlclggKSAqIGNvc1RoZXRhIC0gKCByZWN0LmJvdHRvbSAtIGNlbnRlclkgKSAqIHNpblRoZXRhO1xyXG4gIGNvbnN0IHJvdGF0ZWRZMiA9IGNlbnRlclkgKyAoIHJlY3QucmlnaHQgLSBjZW50ZXJYICkgKiBzaW5UaGV0YSArICggcmVjdC5ib3R0b20gLSBjZW50ZXJZICkgKiBjb3NUaGV0YTtcclxuXHJcbiAgLy8gQ2FsY3VsYXRlIGxlZnQsIHRvcCwgYm90dG9tLCBhbmQgcmlnaHQgY29vcmRpbmF0ZXNcclxuICBjb25zdCByb3RhdGVkTGVmdCA9IE1hdGgubWluKCByb3RhdGVkWDEsIHJvdGF0ZWRYMiApO1xyXG4gIGNvbnN0IHJvdGF0ZWRUb3AgPSBNYXRoLm1pbiggcm90YXRlZFkxLCByb3RhdGVkWTIgKTtcclxuICBjb25zdCByb3RhdGVkQm90dG9tID0gTWF0aC5tYXgoIHJvdGF0ZWRZMSwgcm90YXRlZFkyICk7XHJcbiAgY29uc3Qgcm90YXRlZFJpZ2h0ID0gTWF0aC5tYXgoIHJvdGF0ZWRYMSwgcm90YXRlZFgyICk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB4OiByb3RhdGVkTGVmdCxcclxuICAgIHk6IHJvdGF0ZWRUb3AsXHJcbiAgICB3aWR0aDogcmVjdC53aWR0aCxcclxuICAgIGhlaWdodDogcmVjdC5oZWlnaHQsXHJcbiAgICB0b0pTT046IHJlY3QudG9KU09OLFxyXG4gICAgbGVmdDogcm90YXRlZExlZnQsXHJcbiAgICB0b3A6IHJvdGF0ZWRUb3AsXHJcbiAgICBib3R0b206IHJvdGF0ZWRCb3R0b20sXHJcbiAgICByaWdodDogcm90YXRlZFJpZ2h0LFxyXG4gIH0gYXMgRE9NUmVjdDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQWN0aW9uS2V5UnVuT25jZSgga2V5OiBzdHJpbmcsIGV2ZW50S2V5ZG93bjogS2V5Ym9hcmRFdmVudENhbGxiYWNrLCBldmVudEtleXVwPzogS2V5Ym9hcmRFdmVudENhbGxiYWNrICkge1xyXG4gIGlmICggZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlLmhhcygga2V5ICkgKSB7XHJcbiAgICBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2Uuc2V0KCBrZXksIFtldmVudEtleWRvd24sIC4uLmRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZS5nZXQoIGtleSApIV0gKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93bk9uY2Uuc2V0KCBrZXksIFtldmVudEtleWRvd25dIClcclxuICB9XHJcblxyXG4gIGlmICggZXZlbnRLZXl1cCApIHtcclxuICAgIGlmICggZGljdEtleXNCeUFjdGlvbktleXVwLmhhcygga2V5ICkgKSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXAsIC4uLmRpY3RLZXlzQnlBY3Rpb25LZXl1cC5nZXQoIGtleSApIV0gKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGljdEtleXNCeUFjdGlvbktleXVwLnNldCgga2V5LCBbZXZlbnRLZXl1cF0gKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQWN0aW9uS2V5UnVuT25SZXBlYXQoIGtleTogc3RyaW5nLCBldmVudEtleWRvd246IEtleWJvYXJkRXZlbnRDYWxsYmFjaywgZXZlbnRLZXl1cD86IEtleWJvYXJkRXZlbnRDYWxsYmFjayApIHtcclxuICBpZiAoIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0Lmhhcygga2V5ICkgKSB7XHJcbiAgICBkaWN0S2V5c0J5QWN0aW9uS2V5ZG93blJlcGVhdC5zZXQoIGtleSwgW2V2ZW50S2V5ZG93biwgLi4uZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQuZ2V0KCBrZXkgKSFdIClcclxuICB9IGVsc2Uge1xyXG4gICAgZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQuc2V0KCBrZXksIFtldmVudEtleWRvd25dIClcclxuICB9XHJcblxyXG4gIGlmICggZXZlbnRLZXl1cCApIHtcclxuICAgIGlmICggZGljdEtleXNCeUFjdGlvbktleXVwLmhhcygga2V5ICkgKSB7XHJcbiAgICAgIGRpY3RLZXlzQnlBY3Rpb25LZXl1cC5zZXQoIGtleSwgW2V2ZW50S2V5dXAsIC4uLmRpY3RLZXlzQnlBY3Rpb25LZXl1cC5nZXQoIGtleSApIV0gKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZGljdEtleXNCeUFjdGlvbktleXVwLnNldCgga2V5LCBbZXZlbnRLZXl1cF0gKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRWxlbWVudENvbGxpc2lvbiggZWxlbWVudDE6IEhUTUxFbGVtZW50LCBlbGVtZW50MjogSFRNTEVsZW1lbnQsIGNoZWNrQm9keVJvdGF0aW9uOiBib29sZWFuID0gZmFsc2UgKTogYm9vbGVhbiB7XHJcbiAgY29uc3QgcmVjdDEgPSAhY2hlY2tCb2R5Um90YXRpb24gPyBlbGVtZW50MS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIGVsZW1lbnQxICk7XHJcbiAgY29uc3QgcmVjdDIgPSAhY2hlY2tCb2R5Um90YXRpb24gPyBlbGVtZW50Mi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIGVsZW1lbnQyICk7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9ICEoXHJcbiAgICByZWN0MS50b3AgPiByZWN0Mi5ib3R0b20gfHxcclxuICAgIHJlY3QxLnJpZ2h0IDwgcmVjdDIubGVmdCB8fFxyXG4gICAgcmVjdDEuYm90dG9tIDwgcmVjdDIudG9wIHx8XHJcbiAgICByZWN0MS5sZWZ0ID4gcmVjdDIucmlnaHRcclxuICApO1xyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9sbEZvclZhcmlhYmxlPFQ+KCB2YXJpYWJsZU5hbWU6IHN0cmluZywgcmVhZHlDb25kaXRpb246ICggdmFsdWU6IFQgKSA9PiBib29sZWFuLCBjYWxsYmFjazogKCB2YWx1ZTogVCApID0+IHZvaWQgKSB7XHJcbiAgY29uc3QgcG9sbEludGVydmFsID0gMTAwO1xyXG4gIGNvbnN0IHBvbGwgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xyXG4gICAgaWYgKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICE9PSB1bmRlZmluZWQgJiYgcmVhZHlDb25kaXRpb24oICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gKSApIHtcclxuICAgICAgLy8gSWYgYm90aCBjb25kaXRpb25zIGFyZSBtZXQsIGV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFuZCBzdG9wIHBvbGxpbmdcclxuICAgICAgY2xlYXJJbnRlcnZhbCggcG9sbCApO1xyXG4gICAgICBjYWxsYmFjayggKCB3aW5kb3cgYXMgYW55IClbdmFyaWFibGVOYW1lXSApO1xyXG4gICAgfVxyXG4gIH0sIHBvbGxJbnRlcnZhbCApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcG9sbEZvclZhcmlhYmxlQXN5bmM8VD4oIHZhcmlhYmxlTmFtZTogc3RyaW5nLCByZWFkeUNvbmRpdGlvbjogKCB2YWx1ZTogVCApID0+IGJvb2xlYW4sIGNhbGxiYWNrOiAoIHZhbHVlOiBUICkgPT4gdm9pZCApOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBwb2xsSW50ZXJ2YWwgPSAxMDA7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KCAoIHJlc29sdmUgKSA9PiB7XHJcbiAgICBjb25zdCBwb2xsID0gc2V0SW50ZXJ2YWwoICgpID0+IHtcclxuICAgICAgaWYgKCAoIHdpbmRvdyBhcyBhbnkgKVt2YXJpYWJsZU5hbWVdICE9PSB1bmRlZmluZWQgJiYgcmVhZHlDb25kaXRpb24oICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gKSApIHtcclxuICAgICAgICAvLyBJZiBib3RoIGNvbmRpdGlvbnMgYXJlIG1ldCwgZXhlY3V0ZSB0aGUgY2FsbGJhY2ssIHN0b3AgcG9sbGluZywgYW5kIHJlc29sdmUgdGhlIHByb21pc2VcclxuICAgICAgICBjbGVhckludGVydmFsKCBwb2xsICk7XHJcbiAgICAgICAgY2FsbGJhY2soICggd2luZG93IGFzIGFueSApW3ZhcmlhYmxlTmFtZV0gKTtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHBvbGxJbnRlcnZhbCApO1xyXG4gIH0gKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdhaXRVbnRpbEVsZW1lbnRFeGlzdHMoIHNlbGVjdG9yOiBzdHJpbmcgKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHtcclxuICAgIGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKSApIHtcclxuICAgICAgcmV0dXJuIHJlc29sdmUoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCBtdXRhdGlvbnMgPT4ge1xyXG4gICAgICBpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKSB7XHJcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgIHJlc29sdmUoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICkgKTtcclxuICAgICAgfVxyXG4gICAgfSApO1xyXG5cclxuICAgIG9ic2VydmVyLm9ic2VydmUoIGRvY3VtZW50LmJvZHksIHtcclxuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICBzdWJ0cmVlOiB0cnVlXHJcbiAgICB9ICk7XHJcbiAgfSApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsYXkoIG1zOiBudW1iZXIgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKCByZXNvbHZlID0+IHNldFRpbWVvdXQoIHJlc29sdmUsIG1zICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VFbGVtZW50KCBlbGVtZW50VG9SZW1vdmU6IEhUTUxFbGVtZW50LCBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgbmV3RWxlbWVudDogSFRNTEVsZW1lbnQgKTogdm9pZCB7XHJcbiAgaWYgKCBwYXJlbnRFbGVtZW50ICYmIGVsZW1lbnRUb1JlbW92ZSApIHtcclxuICAgIHBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGVsZW1lbnRUb1JlbW92ZSApO1xyXG5cclxuICAgIHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKCBuZXdFbGVtZW50LCBlbGVtZW50VG9SZW1vdmUubmV4dFNpYmxpbmcgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRFbGVtZW50QXRJbmRleCggcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsIG5ld0VsZW1lbnQ6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyICk6IHZvaWQge1xyXG4gIGNvbnN0IGNoaWxkTm9kZXMgPSBwYXJlbnRFbGVtZW50LmNoaWxkTm9kZXM7XHJcblxyXG4gIGlmICggaW5kZXggPj0gMCAmJiBpbmRleCA8PSBjaGlsZE5vZGVzLmxlbmd0aCApIHtcclxuICAgIGlmICggaW5kZXggPT09IGNoaWxkTm9kZXMubGVuZ3RoICkge1xyXG4gICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKCBuZXdFbGVtZW50ICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCByZWZOb2RlID0gY2hpbGROb2Rlc1tpbmRleF07XHJcbiAgICAgIHBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKCBuZXdFbGVtZW50LCByZWZOb2RlICk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoICdJbmRleCBvdXQgb2YgYm91bmRzJyApO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCBcIkluZGV4IG91dCBvZiBib3VuZHNcIiApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEluZGV4SW5QYXJlbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICk6IG51bWJlciB7XHJcbiAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG5cclxuICBpZiAoIHBhcmVudCApIHtcclxuICAgIGNvbnN0IGNoaWxkcmVuID0gQXJyYXkuZnJvbSggcGFyZW50LmNoaWxkcmVuICk7XHJcbiAgICByZXR1cm4gY2hpbGRyZW4uaW5kZXhPZiggZWxlbWVudCApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIC0xO1xyXG59XHJcblxyXG4vLy8gR2V0IHRoZSBkZWZhdWx0IGF0dHJpYnV0ZXMgZnJvbSB0aGUgdGFyZ2V0IGVsZW1lbnRcclxuLy8vIElmIGhhdmUgbm90IGRlZmF1bHQgYXR0cmlidXRlIHdpdGggdGhpcyBAYXR0cmlidXRlTmFtZSBvbiBtYXAgd2lsbCBzZXQgdGhlIGN1cnJlbnQgYXR0cmlidXRlIGFzIGRlZmF1bHRcclxuLy8vIElmIGhhdmUgbm90IGRlZmF1bHQgYXR0cmlidXRlIHdpdGggdGhpcyBAYXR0cmlidXRlTmFtZSB3aWxsIHJldHVybiBhbiBlbXB0eSBzdHJpbmdcclxuZXhwb3J0IGNvbnN0IG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50ID0gbmV3IE1hcDxIVE1MRWxlbWVudCwgTWFwPHN0cmluZywgc3RyaW5nPj4oKTtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQoIHRhcmdldDogSFRNTEVsZW1lbnQsIGF0dHJpYnV0ZU5hbWU6IHN0cmluZyApOiBzdHJpbmcge1xyXG4gIGlmICggIW1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmhhcyggdGFyZ2V0ICkgKSB7XHJcbiAgICBtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5zZXQoIHRhcmdldCwgbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKSApO1xyXG4gIH1cclxuXHJcbiAgbGV0IHJlc3VsdDogc3RyaW5nID0gJyc7XHJcbiAgY29uc3QgZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZSA9IG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmdldCggdGFyZ2V0ICkhO1xyXG4gIGNvbnN0IHRhcmdldERlZmF1bHRBdHRyaWJ1dGUgPSAhZGVmYXVsdEF0dHJpYnV0ZVZhbHVlc0J5TmFtZS5oYXMoIGF0dHJpYnV0ZU5hbWUgKSA/IHRhcmdldC5nZXRBdHRyaWJ1dGUoIGF0dHJpYnV0ZU5hbWUgKSA6IGRlZmF1bHRBdHRyaWJ1dGVWYWx1ZXNCeU5hbWUuZ2V0KCBhdHRyaWJ1dGVOYW1lICkhO1xyXG5cclxuICByZXN1bHQgPSB0YXJnZXREZWZhdWx0QXR0cmlidXRlID8gdGFyZ2V0RGVmYXVsdEF0dHJpYnV0ZSA6ICcnO1xyXG4gIHNldERlZmF1bHRBdHRyaWJ1dGVGb3JUYXJnZXQoIHRhcmdldCwgYXR0cmlidXRlTmFtZSwgcmVzdWx0ICk7XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0QXR0cmlidXRlRm9yVGFyZ2V0KCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcsIG5ld0RlZmF1bHRBdHRyaWJ1dGU6IHN0cmluZyApOiB2b2lkIHtcclxuICBpZiAoICFtYXBEZWZhdWx0QXR0cmlidXRlc0J5RWxlbWVudC5oYXMoIHRhcmdldCApICkge1xyXG4gICAgbWFwRGVmYXVsdEF0dHJpYnV0ZXNCeUVsZW1lbnQuc2V0KCB0YXJnZXQsIG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCkgKTtcclxuICB9XHJcblxyXG4gIG1hcERlZmF1bHRBdHRyaWJ1dGVzQnlFbGVtZW50LmdldCggdGFyZ2V0ICkhLnNldCggYXR0cmlidXRlTmFtZSwgbmV3RGVmYXVsdEF0dHJpYnV0ZSApO1xyXG59XHJcblxyXG4vLy8gRGl2aWRlIG8gZWxlbWVudG8gQHRhcmdldCBlbSA5IFwicXVhZHJhZG9zXCIgaWd1YWlzIGUgcmV0b3JuYSBlbSBxdWFpcyBxdWFkcmFkb3MgbyBkcmFnZ2FibGUgZXN0w6EgY29saWRpbmRvIGNvbSBvIHRhcmdldFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sbGlzaW9uRGlyZWN0aW9uKCBkcmFnZ2FibGU6IEhUTUxFbGVtZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IENvbGxpc2lvbkRpcmVjdGlvbkNoZWNrIHtcclxuICBjb25zdCByZWN0MSA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGRyYWdnYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIGRyYWdnYWJsZSApO1xyXG4gIGNvbnN0IHJlY3QyID0gIWNoZWNrQm9keVJvdGF0aW9uID8gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggdGFyZ2V0ICk7XHJcblxyXG4gIGNvbnN0IGlzVG9wID0gcmVjdDEuYm90dG9tID4gcmVjdDIudG9wICYmIHJlY3QxLnRvcCA8IHJlY3QyLnRvcCArIHJlY3QyLmhlaWdodCAvIDM7XHJcbiAgY29uc3QgaXNSaWdodCA9IHJlY3QxLmxlZnQgPCByZWN0Mi5yaWdodCAmJiByZWN0MS5yaWdodCA+IHJlY3QyLnJpZ2h0IC0gcmVjdDIud2lkdGggLyAzO1xyXG4gIGNvbnN0IGlzQ2VudGVyID0gcmVjdDEudG9wIDwgcmVjdDIuYm90dG9tICYmIHJlY3QxLmJvdHRvbSA+IHJlY3QyLnRvcCAmJiByZWN0MS5sZWZ0IDwgcmVjdDIucmlnaHQgJiYgcmVjdDEucmlnaHQgPiByZWN0Mi5sZWZ0O1xyXG4gIGNvbnN0IGlzQm90dG9tID0gcmVjdDEudG9wIDwgcmVjdDIuYm90dG9tIC0gcmVjdDIuaGVpZ2h0IC8gMyAmJiByZWN0MS5ib3R0b20gPiByZWN0Mi5ib3R0b20gLSByZWN0Mi5oZWlnaHQgLyAzO1xyXG4gIGNvbnN0IGlzTGVmdCA9IHJlY3QxLnJpZ2h0ID4gcmVjdDIubGVmdCAmJiByZWN0MS5sZWZ0IDwgcmVjdDIubGVmdCArIHJlY3QyLndpZHRoIC8gMztcclxuXHJcbiAgcmV0dXJuIHsgdG9wOiBpc1RvcCwgcmlnaHQ6IGlzUmlnaHQsIGNlbnRlcjogaXNDZW50ZXIsIGJvdHRvbTogaXNCb3R0b20sIGxlZnQ6IGlzTGVmdCB9O1xyXG59XHJcblxyXG4vLy8gcmV0dXJuIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGRyYWdnYWJsZSB0byB0aGUgY2VudGVyIG9mIHRoZSB0YXJnZXQgZWxlbWVudCBmcm9tIGVhY2ggYm9yZGVyIFxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlzdGFuY2VGcm9tQm9yZGVyKCBkcmFnZ2FibGU6IEhUTUxFbGVtZW50LCB0YXJnZXQ6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IEJvcmRlckRpc3RhbmNlIHtcclxuICBjb25zdCByZWN0MSA9ICFjaGVja0JvZHlSb3RhdGlvbiA/IGRyYWdnYWJsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSA6IGdldFJvdGF0ZWRCb3VuZGluZ0JveEJhc2VkT25Cb2R5Um90YXRpb24oIGRyYWdnYWJsZSApO1xyXG4gIGNvbnN0IHJlY3QyID0gIWNoZWNrQm9keVJvdGF0aW9uID8gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogZ2V0Um90YXRlZEJvdW5kaW5nQm94QmFzZWRPbkJvZHlSb3RhdGlvbiggdGFyZ2V0ICk7XHJcblxyXG4gIGNvbnN0IGNlbnRlciA9IHtcclxuICAgIHg6IHJlY3QxLmxlZnQgKyByZWN0MS53aWR0aCAvIDIsXHJcbiAgICB5OiByZWN0MS50b3AgKyByZWN0MS5oZWlnaHQgLyAyLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRpc3RhbmNlRnJvbUJvcmRlcjogQm9yZGVyRGlzdGFuY2UgPSB7XHJcbiAgICB0b3A6IGNlbnRlci55IC0gcmVjdDIudG9wLFxyXG4gICAgcmlnaHQ6IHJlY3QyLnJpZ2h0IC0gY2VudGVyLngsXHJcbiAgICBib3R0b206IHJlY3QyLmJvdHRvbSAtIGNlbnRlci55LFxyXG4gICAgbGVmdDogY2VudGVyLnggLSByZWN0Mi5sZWZ0LFxyXG4gIH07XHJcblxyXG4gIHJldHVybiBkaXN0YW5jZUZyb21Cb3JkZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJ1bk9ubHlPbmNlS2V5ZG93bkFjdGlvbnMoIGV2dDogS2V5Ym9hcmRFdmVudCApIHtcclxuICBmb3IgKCBjb25zdCBwYWlyIG9mIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duT25jZSApIHtcclxuICAgIGlmICggZXZ0LmNvZGUgPT09IHBhaXJbMF0gKSB7XHJcbiAgICAgIHBhaXJbMV0uZm9yRWFjaCgga2JFdmVudCA9PiBrYkV2ZW50KCBldnQgKSApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcnVuS2V5ZG93bkFjdGlvbnNSZXBlYXQoIGV2dDogS2V5Ym9hcmRFdmVudCApIHtcclxuICBmb3IgKCBjb25zdCBwYWlyIG9mIGRpY3RLZXlzQnlBY3Rpb25LZXlkb3duUmVwZWF0ICkge1xyXG4gICAgaWYgKCBldnQuY29kZSA9PT0gcGFpclswXSApIHtcclxuICAgICAgcGFpclsxXS5mb3JFYWNoKCBrYkV2ZW50ID0+IGtiRXZlbnQoIGV2dCApICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ2tleWRvd24nLCBldnQgPT4ge1xyXG4gIGlmICggIWV2dC5yZXBlYXQgKSB7XHJcbiAgICBydW5Pbmx5T25jZUtleWRvd25BY3Rpb25zKCBldnQgKTtcclxuICB9XHJcblxyXG4gIHJ1bktleWRvd25BY3Rpb25zUmVwZWF0KCBldnQgKTtcclxufSApO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIGV2dCA9PiB7XHJcbiAgZm9yICggY29uc3QgcGFpciBvZiBkaWN0S2V5c0J5QWN0aW9uS2V5dXAgKSB7XHJcbiAgICBpZiAoIGV2dC5jb2RlID09PSBwYWlyWzBdICkge1xyXG4gICAgICBwYWlyWzFdLmZvckVhY2goIGtiRXZlbnQgPT4ga2JFdmVudCggZXZ0ICkgKTtcclxuICAgIH1cclxuICB9XHJcbn0gKTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFJvdGF0aW9uSW5EZWdyZWVzKCBlbGVtZW50OiBIVE1MRWxlbWVudCwgYXhpczogJ3gnIHwgJ3knIHwgJ3onID0gJ3gnICk6IG51bWJlciB7XHJcbiAgbGV0IHJlZ2V4TWF0Y2hSb3RhdGVWYWx1ZTogUmVnRXhwO1xyXG4gIHN3aXRjaCAoIGF4aXMgKSB7XHJcbiAgICBjYXNlICd4JzpcclxuICAgICAgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlID0gcmVnZXhHcm91cFJvdGF0ZVhWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICd5JzpcclxuICAgICAgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlID0gcmVnZXhHcm91cFJvdGF0ZVlWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICd6JzpcclxuICAgICAgcmVnZXhNYXRjaFJvdGF0ZVZhbHVlID0gcmVnZXhHcm91cFJvdGF0ZVpWYWx1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZWdleE1hdGNoUm90YXRlVmFsdWUgPSByZWdleEdyb3VwUm90YXRlVmFsdWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWF0Y2ggPSByZWdleE1hdGNoUm90YXRlVmFsdWUuZXhlYyggZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gKTtcclxuICBpZiAoIG1hdGNoICkge1xyXG4gICAgY29uc3Qgcm90YXRpb25WYWx1ZSA9IHBhcnNlRmxvYXQoIG1hdGNoWzFdICk7XHJcbiAgICByZXR1cm4gcm90YXRpb25WYWx1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm9keVJvdGF0aW9uSW5EZWdyZWVzKCk6IG51bWJlciB7XHJcbiAgY29uc3QgbWF0Y2ggPSBnZXRSZWdleFJlbW92ZVJvdGF0aW9uRnJvbUJvZHkoKS5leGVjKCBkb2N1bWVudC5ib2R5LnN0eWxlLnRyYW5zZm9ybSApO1xyXG4gIGlmICggbWF0Y2ggKSB7XHJcbiAgICBjb25zdCByb3RhdGlvblZhbHVlID0gcGFyc2VGbG9hdCggbWF0Y2hbMV0gKTtcclxuICAgIHJldHVybiByb3RhdGlvblZhbHVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWdleFJlbW92ZVJvdGF0aW9uRnJvbUJvZHkoKSB7XHJcbiAgcmV0dXJuIGdldFJlZ2V4UmVtb3ZlUm90YXRpb25CYXNlZE9uQXhpcyggZ2V0Qm9keVJvdGF0aW9uQXhpcygpIClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZ2V4UmVtb3ZlUm90YXRpb25CYXNlZE9uQXhpcyggYXhpczogJ3gnIHwgJ3knIHwgJ3onICkge1xyXG4gIHN3aXRjaCAoIGF4aXMgKSB7XHJcbiAgICBjYXNlICd4JzpcclxuICAgICAgcmV0dXJuIHJlZ2V4R3JvdXBSb3RhdGVYVmFsdWU7XHJcbiAgICBjYXNlICd5JzpcclxuICAgICAgcmV0dXJuIHJlZ2V4R3JvdXBSb3RhdGVZVmFsdWU7XHJcbiAgICBjYXNlICd6JzpcclxuICAgICAgcmV0dXJuIHJlZ2V4R3JvdXBSb3RhdGVaVmFsdWU7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gcmVnZXhHcm91cFJvdGF0ZVZhbHVlO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvZHlSb3RhdGlvbkF4aXMoKTogJ3gnIHwgJ3knIHwgJ3onIHtcclxuICByZXR1cm4gZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyggZG9jdW1lbnQuYm9keSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFJvdGF0aW9uQXhpcyggZWxlbWVudDogSFRNTEVsZW1lbnQgKTogJ3gnIHwgJ3knIHwgJ3onIHtcclxuICBjb25zdCBlbGVtZW50VHJhbnNmb3JtID0gZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0udG9Mb3dlckNhc2UoKTtcclxuICBpZiAoIGVsZW1lbnRUcmFuc2Zvcm0uaW5jbHVkZXMoICd4JyApICkge1xyXG4gICAgcmV0dXJuICd4JztcclxuICB9IGVsc2UgaWYgKCBlbGVtZW50VHJhbnNmb3JtLmluY2x1ZGVzKCAneScgKSApIHtcclxuICAgIHJldHVybiAneSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAneic7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtQ29vcmRzRnJvbUVsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjaGVja0JvZHlSb3RhdGlvbjogYm9vbGVhbiA9IGZhbHNlICk6IFBvaW50MkQge1xyXG4gIGNvbnN0IGFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlID0gKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbWVudCApLnRyYW5zZm9ybS5tYXRjaCggcmVnZXhOdW1iZXJQYXR0ZXJuICkgPz8gWzAsIDBdICkubWFwKCBuID0+ICtuICk7XHJcblxyXG4gIGxldCByZXN1bHQgPSB7XHJcbiAgICB4OiBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs0XSAhPT0gdW5kZWZpbmVkID8gTWF0aC5yb3VuZCggYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGVbNF0gKSA6IDAsXHJcbiAgICB5OiBhcnJDb21wdXRlZERyYWdnYWJsZVRyYW5zbGF0ZVs1XSAhPT0gdW5kZWZpbmVkID8gTWF0aC5yb3VuZCggYXJyQ29tcHV0ZWREcmFnZ2FibGVUcmFuc2xhdGVbNV0gKSA6IDBcclxuICB9XHJcblxyXG4gIGlmICggY2hlY2tCb2R5Um90YXRpb24gKSB7XHJcbiAgICBjb25zdCBib2R5QW5nbGUgPSBnZXRFbGVtZW50Um90YXRpb25JbkRlZ3JlZXMoIGRvY3VtZW50LmJvZHksIGdldEVsZW1lbnRSb3RhdGlvbkF4aXMoIGVsZW1lbnQgKSApIHx8IDA7XHJcbiAgICByZXR1cm4gcm90YXRlQ29vcmRpbmF0ZXMoIHJlc3VsdC54LCByZXN1bHQueSwgYm9keUFuZ2xlICk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xpY2tFdmVudFRvQ29vcmRpbmF0ZXMoIGV2ZW50OiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCApIHtcclxuICBpZiAoIGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCApIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IGV2ZW50LmNsaWVudFgsXHJcbiAgICAgIHk6IGV2ZW50LmNsaWVudFlcclxuICAgIH07XHJcbiAgfSBlbHNlIGlmICggZXZlbnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50ICkge1xyXG4gICAgY29uc3QgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IHRvdWNoLmNsaWVudFgsXHJcbiAgICAgIHk6IHRvdWNoLmNsaWVudFlcclxuICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IFwiRXZlbnQgbm90IEZvdW5kXCI7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludmlzaWJsZURpdkFib3ZlUGFyZW50KCB7IHBhcmVudEVsZW1lbnQsIGlkLCBwb3NpdGlvbiwgZGltZW5zaW9ucyB9OiB7IHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50OyBpZDogc3RyaW5nOyBwb3NpdGlvbj86IHsgdG9wOiBudW1iZXI7IGxlZnQ6IG51bWJlcjsgfTsgZGltZW5zaW9ucz86IERpbWVuc2lvbnM7IH0gKSB7XHJcbiAgdmFyIGludmlzaWJsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XHJcblxyXG4gIGlmICggIXBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb24gKSB7XHJcbiAgICBwYXJlbnRFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuICB9XHJcblxyXG4gIGludmlzaWJsZURpdi5pZCA9IGlkO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLndpZHRoID0gZGltZW5zaW9ucyAmJiBkaW1lbnNpb25zLndpZHRoID8gZGltZW5zaW9ucy53aWR0aC50b1N0cmluZygpICsgJ3B4JyA6ICcxMDAlJztcclxuICBpbnZpc2libGVEaXYuc3R5bGUuaGVpZ2h0ID0gZGltZW5zaW9ucyAmJiBkaW1lbnNpb25zLmhlaWdodCA/IGRpbWVuc2lvbnMuaGVpZ2h0LnRvU3RyaW5nKCkgKyAncHgnIDogJzEwMCUnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS50b3AgPSAoIHBvc2l0aW9uPy50b3AudG9TdHJpbmcoKSA/PyAnMCcgKSArICdweCc7XHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLmxlZnQgPSAoIHBvc2l0aW9uPy5sZWZ0LnRvU3RyaW5nKCkgPz8gJzAnICkgKyAncHgnO1xyXG4gIGludmlzaWJsZURpdi5zdHlsZS5vcGFjaXR5ID0gJzAnOyAvLyBNYWtlIHRoZSBkaXYgaW52aXNpYmxlXHJcbiAgaW52aXNpYmxlRGl2LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7IC8vIEFsbG93IHRoZSBkaXYgdG8gaW50ZXJjZXB0IG1vdXNlIGV2ZW50c1xyXG5cclxuICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKCBpbnZpc2libGVEaXYgKTtcclxuXHJcbiAgcmV0dXJuIGludmlzaWJsZURpdjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVFbGVtZW50KCBlbGVtZW50OiBIVE1MRWxlbWVudCApIHtcclxuICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gIGVsZW1lbnQuc3R5bGUuekluZGV4ID0gJy0xJztcclxuICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgZWxlbWVudC5zdHlsZS53aWR0aCA9ICcwcHggIWltcG9ydGFudCc7XHJcbiAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMHB4ICFpbXBvcnRhbnQnO1xyXG4gIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnaGlkZGVuJywgJycgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNsZWVwQXN5bmMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KCAoIHJlc29sdmUgKSA9PiBzZXRUaW1lb3V0KCAoKSA9PiByZXNvbHZlKCksIG1zICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRFbGVtZW50c0J5Q2hlY2soIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCwgb25DaGVjazogRnVuY3Rpb24sIG9uVW5jaGVjazogRnVuY3Rpb24gKSB7XHJcbiAgaWYgKCB0cmlnZ2VyRWxlbWVudC5jaGVja2VkICkge1xyXG4gICAgb25DaGVjayggdGFyZ2V0RWxlbWVudCApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdHJpZ2dlckdyb3VwID0gdHJpZ2dlckVsZW1lbnQubmFtZVxyXG4gICAgPyBBcnJheS5mcm9tKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBgW25hbWU9XCIkeyB0cmlnZ2VyRWxlbWVudC5uYW1lIH1cIl1gICkgKVxyXG4gICAgOiBbdHJpZ2dlckVsZW1lbnRdO1xyXG5cclxuICB0cmlnZ2VyR3JvdXAuZm9yRWFjaCggdCA9PiB0LmFkZEV2ZW50TGlzdGVuZXIoICdjaGFuZ2UnLCBldnQgPT4ge1xyXG4gICAgaWYgKCB0cmlnZ2VyRWxlbWVudC5jaGVja2VkICkge1xyXG4gICAgICBvbkNoZWNrKCB0YXJnZXRFbGVtZW50LCBldnQgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9uVW5jaGVjayggdGFyZ2V0RWxlbWVudCwgZXZ0ICk7XHJcbiAgICB9XHJcbiAgfSApICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRJbnB1dEZvcmNlUGhvbmVOdW1iZXJGb3JtYXQoIGlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudCApIHtcclxuICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2lucHV0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHBob25lSW5wdXQgPSB0aGlzLnZhbHVlO1xyXG5cclxuICAgIGNvbnN0IGNsZWFuUGhvbmVJbnB1dCA9IHBob25lSW5wdXQucmVwbGFjZSggL1xcRC9nLCAnJyApO1xyXG4gICAgaWYgKCBjbGVhblBob25lSW5wdXQubGVuZ3RoID4gMTEgKSB7XHJcbiAgICAgIHBob25lSW5wdXQgPSBjbGVhblBob25lSW5wdXQuc2xpY2UoIDAsIDExICk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHBob25lTnVtYmVyRm9ybWF0dGVkID0gdG9QaG9uZU51bWJlciggcGhvbmVJbnB1dCApO1xyXG5cclxuICAgIGlmICggcGhvbmVOdW1iZXJGb3JtYXR0ZWQubGVuZ3RoID09PSAxMCApIHtcclxuICAgICAgcGhvbmVOdW1iZXJGb3JtYXR0ZWQgPSBwaG9uZU51bWJlckZvcm1hdHRlZC5yZXBsYWNlQWxsKCAnLScsICcnICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52YWx1ZSA9IHBob25lTnVtYmVyRm9ybWF0dGVkO1xyXG4gIH0gKTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01vYmlsZUJyb3dzZXIoKSB7XHJcbiAgcmV0dXJuIC9BbmRyb2lkfGlQaG9uZS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJEZXZpY2VUeXBlKCk6ICdhbmRyb2lkJyB8ICdhcHBsZScgfCAnZGVza3RvcCcge1xyXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgKCB3aW5kb3cgYXMgYW55ICkub3BlcmE7XHJcblxyXG4gIGlmICggL2FuZHJvaWQvaS50ZXN0KCB1c2VyQWdlbnQgKSApIHtcclxuICAgIHJldHVybiAnYW5kcm9pZCc7XHJcbiAgfSBlbHNlIGlmICggL2lQYWR8aVBob25lfGlQb2QvLnRlc3QoIHVzZXJBZ2VudCApICYmICEoIHdpbmRvdyBhcyBhbnkgKS5NU1N0cmVhbSApIHtcclxuICAgIHJldHVybiAnYXBwbGUnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gJ2Rlc2t0b3AnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzT25TY3JlZW4oIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICkge1xyXG4gIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIHJldHVybiAoXHJcbiAgICByZWN0LnRvcCA+PSAwICYmXHJcbiAgICByZWN0LmxlZnQgPj0gMCAmJlxyXG4gICAgcmVjdC5ib3R0b20gPD0gKCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCApICYmXHJcbiAgICByZWN0LnJpZ2h0IDw9ICggd2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIClcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmluZEVsZW1lbnRWaWV3SWZDaGVja2VkKCB0cmlnZ2VyRWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgb3B0aW9ucyA9IHtcclxuICBvbkNoZWNrOiAoIHRyaWdnZXJFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCB0YXJnZXRFbGVtZW50OiBIVE1MRWxlbWVudCApID0+IHsgfSxcclxuICBvblVuY2hlY2s6ICggdHJpZ2dlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIHRhcmdldEVsZW1lbnQ6IEhUTUxFbGVtZW50ICkgPT4geyB9XHJcbn0gKSB7XHJcbiAgYmluZEVsZW1lbnRzQnlDaGVjayhcclxuICAgIHRyaWdnZXJFbGVtZW50LFxyXG4gICAgdGFyZ2V0RWxlbWVudCxcclxuICAgICggZWw6IEhUTUxFbGVtZW50ICkgPT4ge1xyXG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCAnc2hvdycgKTtcclxuICAgICAgb3B0aW9ucy5vbkNoZWNrKCB0cmlnZ2VyRWxlbWVudCwgdGFyZ2V0RWxlbWVudCApO1xyXG4gICAgfSxcclxuICAgICggZWw6IEhUTUxFbGVtZW50ICkgPT4ge1xyXG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCAnc2hvdycgKTtcclxuICAgICAgb3B0aW9ucy5vblVuY2hlY2soIHRyaWdnZXJFbGVtZW50LCB0YXJnZXRFbGVtZW50ICk7XHJcbiAgICB9LFxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZUZyb21SYWRpb0dyb3VwKCBncm91cE5hbWU6IHN0cmluZyApOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggYFtuYW1lPSR7IGdyb3VwTmFtZSB9XTpjaGVja2VkYCApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgaWYgKCBlbCApIHtcclxuICAgIHJldHVybiBlbC52YWx1ZTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoU2Nyb2xsKCB0YXJnZXRZOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIgKTogdm9pZCB7XHJcbiAgY29uc3Qgc3RhcnRZID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gIGxldCBzdGFydFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cclxuICBmdW5jdGlvbiBzdGVwKCBjdXJyZW50VGltZTogbnVtYmVyICkge1xyXG4gICAgaWYgKCAhc3RhcnRUaW1lICkgc3RhcnRUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICBjb25zdCBlbGFwc2VkVGltZSA9IGN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lO1xyXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbiggZWxhcHNlZFRpbWUgLyBkdXJhdGlvbiwgMSApO1xyXG4gICAgY29uc3QgZWFzZWRQcm9ncmVzcyA9IGxlcnAoIDAsIDEsIHByb2dyZXNzICk7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oIDAsIGxlcnAoIHN0YXJ0WSwgdGFyZ2V0WSwgZWFzZWRQcm9ncmVzcyApICk7XHJcbiAgICBpZiAoIGVsYXBzZWRUaW1lIDwgZHVyYXRpb24gKSB7XHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSggc3RlcCApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBzdGVwICk7XHJcbn1cclxuXHJcbi8vIFJldG9ybmEgdW1hIGZ1bsOnw6NvIHF1ZSBuw6NvIHZhaSBzZXIgY29tcGxldGFkYSBjYXNvIHNlamEgY2hhbWFkYSBub3ZhbWVudGUgZW0geyBkZWxheSB9IG1pbGlzc2VndW5kb3NcclxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlRmFjdG9yeSggZnVuYzogRnVuY3Rpb24sIGRlbGF5OiBudW1iZXIgKTogRnVuY3Rpb24ge1xyXG4gIGxldCBpbkRlYm91bmNlOiBudW1iZXI7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSB3aW5kb3c7XHJcbiAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgY2xlYXJUaW1lb3V0KCBpbkRlYm91bmNlICk7XHJcbiAgICBpbkRlYm91bmNlID0gd2luZG93LnNldFRpbWVvdXQoICgpID0+IGZ1bmMuYXBwbHkoIGNvbnRleHQsIGFyZ3MgKSwgZGVsYXkgKTtcclxuICB9O1xyXG59XHJcblxyXG4vLyBSZXRvcm5hIHVtYSBmdW7Dp8OjbyBxdWUgc8OzIHBvZGUgc2VyIGNvbXBsZXRhZGEgdW1hIHZleiBhIGNhZGEgeyBsaW1pdCB9IG1pbGlzc2VndW5kb3MgXHJcbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZUZhY3RvcnkoIGZ1bmM6IEZ1bmN0aW9uLCBsaW1pdDogbnVtYmVyICk6IEZ1bmN0aW9uIHtcclxuICBsZXQgbGFzdEZ1bmM6IG51bWJlcjtcclxuICBsZXQgbGFzdFJhbjogbnVtYmVyO1xyXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gd2luZG93O1xyXG4gICAgY29uc3QgYXJncyA9IGFyZ3VtZW50cztcclxuICAgIGlmICggIWxhc3RSYW4gKSB7XHJcbiAgICAgIGZ1bmMuYXBwbHkoIGNvbnRleHQsIGFyZ3MgKTtcclxuICAgICAgbGFzdFJhbiA9IERhdGUubm93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbGVhclRpbWVvdXQoIGxhc3RGdW5jICk7XHJcbiAgICAgIGxhc3RGdW5jID0gd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIERhdGUubm93KCkgLSBsYXN0UmFuID49IGxpbWl0ICkge1xyXG4gICAgICAgICAgZnVuYy5hcHBseSggY29udGV4dCwgYXJncyApO1xyXG4gICAgICAgICAgbGFzdFJhbiA9IERhdGUubm93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBsaW1pdCAtICggRGF0ZS5ub3coKSAtIGxhc3RSYW4gKSApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNtb290aFNjcm9sbFRvKCBwb3M6IG51bWJlciApOiB2b2lkIHtcclxuICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvKCB7XHJcbiAgICB0b3A6IHBvcyxcclxuICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhTY3JvbGxUb0VsZW1lbnQoIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCB1c2VCcm93c2VyRGVmYXVsdHM6IGJvb2xlYW4gPSB0cnVlICk6IHZvaWQge1xyXG4gIGlmICggIXVzZUJyb3dzZXJEZWZhdWx0cyApIHtcclxuICAgIGNvbnN0IHRhcmdldFkgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgY29uc3QgZHVyYXRpb24gPSAxMDAwOyAvLyBEdXJhw6fDo28gZml4YSBlbSBtaWxpc3NlZ3VuZG9zICgxIHNlZ3VuZG8pXHJcbiAgICBzbW9vdGhTY3JvbGwoIHRhcmdldFksIGR1cmF0aW9uICk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvKCB7XHJcbiAgICB0b3A6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueSxcclxuICAgIGxlZnQ6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueCxcclxuICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcclxuICB9ICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RPcHRpb25CeVRleHQoIGlkU2VsZWN0RWxlbWVudDogc3RyaW5nLCBzZWFyY2hUZXh0OiBzdHJpbmcsIGNvbnRhaW5zOiBib29sZWFuID0gZmFsc2UgKTogdm9pZCB7XHJcbiAgY29uc3Qgc2VsZWN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBpZFNlbGVjdEVsZW1lbnQgKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuXHJcbiAgaWYgKCAhc2VsZWN0RWxlbWVudCApIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGNvbnN0IG9wdGlvbnNFbGVtZW50b1NlbGVjdCA9IFsuLi5zZWxlY3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICdvcHRpb24nICldO1xyXG5cclxuICBsZXQgc2VsZWN0ZWRPcHRpb247XHJcbiAgaWYgKCBjb250YWlucyApIHtcclxuICAgIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9uc0VsZW1lbnRvU2VsZWN0XHJcbiAgICAgIC5maWx0ZXIoIGVsID0+IGVsLnRleHRDb250ZW50ICYmIGVsLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoIHNlYXJjaFRleHQudG9Mb3dlckNhc2UoKSApIClbMF0udmFsdWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9uc0VsZW1lbnRvU2VsZWN0XHJcbiAgICAgIC5maWx0ZXIoIGVsID0+IGVsLnRleHRDb250ZW50ICYmIGVsLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkgPT09IHNlYXJjaFRleHQudG9Mb3dlckNhc2UoKSApWzBdLnZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc2VsZWN0RWxlbWVudC52YWx1ZSA9IHNlbGVjdGVkT3B0aW9uO1xyXG59XHJcblxyXG4iLCJleHBvcnQgY29uc3QgcmVnZXhOdW1iZXJQYXR0ZXJuID0gLy0/XFxkK1xcLj9cXGQqL2c7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvaW50MkQge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGltZW5zaW9ucyB7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4VG9Sb3coIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiBNYXRoLmZsb29yKCBpbmRleCAvIGdyaWRXaWR0aCApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb0NvbCggaW5kZXg6IG51bWJlciwgZ3JpZFdpZHRoOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIGluZGV4ICUgZ3JpZFdpZHRoO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcm93Q29sVG9JbmRleCggcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCB3aWR0aDogbnVtYmVyICkge1xyXG4gIHJldHVybiAoIHJvdyAqIHdpZHRoICkgKyBjb2w7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlc0Zyb21Qb2ludDJEKCBjb29yZHM6IFBvaW50MkQsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IGNvb3Jkcy54ICogTWF0aC5jb3MoIHJhZGlhbnMgKSAtIGNvb3Jkcy55ICogTWF0aC5zaW4oIHJhZGlhbnMgKTtcclxuICBjb25zdCBuZXdZID0gY29vcmRzLnggKiBNYXRoLnNpbiggcmFkaWFucyApICsgY29vcmRzLnkgKiBNYXRoLmNvcyggcmFkaWFucyApO1xyXG4gIHJldHVybiB7IHg6IG5ld1gsIHk6IG5ld1kgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVDb29yZGluYXRlcyggeDogbnVtYmVyLCB5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIgKTogUG9pbnQyRCB7XHJcbiAgY29uc3QgcmFkaWFucyA9ICggTWF0aC5QSSAvIDE4MCApICogYW5nbGU7XHJcbiAgY29uc3QgbmV3WCA9IHggKiBNYXRoLmNvcyggcmFkaWFucyApIC0geSAqIE1hdGguc2luKCByYWRpYW5zICk7XHJcbiAgY29uc3QgbmV3WSA9IHggKiBNYXRoLnNpbiggcmFkaWFucyApICsgeSAqIE1hdGguY29zKCByYWRpYW5zICk7XHJcbiAgcmV0dXJuIHsgeDogbmV3WCwgeTogbmV3WSB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJlRGlhZ29uYWxzKCBpbmRleDE6IG51bWJlciwgaW5kZXgyOiBudW1iZXIsIGdyaWRTaXplOiBudW1iZXIgKTogYm9vbGVhbiB7XHJcbiAgaWYgKCBpbmRleDEgPCAwIHx8IGluZGV4MiA8IDAgKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoICdJbnZhbGlkIGNlbGwgaW5kaWNlcycgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJvdzEgPSBpbmRleFRvUm93KCBpbmRleDEsIGdyaWRTaXplICk7XHJcbiAgY29uc3QgY29sMSA9IGluZGV4VG9Db2woIGluZGV4MSwgZ3JpZFNpemUgKTtcclxuXHJcbiAgY29uc3Qgcm93MiA9IGluZGV4VG9Sb3coIGluZGV4MiwgZ3JpZFNpemUgKTtcclxuICBjb25zdCBjb2wyID0gaW5kZXhUb0NvbCggaW5kZXgyLCBncmlkU2l6ZSApO1xyXG5cclxuICByZXR1cm4gTWF0aC5hYnMoIHJvdzEgLSByb3cyICkgPT09IE1hdGguYWJzKCBjb2wxIC0gY29sMiApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhUb1BvaW50MkQoIGluZGV4OiBudW1iZXIsIGdyaWRXaWR0aDogbnVtYmVyICk6IFBvaW50MkQge1xyXG4gIHJldHVybiB7XHJcbiAgICB4OiBpbmRleFRvQ29sKCBpbmRleCwgZ3JpZFdpZHRoICksXHJcbiAgICB5OiBpbmRleFRvUm93KCBpbmRleCwgZ3JpZFdpZHRoIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsZXJwKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGFtb3VudDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuICggMSAtIGFtb3VudCApICogbWluICsgYW1vdW50ICogbWF4O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJzZUxlcnAoIGE6IG51bWJlciwgYjogbnVtYmVyLCB2YWw6IG51bWJlciApOiBudW1iZXIge1xyXG4gIHJldHVybiAoIHZhbCAtIGEgKSAvICggYiAtIGEgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbWFwKCBpbk1pbjogbnVtYmVyLCBpbk1heDogbnVtYmVyLCBvdXRNaW46IG51bWJlciwgb3V0TWF4OiBudW1iZXIsIHZhbDogbnVtYmVyICk6IG51bWJlciB7XHJcbiAgcmV0dXJuIGxlcnAoIG91dE1pbiwgb3V0TWF4LCBpbnZlcnNlTGVycCggaW5NaW4sIGluTWF4LCB2YWwgKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiApICsgbWluICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsU2V0czxUPiggc2V0MTogU2V0PFQ+LCBzZXQyOiBTZXQ8VD4gKSB7XHJcbiAgcmV0dXJuIHNldDEuc2l6ZSA9PT0gc2V0Mi5zaXplICYmXHJcbiAgICBbLi4uc2V0MV0uZXZlcnkoICggeCApID0+IHNldDIuaGFzKCB4ICkgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUludEluY2x1c2l2ZSggbWluOiBudW1iZXIsIG1heDogbnVtYmVyICkge1xyXG4gIG1pbiA9IE1hdGguY2VpbCggbWluICk7XHJcbiAgbWF4ID0gTWF0aC5mbG9vciggbWF4ICk7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiArIDEgKSApICsgbWluO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRnJvbUFycmF5PFQ+KCBhcnI6IEFycmF5PFQ+ICkge1xyXG4gIHJldHVybiBhcnJbZ2V0UmFuZG9tSW50RXhjbHVzaXZlKCAwLCBhcnIubGVuZ3RoICldO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAoIG51bTogbnVtYmVyID0gMCwgbWluOiBudW1iZXIgPSAwLCBtYXg6IG51bWJlciA9IDEwMCApOiBudW1iZXIge1xyXG4gIHJldHVybiBNYXRoLm1heCggbWluLCBNYXRoLm1pbiggbnVtLCBtYXggKSApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWludXRlc1RvTWlsbGlzZWNvbmRzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAqIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9NaW51dGVzKCBtczogbnVtYmVyICkge1xyXG4gIHJldHVybiBtcyAvIDYwMDAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGlzZWNvbmRzVG9Ib3VycyggbXM6IG51bWJlciApIHtcclxuICByZXR1cm4gbXMgLyAzLjZlKzY7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaXNlY29uZHNUb0RheXMoIG1zOiBudW1iZXIgKSB7XHJcbiAgcmV0dXJuIG1zIC8gOC42NGUrNztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1lZ2FieXRlVG9CeXRlKCBtYjogbnVtYmVyICkge1xyXG4gIHJldHVybiBtYiAqIDEwMjQgKiAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnl0ZVRvTWVnYWJ5dGUoIGI6IG51bWJlciApIHtcclxuICByZXR1cm4gYiAvIDEwMjQgLyAxMDI0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJyYXlGcm9tUmFuZ2UoIHNpemU6IG51bWJlciwgc3RhcnRpbmdGcm9tOiBudW1iZXIgPSAwICk6IG51bWJlcltdIHtcclxuICBsZXQgcmVzdWx0ID0gWy4uLkFycmF5KCBzaXplICkua2V5cygpXVxyXG5cclxuICBpZiAoIHN0YXJ0aW5nRnJvbSAhPSAwICkge1xyXG4gICAgcmVzdWx0ID0gcmVzdWx0Lm1hcCggaSA9PiBpICsgc3RhcnRpbmdGcm9tICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0O1xyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBjbGlja0V2ZW50VG9Db29yZGluYXRlcyB9IGZyb20gJy4uL1Rvb2xzL0RPTVRvb2xzJztcclxuaW1wb3J0IHsgUG9pbnQyRCB9IGZyb20gJy4uL1Rvb2xzL01hdGhUb29scyc7XHJcbmltcG9ydCB7IE1vdmFibGVFbGVtZW50LCBNb3ZhYmxlT3B0aW9ucyB9IGZyb20gJy4vTW92YWJsZUVsZW1lbnQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbGVtZW50RHJhZ2dpbmdTdGF0ZSB7XHJcbiAgcG9pbnRlcklkPzogbnVtYmVyO1xyXG4gIGRyYWdnaW5nOiBib29sZWFuO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgT25Ecm9wRXZlbnQgPSAoICggZWxlbWVudDogSFRNTEVsZW1lbnQsIGRyYWdnYWJsZTogRHJhZ2dhYmxlRWxlbWVudCApID0+IHZvaWQgKTtcclxuZXhwb3J0IHR5cGUgT25HcmFiRXZlbnQgPSAoICggZWxlbWVudDogSFRNTEVsZW1lbnQsIGRyYWdnYWJsZTogRHJhZ2dhYmxlRWxlbWVudCApID0+IHZvaWQgKTtcclxuXHJcbmV4cG9ydCB0eXBlIERyYWdnYWJsZU9wdGlvbnMgPSB7XHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgb25Ecm9wPzogT25Ecm9wRXZlbnQ7XHJcbiAgb25EcmFnPzogT25HcmFiRXZlbnQ7XHJcbiAgYWxsb3dEcmFnZ2luZ0J5SW5uZXJDb250ZW50PzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERyYWdnYWJsZUVsZW1lbnQgZXh0ZW5kcyBNb3ZhYmxlRWxlbWVudCB7XHJcbiAgcHVibGljIGFsbG93RHJhZ2dpbmdCeUlubmVyQ29udGVudDogYm9vbGVhbjtcclxuICBwcml2YXRlIGRyYWdnaW5nU3RhdGU6IEVsZW1lbnREcmFnZ2luZ1N0YXRlO1xyXG5cclxuICBwdWJsaWMgbGFzdFN0YXJ0UG9pbnQ/OiBQb2ludDJEO1xyXG4gIHB1YmxpYyBvbkRyb3A/OiBPbkRyb3BFdmVudDtcclxuICBwdWJsaWMgb25EcmFnPzogT25HcmFiRXZlbnQ7XHJcblxyXG4gIHByaXZhdGUgX2VuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICBjb25zdHJ1Y3Rvciggb3B0aW9uczogRHJhZ2dhYmxlT3B0aW9ucyAmIE1vdmFibGVPcHRpb25zICkge1xyXG4gICAgaWYgKCAhb3B0aW9ucy5lbGVtZW50ICkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiTnVsbCBkcmFnZ2FibGUgZWxlbWVudC4gUGxlYXNlIHBhc3MgYSB2YWxpZCBlbGVtZW50IGluIGNvbnN0cnVjdG9yLlwiICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcbiAgICB0aGlzLmFsbG93RHJhZ2dpbmdCeUlubmVyQ29udGVudCA9IG9wdGlvbnMuYWxsb3dEcmFnZ2luZ0J5SW5uZXJDb250ZW50ID8gb3B0aW9ucy5hbGxvd0RyYWdnaW5nQnlJbm5lckNvbnRlbnQgOiB0cnVlO1xyXG5cclxuICAgIHRoaXMuZHJhZ2dpbmdTdGF0ZSA9IHtcclxuICAgICAgZHJhZ2dpbmc6IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm9uRHJhZyA9IG9wdGlvbnMub25EcmFnO1xyXG4gICAgdGhpcy5vbkRyb3AgPSBvcHRpb25zLm9uRHJvcDtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJkb3duJywgdGhpcy5zdGFydC5iaW5kKCB0aGlzICkgKTtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAncG9pbnRlcnVwJywgdGhpcy5lbmQuYmluZCggdGhpcyApICk7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ3BvaW50ZXJjYW5jZWwnLCB0aGlzLmVuZC5iaW5kKCB0aGlzICkgKTtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAncG9pbnRlcm1vdmUnLCB0aGlzLm1vdmUuYmluZCggdGhpcyApIClcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAndG91Y2hzdGFydCcsICggZSApID0+IGUucHJldmVudERlZmF1bHQoKSApO1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdkcmFnc3RhcnQnLCAoIGUgKSA9PiBlLnByZXZlbnREZWZhdWx0KCkgKTtcclxuXHJcbiAgICB0aGlzLmludGVydmFsVXBkYXRlUG9zaXRpb24gPSBzZXRJbnRlcnZhbCggdGhpcy51cGRhdGVQb3NpdGlvbi5iaW5kKCB0aGlzICksIDEwMCApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBlbmFibGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZWQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IGVuYWJsZWQoIHZhbHVlOiBib29sZWFuICkge1xyXG4gICAgdGhpcy5fZW5hYmxlZCA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgc2V0IGRyYWdnaW5nKCB2YWw6IGJvb2xlYW4gKSB7XHJcbiAgICBpZiAoICF0aGlzLmVuYWJsZWQgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRyYWdnaW5nU3RhdGUuZHJhZ2dpbmcgPSB2YWw7XHJcblxyXG4gICAgaWYgKCB0aGlzLmRyYWdnaW5nICkge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCggXCJkcmFnZ2luZ1wiICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggXCJkcmFnZ2luZ1wiICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgZHJhZ2dpbmcoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5kcmFnZ2luZ1N0YXRlLmRyYWdnaW5nO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGFydCggZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50ICk6IHZvaWQge1xyXG4gICAgaWYgKCAhdGhpcy5lbmFibGVkICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXNNb3VzZUV2ZW50ID0gZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50O1xyXG4gICAgY29uc3QgaXNMZWZ0QnV0dG9uID0gaXNNb3VzZUV2ZW50ICYmIGV2ZW50LmJ1dHRvbiA9PT0gMDtcclxuICAgIGNvbnN0IGlzUG9pbnRlckV2ZW50ID0gZXZlbnQgaW5zdGFuY2VvZiBQb2ludGVyRXZlbnQ7XHJcblxyXG4gICAgaWYgKCBpc01vdXNlRXZlbnQgJiYgIWlzTGVmdEJ1dHRvbiApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICggIXRoaXMuYWxsb3dEcmFnZ2luZ0J5SW5uZXJDb250ZW50ICkge1xyXG4gICAgICBjb25zdCBpc0NvcnJlY3RUYXJnZXQgPSBldmVudC50YXJnZXQgPT09IHRoaXMuZWxlbWVudDtcclxuICAgICAgaWYgKCAhaXNDb3JyZWN0VGFyZ2V0ICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2FsbEV2ZW50c0J5TmFtZSggJ29uRHJhZycsIHRoaXMuZWxlbWVudCwgdGhpcyApO1xyXG4gICAgaWYgKCB0aGlzLm9uRHJhZyApIHtcclxuICAgICAgdGhpcy5vbkRyYWcoIHRoaXMuZWxlbWVudCwgdGhpcyApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBmb3IgbmVzdGVkIGRyYWdnYWJsZXNcclxuXHJcbiAgICBsZXQgeyB4LCB5IH0gPSBjbGlja0V2ZW50VG9Db29yZGluYXRlcyggZXZlbnQgKTtcclxuXHJcbiAgICB0aGlzLmxhc3RTdGFydFBvaW50ID0ge1xyXG4gICAgICB4OiB4LFxyXG4gICAgICB5OiB5XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMubW92aW5nU3RhdGUuZGVsdGEgPSB7IGR4OiB0aGlzLm1vdmluZ1N0YXRlLnBvcy54IC0geCwgZHk6IHRoaXMubW92aW5nU3RhdGUucG9zLnkgLSB5IH07XHJcblxyXG4gICAgaWYgKCBpc1BvaW50ZXJFdmVudCApIHtcclxuICAgICAgdGhpcy5kcmFnZ2luZ1N0YXRlLnBvaW50ZXJJZCA9IGV2ZW50LnBvaW50ZXJJZDsgLy8ga2VlcCB0cmFjayBvZiBmaW5nZXJcclxuICAgICAgdGhpcy5lbGVtZW50LnNldFBvaW50ZXJDYXB0dXJlKCBldmVudC5wb2ludGVySWQgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudXNlclNlbGVjdCA9ICdub25lJzsgLy8gaWYgdGhlcmUncyB0ZXh0XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGVuZCgpOiB2b2lkIHtcclxuICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudXNlclNlbGVjdCA9ICcnOyAvLyBpZiB0aGVyZSdzIHRleHRcclxuXHJcbiAgICB0aGlzLmNhbGxFdmVudHNCeU5hbWUoICdvbkRyb3AnLCB0aGlzLmVsZW1lbnQsIHRoaXMgKTtcclxuICAgIGlmICggdGhpcy5vbkRyb3AgKSB7XHJcbiAgICAgIHRoaXMub25Ecm9wKCB0aGlzLmVsZW1lbnQsIHRoaXMgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCB1cGRhdGVQb3NpdGlvbigpOiB2b2lkIHtcclxuICAgIGlmICggdGhpcy5kcmFnZ2luZyApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyLnVwZGF0ZVBvc2l0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgbW92ZSggZXZlbnQ6IE1vdXNlRXZlbnQgfCBUb3VjaEV2ZW50ICk6IHZvaWQge1xyXG4gICAgaWYgKCAhdGhpcy5lbmFibGVkICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXNQb2ludGVyRXZlbnQgPSBldmVudCBpbnN0YW5jZW9mIFBvaW50ZXJFdmVudDtcclxuXHJcbiAgICBpZiAoICF0aGlzLmRyYWdnaW5nICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhdGhpcy5hbGxvd0RyYWdnaW5nQnlJbm5lckNvbnRlbnQgKSB7XHJcbiAgICAgIGNvbnN0IGlzQ29ycmVjdFRhcmdldCA9IGV2ZW50LnRhcmdldCA9PT0gdGhpcy5lbGVtZW50IHx8ICggaXNQb2ludGVyRXZlbnQgJiYgdGhpcy5kcmFnZ2luZ1N0YXRlLnBvaW50ZXJJZCA9PT0gZXZlbnQucG9pbnRlcklkICk7XHJcbiAgICAgIGlmICggIWlzQ29ycmVjdFRhcmdldCApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgLy8gZm9yIG5lc3RlZCBkcmFnZ2FibGVzXHJcblxyXG4gICAgbGV0IHsgeCwgeSB9ID0gY2xpY2tFdmVudFRvQ29vcmRpbmF0ZXMoIGV2ZW50ICk7XHJcblxyXG4gICAgc3VwZXIubW92ZVRvUG9zaXRpb24oIHgsIHkgKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgbWFrZUVsZW1lbnREcmFnZ2FibGUoIGVsZW1lbnQ6IEhUTUxFbGVtZW50ICk6IERyYWdnYWJsZUVsZW1lbnQge1xyXG4gICAgcmV0dXJuIG5ldyBEcmFnZ2FibGVFbGVtZW50KCB7IGVsZW1lbnQgfSApO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBtYWtlRWxlbWVudERyYWdnYWJsZUJ5UXVlcnlTZWxlY3RvciggcXVlcnlTZWxlY3Rvcjogc3RyaW5nICk6IERyYWdnYWJsZUVsZW1lbnQgfCBudWxsIHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBxdWVyeVNlbGVjdG9yICk7XHJcblxyXG4gICAgaWYgKCAhZWxlbWVudCApIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBEcmFnZ2FibGVFbGVtZW50KCB7IGVsZW1lbnQ6IGVsZW1lbnQgYXMgSFRNTEVsZW1lbnQgfSApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTW92YWJsZUVsZW1lbnQiLCJPYmplY3RFdmVudExpc3RlbmVyIiwiZWxlbWVudCIsIm1vdmluZ1N0YXRlIiwiaW50ZXJ2YWxVcGRhdGVQb3NpdGlvbiIsIm9uQmVmb3JlTW92ZSIsIm9uQWZ0ZXJNb3ZlIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwic3VwZXIiLCJFcnJvciIsInRoaXMiLCJwb3MiLCJ4IiwieSIsImRlbHRhIiwiZHgiLCJkeSIsInNldEludGVydmFsIiwidXBkYXRlUG9zaXRpb24iLCJiaW5kIiwicG9zaXRpb24iLCJuZXdQb3MiLCJtb3ZlVG9Qb3NpdGlvbiIsIm5ld1giLCJuZXdZIiwic2V0VHJhbnNsYXRlIiwiY2FsbEV2ZW50c0J5TmFtZSIsInJlc2V0VHJhbnNsYXRlIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJzZXRUcmFuc2xhdGVCeVBvaW50MkQiLCJwb2ludCIsImdldFRyYW5zZm9ybUNvb3Jkc0Zyb21FbGVtZW50IiwicmVwbGFjZSIsInJlZ2V4UmVtb3ZlVHJhbnNsYXRlRnJvbVRyYW5zZm9ybSIsIm1vdmVUb1BvaW50MkQiLCJtb3ZlVG9UYXJnZXRFbGVtZW50IiwidGFyZ2V0IiwidGFyZ2V0UmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImVsZW1lbnRUcmFuc2Zvcm1Qb3NpdGlvbiIsImRpc3RhbmNlRnJvbUJvcmRlciIsImdldERpc3RhbmNlRnJvbUJvcmRlciIsInRhcmdldFJpZ2h0UG9zaXRpb24iLCJyaWdodCIsInRhcmdldEJvdHRvbVBvc2l0aW9uIiwiYm90dG9tIiwiTWF0aCIsInJvdW5kIiwid2lkdGgiLCJoZWlnaHQiLCJtb3ZlVG9DZW50ZXJPZlRhcmdldEVsZW1lbnQiLCJtYWtlRWxlbWVudE1vdmFibGUiLCJldmVudHNCeU5hbWUiLCJNYXAiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnROYW1lIiwiZXZlbnQiLCJuZXdFdmVudCIsImlkIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImhhcyIsInRvTG93ZXJDYXNlIiwiZ2V0IiwicHVzaCIsInNldCIsImdldEV2ZW50c0J5TmFtZSIsInJlbW92ZUV2ZW50QnlJZCIsImV2ZW50SWQiLCJmb3JFYWNoIiwidmFsdWUiLCJrZXkiLCJmaWx0ZXIiLCJlIiwiZXZlbnRBcmdzIiwicmVnZXhHcm91cFJvdGF0ZVZhbHVlIiwicmVnZXhHcm91cFJvdGF0ZVhWYWx1ZSIsInJlZ2V4R3JvdXBSb3RhdGVZVmFsdWUiLCJyZWdleEdyb3VwUm90YXRlWlZhbHVlIiwiZGljdEtleXNCeUFjdGlvbktleWRvd25PbmNlIiwiZGljdEtleXNCeUFjdGlvbktleWRvd25SZXBlYXQiLCJkaWN0S2V5c0J5QWN0aW9uS2V5dXAiLCJnZXRSb3RhdGVkQm91bmRpbmdCb3hCYXNlZE9uQm9keVJvdGF0aW9uIiwicmVjdCIsImNlbnRlclgiLCJsZWZ0IiwiY2VudGVyWSIsInRvcCIsInJvdGF0aW9uQW5nbGUiLCJtYXRjaCIsImF4aXMiLCJnZXRSZWdleFJlbW92ZVJvdGF0aW9uQmFzZWRPbkF4aXMiLCJnZXRFbGVtZW50Um90YXRpb25BeGlzIiwiZG9jdW1lbnQiLCJib2R5IiwiZXhlYyIsInBhcnNlRmxvYXQiLCJnZXRCb2R5Um90YXRpb25JbkRlZ3JlZXMiLCJyYWRpYW5zIiwiUEkiLCJjb3NUaGV0YSIsImNvcyIsInNpblRoZXRhIiwic2luIiwicm90YXRlZFgxIiwicm90YXRlZFkxIiwicm90YXRlZFgyIiwicm90YXRlZFkyIiwicm90YXRlZExlZnQiLCJtaW4iLCJyb3RhdGVkVG9wIiwicm90YXRlZEJvdHRvbSIsIm1heCIsInJvdGF0ZWRSaWdodCIsInRvSlNPTiIsImRyYWdnYWJsZSIsImNoZWNrQm9keVJvdGF0aW9uIiwicmVjdDEiLCJyZWN0MiIsImNlbnRlciIsImVsZW1lbnRUcmFuc2Zvcm0iLCJpbmNsdWRlcyIsImFyckNvbXB1dGVkRHJhZ2dhYmxlVHJhbnNsYXRlIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInJlZ2V4TnVtYmVyUGF0dGVybiIsIm1hcCIsIm4iLCJyZXN1bHQiLCJ1bmRlZmluZWQiLCJib2R5QW5nbGUiLCJyZWdleE1hdGNoUm90YXRlVmFsdWUiLCJnZXRFbGVtZW50Um90YXRpb25JbkRlZ3JlZXMiLCJyb3RhdGVDb29yZGluYXRlcyIsImNsaWNrRXZlbnRUb0Nvb3JkaW5hdGVzIiwiTW91c2VFdmVudCIsImNsaWVudFgiLCJjbGllbnRZIiwiVG91Y2hFdmVudCIsInRvdWNoIiwiY2hhbmdlZFRvdWNoZXMiLCJldnQiLCJyZXBlYXQiLCJwYWlyIiwiY29kZSIsImtiRXZlbnQiLCJydW5Pbmx5T25jZUtleWRvd25BY3Rpb25zIiwicnVuS2V5ZG93bkFjdGlvbnNSZXBlYXQiLCJhbmdsZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIkRyYWdnYWJsZUVsZW1lbnQiLCJhbGxvd0RyYWdnaW5nQnlJbm5lckNvbnRlbnQiLCJkcmFnZ2luZ1N0YXRlIiwibGFzdFN0YXJ0UG9pbnQiLCJvbkRyb3AiLCJvbkRyYWciLCJfZW5hYmxlZCIsImRyYWdnaW5nIiwic3RhcnQiLCJlbmQiLCJtb3ZlIiwicHJldmVudERlZmF1bHQiLCJlbmFibGVkIiwidmFsIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaXNNb3VzZUV2ZW50IiwiaXNMZWZ0QnV0dG9uIiwiYnV0dG9uIiwiaXNQb2ludGVyRXZlbnQiLCJQb2ludGVyRXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJwb2ludGVySWQiLCJzZXRQb2ludGVyQ2FwdHVyZSIsInVzZXJTZWxlY3QiLCJtYWtlRWxlbWVudERyYWdnYWJsZSIsIm1ha2VFbGVtZW50RHJhZ2dhYmxlQnlRdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciJdLCJzb3VyY2VSb290IjoiIn0=